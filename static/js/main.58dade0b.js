/*! For license information please see main.58dade0b.js.LICENSE.txt */
(()=>{var t={14:t=>{t.exports=function(){return!1}},61:t=>{t.exports=function(t,e){return t<e}},143:t=>{var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},149:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},320:t=>{t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},396:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},438:(t,e,n)=>{var r=n(2622);t.exports=function(t){return r(this,t).get(t)}},539:(t,e,n)=>{var r=n(9742),i=n(7498),a=n(3279);t.exports=function(t){return t&&t.length?r(t,a,i):void 0}},579:(t,e,n)=>{"use strict";t.exports=n(1153)},620:(t,e,n)=>{var r=n(6913),i=n(4052),a=n(2761);t.exports=function(t){return"string"==typeof t||!i(t)&&a(t)&&"[object String]"==r(t)}},643:(t,e,n)=>{var r=n(7676)("toUpperCase");t.exports=r},644:t=>{t.exports=function(t){return t!==t}},705:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},715:t=>{var e="\\ud800-\\udfff",n="["+e+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",a="[^"+e+"]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+r+"|"+i+")"+"?",l="[\\ufe0e\\ufe0f]?",c=l+u+("(?:\\u200d(?:"+[a,s,o].join("|")+")"+l+u+")*"),h="(?:"+[a+r+"?",r,s,o,n].join("|")+")",p=RegExp(i+"(?="+i+")|"+h+c,"g");t.exports=function(t){return t.match(p)||[]}},755:(t,e,n)=>{var r=n(8895),i=n(7116);t.exports=function t(e,n,a,s,o){var u=-1,l=e.length;for(a||(a=i),o||(o=[]);++u<l;){var c=e[u];n>0&&a(c)?n>1?t(c,n-1,a,s,o):r(o,c):s||(o[o.length]=c)}return o}},793:t=>{t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},801:(t,e,n)=>{var r=n(1141),i=n(6686),a=n(9841),s=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(a(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=o.test(t);return n||u.test(t)?l(t.slice(2),n?2:8):s.test(t)?NaN:+t}},914:(t,e,n)=>{var r=n(9841);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},929:(t,e,n)=>{var r=n(3211),i=n(6571),a=n(9194),s=n(6686);t.exports=function(t,e,n){if(!s(n))return!1;var o=typeof e;return!!("number"==o?i(n)&&a(e,n.length):"string"==o&&e in n)&&r(n[e],t)}},977:(t,e,n)=>{var r=n(9096),i=n(4416);t.exports=function(t,e){return t&&t.length?i(t,r(e,2)):[]}},1069:(t,e,n)=>{var r=n(8541);t.exports=function(t){return null==t?"":r(t)}},1141:(t,e,n)=>{var r=n(143),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},1143:(t,e,n)=>{var r=n(3028)(Object.keys,Object);t.exports=r},1153:(t,e,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(t,e,n){var r,a={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==e.key&&(l=""+e.key),void 0!==e.ref&&(c=e.ref),e)s.call(e,r)&&!u.hasOwnProperty(r)&&(a[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===a[r]&&(a[r]=e[r]);return{$$typeof:i,type:t,key:l,ref:c,props:a,_owner:o.current}}e.Fragment=a,e.jsx=l,e.jsxs=l},1170:t=>{t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},1268:(t,e,n)=>{var r=n(5428),i=n(7574),a=n(6832),s=a&&a.isTypedArray,o=s?i(s):r;t.exports=o},1310:t=>{t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},1340:(t,e,n)=>{var r=n(3211);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},1497:(t,e,n)=>{"use strict";var r=n(3218);function i(){}function a(){}a.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,a,s){if(s!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},1558:t=>{t.exports=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},1629:(t,e,n)=>{var r=n(6913),i=n(6686);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},1714:(t,e,n)=>{var r=n(1340);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},1733:(t,e,n)=>{var r=n(1775),i=n(4664),a=n(9096);t.exports=function(t,e){var n={};return e=a(e,3),i(t,(function(t,i,a){r(n,i,e(t,i,a))})),n}},1775:(t,e,n)=>{var r=n(5654);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},1946:(t,e,n)=>{var r=n(1340);t.exports=function(t){return r(this.__data__,t)>-1}},2070:(t,e,n)=>{var r=n(7937)(n(6552),"Set");t.exports=r},2074:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},2154:(t,e,n)=>{var r=n(5575),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},2165:(t,e,n)=>{var r=n(5652);t.exports=function(t,e){var n;return r(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}},2322:(t,e,n)=>{var r=n(6913),i=n(5990),a=n(2761),s=Function.prototype,o=Object.prototype,u=s.toString,l=o.hasOwnProperty,c=u.call(Object);t.exports=function(t){if(!a(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=l.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==c}},2520:(t,e,n)=>{var r=n(5816),i=n(9096),a=n(9140),s=Math.max;t.exports=function(t,e,n){var o=null==t?0:t.length;if(!o)return-1;var u=null==n?0:a(n);return u<0&&(u=s(o+u,0)),r(t,i(e,3),u)}},2536:(t,e,n)=>{var r=n(149),i=n(2969),a=n(9096),s=n(8883),o=n(320),u=n(7574),l=n(5893),c=n(3279),h=n(4052);t.exports=function(t,e,n){e=e.length?r(e,(function(t){return h(t)?function(e){return i(e,1===t.length?t[0]:t)}:t})):[c];var p=-1;e=r(e,u(a));var f=s(t,(function(t,n,i){return{criteria:r(e,(function(e){return e(t)})),index:++p,value:t}}));return o(f,(function(t,e){return l(t,e,n)}))}},2541:t=>{t.exports=function(t){return function(){return t}}},2587:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},2597:(t,e,n)=>{var r=n(4052),i=n(9841),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(s.test(t)||!a.test(t)||null!=e&&t in Object(e))}},2622:(t,e,n)=>{var r=n(705);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},2662:(t,e,n)=>{var r=n(5575);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},2730:(t,e,n)=>{"use strict";var r=n(5043),i=n(8853);function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function u(t,e){l(t,e),l(t+"Capture",e)}function l(t,e){for(o[t]=e,t=0;t<e.length;t++)s.add(e[t])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},d={};function m(t,e,n,r,i,a,s){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){g[t]=new m(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];g[e]=new m(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){g[t]=new m(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){g[t]=new m(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){g[t]=new m(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){g[t]=new m(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){g[t]=new m(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){g[t]=new m(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){g[t]=new m(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(t){return t[1].toUpperCase()}function b(t,e,n,r){var i=g.hasOwnProperty(e)?g[e]:null;(null!==i?0!==i.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!h.call(d,t)||!h.call(f,t)&&(p.test(t)?d[t]=!0:(f[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),_=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function N(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=M&&t[M]||t["@@iterator"])?t:null}var j,$=Object.assign;function R(t){if(void 0===j)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);j=e&&e[1]||""}return"\n"+j+t}var z=!1;function F(t,e){if(!t||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),a=r.stack.split("\n"),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||i[s]!==a[o]){var u="\n"+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}}while(1<=s&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?R(t):""}function V(t){switch(t.tag){case 5:return R(t.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 2:case 15:return t=F(t.type,!1);case 11:return t=F(t.type.render,!1);case 1:return t=F(t.type,!0);default:return""}}function B(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case T:return"Fragment";case S:return"Portal";case A:return"Profiler";case k:return"StrictMode";case I:return"Suspense";case L:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case _:return(t.displayName||"Context")+".Consumer";case E:return(t._context.displayName||"Context")+".Provider";case O:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case P:return null!==(e=t.displayName||null)?e:B(t.type)||"Memo";case C:e=t._payload,t=t._init;try{return B(t(e))}catch(n){}}return null}function U(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(e);case 8:return e===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function K(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function G(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function W(t){t._valueTracker||(t._valueTracker=function(t){var e=G(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,a.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function H(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=G(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function X(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function q(t,e){var n=e.checked;return $({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Y(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=K(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function J(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function Q(t,e){J(t,e);var n=K(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,K(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Z(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&X(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+K(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function rt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(a(91));return $({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function it(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(a(92));if(et(n)){if(1<n.length)throw Error(a(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:K(n)}}function at(t,e){var n=K(e.value),r=K(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function st(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function ot(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ut(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?ot(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var lt,ct,ht=(ct=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((lt=lt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return ct(t,e)}))}:ct);function pt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dt=["Webkit","ms","Moz","O"];function mt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function gt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=mt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(ft).forEach((function(t){dt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]}))}));var yt=$({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(t,e){if(e){if(yt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(a(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(a(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(a(62))}}function bt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xt=null;function wt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var St=null,Tt=null,kt=null;function At(t){if(t=bi(t)){if("function"!==typeof St)throw Error(a(280));var e=t.stateNode;e&&(e=wi(e),St(t.stateNode,t.type,e))}}function Et(t){Tt?kt?kt.push(t):kt=[t]:Tt=t}function _t(){if(Tt){var t=Tt,e=kt;if(kt=Tt=null,At(t),e)for(t=0;t<e.length;t++)At(e[t])}}function Ot(t,e){return t(e)}function It(){}var Lt=!1;function Pt(t,e,n){if(Lt)return t(e,n);Lt=!0;try{return Ot(t,e,n)}finally{Lt=!1,(null!==Tt||null!==kt)&&(It(),_t())}}function Ct(t,e){var n=t.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(a(231,e,typeof n));return n}var Dt=!1;if(c)try{var Mt={};Object.defineProperty(Mt,"passive",{get:function(){Dt=!0}}),window.addEventListener("test",Mt,Mt),window.removeEventListener("test",Mt,Mt)}catch(ct){Dt=!1}function Nt(t,e,n,r,i,a,s,o,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var jt=!1,$t=null,Rt=!1,zt=null,Ft={onError:function(t){jt=!0,$t=t}};function Vt(t,e,n,r,i,a,s,o,u){jt=!1,$t=null,Nt.apply(Ft,arguments)}function Bt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Ut(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Kt(t){if(Bt(t)!==t)throw Error(a(188))}function Gt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Bt(t)))throw Error(a(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Kt(i),t;if(s===r)return Kt(i),e;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o){for(u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}(t))?Wt(t):null}function Wt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Wt(t);if(null!==e)return e;t=t.sibling}return null}var Ht=i.unstable_scheduleCallback,Xt=i.unstable_cancelCallback,qt=i.unstable_shouldYield,Yt=i.unstable_requestPaint,Jt=i.unstable_now,Qt=i.unstable_getCurrentPriorityLevel,Zt=i.unstable_ImmediatePriority,te=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,ne=i.unstable_LowPriority,re=i.unstable_IdlePriority,ie=null,ae=null;var se=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(oe(t)/ue|0)|0},oe=Math.log,ue=Math.LN2;var le=64,ce=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pe(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,s=268435455&n;if(0!==s){var o=s&~i;0!==o?r=he(o):0!==(a&=s)&&(r=he(a))}else 0!==(s=n&~i)?r=he(s):0!==a&&(r=he(a));if(0===r)return 0;if(0!==e&&e!==r&&0===(e&i)&&((i=r&-r)>=(a=e&-e)||16===i&&0!==(4194240&a)))return e;if(0!==(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-se(e)),r|=t[n],e&=~i;return r}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function de(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function me(){var t=le;return 0===(4194240&(le<<=1))&&(le=64),t}function ge(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ye(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-se(e)]=n}function ve(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-se(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var be=0;function xe(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var we,Se,Te,ke,Ae,Ee=!1,_e=[],Oe=null,Ie=null,Le=null,Pe=new Map,Ce=new Map,De=[],Me="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ne(t,e){switch(t){case"focusin":case"focusout":Oe=null;break;case"dragenter":case"dragleave":Ie=null;break;case"mouseover":case"mouseout":Le=null;break;case"pointerover":case"pointerout":Pe.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ce.delete(e.pointerId)}}function je(t,e,n,r,i,a){return null===t||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==e&&(null!==(e=bi(e))&&Se(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function $e(t){var e=vi(t.target);if(null!==e){var n=Bt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Ut(n)))return t.blockedOn=e,void Ae(t.priority,(function(){Te(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Re(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=qe(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=bi(n))&&Se(e),t.blockedOn=n,!1;var r=new(n=t.nativeEvent).constructor(n.type,n);xt=r,n.target.dispatchEvent(r),xt=null,e.shift()}return!0}function ze(t,e,n){Re(t)&&n.delete(e)}function Fe(){Ee=!1,null!==Oe&&Re(Oe)&&(Oe=null),null!==Ie&&Re(Ie)&&(Ie=null),null!==Le&&Re(Le)&&(Le=null),Pe.forEach(ze),Ce.forEach(ze)}function Ve(t,e){t.blockedOn===e&&(t.blockedOn=null,Ee||(Ee=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Fe)))}function Be(t){function e(e){return Ve(e,t)}if(0<_e.length){Ve(_e[0],t);for(var n=1;n<_e.length;n++){var r=_e[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Oe&&Ve(Oe,t),null!==Ie&&Ve(Ie,t),null!==Le&&Ve(Le,t),Pe.forEach(e),Ce.forEach(e),n=0;n<De.length;n++)(r=De[n]).blockedOn===t&&(r.blockedOn=null);for(;0<De.length&&null===(n=De[0]).blockedOn;)$e(n),null===n.blockedOn&&De.shift()}var Ue=x.ReactCurrentBatchConfig,Ke=!0;function Ge(t,e,n,r){var i=be,a=Ue.transition;Ue.transition=null;try{be=1,He(t,e,n,r)}finally{be=i,Ue.transition=a}}function We(t,e,n,r){var i=be,a=Ue.transition;Ue.transition=null;try{be=4,He(t,e,n,r)}finally{be=i,Ue.transition=a}}function He(t,e,n,r){if(Ke){var i=qe(t,e,n,r);if(null===i)Kr(t,e,r,Xe,n),Ne(t,r);else if(function(t,e,n,r,i){switch(e){case"focusin":return Oe=je(Oe,t,e,n,r,i),!0;case"dragenter":return Ie=je(Ie,t,e,n,r,i),!0;case"mouseover":return Le=je(Le,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pe.set(a,je(Pe.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ce.set(a,je(Ce.get(a)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r))r.stopPropagation();else if(Ne(t,r),4&e&&-1<Me.indexOf(t)){for(;null!==i;){var a=bi(i);if(null!==a&&we(a),null===(a=qe(t,e,n,r))&&Kr(t,e,r,Xe,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(t,e,r,null,n)}}var Xe=null;function qe(t,e,n,r){if(Xe=null,null!==(t=vi(t=wt(r))))if(null===(e=Bt(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Ut(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xe=t,null}function Ye(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qt()){case Zt:return 1;case te:return 4;case ee:case ne:return 16;case re:return 536870912;default:return 16}default:return 16}}var Je=null,Qe=null,Ze=null;function tn(){if(Ze)return Ze;var t,e,n=Qe,r=n.length,i="value"in Je?Je.value:Je.textContent,a=i.length;for(t=0;t<r&&n[t]===i[t];t++);var s=r-t;for(e=1;e<=s&&n[r-e]===i[a-e];e++);return Ze=i.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function an(t){function e(e,n,r,i,a){for(var s in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,t)t.hasOwnProperty(s)&&(e=t[s],this[s]=e?e(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return $(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var sn,on,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(ln),hn=$({},ln,{view:0,detail:0}),pn=an(hn),fn=$({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==un&&(un&&"mousemove"===t.type?(sn=t.screenX-un.screenX,on=t.screenY-un.screenY):on=sn=0,un=t),sn)},movementY:function(t){return"movementY"in t?t.movementY:on}}),dn=an(fn),mn=an($({},fn,{dataTransfer:0})),gn=an($({},hn,{relatedTarget:0})),yn=an($({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=$({},ln,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bn=an(vn),xn=an($({},ln,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Tn[t])&&!!e[t]}function An(){return kn}var En=$({},hn,{key:function(t){if(t.key){var e=wn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Sn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),_n=an(En),On=an($({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=an($({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),Ln=an($({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=$({},fn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Cn=an(Pn),Dn=[9,13,27,32],Mn=c&&"CompositionEvent"in window,Nn=null;c&&"documentMode"in document&&(Nn=document.documentMode);var jn=c&&"TextEvent"in window&&!Nn,$n=c&&(!Mn||Nn&&8<Nn&&11>=Nn),Rn=String.fromCharCode(32),zn=!1;function Fn(t,e){switch(t){case"keyup":return-1!==Dn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Bn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Un[t.type]:"textarea"===e}function Gn(t,e,n,r){Et(r),0<(e=Wr(e,"onChange")).length&&(n=new cn("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wn=null,Hn=null;function Xn(t){Rr(t,0)}function qn(t){if(H(xi(t)))return t}function Yn(t,e){if("change"===t)return e}var Jn=!1;if(c){var Qn;if(c){var Zn="oninput"in document;if(!Zn){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),Zn="function"===typeof tr.oninput}Qn=Zn}else Qn=!1;Jn=Qn&&(!document.documentMode||9<document.documentMode)}function er(){Wn&&(Wn.detachEvent("onpropertychange",nr),Hn=Wn=null)}function nr(t){if("value"===t.propertyName&&qn(Hn)){var e=[];Gn(e,Hn,t,wt(t)),Pt(Xn,e)}}function rr(t,e,n){"focusin"===t?(er(),Hn=n,(Wn=e).attachEvent("onpropertychange",nr)):"focusout"===t&&er()}function ir(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return qn(Hn)}function ar(t,e){if("click"===t)return qn(e)}function sr(t,e){if("input"===t||"change"===t)return qn(e)}var or="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function ur(t,e){if(or(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(e,i)||!or(t[i],e[i]))return!1}return!0}function lr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cr(t,e){var n,r=lr(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=lr(r)}}function hr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function pr(){for(var t=window,e=X();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=X((t=e.contentWindow).document)}return e}function fr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function dr(t){var e=pr(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var s=cr(n,r);i&&s&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function xr(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==X(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&ur(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(e=new cn("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gr)))}function wr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Sr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Tr={},kr={};function Ar(t){if(Tr[t])return Tr[t];if(!Sr[t])return t;var e,n=Sr[t];for(e in n)if(n.hasOwnProperty(e)&&e in kr)return Tr[t]=n[e];return t}c&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Er=Ar("animationend"),_r=Ar("animationiteration"),Or=Ar("animationstart"),Ir=Ar("transitionend"),Lr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cr(t,e){Lr.set(t,e),u(e,[t])}for(var Dr=0;Dr<Pr.length;Dr++){var Mr=Pr[Dr];Cr(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Cr(Er,"onAnimationEnd"),Cr(_r,"onAnimationIteration"),Cr(Or,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr(Ir,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nr));function $r(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,s,o,u,l){if(Vt.apply(this,arguments),jt){if(!jt)throw Error(a(198));var c=$t;jt=!1,$t=null,Rt||(Rt=!0,zt=c)}}(r,e,void 0,t),t.currentTarget=null}function Rr(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var a=void 0;if(e)for(var s=r.length-1;0<=s;s--){var o=r[s],u=o.instance,l=o.currentTarget;if(o=o.listener,u!==a&&i.isPropagationStopped())break t;$r(i,o,l),a=u}else for(s=0;s<r.length;s++){if(u=(o=r[s]).instance,l=o.currentTarget,o=o.listener,u!==a&&i.isPropagationStopped())break t;$r(i,o,l),a=u}}}if(Rt)throw t=zt,Rt=!1,zt=null,t}function zr(t,e){var n=e[mi];void 0===n&&(n=e[mi]=new Set);var r=t+"__bubble";n.has(r)||(Ur(e,t,2,!1),n.add(r))}function Fr(t,e,n){var r=0;e&&(r|=4),Ur(n,t,r,e)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Br(t){if(!t[Vr]){t[Vr]=!0,s.forEach((function(e){"selectionchange"!==e&&(jr.has(e)||Fr(e,!1,t),Fr(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Vr]||(e[Vr]=!0,Fr("selectionchange",!1,e))}}function Ur(t,e,n,r){switch(Ye(e)){case 1:var i=Ge;break;case 4:i=We;break;default:i=He}n=i.bind(null,e,n,t),i=void 0,!Dt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Kr(t,e,n,r,i){var a=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var u=s.tag;if((3===u||4===u)&&((u=s.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;s=s.return}for(;null!==o;){if(null===(s=vi(o)))return;if(5===(u=s.tag)||6===u){r=a=s;continue t}o=o.parentNode}}r=r.return}Pt((function(){var r=a,i=wt(n),s=[];t:{var o=Lr.get(t);if(void 0!==o){var u=cn,l=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":u=_n;break;case"focusin":l="focus",u=gn;break;case"focusout":l="blur",u=gn;break;case"beforeblur":case"afterblur":u=gn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=In;break;case Er:case _r:case Or:u=yn;break;case Ir:u=Ln;break;case"scroll":u=pn;break;case"wheel":u=Cn;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=On}var c=0!==(4&e),h=!c&&"scroll"===t,p=c?null!==o?o+"Capture":null:o;c=[];for(var f,d=r;null!==d;){var m=(f=d).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==p&&(null!=(m=Ct(d,p))&&c.push(Gr(d,m,f)))),h)break;d=d.return}0<c.length&&(o=new u(o,l,null,n,i),s.push({event:o,listeners:c}))}}if(0===(7&e)){if(u="mouseout"===t||"pointerout"===t,(!(o="mouseover"===t||"pointerover"===t)||n===xt||!(l=n.relatedTarget||n.fromElement)||!vi(l)&&!l[di])&&(u||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?vi(l):null)&&(l!==(h=Bt(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=dn,m="onMouseLeave",p="onMouseEnter",d="mouse","pointerout"!==t&&"pointerover"!==t||(c=On,m="onPointerLeave",p="onPointerEnter",d="pointer"),h=null==u?o:xi(u),f=null==l?o:xi(l),(o=new c(m,d+"leave",u,n,i)).target=h,o.relatedTarget=f,m=null,vi(i)===r&&((c=new c(p,d+"enter",l,n,i)).target=f,c.relatedTarget=h,m=c),h=m,u&&l)t:{for(p=l,d=0,f=c=u;f;f=Hr(f))d++;for(f=0,m=p;m;m=Hr(m))f++;for(;0<d-f;)c=Hr(c),d--;for(;0<f-d;)p=Hr(p),f--;for(;d--;){if(c===p||null!==p&&c===p.alternate)break t;c=Hr(c),p=Hr(p)}c=null}else c=null;null!==u&&Xr(s,o,u,c,!1),null!==l&&null!==h&&Xr(s,h,l,c,!0)}if("select"===(u=(o=r?xi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===u&&"file"===o.type)var g=Yn;else if(Kn(o))if(Jn)g=sr;else{g=ir;var y=rr}else(u=o.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ar);switch(g&&(g=g(t,r))?Gn(s,g,n,i):(y&&y(t,o,r),"focusout"===t&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&tt(o,"number",o.value)),y=r?xi(r):window,t){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(s,n,i)}var v;if(Mn)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else Bn?Fn(t,n)&&(b="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(b="onCompositionStart");b&&($n&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=tn()):(Qe="value"in(Je=i)?Je.value:Je.textContent,Bn=!0)),0<(y=Wr(r,b)).length&&(b=new xn(b,t,null,n,i),s.push({event:b,listeners:y}),v?b.data=v:null!==(v=Vn(n))&&(b.data=v))),(v=jn?function(t,e){switch(t){case"compositionend":return Vn(e);case"keypress":return 32!==e.which?null:(zn=!0,Rn);case"textInput":return(t=e.data)===Rn&&zn?null:t;default:return null}}(t,n):function(t,e){if(Bn)return"compositionend"===t||!Mn&&Fn(t,e)?(t=tn(),Ze=Qe=Je=null,Bn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $n&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=v))}Rr(s,e)}))}function Gr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ct(t,n))&&r.unshift(Gr(t,a,i)),null!=(a=Ct(t,e))&&r.push(Gr(t,a,i))),t=t.return}return r}function Hr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Xr(t,e,n,r,i){for(var a=e._reactName,s=[];null!==n&&n!==r;){var o=n,u=o.alternate,l=o.stateNode;if(null!==u&&u===r)break;5===o.tag&&null!==l&&(o=l,i?null!=(u=Ct(n,a))&&s.unshift(Gr(n,u,o)):i||null!=(u=Ct(n,a))&&s.push(Gr(n,u,o))),n=n.return}0!==s.length&&t.push({event:e,listeners:s})}var qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(t){return("string"===typeof t?t:""+t).replace(qr,"\n").replace(Yr,"")}function Qr(t,e,n){if(e=Jr(e),Jr(t)!==e&&n)throw Error(a(425))}function Zr(){}var ti=null,ei=null;function ni(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(t){return ai.resolve(null).then(t).catch(oi)}:ri;function oi(t){setTimeout((function(){throw t}))}function ui(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return t.removeChild(i),void Be(e);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Be(e)}function li(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ci(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var hi=Math.random().toString(36).slice(2),pi="__reactFiber$"+hi,fi="__reactProps$"+hi,di="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(t){var e=t[pi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[di]||n[pi]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ci(t);null!==t;){if(n=t[pi])return n;t=ci(t)}return e}n=(t=n).parentNode}return null}function bi(t){return!(t=t[pi]||t[di])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function xi(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(a(33))}function wi(t){return t[fi]||null}var Si=[],Ti=-1;function ki(t){return{current:t}}function Ai(t){0>Ti||(t.current=Si[Ti],Si[Ti]=null,Ti--)}function Ei(t,e){Ti++,Si[Ti]=t.current,t.current=e}var _i={},Oi=ki(_i),Ii=ki(!1),Li=_i;function Pi(t,e){var n=t.type.contextTypes;if(!n)return _i;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Ci(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Di(){Ai(Ii),Ai(Oi)}function Mi(t,e,n){if(Oi.current!==_i)throw Error(a(168));Ei(Oi,e),Ei(Ii,n)}function Ni(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(a(108,U(t)||"Unknown",i));return $({},n,r)}function ji(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_i,Li=Oi.current,Ei(Oi,t),Ei(Ii,Ii.current),!0}function $i(t,e,n){var r=t.stateNode;if(!r)throw Error(a(169));n?(t=Ni(t,e,Li),r.__reactInternalMemoizedMergedChildContext=t,Ai(Ii),Ai(Oi),Ei(Oi,t)):Ai(Ii),Ei(Ii,n)}var Ri=null,zi=!1,Fi=!1;function Vi(t){null===Ri?Ri=[t]:Ri.push(t)}function Bi(){if(!Fi&&null!==Ri){Fi=!0;var t=0,e=be;try{var n=Ri;for(be=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}Ri=null,zi=!1}catch(i){throw null!==Ri&&(Ri=Ri.slice(t+1)),Ht(Zt,Bi),i}finally{be=e,Fi=!1}}return null}var Ui=[],Ki=0,Gi=null,Wi=0,Hi=[],Xi=0,qi=null,Yi=1,Ji="";function Qi(t,e){Ui[Ki++]=Wi,Ui[Ki++]=Gi,Gi=t,Wi=e}function Zi(t,e,n){Hi[Xi++]=Yi,Hi[Xi++]=Ji,Hi[Xi++]=qi,qi=t;var r=Yi;t=Ji;var i=32-se(r)-1;r&=~(1<<i),n+=1;var a=32-se(e)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Yi=1<<32-se(e)+i|n<<i|r,Ji=a+t}else Yi=1<<a|n<<i|r,Ji=t}function ta(t){null!==t.return&&(Qi(t,1),Zi(t,1,0))}function ea(t){for(;t===Gi;)Gi=Ui[--Ki],Ui[Ki]=null,Wi=Ui[--Ki],Ui[Ki]=null;for(;t===qi;)qi=Hi[--Xi],Hi[Xi]=null,Ji=Hi[--Xi],Hi[Xi]=null,Yi=Hi[--Xi],Hi[Xi]=null}var na=null,ra=null,ia=!1,aa=null;function sa(t,e){var n=Pl(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function oa(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,na=t,ra=li(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,na=t,ra=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==qi?{id:Yi,overflow:Ji}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Pl(18,null,null,0)).stateNode=e,n.return=t,t.child=n,na=t,ra=null,!0);default:return!1}}function ua(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function la(t){if(ia){var e=ra;if(e){var n=e;if(!oa(t,e)){if(ua(t))throw Error(a(418));e=li(n.nextSibling);var r=na;e&&oa(t,e)?sa(r,n):(t.flags=-4097&t.flags|2,ia=!1,na=t)}}else{if(ua(t))throw Error(a(418));t.flags=-4097&t.flags|2,ia=!1,na=t}}}function ca(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;na=t}function ha(t){if(t!==na)return!1;if(!ia)return ca(t),ia=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!ni(t.type,t.memoizedProps)),e&&(e=ra)){if(ua(t))throw pa(),Error(a(418));for(;e;)sa(t,e),e=li(e.nextSibling)}if(ca(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ra=li(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ra=null}}else ra=na?li(t.stateNode.nextSibling):null;return!0}function pa(){for(var t=ra;t;)t=li(t.nextSibling)}function fa(){ra=na=null,ia=!1}function da(t){null===aa?aa=[t]:aa.push(t)}var ma=x.ReactCurrentBatchConfig;function ga(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,t));var i=r,s=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===s?e.ref:(e=function(t){var e=i.refs;null===t?delete e[s]:e[s]=t},e._stringRef=s,e)}if("string"!==typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function ya(t,e){throw t=Object.prototype.toString.call(e),Error(a(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function va(t){return(0,t._init)(t._payload)}function ba(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Dl(t,e)).index=0,t.sibling=null,t}function s(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function o(e){return t&&null===e.alternate&&(e.flags|=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=$l(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function l(t,e,n,r){var a=n.type;return a===T?h(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===C&&va(a)===e.type)?((r=i(e,n.props)).ref=ga(t,e,n),r.return=t,r):((r=Ml(n.type,n.key,n.props,null,t.mode,r)).ref=ga(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Rl(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,a){return null===e||7!==e.tag?((e=Nl(n,t.mode,r,a)).return=t,e):((e=i(e,n)).return=t,e)}function p(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=$l(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case w:return(n=Ml(e.type,e.key,e.props,null,t.mode,n)).ref=ga(t,null,e),n.return=t,n;case S:return(e=Rl(e,t.mode,n)).return=t,e;case C:return p(t,(0,e._init)(e._payload),n)}if(et(e)||N(e))return(e=Nl(e,t.mode,n,null)).return=t,e;ya(t,e)}return null}function f(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?l(t,e,n,r):null;case S:return n.key===i?c(t,e,n,r):null;case C:return f(t,e,(i=n._init)(n._payload),r)}if(et(n)||N(n))return null!==i?null:h(t,e,n,r,null);ya(t,n)}return null}function d(t,e,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return l(e,t=t.get(null===r.key?n:r.key)||null,r,i);case S:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i);case C:return d(t,e,n,(0,r._init)(r._payload),i)}if(et(r)||N(r))return h(e,t=t.get(n)||null,r,i,null);ya(e,r)}return null}function m(i,a,o,u){for(var l=null,c=null,h=a,m=a=0,g=null;null!==h&&m<o.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,o[m],u);if(null===y){null===h&&(h=g);break}t&&h&&null===y.alternate&&e(i,h),a=s(y,a,m),null===c?l=y:c.sibling=y,c=y,h=g}if(m===o.length)return n(i,h),ia&&Qi(i,m),l;if(null===h){for(;m<o.length;m++)null!==(h=p(i,o[m],u))&&(a=s(h,a,m),null===c?l=h:c.sibling=h,c=h);return ia&&Qi(i,m),l}for(h=r(i,h);m<o.length;m++)null!==(g=d(h,i,m,o[m],u))&&(t&&null!==g.alternate&&h.delete(null===g.key?m:g.key),a=s(g,a,m),null===c?l=g:c.sibling=g,c=g);return t&&h.forEach((function(t){return e(i,t)})),ia&&Qi(i,m),l}function g(i,o,u,l){var c=N(u);if("function"!==typeof c)throw Error(a(150));if(null==(u=c.call(u)))throw Error(a(151));for(var h=c=null,m=o,g=o=0,y=null,v=u.next();null!==m&&!v.done;g++,v=u.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,l);if(null===b){null===m&&(m=y);break}t&&m&&null===b.alternate&&e(i,m),o=s(b,o,g),null===h?c=b:h.sibling=b,h=b,m=y}if(v.done)return n(i,m),ia&&Qi(i,g),c;if(null===m){for(;!v.done;g++,v=u.next())null!==(v=p(i,v.value,l))&&(o=s(v,o,g),null===h?c=v:h.sibling=v,h=v);return ia&&Qi(i,g),c}for(m=r(i,m);!v.done;g++,v=u.next())null!==(v=d(m,i,g,v.value,l))&&(t&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=s(v,o,g),null===h?c=v:h.sibling=v,h=v);return t&&m.forEach((function(t){return e(i,t)})),ia&&Qi(i,g),c}return function t(r,a,s,u){if("object"===typeof s&&null!==s&&s.type===T&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:t:{for(var l=s.key,c=a;null!==c;){if(c.key===l){if((l=s.type)===T){if(7===c.tag){n(r,c.sibling),(a=i(c,s.props.children)).return=r,r=a;break t}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===C&&va(l)===c.type){n(r,c.sibling),(a=i(c,s.props)).ref=ga(r,c,s),a.return=r,r=a;break t}n(r,c);break}e(r,c),c=c.sibling}s.type===T?((a=Nl(s.props.children,r.mode,u,s.key)).return=r,r=a):((u=Ml(s.type,s.key,s.props,null,r.mode,u)).ref=ga(r,a,s),u.return=r,r=u)}return o(r);case S:t:{for(c=s.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===s.containerInfo&&a.stateNode.implementation===s.implementation){n(r,a.sibling),(a=i(a,s.children||[])).return=r,r=a;break t}n(r,a);break}e(r,a),a=a.sibling}(a=Rl(s,r.mode,u)).return=r,r=a}return o(r);case C:return t(r,a,(c=s._init)(s._payload),u)}if(et(s))return m(r,a,s,u);if(N(s))return g(r,a,s,u);ya(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,s)).return=r,r=a):(n(r,a),(a=$l(s,r.mode,u)).return=r,r=a),o(r)):n(r,a)}}var xa=ba(!0),wa=ba(!1),Sa=ki(null),Ta=null,ka=null,Aa=null;function Ea(){Aa=ka=Ta=null}function _a(t){var e=Sa.current;Ai(Sa),t._currentValue=e}function Oa(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ia(t,e){Ta=t,Aa=ka=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(bo=!0),t.firstContext=null)}function La(t){var e=t._currentValue;if(Aa!==t)if(t={context:t,memoizedValue:e,next:null},null===ka){if(null===Ta)throw Error(a(308));ka=t,Ta.dependencies={lanes:0,firstContext:t}}else ka=ka.next=t;return e}var Pa=null;function Ca(t){null===Pa?Pa=[t]:Pa.push(t)}function Da(t,e,n,r){var i=e.interleaved;return null===i?(n.next=n,Ca(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ma(t,r)}function Ma(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Na=!1;function ja(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $a(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ra(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function za(t,e,n){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ou)){var i=r.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ma(t,n)}return null===(i=r.interleaved)?(e.next=e,Ca(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ma(t,n)}function Fa(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ve(t,n)}}function Va(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=e:a=a.next=e}else i=a=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ba(t,e,n,r){var i=t.updateQueue;Na=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var u=o,l=u.next;u.next=null,null===s?a=l:s.next=l,s=u;var c=t.alternate;null!==c&&((o=(c=c.updateQueue).lastBaseUpdate)!==s&&(null===o?c.firstBaseUpdate=l:o.next=l,c.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(s=0,c=l=u=null,o=a;;){var p=o.lane,f=o.eventTime;if((r&p)===p){null!==c&&(c=c.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});t:{var d=t,m=o;switch(p=e,f=n,m.tag){case 1:if("function"===typeof(d=m.payload)){h=d.call(f,h,p);break t}h=d;break t;case 3:d.flags=-65537&d.flags|128;case 0:if(null===(p="function"===typeof(d=m.payload)?d.call(f,h,p):d)||void 0===p)break t;h=$({},h,p);break t;case 2:Na=!0}}null!==o.callback&&0!==o.lane&&(t.flags|=64,null===(p=i.effects)?i.effects=[o]:p.push(o))}else f={eventTime:f,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(l=c=f,u=h):c=c.next=f,s|=p;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(p=o).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}if(null===c&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(e=i.shared.interleaved)){i=e;do{s|=i.lane,i=i.next}while(i!==e)}else null===a&&(i.shared.lanes=0);ju|=s,t.lanes=s,t.memoizedState=h}}function Ua(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ka={},Ga=ki(Ka),Wa=ki(Ka),Ha=ki(Ka);function Xa(t){if(t===Ka)throw Error(a(174));return t}function qa(t,e){switch(Ei(Ha,e),Ei(Wa,t),Ei(Ga,Ka),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ut(null,"");break;default:e=ut(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Ai(Ga),Ei(Ga,e)}function Ya(){Ai(Ga),Ai(Wa),Ai(Ha)}function Ja(t){Xa(Ha.current);var e=Xa(Ga.current),n=ut(e,t.type);e!==n&&(Ei(Wa,t),Ei(Ga,n))}function Qa(t){Wa.current===t&&(Ai(Ga),Ai(Wa))}var Za=ki(0);function ts(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var es=[];function ns(){for(var t=0;t<es.length;t++)es[t]._workInProgressVersionPrimary=null;es.length=0}var rs=x.ReactCurrentDispatcher,is=x.ReactCurrentBatchConfig,as=0,ss=null,os=null,us=null,ls=!1,cs=!1,hs=0,ps=0;function fs(){throw Error(a(321))}function ds(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!or(t[n],e[n]))return!1;return!0}function ms(t,e,n,r,i,s){if(as=s,ss=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rs.current=null===t||null===t.memoizedState?Qs:Zs,t=n(r,i),cs){s=0;do{if(cs=!1,hs=0,25<=s)throw Error(a(301));s+=1,us=os=null,e.updateQueue=null,rs.current=to,t=n(r,i)}while(cs)}if(rs.current=Js,e=null!==os&&null!==os.next,as=0,us=os=ss=null,ls=!1,e)throw Error(a(300));return t}function gs(){var t=0!==hs;return hs=0,t}function ys(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===us?ss.memoizedState=us=t:us=us.next=t,us}function vs(){if(null===os){var t=ss.alternate;t=null!==t?t.memoizedState:null}else t=os.next;var e=null===us?ss.memoizedState:us.next;if(null!==e)us=e,os=t;else{if(null===t)throw Error(a(310));t={memoizedState:(os=t).memoizedState,baseState:os.baseState,baseQueue:os.baseQueue,queue:os.queue,next:null},null===us?ss.memoizedState=us=t:us=us.next=t}return us}function bs(t,e){return"function"===typeof e?e(t):e}function xs(t){var e=vs(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=os,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var u=o=null,l=null,c=s;do{var h=c.lane;if((as&h)===h)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=p,o=r):l=l.next=p,ss.lanes|=h,ju|=h}c=c.next}while(null!==c&&c!==s);null===l?o=r:l.next=u,or(r,e.memoizedState)||(bo=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(null!==(t=n.interleaved)){i=t;do{s=i.lane,ss.lanes|=s,ju|=s,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ws(t){var e=vs(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=t(s,o.action),o=o.next}while(o!==i);or(s,e.memoizedState)||(bo=!0),e.memoizedState=s,null===e.baseQueue&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Ss(){}function Ts(t,e){var n=ss,r=vs(),i=e(),s=!or(r.memoizedState,i);if(s&&(r.memoizedState=i,bo=!0),r=r.queue,Ns(Es.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||null!==us&&1&us.memoizedState.tag){if(n.flags|=2048,Ls(9,As.bind(null,n,r,i,e),void 0,null),null===Iu)throw Error(a(349));0!==(30&as)||ks(n,e,i)}return i}function ks(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=ss.updateQueue)?(e={lastEffect:null,stores:null},ss.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function As(t,e,n,r){e.value=n,e.getSnapshot=r,_s(e)&&Os(t)}function Es(t,e,n){return n((function(){_s(e)&&Os(t)}))}function _s(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!or(t,n)}catch(r){return!0}}function Os(t){var e=Ma(t,1);null!==e&&nl(e,t,1,-1)}function Is(t){var e=ys();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:t},e.queue=t,t=t.dispatch=Hs.bind(null,ss,t),[e.memoizedState,t]}function Ls(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=ss.updateQueue)?(e={lastEffect:null,stores:null},ss.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Ps(){return vs().memoizedState}function Cs(t,e,n,r){var i=ys();ss.flags|=t,i.memoizedState=Ls(1|e,n,void 0,void 0===r?null:r)}function Ds(t,e,n,r){var i=vs();r=void 0===r?null:r;var a=void 0;if(null!==os){var s=os.memoizedState;if(a=s.destroy,null!==r&&ds(r,s.deps))return void(i.memoizedState=Ls(e,n,a,r))}ss.flags|=t,i.memoizedState=Ls(1|e,n,a,r)}function Ms(t,e){return Cs(8390656,8,t,e)}function Ns(t,e){return Ds(2048,8,t,e)}function js(t,e){return Ds(4,2,t,e)}function $s(t,e){return Ds(4,4,t,e)}function Rs(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function zs(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Ds(4,4,Rs.bind(null,e,t),n)}function Fs(){}function Vs(t,e){var n=vs();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ds(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Bs(t,e){var n=vs();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ds(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Us(t,e,n){return 0===(21&as)?(t.baseState&&(t.baseState=!1,bo=!0),t.memoizedState=n):(or(n,e)||(n=me(),ss.lanes|=n,ju|=n,t.baseState=!0),e)}function Ks(t,e){var n=be;be=0!==n&&4>n?n:4,t(!0);var r=is.transition;is.transition={};try{t(!1),e()}finally{be=n,is.transition=r}}function Gs(){return vs().memoizedState}function Ws(t,e,n){var r=el(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xs(t))qs(e,n);else if(null!==(n=Da(t,e,n,r))){nl(n,t,r,tl()),Ys(n,e,r)}}function Hs(t,e,n){var r=el(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xs(t))qs(e,i);else{var a=t.alternate;if(0===t.lanes&&(null===a||0===a.lanes)&&null!==(a=e.lastRenderedReducer))try{var s=e.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,s)){var u=e.interleaved;return null===u?(i.next=i,Ca(e)):(i.next=u.next,u.next=i),void(e.interleaved=i)}}catch(l){}null!==(n=Da(t,e,i,r))&&(nl(n,t,r,i=tl()),Ys(n,e,r))}}function Xs(t){var e=t.alternate;return t===ss||null!==e&&e===ss}function qs(t,e){cs=ls=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ys(t,e,n){if(0!==(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ve(t,n)}}var Js={readContext:La,useCallback:fs,useContext:fs,useEffect:fs,useImperativeHandle:fs,useInsertionEffect:fs,useLayoutEffect:fs,useMemo:fs,useReducer:fs,useRef:fs,useState:fs,useDebugValue:fs,useDeferredValue:fs,useTransition:fs,useMutableSource:fs,useSyncExternalStore:fs,useId:fs,unstable_isNewReconciler:!1},Qs={readContext:La,useCallback:function(t,e){return ys().memoizedState=[t,void 0===e?null:e],t},useContext:La,useEffect:Ms,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Cs(4194308,4,Rs.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Cs(4194308,4,t,e)},useInsertionEffect:function(t,e){return Cs(4,2,t,e)},useMemo:function(t,e){var n=ys();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ys();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Ws.bind(null,ss,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},ys().memoizedState=t},useState:Is,useDebugValue:Fs,useDeferredValue:function(t){return ys().memoizedState=t},useTransition:function(){var t=Is(!1),e=t[0];return t=Ks.bind(null,t[1]),ys().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ss,i=ys();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=e(),null===Iu)throw Error(a(349));0!==(30&as)||ks(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Ms(Es.bind(null,r,s,t),[t]),r.flags|=2048,Ls(9,As.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ys(),e=Iu.identifierPrefix;if(ia){var n=Ji;e=":"+e+"R"+(n=(Yi&~(1<<32-se(Yi)-1)).toString(32)+n),0<(n=hs++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=ps++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Zs={readContext:La,useCallback:Vs,useContext:La,useEffect:Ns,useImperativeHandle:zs,useInsertionEffect:js,useLayoutEffect:$s,useMemo:Bs,useReducer:xs,useRef:Ps,useState:function(){return xs(bs)},useDebugValue:Fs,useDeferredValue:function(t){return Us(vs(),os.memoizedState,t)},useTransition:function(){return[xs(bs)[0],vs().memoizedState]},useMutableSource:Ss,useSyncExternalStore:Ts,useId:Gs,unstable_isNewReconciler:!1},to={readContext:La,useCallback:Vs,useContext:La,useEffect:Ns,useImperativeHandle:zs,useInsertionEffect:js,useLayoutEffect:$s,useMemo:Bs,useReducer:ws,useRef:Ps,useState:function(){return ws(bs)},useDebugValue:Fs,useDeferredValue:function(t){var e=vs();return null===os?e.memoizedState=t:Us(e,os.memoizedState,t)},useTransition:function(){return[ws(bs)[0],vs().memoizedState]},useMutableSource:Ss,useSyncExternalStore:Ts,useId:Gs,unstable_isNewReconciler:!1};function eo(t,e){if(t&&t.defaultProps){for(var n in e=$({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}function no(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:$({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var ro={isMounted:function(t){return!!(t=t._reactInternals)&&Bt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=tl(),i=el(t),a=Ra(r,i);a.payload=e,void 0!==n&&null!==n&&(a.callback=n),null!==(e=za(t,a,i))&&(nl(e,t,i,r),Fa(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=tl(),i=el(t),a=Ra(r,i);a.tag=1,a.payload=e,void 0!==n&&null!==n&&(a.callback=n),null!==(e=za(t,a,i))&&(nl(e,t,i,r),Fa(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tl(),r=el(t),i=Ra(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),null!==(e=za(t,i,r))&&(nl(e,t,r,n),Fa(e,t,r))}};function io(t,e,n,r,i,a,s){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,a,s):!e.prototype||!e.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function ao(t,e,n){var r=!1,i=_i,a=e.contextType;return"object"===typeof a&&null!==a?a=La(a):(i=Ci(e)?Li:Oi.current,a=(r=null!==(r=e.contextTypes)&&void 0!==r)?Pi(t,i):_i),e=new e(n,a),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=ro,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function so(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ro.enqueueReplaceState(e,e.state,null)}function oo(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ja(t);var a=e.contextType;"object"===typeof a&&null!==a?i.context=La(a):(a=Ci(e)?Li:Oi.current,i.context=Pi(t,a)),i.state=t.memoizedState,"function"===typeof(a=e.getDerivedStateFromProps)&&(no(t,e,a,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&ro.enqueueReplaceState(i,i.state,null),Ba(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308)}function uo(t,e){try{var n="",r=e;do{n+=V(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:t,source:e,stack:i,digest:null}}function lo(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function co(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(t,e,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ku||(Ku=!0,Gu=r),co(0,e)},n}function fo(t,e,n){(n=Ra(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){co(0,e)}}var a=t.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){co(0,e),"function"!==typeof r&&(null===Wu?Wu=new Set([this]):Wu.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function mo(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new ho;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Al.bind(null,t,e,n),e.then(t,t))}function go(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function yo(t,e,n,r,i){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Ra(-1,1)).tag=2,za(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var vo=x.ReactCurrentOwner,bo=!1;function xo(t,e,n,r){e.child=null===t?wa(e,null,n,r):xa(e,t.child,n,r)}function wo(t,e,n,r,i){n=n.render;var a=e.ref;return Ia(e,i),r=ms(t,e,n,r,a,i),n=gs(),null===t||bo?(ia&&n&&ta(e),e.flags|=1,xo(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ko(t,e,i))}function So(t,e,n,r,i){if(null===t){var a=n.type;return"function"!==typeof a||Cl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Ml(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,To(t,e,a,r,i))}if(a=t.child,0===(t.lanes&i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(s,r)&&t.ref===e.ref)return Ko(t,e,i)}return e.flags|=1,(t=Dl(a,r)).ref=e.ref,t.return=e,e.child=t}function To(t,e,n,r,i){if(null!==t){var a=t.memoizedProps;if(ur(a,r)&&t.ref===e.ref){if(bo=!1,e.pendingProps=r=a,0===(t.lanes&i))return e.lanes=t.lanes,Ko(t,e,i);0!==(131072&t.flags)&&(bo=!0)}}return Eo(t,e,n,r,i)}function ko(t,e,n){var r=e.pendingProps,i=r.children,a=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Du,Cu),Cu|=n;else{if(0===(1073741824&n))return t=null!==a?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ei(Du,Cu),Cu|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Du,Cu),Cu|=r}else null!==a?(r=a.baseLanes|n,e.memoizedState=null):r=n,Ei(Du,Cu),Cu|=r;return xo(t,e,i,n),e.child}function Ao(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Eo(t,e,n,r,i){var a=Ci(n)?Li:Oi.current;return a=Pi(e,a),Ia(e,i),n=ms(t,e,n,r,a,i),r=gs(),null===t||bo?(ia&&r&&ta(e),e.flags|=1,xo(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ko(t,e,i))}function _o(t,e,n,r,i){if(Ci(n)){var a=!0;ji(e)}else a=!1;if(Ia(e,i),null===e.stateNode)Uo(t,e),ao(e,n,r),oo(e,n,r,i),r=!0;else if(null===t){var s=e.stateNode,o=e.memoizedProps;s.props=o;var u=s.context,l=n.contextType;"object"===typeof l&&null!==l?l=La(l):l=Pi(e,l=Ci(n)?Li:Oi.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==r||u!==l)&&so(e,s,r,l),Na=!1;var p=e.memoizedState;s.state=p,Ba(e,r,s,i),u=e.memoizedState,o!==r||p!==u||Ii.current||Na?("function"===typeof c&&(no(e,n,c,r),u=e.memoizedState),(o=Na||io(e,n,o,r,p,u,l))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(e.flags|=4194308)):("function"===typeof s.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=l,r=o):("function"===typeof s.componentDidMount&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,$a(t,e),o=e.memoizedProps,l=e.type===e.elementType?o:eo(e.type,o),s.props=l,h=e.pendingProps,p=s.context,"object"===typeof(u=n.contextType)&&null!==u?u=La(u):u=Pi(e,u=Ci(n)?Li:Oi.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==h||p!==u)&&so(e,s,r,u),Na=!1,p=e.memoizedState,s.state=p,Ba(e,r,s,i);var d=e.memoizedState;o!==h||p!==d||Ii.current||Na?("function"===typeof f&&(no(e,n,f,r),d=e.memoizedState),(l=Na||io(e,n,l,r,p,d,u)||!1)?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,d,u),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,d,u)),"function"===typeof s.componentDidUpdate&&(e.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=d),s.props=r,s.state=d,s.context=u,r=l):("function"!==typeof s.componentDidUpdate||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Oo(t,e,n,r,a,i)}function Oo(t,e,n,r,i,a){Ao(t,e);var s=0!==(128&e.flags);if(!r&&!s)return i&&$i(e,n,!1),Ko(t,e,a);r=e.stateNode,vo.current=e;var o=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&s?(e.child=xa(e,t.child,null,a),e.child=xa(e,null,o,a)):xo(t,e,o,a),e.memoizedState=r.state,i&&$i(e,n,!0),e.child}function Io(t){var e=t.stateNode;e.pendingContext?Mi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Mi(0,e.context,!1),qa(t,e.containerInfo)}function Lo(t,e,n,r,i){return fa(),da(i),e.flags|=256,xo(t,e,n,r),e.child}var Po,Co,Do,Mo,No={dehydrated:null,treeContext:null,retryLane:0};function jo(t){return{baseLanes:t,cachePool:null,transitions:null}}function $o(t,e,n){var r,i=e.pendingProps,s=Za.current,o=!1,u=0!==(128&e.flags);if((r=u)||(r=(null===t||null!==t.memoizedState)&&0!==(2&s)),r?(o=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(s|=1),Ei(Za,1&s),null===t)return la(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(u=i.children,t=i.fallback,o?(i=e.mode,o=e.child,u={mode:"hidden",children:u},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=u):o=jl(u,i,0,null),t=Nl(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=jo(n),e.memoizedState=No,t):Ro(e,u));if(null!==(s=t.memoizedState)&&null!==(r=s.dehydrated))return function(t,e,n,r,i,s,o){if(n)return 256&e.flags?(e.flags&=-257,zo(t,e,o,r=lo(Error(a(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=jl({mode:"visible",children:r.children},i,0,null),(s=Nl(s,i,o,null)).flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,0!==(1&e.mode)&&xa(e,t.child,null,o),e.child.memoizedState=jo(o),e.memoizedState=No,s);if(0===(1&e.mode))return zo(t,e,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,zo(t,e,o,r=lo(s=Error(a(419)),r,void 0))}if(u=0!==(o&t.childLanes),bo||u){if(null!==(r=Iu)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Ma(t,i),nl(r,t,i,-1))}return ml(),zo(t,e,o,r=lo(Error(a(421))))}return"$?"===i.data?(e.flags|=128,e.child=t.child,e=_l.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ra=li(i.nextSibling),na=e,ia=!0,aa=null,null!==t&&(Hi[Xi++]=Yi,Hi[Xi++]=Ji,Hi[Xi++]=qi,Yi=t.id,Ji=t.overflow,qi=e),e=Ro(e,r.children),e.flags|=4096,e)}(t,e,u,i,r,s,n);if(o){o=i.fallback,u=e.mode,r=(s=t.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&u)&&e.child!==s?((i=e.child).childLanes=0,i.pendingProps=l,e.deletions=null):(i=Dl(s,l)).subtreeFlags=14680064&s.subtreeFlags,null!==r?o=Dl(r,o):(o=Nl(o,u,n,null)).flags|=2,o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,u=null===(u=t.child.memoizedState)?jo(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},o.memoizedState=u,o.childLanes=t.childLanes&~n,e.memoizedState=No,i}return t=(o=t.child).sibling,i=Dl(o,{mode:"visible",children:i.children}),0===(1&e.mode)&&(i.lanes=n),i.return=e,i.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Ro(t,e){return(e=jl({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function zo(t,e,n,r){return null!==r&&da(r),xa(e,t.child,null,n),(t=Ro(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Fo(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),Oa(t.return,e,n)}function Vo(t,e,n,r,i){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bo(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(xo(t,e,r.children,n),0!==(2&(r=Za.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Fo(t,n,e);else if(19===t.tag)Fo(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ei(Za,r),0===(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===ts(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Vo(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===ts(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Vo(e,!0,n,null,a);break;case"together":Vo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Uo(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ko(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),ju|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(n=Dl(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Dl(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Go(t,e){if(!ia)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Wo(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ho(t,e,n){var r=e.pendingProps;switch(ea(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(e),null;case 1:case 17:return Ci(e.type)&&Di(),Wo(e),null;case 3:return r=e.stateNode,Ya(),Ai(Ii),Ai(Oi),ns(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(ha(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==aa&&(sl(aa),aa=null))),Co(t,e),Wo(e),null;case 5:Qa(e);var i=Xa(Ha.current);if(n=e.type,null!==t&&null!=e.stateNode)Do(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(a(166));return Wo(e),null}if(t=Xa(Ga.current),ha(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[pi]=e,r[fi]=s,t=0!==(1&e.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Nr.length;i++)zr(Nr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":Y(r,s),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},zr("invalid",r);break;case"textarea":it(r,s),zr("invalid",r)}for(var u in vt(n,s),i=null,s)if(s.hasOwnProperty(u)){var l=s[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==s.suppressHydrationWarning&&Qr(r.textContent,l,t),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==s.suppressHydrationWarning&&Qr(r.textContent,l,t),i=["children",""+l]):o.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&zr("scroll",r)}switch(n){case"input":W(r),Z(r,s,!0);break;case"textarea":W(r),st(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=i,e.updateQueue=r,null!==r&&(e.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=ot(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=u.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=u.createElement(n,{is:r.is}):(t=u.createElement(n),"select"===n&&(u=t,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):t=u.createElementNS(t,n),t[pi]=e,t[fi]=r,Po(t,e,!1,!1),e.stateNode=t;t:{switch(u=bt(n,r),n){case"dialog":zr("cancel",t),zr("close",t),i=r;break;case"iframe":case"object":case"embed":zr("load",t),i=r;break;case"video":case"audio":for(i=0;i<Nr.length;i++)zr(Nr[i],t);i=r;break;case"source":zr("error",t),i=r;break;case"img":case"image":case"link":zr("error",t),zr("load",t),i=r;break;case"details":zr("toggle",t),i=r;break;case"input":Y(t,r),i=q(t,r),zr("invalid",t);break;case"option":default:i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=$({},r,{value:void 0}),zr("invalid",t);break;case"textarea":it(t,r),i=rt(t,r),zr("invalid",t)}for(s in vt(n,i),l=i)if(l.hasOwnProperty(s)){var c=l[s];"style"===s?gt(t,c):"dangerouslySetInnerHTML"===s?null!=(c=c?c.__html:void 0)&&ht(t,c):"children"===s?"string"===typeof c?("textarea"!==n||""!==c)&&pt(t,c):"number"===typeof c&&pt(t,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=c&&"onScroll"===s&&zr("scroll",t):null!=c&&b(t,s,c,u))}switch(n){case"input":W(t),Z(t,r,!1);break;case"textarea":W(t),st(t);break;case"option":null!=r.value&&t.setAttribute("value",""+K(r.value));break;case"select":t.multiple=!!r.multiple,null!=(s=r.value)?nt(t,!!r.multiple,s,!1):null!=r.defaultValue&&nt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(t.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Wo(e),null;case 6:if(t&&null!=e.stateNode)Mo(t,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(a(166));if(n=Xa(Ha.current),Xa(Ga.current),ha(e)){if(r=e.stateNode,n=e.memoizedProps,r[pi]=e,(s=r.nodeValue!==n)&&null!==(t=na))switch(t.tag){case 3:Qr(r.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&t.mode))}s&&(e.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[pi]=e,e.stateNode=r}return Wo(e),null;case 13:if(Ai(Za),r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&e.mode)&&0===(128&e.flags))pa(),fa(),e.flags|=98560,s=!1;else if(s=ha(e),null!==r&&null!==r.dehydrated){if(null===t){if(!s)throw Error(a(318));if(!(s=null!==(s=e.memoizedState)?s.dehydrated:null))throw Error(a(317));s[pi]=e}else fa(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Wo(e),s=!1}else null!==aa&&(sl(aa),aa=null),s=!0;if(!s)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((r=null!==r)!==(null!==t&&null!==t.memoizedState)&&r&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&Za.current)?0===Mu&&(Mu=3):ml())),null!==e.updateQueue&&(e.flags|=4),Wo(e),null);case 4:return Ya(),Co(t,e),null===t&&Br(e.stateNode.containerInfo),Wo(e),null;case 10:return _a(e.type._context),Wo(e),null;case 19:if(Ai(Za),null===(s=e.memoizedState))return Wo(e),null;if(r=0!==(128&e.flags),null===(u=s.rendering))if(r)Go(s,!1);else{if(0!==Mu||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(u=ts(t))){for(e.flags|=128,Go(s,!1),null!==(r=u.updateQueue)&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;null!==n;)t=r,(s=n).flags&=14680066,null===(u=s.alternate)?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,t=u.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ei(Za,1&Za.current|2),e.child}t=t.sibling}null!==s.tail&&Jt()>Bu&&(e.flags|=128,r=!0,Go(s,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=ts(u))){if(e.flags|=128,r=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Go(s,!0),null===s.tail&&"hidden"===s.tailMode&&!u.alternate&&!ia)return Wo(e),null}else 2*Jt()-s.renderingStartTime>Bu&&1073741824!==n&&(e.flags|=128,r=!0,Go(s,!1),e.lanes=4194304);s.isBackwards?(u.sibling=e.child,e.child=u):(null!==(n=s.last)?n.sibling=u:e.child=u,s.last=u)}return null!==s.tail?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Jt(),e.sibling=null,n=Za.current,Ei(Za,r?1&n|2:1&n),e):(Wo(e),null);case 22:case 23:return hl(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!==(1&e.mode)?0!==(1073741824&Cu)&&(Wo(e),6&e.subtreeFlags&&(e.flags|=8192)):Wo(e),null;case 24:case 25:return null}throw Error(a(156,e.tag))}function Xo(t,e){switch(ea(e),e.tag){case 1:return Ci(e.type)&&Di(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return Ya(),Ai(Ii),Ai(Oi),ns(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return Qa(e),null;case 13:if(Ai(Za),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(a(340));fa()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Ai(Za),null;case 4:return Ya(),null;case 10:return _a(e.type._context),null;case 22:case 23:return hl(),null;default:return null}}Po=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Co=function(){},Do=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Xa(Ga.current);var a,s=null;switch(n){case"input":i=q(t,i),r=q(t,r),s=[];break;case"select":i=$({},i,{value:void 0}),r=$({},r,{value:void 0}),s=[];break;case"textarea":i=rt(t,i),r=rt(t,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(t.onclick=Zr)}for(c in vt(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(o.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(a in u)!u.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&u[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(s=s||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(o.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&zr("scroll",t),s||u===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}},Mo=function(t,e,n,r){n!==r&&(e.flags|=4)};var qo=!1,Yo=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Qo=null;function Zo(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kl(t,e,r)}else n.current=null}function tu(t,e,n){try{n()}catch(r){kl(t,e,r)}}var eu=!1;function nu(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,void 0!==a&&tu(e,n,a)}i=i.next}while(i!==r)}}function ru(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function iu(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function au(t){var e=t.alternate;null!==e&&(t.alternate=null,au(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[pi],delete e[fi],delete e[mi],delete e[gi],delete e[yi])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function su(t){return 5===t.tag||3===t.tag||4===t.tag}function ou(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||su(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function uu(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Zr));else if(4!==r&&null!==(t=t.child))for(uu(t,e,n),t=t.sibling;null!==t;)uu(t,e,n),t=t.sibling}function lu(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(lu(t,e,n),t=t.sibling;null!==t;)lu(t,e,n),t=t.sibling}var cu=null,hu=!1;function pu(t,e,n){for(n=n.child;null!==n;)fu(t,e,n),n=n.sibling}function fu(t,e,n){if(ae&&"function"===typeof ae.onCommitFiberUnmount)try{ae.onCommitFiberUnmount(ie,n)}catch(o){}switch(n.tag){case 5:Yo||Zo(n,e);case 6:var r=cu,i=hu;cu=null,pu(t,e,n),hu=i,null!==(cu=r)&&(hu?(t=cu,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):cu.removeChild(n.stateNode));break;case 18:null!==cu&&(hu?(t=cu,n=n.stateNode,8===t.nodeType?ui(t.parentNode,n):1===t.nodeType&&ui(t,n),Be(t)):ui(cu,n.stateNode));break;case 4:r=cu,i=hu,cu=n.stateNode.containerInfo,hu=!0,pu(t,e,n),cu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!Yo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,void 0!==s&&(0!==(2&a)||0!==(4&a))&&tu(n,e,s),i=i.next}while(i!==r)}pu(t,e,n);break;case 1:if(!Yo&&(Zo(n,e),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){kl(n,e,o)}pu(t,e,n);break;case 21:pu(t,e,n);break;case 22:1&n.mode?(Yo=(r=Yo)||null!==n.memoizedState,pu(t,e,n),Yo=r):pu(t,e,n);break;default:pu(t,e,n)}}function du(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Jo),e.forEach((function(e){var r=Ol.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function mu(t,e){var n=e.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,u=o;t:for(;null!==u;){switch(u.tag){case 5:cu=u.stateNode,hu=!1;break t;case 3:case 4:cu=u.stateNode.containerInfo,hu=!0;break t}u=u.return}if(null===cu)throw Error(a(160));fu(s,o,i),cu=null,hu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){kl(i,e,c)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)gu(e,t),e=e.sibling}function gu(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mu(e,t),yu(t),4&r){try{nu(3,t,t.return),ru(3,t)}catch(g){kl(t,t.return,g)}try{nu(5,t,t.return)}catch(g){kl(t,t.return,g)}}break;case 1:mu(e,t),yu(t),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(mu(e,t),yu(t),512&r&&null!==n&&Zo(n,n.return),32&t.flags){var i=t.stateNode;try{pt(i,"")}catch(g){kl(t,t.return,g)}}if(4&r&&null!=(i=t.stateNode)){var s=t.memoizedProps,o=null!==n?n.memoizedProps:s,u=t.type,l=t.updateQueue;if(t.updateQueue=null,null!==l)try{"input"===u&&"radio"===s.type&&null!=s.name&&J(i,s),bt(u,o);var c=bt(u,s);for(o=0;o<l.length;o+=2){var h=l[o],p=l[o+1];"style"===h?gt(i,p):"dangerouslySetInnerHTML"===h?ht(i,p):"children"===h?pt(i,p):b(i,h,p,c)}switch(u){case"input":Q(i,s);break;case"textarea":at(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;null!=d?nt(i,!!s.multiple,d,!1):f!==!!s.multiple&&(null!=s.defaultValue?nt(i,!!s.multiple,s.defaultValue,!0):nt(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(g){kl(t,t.return,g)}}break;case 6:if(mu(e,t),yu(t),4&r){if(null===t.stateNode)throw Error(a(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){kl(t,t.return,g)}}break;case 3:if(mu(e,t),yu(t),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Be(e.containerInfo)}catch(g){kl(t,t.return,g)}break;case 4:default:mu(e,t),yu(t);break;case 13:mu(e,t),yu(t),8192&(i=t.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Vu=Jt())),4&r&&du(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Yo=(c=Yo)||h,mu(e,t),Yo=c):mu(e,t),yu(t),8192&r){if(c=null!==t.memoizedState,(t.stateNode.isHidden=c)&&!h&&0!==(1&t.mode))for(Qo=t,h=t.child;null!==h;){for(p=Qo=h;null!==Qo;){switch(d=(f=Qo).child,f.tag){case 0:case 11:case 14:case 15:nu(4,f,f.return);break;case 1:Zo(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){kl(r,n,g)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){wu(p);continue}}null!==d?(d.return=f,Qo=d):wu(p)}h=h.sibling}t:for(h=null,p=t;;){if(5===p.tag){if(null===h){h=p;try{i=p.stateNode,c?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(u=p.stateNode,o=void 0!==(l=p.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=mt("display",o))}catch(g){kl(t,t.return,g)}}}else if(6===p.tag){if(null===h)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(g){kl(t,t.return,g)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===t)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===t)break t;for(;null===p.sibling;){if(null===p.return||p.return===t)break t;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:mu(e,t),yu(t),4&r&&du(t);case 21:}}function yu(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(su(n)){var r=n;break t}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(pt(i,""),r.flags&=-33),lu(t,ou(t),i);break;case 3:case 4:var s=r.stateNode.containerInfo;uu(t,ou(t),s);break;default:throw Error(a(161))}}catch(o){kl(t,t.return,o)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function vu(t,e,n){Qo=t,bu(t,e,n)}function bu(t,e,n){for(var r=0!==(1&t.mode);null!==Qo;){var i=Qo,a=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||qo;if(!s){var o=i.alternate,u=null!==o&&null!==o.memoizedState||Yo;o=qo;var l=Yo;if(qo=s,(Yo=u)&&!l)for(Qo=i;null!==Qo;)u=(s=Qo).child,22===s.tag&&null!==s.memoizedState?Su(i):null!==u?(u.return=s,Qo=u):Su(i);for(;null!==a;)Qo=a,bu(a,e,n),a=a.sibling;Qo=i,qo=o,Yo=l}xu(t)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Qo=a):xu(t)}}function xu(t){for(;null!==Qo;){var e=Qo;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Yo||ru(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!Yo)if(null===n)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:eo(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;null!==s&&Ua(e,s,r);break;case 3:var o=e.updateQueue;if(null!==o){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Ua(e,o,n)}break;case 5:var u=e.stateNode;if(null===n&&4&e.flags){n=u;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var c=e.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var p=h.dehydrated;null!==p&&Be(p)}}}break;default:throw Error(a(163))}Yo||512&e.flags&&iu(e)}catch(f){kl(e,e.return,f)}}if(e===t){Qo=null;break}if(null!==(n=e.sibling)){n.return=e.return,Qo=n;break}Qo=e.return}}function wu(t){for(;null!==Qo;){var e=Qo;if(e===t){Qo=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Qo=n;break}Qo=e.return}}function Su(t){for(;null!==Qo;){var e=Qo;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ru(4,e)}catch(u){kl(e,n,u)}break;case 1:var r=e.stateNode;if("function"===typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(u){kl(e,i,u)}}var a=e.return;try{iu(e)}catch(u){kl(e,a,u)}break;case 5:var s=e.return;try{iu(e)}catch(u){kl(e,s,u)}}}catch(u){kl(e,e.return,u)}if(e===t){Qo=null;break}var o=e.sibling;if(null!==o){o.return=e.return,Qo=o;break}Qo=e.return}}var Tu,ku=Math.ceil,Au=x.ReactCurrentDispatcher,Eu=x.ReactCurrentOwner,_u=x.ReactCurrentBatchConfig,Ou=0,Iu=null,Lu=null,Pu=0,Cu=0,Du=ki(0),Mu=0,Nu=null,ju=0,$u=0,Ru=0,zu=null,Fu=null,Vu=0,Bu=1/0,Uu=null,Ku=!1,Gu=null,Wu=null,Hu=!1,Xu=null,qu=0,Yu=0,Ju=null,Qu=-1,Zu=0;function tl(){return 0!==(6&Ou)?Jt():-1!==Qu?Qu:Qu=Jt()}function el(t){return 0===(1&t.mode)?1:0!==(2&Ou)&&0!==Pu?Pu&-Pu:null!==ma.transition?(0===Zu&&(Zu=me()),Zu):0!==(t=be)?t:t=void 0===(t=window.event)?16:Ye(t.type)}function nl(t,e,n,r){if(50<Yu)throw Yu=0,Ju=null,Error(a(185));ye(t,n,r),0!==(2&Ou)&&t===Iu||(t===Iu&&(0===(2&Ou)&&($u|=n),4===Mu&&ol(t,Pu)),rl(t,r),1===n&&0===Ou&&0===(1&e.mode)&&(Bu=Jt()+500,zi&&Bi()))}function rl(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var s=31-se(a),o=1<<s,u=i[s];-1===u?0!==(o&n)&&0===(o&r)||(i[s]=fe(o,e)):u<=e&&(t.expiredLanes|=o),a&=~o}}(t,e);var r=pe(t,t===Iu?Pu:0);if(0===r)null!==n&&Xt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&Xt(n),1===e)0===t.tag?function(t){zi=!0,Vi(t)}(ul.bind(null,t)):Vi(ul.bind(null,t)),si((function(){0===(6&Ou)&&Bi()})),n=null;else{switch(xe(r)){case 1:n=Zt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=re}n=Il(n,il.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function il(t,e){if(Qu=-1,Zu=0,0!==(6&Ou))throw Error(a(327));var n=t.callbackNode;if(Sl()&&t.callbackNode!==n)return null;var r=pe(t,t===Iu?Pu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&t.expiredLanes)||e)e=gl(t,r);else{e=r;var i=Ou;Ou|=2;var s=dl();for(Iu===t&&Pu===e||(Uu=null,Bu=Jt()+500,pl(t,e));;)try{vl();break}catch(u){fl(t,u)}Ea(),Au.current=s,Ou=i,null!==Lu?e=0:(Iu=null,Pu=0,e=Mu)}if(0!==e){if(2===e&&(0!==(i=de(t))&&(r=i,e=al(t,i))),1===e)throw n=Nu,pl(t,0),ol(t,r),rl(t,Jt()),n;if(6===e)ol(t,r);else{if(i=t.current.alternate,0===(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!or(a(),i))return!1}catch(o){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=gl(t,r))&&(0!==(s=de(t))&&(r=s,e=al(t,s))),1===e))throw n=Nu,pl(t,0),ol(t,r),rl(t,Jt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(a(345));case 2:case 5:wl(t,Fu,Uu);break;case 3:if(ol(t,r),(130023424&r)===r&&10<(e=Vu+500-Jt())){if(0!==pe(t,0))break;if(((i=t.suspendedLanes)&r)!==r){tl(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ri(wl.bind(null,t,Fu,Uu),e);break}wl(t,Fu,Uu);break;case 4:if(ol(t,r),(4194240&r)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-se(r);s=1<<o,(o=e[o])>i&&(i=o),r&=~s}if(r=i,10<(r=(120>(r=Jt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ku(r/1960))-r)){t.timeoutHandle=ri(wl.bind(null,t,Fu,Uu),r);break}wl(t,Fu,Uu);break;default:throw Error(a(329))}}}return rl(t,Jt()),t.callbackNode===n?il.bind(null,t):null}function al(t,e){var n=zu;return t.current.memoizedState.isDehydrated&&(pl(t,e).flags|=256),2!==(t=gl(t,e))&&(e=Fu,Fu=n,null!==e&&sl(e)),t}function sl(t){null===Fu?Fu=t:Fu.push.apply(Fu,t)}function ol(t,e){for(e&=~Ru,e&=~$u,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-se(e),r=1<<n;t[n]=-1,e&=~r}}function ul(t){if(0!==(6&Ou))throw Error(a(327));Sl();var e=pe(t,0);if(0===(1&e))return rl(t,Jt()),null;var n=gl(t,e);if(0!==t.tag&&2===n){var r=de(t);0!==r&&(e=r,n=al(t,r))}if(1===n)throw n=Nu,pl(t,0),ol(t,e),rl(t,Jt()),n;if(6===n)throw Error(a(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wl(t,Fu,Uu),rl(t,Jt()),null}function ll(t,e){var n=Ou;Ou|=1;try{return t(e)}finally{0===(Ou=n)&&(Bu=Jt()+500,zi&&Bi())}}function cl(t){null!==Xu&&0===Xu.tag&&0===(6&Ou)&&Sl();var e=Ou;Ou|=1;var n=_u.transition,r=be;try{if(_u.transition=null,be=1,t)return t()}finally{be=r,_u.transition=n,0===(6&(Ou=e))&&Bi()}}function hl(){Cu=Du.current,Ai(Du)}function pl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,ii(n)),null!==Lu)for(n=Lu.return;null!==n;){var r=n;switch(ea(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:Ya(),Ai(Ii),Ai(Oi),ns();break;case 5:Qa(r);break;case 4:Ya();break;case 13:case 19:Ai(Za);break;case 10:_a(r.type._context);break;case 22:case 23:hl()}n=n.return}if(Iu=t,Lu=t=Dl(t.current,null),Pu=Cu=e,Mu=0,Nu=null,Ru=$u=ju=0,Fu=zu=null,null!==Pa){for(e=0;e<Pa.length;e++)if(null!==(r=(n=Pa[e]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var s=a.next;a.next=i,r.next=s}n.pending=r}Pa=null}return t}function fl(t,e){for(;;){var n=Lu;try{if(Ea(),rs.current=Js,ls){for(var r=ss.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ls=!1}if(as=0,us=os=ss=null,cs=!1,hs=0,Eu.current=null,null===n||null===n.return){Mu=1,Nu=e,Lu=null;break}t:{var s=t,o=n.return,u=n,l=e;if(e=Pu,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,h=u,p=h.tag;if(0===(1&h.mode)&&(0===p||11===p||15===p)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var d=go(o);if(null!==d){d.flags&=-257,yo(d,o,u,0,e),1&d.mode&&mo(s,c,e),l=c;var m=(e=d).updateQueue;if(null===m){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break t}if(0===(1&e)){mo(s,c,e),ml();break t}l=Error(a(426))}else if(ia&&1&u.mode){var y=go(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yo(y,o,u,0,e),da(uo(l,u));break t}}s=l=uo(l,u),4!==Mu&&(Mu=2),null===zu?zu=[s]:zu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e,Va(s,po(0,l,e));break t;case 1:u=l;var v=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Wu||!Wu.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e,Va(s,fo(s,u,e));break t}}s=s.return}while(null!==s)}xl(n)}catch(x){e=x,Lu===n&&null!==n&&(Lu=n=n.return);continue}break}}function dl(){var t=Au.current;return Au.current=Js,null===t?Js:t}function ml(){0!==Mu&&3!==Mu&&2!==Mu||(Mu=4),null===Iu||0===(268435455&ju)&&0===(268435455&$u)||ol(Iu,Pu)}function gl(t,e){var n=Ou;Ou|=2;var r=dl();for(Iu===t&&Pu===e||(Uu=null,pl(t,e));;)try{yl();break}catch(i){fl(t,i)}if(Ea(),Ou=n,Au.current=r,null!==Lu)throw Error(a(261));return Iu=null,Pu=0,Mu}function yl(){for(;null!==Lu;)bl(Lu)}function vl(){for(;null!==Lu&&!qt();)bl(Lu)}function bl(t){var e=Tu(t.alternate,t,Cu);t.memoizedProps=t.pendingProps,null===e?xl(t):Lu=e,Eu.current=null}function xl(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Ho(n,e,Cu)))return void(Lu=n)}else{if(null!==(n=Xo(n,e)))return n.flags&=32767,void(Lu=n);if(null===t)return Mu=6,void(Lu=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Lu=e);Lu=e=t}while(null!==e);0===Mu&&(Mu=5)}function wl(t,e,n){var r=be,i=_u.transition;try{_u.transition=null,be=1,function(t,e,n,r){do{Sl()}while(null!==Xu);if(0!==(6&Ou))throw Error(a(327));n=t.finishedWork;var i=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(a(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-se(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}(t,s),t===Iu&&(Lu=Iu=null,Pu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hu||(Hu=!0,Il(ee,(function(){return Sl(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=_u.transition,_u.transition=null;var o=be;be=1;var u=Ou;Ou|=4,Eu.current=null,function(t,e){if(ti=Ke,fr(t=pr())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(w){n=null;break t}var o=0,u=-1,l=-1,c=0,h=0,p=t,f=null;e:for(;;){for(var d;p!==n||0!==i&&3!==p.nodeType||(u=o+i),p!==s||0!==r&&3!==p.nodeType||(l=o+r),3===p.nodeType&&(o+=p.nodeValue.length),null!==(d=p.firstChild);)f=p,p=d;for(;;){if(p===t)break e;if(f===n&&++c===i&&(u=o),f===s&&++h===r&&(l=o),null!==(d=p.nextSibling))break;f=(p=f).parentNode}p=d}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ei={focusedElem:t,selectionRange:n},Ke=!1,Qo=e;null!==Qo;)if(t=(e=Qo).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Qo=t;else for(;null!==Qo;){e=Qo;try{var m=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:eo(e.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=e.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(a(163))}}catch(w){kl(e,e.return,w)}if(null!==(t=e.sibling)){t.return=e.return,Qo=t;break}Qo=e.return}m=eu,eu=!1}(t,n),gu(n,t),dr(ei),Ke=!!ti,ei=ti=null,t.current=n,vu(n,t,i),Yt(),Ou=u,be=o,_u.transition=s}else t.current=n;if(Hu&&(Hu=!1,Xu=t,qu=i),s=t.pendingLanes,0===s&&(Wu=null),function(t){if(ae&&"function"===typeof ae.onCommitFiberRoot)try{ae.onCommitFiberRoot(ie,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),rl(t,Jt()),null!==e)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ku)throw Ku=!1,t=Gu,Gu=null,t;0!==(1&qu)&&0!==t.tag&&Sl(),s=t.pendingLanes,0!==(1&s)?t===Ju?Yu++:(Yu=0,Ju=t):Yu=0,Bi()}(t,e,n,r)}finally{_u.transition=i,be=r}return null}function Sl(){if(null!==Xu){var t=xe(qu),e=_u.transition,n=be;try{if(_u.transition=null,be=16>t?16:t,null===Xu)var r=!1;else{if(t=Xu,Xu=null,qu=0,0!==(6&Ou))throw Error(a(331));var i=Ou;for(Ou|=4,Qo=t.current;null!==Qo;){var s=Qo,o=s.child;if(0!==(16&Qo.flags)){var u=s.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Qo=c;null!==Qo;){var h=Qo;switch(h.tag){case 0:case 11:case 15:nu(8,h,s)}var p=h.child;if(null!==p)p.return=h,Qo=p;else for(;null!==Qo;){var f=(h=Qo).sibling,d=h.return;if(au(h),h===c){Qo=null;break}if(null!==f){f.return=d,Qo=f;break}Qo=d}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Qo=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,Qo=o;else t:for(;null!==Qo;){if(0!==(2048&(s=Qo).flags))switch(s.tag){case 0:case 11:case 15:nu(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,Qo=v;break t}Qo=s.return}}var b=t.current;for(Qo=b;null!==Qo;){var x=(o=Qo).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,Qo=x;else t:for(o=b;null!==Qo;){if(0!==(2048&(u=Qo).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(S){kl(u,u.return,S)}if(u===o){Qo=null;break t}var w=u.sibling;if(null!==w){w.return=u.return,Qo=w;break t}Qo=u.return}}if(Ou=i,Bi(),ae&&"function"===typeof ae.onPostCommitFiberRoot)try{ae.onPostCommitFiberRoot(ie,t)}catch(S){}r=!0}return r}finally{be=n,_u.transition=e}}return!1}function Tl(t,e,n){t=za(t,e=po(0,e=uo(n,e),1),1),e=tl(),null!==t&&(ye(t,1,e),rl(t,e))}function kl(t,e,n){if(3===t.tag)Tl(t,t,n);else for(;null!==e;){if(3===e.tag){Tl(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wu||!Wu.has(r))){e=za(e,t=fo(e,t=uo(n,t),1),1),t=tl(),null!==e&&(ye(e,1,t),rl(e,t));break}}e=e.return}}function Al(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=tl(),t.pingedLanes|=t.suspendedLanes&n,Iu===t&&(Pu&n)===n&&(4===Mu||3===Mu&&(130023424&Pu)===Pu&&500>Jt()-Vu?pl(t,0):Ru|=n),rl(t,e)}function El(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ce,0===(130023424&(ce<<=1))&&(ce=4194304)));var n=tl();null!==(t=Ma(t,e))&&(ye(t,e,n),rl(t,n))}function _l(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),El(t,n)}function Ol(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(e),El(t,n)}function Il(t,e){return Ht(t,e)}function Ll(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pl(t,e,n,r){return new Ll(t,e,n,r)}function Cl(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Dl(t,e){var n=t.alternate;return null===n?((n=Pl(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ml(t,e,n,r,i,s){var o=2;if(r=t,"function"===typeof t)Cl(t)&&(o=1);else if("string"===typeof t)o=5;else t:switch(t){case T:return Nl(n.children,i,s,e);case k:o=8,i|=8;break;case A:return(t=Pl(12,n,e,2|i)).elementType=A,t.lanes=s,t;case I:return(t=Pl(13,n,e,i)).elementType=I,t.lanes=s,t;case L:return(t=Pl(19,n,e,i)).elementType=L,t.lanes=s,t;case D:return jl(n,i,s,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case E:o=10;break t;case _:o=9;break t;case O:o=11;break t;case P:o=14;break t;case C:o=16,r=null;break t}throw Error(a(130,null==t?t:typeof t,""))}return(e=Pl(o,n,e,i)).elementType=t,e.type=r,e.lanes=s,e}function Nl(t,e,n,r){return(t=Pl(7,t,r,e)).lanes=n,t}function jl(t,e,n,r){return(t=Pl(22,t,r,e)).elementType=D,t.lanes=n,t.stateNode={isHidden:!1},t}function $l(t,e,n){return(t=Pl(6,t,null,e)).lanes=n,t}function Rl(t,e,n){return(e=Pl(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function zl(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ge(0),this.expirationTimes=ge(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ge(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fl(t,e,n,r,i,a,s,o,u){return t=new zl(t,e,n,o,u),1===e?(e=1,!0===a&&(e|=8)):e=0,a=Pl(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ja(a),t}function Vl(t){if(!t)return _i;t:{if(Bt(t=t._reactInternals)!==t||1!==t.tag)throw Error(a(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Ci(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(a(171))}if(1===t.tag){var n=t.type;if(Ci(n))return Ni(t,n,e)}return e}function Bl(t,e,n,r,i,a,s,o,u){return(t=Fl(n,r,!0,t,0,a,0,o,u)).context=Vl(null),n=t.current,(a=Ra(r=tl(),i=el(n))).callback=void 0!==e&&null!==e?e:null,za(n,a,i),t.current.lanes=i,ye(t,i,r),rl(t,r),t}function Ul(t,e,n,r){var i=e.current,a=tl(),s=el(i);return n=Vl(n),null===e.context?e.context=n:e.pendingContext=n,(e=Ra(a,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),null!==(t=za(i,e,s))&&(nl(t,i,s,a),Fa(t,i,s)),s}function Kl(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Gl(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Wl(t,e){Gl(t,e),(t=t.alternate)&&Gl(t,e)}Tu=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ii.current)bo=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return bo=!1,function(t,e,n){switch(e.tag){case 3:Io(e),fa();break;case 5:Ja(e);break;case 1:Ci(e.type)&&ji(e);break;case 4:qa(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ei(Sa,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(Ei(Za,1&Za.current),e.flags|=128,null):0!==(n&e.child.childLanes)?$o(t,e,n):(Ei(Za,1&Za.current),null!==(t=Ko(t,e,n))?t.sibling:null);Ei(Za,1&Za.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(128&t.flags)){if(r)return Bo(t,e,n);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(Za,Za.current),r)break;return null;case 22:case 23:return e.lanes=0,ko(t,e,n)}return Ko(t,e,n)}(t,e,n);bo=0!==(131072&t.flags)}else bo=!1,ia&&0!==(1048576&e.flags)&&Zi(e,Wi,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Uo(t,e),t=e.pendingProps;var i=Pi(e,Oi.current);Ia(e,n),i=ms(null,e,r,t,i,n);var s=gs();return e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ci(r)?(s=!0,ji(e)):s=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ja(e),i.updater=ro,e.stateNode=i,i._reactInternals=e,oo(e,r,t,n),e=Oo(null,e,r,!0,s,n)):(e.tag=0,ia&&s&&ta(e),xo(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(Uo(t,e),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"===typeof t)return Cl(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===O)return 11;if(t===P)return 14}return 2}(r),t=eo(r,t),i){case 0:e=Eo(null,e,r,t,n);break t;case 1:e=_o(null,e,r,t,n);break t;case 11:e=wo(null,e,r,t,n);break t;case 14:e=So(null,e,r,eo(r.type,t),n);break t}throw Error(a(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,Eo(t,e,r,i=e.elementType===r?i:eo(r,i),n);case 1:return r=e.type,i=e.pendingProps,_o(t,e,r,i=e.elementType===r?i:eo(r,i),n);case 3:t:{if(Io(e),null===t)throw Error(a(387));r=e.pendingProps,i=(s=e.memoizedState).element,$a(t,e),Ba(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,256&e.flags){e=Lo(t,e,r,n,i=uo(Error(a(423)),e));break t}if(r!==i){e=Lo(t,e,r,n,i=uo(Error(a(424)),e));break t}for(ra=li(e.stateNode.containerInfo.firstChild),na=e,ia=!0,aa=null,n=wa(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fa(),r===i){e=Ko(t,e,n);break t}xo(t,e,r,n)}e=e.child}return e;case 5:return Ja(e),null===t&&la(e),r=e.type,i=e.pendingProps,s=null!==t?t.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==s&&ni(r,s)&&(e.flags|=32),Ao(t,e),xo(t,e,o,n),e.child;case 6:return null===t&&la(e),null;case 13:return $o(t,e,n);case 4:return qa(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=xa(e,null,r,n):xo(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,wo(t,e,r,i=e.elementType===r?i:eo(r,i),n);case 7:return xo(t,e,e.pendingProps,n),e.child;case 8:case 12:return xo(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ei(Sa,r._currentValue),r._currentValue=o,null!==s)if(or(s.value,o)){if(s.children===i.children&&!Ii.current){e=Ko(t,e,n);break t}}else for(null!==(s=e.child)&&(s.return=e);null!==s;){var u=s.dependencies;if(null!==u){o=s.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===s.tag){(l=Ra(-1,n&-n)).tag=2;var c=s.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Oa(s.return,n,e),u.lanes|=n;break}l=l.next}}else if(10===s.tag)o=s.type===e.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Oa(o,n,e),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===e){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}xo(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ia(e,n),r=r(i=La(i)),e.flags|=1,xo(t,e,r,n),e.child;case 14:return i=eo(r=e.type,e.pendingProps),So(t,e,r,i=eo(r.type,i),n);case 15:return To(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:eo(r,i),Uo(t,e),e.tag=1,Ci(r)?(t=!0,ji(e)):t=!1,Ia(e,n),ao(e,r,i),oo(e,r,i,n),Oo(null,e,r,!0,t,n);case 19:return Bo(t,e,n);case 22:return ko(t,e,n)}throw Error(a(156,e.tag))};var Hl="function"===typeof reportError?reportError:function(t){console.error(t)};function Xl(t){this._internalRoot=t}function ql(t){this._internalRoot=t}function Yl(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Jl(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Ql(){}function Zl(t,e,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if("function"===typeof i){var o=i;i=function(){var t=Kl(s);o.call(t)}}Ul(e,s,t,i)}else s=function(t,e,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var t=Kl(s);a.call(t)}}var s=Bl(e,r,t,0,null,!1,0,"",Ql);return t._reactRootContainer=s,t[di]=s.current,Br(8===t.nodeType?t.parentNode:t),cl(),s}for(;i=t.lastChild;)t.removeChild(i);if("function"===typeof r){var o=r;r=function(){var t=Kl(u);o.call(t)}}var u=Fl(t,0,!1,null,0,!1,0,"",Ql);return t._reactRootContainer=u,t[di]=u.current,Br(8===t.nodeType?t.parentNode:t),cl((function(){Ul(e,u,n,r)})),u}(n,e,t,i,r);return Kl(s)}ql.prototype.render=Xl.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(a(409));Ul(t,e,null,null)},ql.prototype.unmount=Xl.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;cl((function(){Ul(null,t,null,null)})),e[di]=null}},ql.prototype.unstable_scheduleHydration=function(t){if(t){var e=ke();t={blockedOn:null,target:t,priority:e};for(var n=0;n<De.length&&0!==e&&e<De[n].priority;n++);De.splice(n,0,t),0===n&&$e(t)}},we=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(ve(e,1|n),rl(e,Jt()),0===(6&Ou)&&(Bu=Jt()+500,Bi()))}break;case 13:cl((function(){var e=Ma(t,1);if(null!==e){var n=tl();nl(e,t,1,n)}})),Wl(t,1)}},Se=function(t){if(13===t.tag){var e=Ma(t,134217728);if(null!==e)nl(e,t,134217728,tl());Wl(t,134217728)}},Te=function(t){if(13===t.tag){var e=el(t),n=Ma(t,e);if(null!==n)nl(n,t,e,tl());Wl(t,e)}},ke=function(){return be},Ae=function(t,e){var n=be;try{return be=t,e()}finally{be=n}},St=function(t,e,n){switch(e){case"input":if(Q(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=wi(r);if(!i)throw Error(a(90));H(r),Q(r,i)}}}break;case"textarea":at(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Ot=ll,It=cl;var tc={usingClientEntryPoint:!1,Events:[bi,xi,wi,Et,_t,ll]},ec={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:ec.bundleType,version:ec.version,rendererPackageName:ec.rendererPackageName,rendererConfig:ec.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Gt(t))?null:t.stateNode},findFiberByHostInstance:ec.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{ie=rc.inject(nc),ae=rc}catch(ct){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yl(e))throw Error(a(200));return function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Yl(t))throw Error(a(299));var n=!1,r="",i=Hl;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=Fl(t,1,!1,null,0,n,0,r,i),t[di]=e.current,Br(8===t.nodeType?t.parentNode:t),new Xl(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(a(188));throw t=Object.keys(t).join(","),Error(a(268,t))}return t=null===(t=Gt(e))?null:t.stateNode},e.flushSync=function(t){return cl(t)},e.hydrate=function(t,e,n){if(!Jl(e))throw Error(a(200));return Zl(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Yl(t))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",o=Hl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),e=Bl(e,null,t,1,null!=n?n:null,i,0,s,o),t[di]=e.current,Br(t),r)for(t=0;t<r.length;t++)i=(i=(n=r[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ql(e)},e.render=function(t,e,n){if(!Jl(e))throw Error(a(200));return Zl(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Jl(t))throw Error(a(40));return!!t._reactRootContainer&&(cl((function(){Zl(null,null,t,!1,(function(){t._reactRootContainer=null,t[di]=null}))})),!0)},e.unstable_batchedUpdates=ll,e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Jl(n))throw Error(a(200));if(null==t||void 0===t._reactInternals)throw Error(a(38));return Zl(t,e,n,!1,r)},e.version="18.3.1-next-f1338f8080-20240426"},2761:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},2777:(t,e,n)=>{var r=n(5193),i=n(2761),a=Object.prototype,s=a.hasOwnProperty,o=a.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&s.call(t,"callee")&&!o.call(t,"callee")};t.exports=u},2790:function(t,e,n){!function(t){"use strict";function e(t){return Math.max(0,t)}function r(t,e){return t<=0?0:e}var i=Object.freeze({__proto__:null,activate:e,measure:r});function a(t){return 1/(1+Math.exp(-t))}function s(t,e){return t*(1-t)*e}var o=Object.freeze({__proto__:null,activate:a,measure:s});function u(t){return Math.tanh(t)}function l(t,e){return(1-t*t)*e}var c=Object.freeze({__proto__:null,activate:u,measure:l});function h(t){return t>0?t:.01*t}function p(t,e){return t>0?e:.01*e}var f=Object.freeze({__proto__:null,activate:h,measure:p}),d=Object.freeze({__proto__:null,relu:i,sigmoid:o,tanh:c,leakyRelu:f}),m="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{};function g(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return y(t,void 0===e||null===e?n.path:e)}},n.exports),n.exports}function y(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var v=g((function(t,e){var n;n=function(){return function(){function t(e,n,r){function i(s,o){if(!n[s]){if(!e[s]){var u="function"==typeof y&&y;if(!o&&u)return u(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,(function(t){return i(e[s][1][t]||t)}),c,c.exports,t,e,n,r)}return n[s].exports}for(var a="function"==typeof y&&y,s=0;s<r.length;s++)i(r[s]);return i}return t}()({1:[function(t,e,n){!function(t,r){r("object"===typeof n&&"undefined"!==typeof e?n:(t=t||self).acorn={})}(this,(function(t){var e={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},n="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",r={5:n,"5module":n+" export import",6:n+" const class extends export import super"},i=/^in(stanceof)?$/,a="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7c6\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab67\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",s="\u200c\u200d\xb7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",o=new RegExp("["+a+"]"),u=new RegExp("["+a+s+"]");a=s=null;var l=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,155,22,13,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,0,33,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,0,161,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,754,9486,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],c=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,232,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,792487,239];function h(t,e){for(var n=65536,r=0;r<e.length;r+=2){if((n+=e[r])>t)return!1;if((n+=e[r+1])>=t)return!0}}function p(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&o.test(String.fromCharCode(t)):!1!==e&&h(t,l)))}function f(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&u.test(String.fromCharCode(t)):!1!==e&&(h(t,l)||h(t,c)))))}var d=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function m(t,e){return new d(t,{beforeExpr:!0,binop:e})}var g={beforeExpr:!0},y={startsExpr:!0},v={};function b(t,e){return void 0===e&&(e={}),e.keyword=t,v[t]=new d(t,e)}var x={num:new d("num",y),regexp:new d("regexp",y),string:new d("string",y),name:new d("name",y),eof:new d("eof"),bracketL:new d("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new d("]"),braceL:new d("{",{beforeExpr:!0,startsExpr:!0}),braceR:new d("}"),parenL:new d("(",{beforeExpr:!0,startsExpr:!0}),parenR:new d(")"),comma:new d(",",g),semi:new d(";",g),colon:new d(":",g),dot:new d("."),question:new d("?",g),arrow:new d("=>",g),template:new d("template"),invalidTemplate:new d("invalidTemplate"),ellipsis:new d("...",g),backQuote:new d("`",y),dollarBraceL:new d("${",{beforeExpr:!0,startsExpr:!0}),eq:new d("=",{beforeExpr:!0,isAssign:!0}),assign:new d("_=",{beforeExpr:!0,isAssign:!0}),incDec:new d("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new d("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:m("||",1),logicalAND:m("&&",2),bitwiseOR:m("|",3),bitwiseXOR:m("^",4),bitwiseAND:m("&",5),equality:m("==/!=/===/!==",6),relational:m("</>/<=/>=",7),bitShift:m("<</>>/>>>",8),plusMin:new d("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:m("%",10),star:m("*",10),slash:m("/",10),starstar:new d("**",{beforeExpr:!0}),_break:b("break"),_case:b("case",g),_catch:b("catch"),_continue:b("continue"),_debugger:b("debugger"),_default:b("default",g),_do:b("do",{isLoop:!0,beforeExpr:!0}),_else:b("else",g),_finally:b("finally"),_for:b("for",{isLoop:!0}),_function:b("function",y),_if:b("if"),_return:b("return",g),_switch:b("switch"),_throw:b("throw",g),_try:b("try"),_var:b("var"),_const:b("const"),_while:b("while",{isLoop:!0}),_with:b("with"),_new:b("new",{beforeExpr:!0,startsExpr:!0}),_this:b("this",y),_super:b("super",y),_class:b("class",y),_extends:b("extends",g),_export:b("export"),_import:b("import",y),_null:b("null",y),_true:b("true",y),_false:b("false",y),_in:b("in",{beforeExpr:!0,binop:7}),_instanceof:b("instanceof",{beforeExpr:!0,binop:7}),_typeof:b("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:b("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:b("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},w=/\r\n?|\n|\u2028|\u2029/,S=new RegExp(w.source,"g");function T(t,e){return 10===t||13===t||!e&&(8232===t||8233===t)}var k=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,A=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,E=Object.prototype,_=E.hasOwnProperty,O=E.toString;function I(t,e){return _.call(t,e)}var L=Array.isArray||function(t){return"[object Array]"===O.call(t)};function P(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}var C=function(t,e){this.line=t,this.column=e};C.prototype.offset=function(t){return new C(this.line,this.column+t)};var D=function(t,e,n){this.start=e,this.end=n,null!==t.sourceFile&&(this.source=t.sourceFile)};function M(t,e){for(var n=1,r=0;;){S.lastIndex=r;var i=S.exec(t);if(!(i&&i.index<e))return new C(n,e-r);++n,r=i.index+i[0].length}}var N={ecmaVersion:10,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function j(t){var e={};for(var n in N)e[n]=t&&I(t,n)?t[n]:N[n];if(e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),L(e.onToken)){var r=e.onToken;e.onToken=function(t){return r.push(t)}}return L(e.onComment)&&(e.onComment=$(e,e.onComment)),e}function $(t,e){return function(n,r,i,a,s,o){var u={type:n?"Block":"Line",value:r,start:i,end:a};t.locations&&(u.loc=new D(this,s,o)),t.ranges&&(u.range=[i,a]),e.push(u)}}var R=1,z=2,F=R|z,V=4,B=8,U=16,K=32,G=64,W=128;function H(t,e){return z|(t?V:0)|(e?B:0)}var X=0,q=1,Y=2,J=3,Q=4,Z=5,tt=function(t,n,i){this.options=t=j(t),this.sourceFile=t.sourceFile,this.keywords=P(r[t.ecmaVersion>=6?6:"module"===t.sourceType?"5module":5]);var a="";if(!0!==t.allowReserved){for(var s=t.ecmaVersion;!(a=e[s]);s--);"module"===t.sourceType&&(a+=" await")}this.reservedWords=P(a);var o=(a?a+" ":"")+e.strict;this.reservedWordsStrict=P(o),this.reservedWordsStrictBind=P(o+" "+e.strictBind),this.input=String(n),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf("\n",i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(w).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=x.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(R),this.regexpState=null},et={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};tt.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},et.inFunction.get=function(){return(this.currentVarScope().flags&z)>0},et.inGenerator.get=function(){return(this.currentVarScope().flags&B)>0},et.inAsync.get=function(){return(this.currentVarScope().flags&V)>0},et.allowSuper.get=function(){return(this.currentThisScope().flags&G)>0},et.allowDirectSuper.get=function(){return(this.currentThisScope().flags&W)>0},et.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},tt.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&z)>0},tt.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n=this,r=0;r<t.length;r++)n=t[r](n);return n},tt.parse=function(t,e){return new this(e,t).parse()},tt.parseExpressionAt=function(t,e,n){var r=new this(n,t,e);return r.nextToken(),r.parseExpression()},tt.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(tt.prototype,et);var nt=tt.prototype,rt=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)")/;function it(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}nt.strictDirective=function(t){for(;;){A.lastIndex=t,t+=A.exec(this.input)[0].length;var e=rt.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2]))return!0;t+=e[0].length,A.lastIndex=t,t+=A.exec(this.input)[0].length,";"===this.input[t]&&t++}},nt.eat=function(t){return this.type===t&&(this.next(),!0)},nt.isContextual=function(t){return this.type===x.name&&this.value===t&&!this.containsEsc},nt.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},nt.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},nt.canInsertSemicolon=function(){return this.type===x.eof||this.type===x.braceR||w.test(this.input.slice(this.lastTokEnd,this.start))},nt.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},nt.semicolon=function(){this.eat(x.semi)||this.insertSemicolon()||this.unexpected()},nt.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},nt.expect=function(t){this.eat(t)||this.unexpected()},nt.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},nt.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var n=e?t.parenthesizedAssign:t.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},nt.checkExpressionErrors=function(t,e){if(!t)return!1;var n=t.shorthandAssign,r=t.doubleProto;if(!e)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},nt.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},nt.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var at=tt.prototype;at.parseTopLevel=function(t){var e={};for(t.body||(t.body=[]);this.type!==x.eof;){var n=this.parseStatement(null,!0,e);t.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var a=i[r];this.raiseRecoverable(this.undefinedExports[a].start,"Export '"+a+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var st={kind:"loop"},ot={kind:"switch"};at.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;A.lastIndex=this.pos;var e=A.exec(this.input),n=this.pos+e[0].length,r=this.input.charCodeAt(n);if(91===r)return!0;if(t)return!1;if(123===r)return!0;if(p(r,!0)){for(var a=n+1;f(this.input.charCodeAt(a),!0);)++a;var s=this.input.slice(n,a);if(!i.test(s))return!0}return!1},at.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;A.lastIndex=this.pos;var t=A.exec(this.input),e=this.pos+t[0].length;return!w.test(this.input.slice(this.pos,e))&&"function"===this.input.slice(e,e+8)&&(e+8===this.input.length||!f(this.input.charAt(e+8)))},at.parseStatement=function(t,e,n){var r,i=this.type,a=this.startNode();switch(this.isLet(t)&&(i=x._var,r="let"),i){case x._break:case x._continue:return this.parseBreakContinueStatement(a,i.keyword);case x._debugger:return this.parseDebuggerStatement(a);case x._do:return this.parseDoStatement(a);case x._for:return this.parseForStatement(a);case x._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(a,!1,!t);case x._class:return t&&this.unexpected(),this.parseClass(a,!0);case x._if:return this.parseIfStatement(a);case x._return:return this.parseReturnStatement(a);case x._switch:return this.parseSwitchStatement(a);case x._throw:return this.parseThrowStatement(a);case x._try:return this.parseTryStatement(a);case x._const:case x._var:return r=r||this.value,t&&"var"!==r&&this.unexpected(),this.parseVarStatement(a,r);case x._while:return this.parseWhileStatement(a);case x._with:return this.parseWithStatement(a);case x.braceL:return this.parseBlock(!0,a);case x.semi:return this.parseEmptyStatement(a);case x._export:case x._import:if(this.options.ecmaVersion>10&&i===x._import){A.lastIndex=this.pos;var s=A.exec(this.input),o=this.pos+s[0].length;if(40===this.input.charCodeAt(o))return this.parseExpressionStatement(a,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===x._import?this.parseImport(a):this.parseExport(a,n);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(a,!0,!t);var u=this.value,l=this.parseExpression();return i===x.name&&"Identifier"===l.type&&this.eat(x.colon)?this.parseLabeledStatement(a,u,l,t):this.parseExpressionStatement(a,l)}},at.parseBreakContinueStatement=function(t,e){var n="break"===e;this.next(),this.eat(x.semi)||this.insertSemicolon()?t.label=null:this.type!==x.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==t.label||i.name===t.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(t.label&&n)break}}return r===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,n?"BreakStatement":"ContinueStatement")},at.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},at.parseDoStatement=function(t){return this.next(),this.labels.push(st),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(x._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(x.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},at.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(st),this.enterScope(0),this.expect(x.parenL),this.type===x.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var n=this.isLet();if(this.type===x._var||this.type===x._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===x._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===r.declarations.length?(this.options.ecmaVersion>=9&&(this.type===x._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,r)):(e>-1&&this.unexpected(e),this.parseFor(t,r))}var a=new it,s=this.parseExpression(!0,a);return this.type===x._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===x._in?e>-1&&this.unexpected(e):t.await=e>-1),this.toAssignable(s,!1,a),this.checkLVal(s),this.parseForIn(t,s)):(this.checkExpressionErrors(a,!0),e>-1&&this.unexpected(e),this.parseFor(t,s))},at.parseFunctionStatement=function(t,e,n){return this.next(),this.parseFunction(t,lt|(n?0:ct),!1,e)},at.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(x._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},at.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(x.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},at.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(x.braceL),this.labels.push(ot),this.enterScope(0);for(var n=!1;this.type!==x.braceR;)if(this.type===x._case||this.type===x._default){var r=this.type===x._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),r?e.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,e.test=null),this.expect(x.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},at.parseThrowStatement=function(t){return this.next(),w.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var ut=[];at.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===x._catch){var e=this.startNode();if(this.next(),this.eat(x.parenL)){e.param=this.parseBindingAtom();var n="Identifier"===e.param.type;this.enterScope(n?K:0),this.checkLVal(e.param,n?Q:Y),this.expect(x.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(x._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},at.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},at.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(st),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},at.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},at.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},at.parseLabeledStatement=function(t,e,n,r){for(var i=0,a=this.labels;i<a.length;i+=1)a[i].name===e&&this.raise(n.start,"Label '"+e+"' is already declared");for(var s=this.type.isLoop?"loop":this.type===x._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var u=this.labels[o];if(u.statementStart!==t.start)break;u.statementStart=this.start,u.kind=s}return this.labels.push({name:e,kind:s,statementStart:this.start}),t.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),t.label=n,this.finishNode(t,"LabeledStatement")},at.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},at.parseBlock=function(t,e){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(x.braceL),t&&this.enterScope(0);!this.eat(x.braceR);){var n=this.parseStatement(null);e.body.push(n)}return t&&this.exitScope(),this.finishNode(e,"BlockStatement")},at.parseFor=function(t,e){return t.init=e,this.expect(x.semi),t.test=this.type===x.semi?null:this.parseExpression(),this.expect(x.semi),t.update=this.type===x.parenR?null:this.parseExpression(),this.expect(x.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},at.parseForIn=function(t,e){var n=this.type===x._in;return this.next(),"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==e.kind||"Identifier"!==e.declarations[0].id.type)?this.raise(e.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"):"AssignmentPattern"===e.type&&this.raise(e.start,"Invalid left-hand side in for-loop"),t.left=e,t.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(x.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,n?"ForInStatement":"ForOfStatement")},at.parseVar=function(t,e,n){for(t.declarations=[],t.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(x.eq)?r.init=this.parseMaybeAssign(e):"const"!==n||this.type===x._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||e&&(this.type===x._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(x.comma))break}return t},at.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLVal(t.id,"var"===e?q:Y,!1)};var lt=1,ct=2,ht=4;at.parseFunction=function(t,e,n,r){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===x.star&&e&ct&&this.unexpected(),t.generator=this.eat(x.star)),this.options.ecmaVersion>=8&&(t.async=!!r),e&lt&&(t.id=e&ht&&this.type!==x.name?null:this.parseIdent(),!t.id||e&ct||this.checkLVal(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?q:Y:J));var i=this.yieldPos,a=this.awaitPos,s=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(H(t.async,t.generator)),e&lt||(t.id=this.type===x.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,n,!1),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=s,this.finishNode(t,e&lt?"FunctionDeclaration":"FunctionExpression")},at.parseFunctionParams=function(t){this.expect(x.parenL),t.params=this.parseBindingList(x.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},at.parseClass=function(t,e){this.next();var n=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var r=this.startNode(),i=!1;for(r.body=[],this.expect(x.braceL);!this.eat(x.braceR);){var a=this.parseClassElement(null!==t.superClass);a&&(r.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind&&(i&&this.raise(a.start,"Duplicate constructor in the same class"),i=!0))}return t.body=this.finishNode(r,"ClassBody"),this.strict=n,this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},at.parseClassElement=function(t){var e=this;if(this.eat(x.semi))return null;var n=this.startNode(),r=function(t,r){void 0===r&&(r=!1);var i=e.start,a=e.startLoc;return!!e.eatContextual(t)&&(!(e.type===x.parenL||r&&e.canInsertSemicolon())||(n.key&&e.unexpected(),n.computed=!1,n.key=e.startNodeAt(i,a),n.key.name=t,e.finishNode(n.key,"Identifier"),!1))};n.kind="method",n.static=r("static");var i=this.eat(x.star),a=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(a=!0,i=this.options.ecmaVersion>=9&&this.eat(x.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var s=n.key,o=!1;return n.computed||n.static||!("Identifier"===s.type&&"constructor"===s.name||"Literal"===s.type&&"constructor"===s.value)?n.static&&"Identifier"===s.type&&"prototype"===s.name&&this.raise(s.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(s.start,"Constructor can't have get/set modifier"),i&&this.raise(s.start,"Constructor can't be a generator"),a&&this.raise(s.start,"Constructor can't be an async method"),n.kind="constructor",o=t),this.parseClassMethod(n,i,a,o),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},at.parseClassMethod=function(t,e,n,r){return t.value=this.parseMethod(e,n,r),this.finishNode(t,"MethodDefinition")},at.parseClassId=function(t,e){this.type===x.name?(t.id=this.parseIdent(),e&&this.checkLVal(t.id,Y,!1)):(!0===e&&this.unexpected(),t.id=null)},at.parseClassSuper=function(t){t.superClass=this.eat(x._extends)?this.parseExprSubscripts():null},at.parseExport=function(t,e){if(this.next(),this.eat(x.star))return this.expectContextual("from"),this.type!==x.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(x._default)){var n;if(this.checkExport(e,"default",this.lastTokStart),this.type===x._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),t.declaration=this.parseFunction(r,lt|ht,!1,n)}else if(this.type===x._class){var i=this.startNode();t.declaration=this.parseClass(i,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==x.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var a=0,s=t.specifiers;a<s.length;a+=1){var o=s[a];this.checkUnreserved(o.local),this.checkLocalExport(o.local)}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},at.checkExport=function(t,e,n){t&&(I(t,e)&&this.raiseRecoverable(n,"Duplicate export '"+e+"'"),t[e]=!0)},at.checkPatternExport=function(t,e){var n=e.type;if("Identifier"===n)this.checkExport(t,e.name,e.start);else if("ObjectPattern"===n)for(var r=0,i=e.properties;r<i.length;r+=1){var a=i[r];this.checkPatternExport(t,a)}else if("ArrayPattern"===n)for(var s=0,o=e.elements;s<o.length;s+=1){var u=o[s];u&&this.checkPatternExport(t,u)}else"Property"===n?this.checkPatternExport(t,e.value):"AssignmentPattern"===n?this.checkPatternExport(t,e.left):"RestElement"===n?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(t,e.expression)},at.checkVariableExport=function(t,e){if(t)for(var n=0,r=e;n<r.length;n+=1){var i=r[n];this.checkPatternExport(t,i.id)}},at.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},at.parseExportSpecifiers=function(t){var e=[],n=!0;for(this.expect(x.braceL);!this.eat(x.braceR);){if(n)n=!1;else if(this.expect(x.comma),this.afterTrailingComma(x.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(t,r.exported.name,r.exported.start),e.push(this.finishNode(r,"ExportSpecifier"))}return e},at.parseImport=function(t){return this.next(),this.type===x.string?(t.specifiers=ut,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===x.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},at.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===x.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,Y),t.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(x.comma))return t}if(this.type===x.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,Y),t.push(this.finishNode(r,"ImportNamespaceSpecifier")),t}for(this.expect(x.braceL);!this.eat(x.braceR);){if(e)e=!1;else if(this.expect(x.comma),this.afterTrailingComma(x.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,Y),t.push(this.finishNode(i,"ImportSpecifier"))}return t},at.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},at.isDirectiveCandidate=function(t){return"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"===typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var pt=tt.prototype;pt.toAssignable=function(t,e,n){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=t.properties;r<i.length;r+=1){var a=i[r];this.toAssignable(a,e),"RestElement"!==a.type||"ArrayPattern"!==a.argument.type&&"ObjectPattern"!==a.argument.type||this.raise(a.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,n);break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return t},pt.toAssignableList=function(t,e){for(var n=t.length,r=0;r<n;r++){var i=t[r];i&&this.toAssignable(i,e)}if(n){var a=t[n-1];6===this.options.ecmaVersion&&e&&a&&"RestElement"===a.type&&"Identifier"!==a.argument.type&&this.unexpected(a.argument.start)}return t},pt.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},pt.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==x.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},pt.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case x.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(x.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case x.braceL:return this.parseObj(!0)}return this.parseIdent()},pt.parseBindingList=function(t,e,n){for(var r=[],i=!0;!this.eat(t);)if(i?i=!1:this.expect(x.comma),e&&this.type===x.comma)r.push(null);else{if(n&&this.afterTrailingComma(t))break;if(this.type===x.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),r.push(a),this.type===x.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var s=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(s),r.push(s)}return r},pt.parseBindingListItem=function(t){return t},pt.parseMaybeDefault=function(t,e,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(x.eq))return n;var r=this.startNodeAt(t,e);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},pt.checkLVal=function(t,e,n){switch(void 0===e&&(e=X),t.type){case"Identifier":e===Y&&"let"===t.name&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?"Binding ":"Assigning to ")+t.name+" in strict mode"),n&&(I(n,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),n[t.name]=!0),e!==X&&e!==Z&&this.declareName(t.name,e,t.start);break;case"MemberExpression":e&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,i=t.properties;r<i.length;r+=1){var a=i[r];this.checkLVal(a,e,n)}break;case"Property":this.checkLVal(t.value,e,n);break;case"ArrayPattern":for(var s=0,o=t.elements;s<o.length;s+=1){var u=o[s];u&&this.checkLVal(u,e,n)}break;case"AssignmentPattern":this.checkLVal(t.left,e,n);break;case"RestElement":this.checkLVal(t.argument,e,n);break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,n);break;default:this.raise(t.start,(e?"Binding":"Assigning to")+" rvalue")}};var ft=tt.prototype;ft.checkPropClash=function(t,e,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type)&&!(this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var r,i=t.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var a=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===a&&(e.proto&&(n?n.doubleProto<0&&(n.doubleProto=i.start):this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),e.proto=!0);else{var s=e[r="$"+r];s?("init"===a?this.strict&&s.init||s.get||s.set:s.init||s[a])&&this.raiseRecoverable(i.start,"Redefinition of property"):s=e[r]={init:!1,get:!1,set:!1},s[a]=!0}}},ft.parseExpression=function(t,e){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(t,e);if(this.type===x.comma){var a=this.startNodeAt(n,r);for(a.expressions=[i];this.eat(x.comma);)a.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(a,"SequenceExpression")}return i},ft.parseMaybeAssign=function(t,e,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var r=!1,i=-1,a=-1;e?(i=e.parenthesizedAssign,a=e.trailingComma,e.parenthesizedAssign=e.trailingComma=-1):(e=new it,r=!0);var s=this.start,o=this.startLoc;this.type!==x.parenL&&this.type!==x.name||(this.potentialArrowAt=this.start);var u=this.parseMaybeConditional(t,e);if(n&&(u=n.call(this,u,s,o)),this.type.isAssign){var l=this.startNodeAt(s,o);return l.operator=this.value,l.left=this.type===x.eq?this.toAssignable(u,!1,e):u,r||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=l.left.start&&(e.shorthandAssign=-1),this.checkLVal(u),this.next(),l.right=this.parseMaybeAssign(t),this.finishNode(l,"AssignmentExpression")}return r&&this.checkExpressionErrors(e,!0),i>-1&&(e.parenthesizedAssign=i),a>-1&&(e.trailingComma=a),u},ft.parseMaybeConditional=function(t,e){var n=this.start,r=this.startLoc,i=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return i;if(this.eat(x.question)){var a=this.startNodeAt(n,r);return a.test=i,a.consequent=this.parseMaybeAssign(),this.expect(x.colon),a.alternate=this.parseMaybeAssign(t),this.finishNode(a,"ConditionalExpression")}return i},ft.parseExprOps=function(t,e){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)||i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,t)},ft.parseExprOp=function(t,e,n,r,i){var a=this.type.binop;if(null!=a&&(!i||this.type!==x._in)&&a>r){var s=this.type===x.logicalOR||this.type===x.logicalAND,o=this.value;this.next();var u=this.start,l=this.startLoc,c=this.parseExprOp(this.parseMaybeUnary(null,!1),u,l,a,i),h=this.buildBinary(e,n,t,c,o,s);return this.parseExprOp(h,e,n,r,i)}return t},ft.buildBinary=function(t,e,n,r,i,a){var s=this.startNodeAt(t,e);return s.left=n,s.operator=i,s.right=r,this.finishNode(s,a?"LogicalExpression":"BinaryExpression")},ft.parseMaybeUnary=function(t,e){var n,r=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),e=!0;else if(this.type.prefix){var a=this.startNode(),s=this.type===x.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),s?this.checkLVal(a.argument):this.strict&&"delete"===a.operator&&"Identifier"===a.argument.type?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):e=!0,n=this.finishNode(a,s?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(r,i);o.operator=this.value,o.prefix=!1,o.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(o,"UpdateExpression")}}return!e&&this.eat(x.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),"**",!1):n},ft.parseExprSubscripts=function(t){var e=this.start,n=this.startLoc,r=this.parseExprAtom(t);if("ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return r;var i=this.parseSubscripts(r,e,n);return t&&"MemberExpression"===i.type&&(t.parenthesizedAssign>=i.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=i.start&&(t.parenthesizedBind=-1)),i},ft.parseSubscripts=function(t,e,n,r){for(var i=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(t.start,t.end);;){var a=this.parseSubscript(t,e,n,r,i);if(a===t||"ArrowFunctionExpression"===a.type)return a;t=a}},ft.parseSubscript=function(t,e,n,r,i){var a=this.eat(x.bracketL);if(a||this.eat(x.dot)){var s=this.startNodeAt(e,n);s.object=t,s.property=a?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),s.computed=!!a,a&&this.expect(x.bracketR),t=this.finishNode(s,"MemberExpression")}else if(!r&&this.eat(x.parenL)){var o=new it,u=this.yieldPos,l=this.awaitPos,c=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var h=this.parseExprList(x.parenR,this.options.ecmaVersion>=8,!1,o);if(i&&!this.canInsertSemicolon()&&this.eat(x.arrow))return this.checkPatternErrors(o,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=u,this.awaitPos=l,this.awaitIdentPos=c,this.parseArrowExpression(this.startNodeAt(e,n),h,!0);this.checkExpressionErrors(o,!0),this.yieldPos=u||this.yieldPos,this.awaitPos=l||this.awaitPos,this.awaitIdentPos=c||this.awaitIdentPos;var p=this.startNodeAt(e,n);p.callee=t,p.arguments=h,t=this.finishNode(p,"CallExpression")}else if(this.type===x.backQuote){var f=this.startNodeAt(e,n);f.tag=t,f.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(f,"TaggedTemplateExpression")}return t},ft.parseExprAtom=function(t){this.type===x.slash&&this.readRegexp();var e,n=this.potentialArrowAt===this.start;switch(this.type){case x._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),e=this.startNode(),this.next(),this.type!==x.parenL||this.allowDirectSuper||this.raise(e.start,"super() call outside constructor of a subclass"),this.type!==x.dot&&this.type!==x.bracketL&&this.type!==x.parenL&&this.unexpected(),this.finishNode(e,"Super");case x._this:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case x.name:var r=this.start,i=this.startLoc,a=this.containsEsc,s=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&"async"===s.name&&!this.canInsertSemicolon()&&this.eat(x._function))return this.parseFunction(this.startNodeAt(r,i),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(x.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[s],!1);if(this.options.ecmaVersion>=8&&"async"===s.name&&this.type===x.name&&!a)return s=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(x.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[s],!0)}return s;case x.regexp:var o=this.value;return(e=this.parseLiteral(o.value)).regex={pattern:o.pattern,flags:o.flags},e;case x.num:case x.string:return this.parseLiteral(this.value);case x._null:case x._true:case x._false:return(e=this.startNode()).value=this.type===x._null?null:this.type===x._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case x.parenL:var u=this.start,l=this.parseParenAndDistinguishExpression(n);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(l)&&(t.parenthesizedAssign=u),t.parenthesizedBind<0&&(t.parenthesizedBind=u)),l;case x.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(x.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case x.braceL:return this.parseObj(!1,t);case x._function:return e=this.startNode(),this.next(),this.parseFunction(e,0);case x._class:return this.parseClass(this.startNode(),!1);case x._new:return this.parseNew();case x.backQuote:return this.parseTemplate();case x._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},ft.parseExprImport=function(){var t=this.startNode();if(this.next(),this.type===x.parenL)return this.parseDynamicImport(t);this.unexpected()},ft.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(x.parenR)){var e=this.start;this.eat(x.comma)&&this.eat(x.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")},ft.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1)),this.next(),this.finishNode(e,"Literal")},ft.parseParenExpression=function(){this.expect(x.parenL);var t=this.parseExpression();return this.expect(x.parenR),t},ft.parseParenAndDistinguishExpression=function(t){var e,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,s=this.start,o=this.startLoc,u=[],l=!0,c=!1,h=new it,p=this.yieldPos,f=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==x.parenR;){if(l?l=!1:this.expect(x.comma),i&&this.afterTrailingComma(x.parenR,!0)){c=!0;break}if(this.type===x.ellipsis){a=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===x.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}u.push(this.parseMaybeAssign(!1,h,this.parseParenItem))}var d=this.start,m=this.startLoc;if(this.expect(x.parenR),t&&!this.canInsertSemicolon()&&this.eat(x.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=f,this.parseParenArrowList(n,r,u);u.length&&!c||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(h,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=f||this.awaitPos,u.length>1?((e=this.startNodeAt(s,o)).expressions=u,this.finishNodeAt(e,"SequenceExpression",d,m)):e=u[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(n,r);return g.expression=e,this.finishNode(g,"ParenthesizedExpression")}return e},ft.parseParenItem=function(t){return t},ft.parseParenArrowList=function(t,e,n){return this.parseArrowExpression(this.startNodeAt(t,e),n)};var dt=[];ft.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(x.dot)){t.meta=e;var n=this.containsEsc;return t.property=this.parseIdent(!0),("target"!==t.property.name||n)&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(t.start,"new.target can only be used in functions"),this.finishNode(t,"MetaProperty")}var r=this.start,i=this.startLoc,a=this.type===x._import;return t.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),a&&"ImportExpression"===t.callee.type&&this.raise(r,"Cannot use new with import()"),this.eat(x.parenL)?t.arguments=this.parseExprList(x.parenR,this.options.ecmaVersion>=8,!1):t.arguments=dt,this.finishNode(t,"NewExpression")},ft.parseTemplateElement=function(t){var e=t.isTagged,n=this.startNode();return this.type===x.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===x.backQuote,this.finishNode(n,"TemplateElement")},ft.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:e});for(n.quasis=[r];!r.tail;)this.type===x.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(x.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(x.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(n,"TemplateLiteral")},ft.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===x.name||this.type===x.num||this.type===x.string||this.type===x.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===x.star)&&!w.test(this.input.slice(this.lastTokEnd,this.start))},ft.parseObj=function(t,e){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(x.braceR);){if(r)r=!1;else if(this.expect(x.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(x.braceR))break;var a=this.parseProperty(t,e);t||this.checkPropClash(a,i,e),n.properties.push(a)}return this.finishNode(n,t?"ObjectPattern":"ObjectExpression")},ft.parseProperty=function(t,e){var n,r,i,a,s=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(x.ellipsis))return t?(s.argument=this.parseIdent(!1),this.type===x.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(s,"RestElement")):(this.type===x.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),s.argument=this.parseMaybeAssign(!1,e),this.type===x.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(s,"SpreadElement"));this.options.ecmaVersion>=6&&(s.method=!1,s.shorthand=!1,(t||e)&&(i=this.start,a=this.startLoc),t||(n=this.eat(x.star)));var o=this.containsEsc;return this.parsePropertyName(s),!t&&!o&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(s)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(x.star),this.parsePropertyName(s,e)):r=!1,this.parsePropertyValue(s,t,n,r,i,a,e,o),this.finishNode(s,"Property")},ft.parsePropertyValue=function(t,e,n,r,i,a,s,o){if((n||r)&&this.type===x.colon&&this.unexpected(),this.eat(x.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,s),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===x.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(n,r);else if(e||o||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===x.comma||this.type===x.braceR)this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),t.kind="init",e?t.value=this.parseMaybeDefault(i,a,t.key):this.type===x.eq&&s?(s.shorthandAssign<0&&(s.shorthandAssign=this.start),t.value=this.parseMaybeDefault(i,a,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var u="get"===t.kind?0:1;if(t.value.params.length!==u){var l=t.value.start;"get"===t.kind?this.raiseRecoverable(l,"getter should have no params"):this.raiseRecoverable(l,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}},ft.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(x.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(x.bracketR),t.key;t.computed=!1}return t.key=this.type===x.num||this.type===x.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},ft.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},ft.parseMethod=function(t,e,n){var r=this.startNode(),i=this.yieldPos,a=this.awaitPos,s=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=t),this.options.ecmaVersion>=8&&(r.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(H(e,r.generator)|G|(n?W:0)),this.expect(x.parenL),r.params=this.parseBindingList(x.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=s,this.finishNode(r,"FunctionExpression")},ft.parseArrowExpression=function(t,e,n){var r=this.yieldPos,i=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(H(n,!1)|U),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1),this.yieldPos=r,this.awaitPos=i,this.awaitIdentPos=a,this.finishNode(t,"ArrowFunctionExpression")},ft.parseFunctionBody=function(t,e,n){var r=e&&this.type!==x.braceL,i=this.strict,a=!1;if(r)t.body=this.parseMaybeAssign(),t.expression=!0,this.checkParams(t,!1);else{var s=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);i&&!s||(a=this.strictDirective(this.end))&&s&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var o=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(t,!i&&!a&&!e&&!n&&this.isSimpleParamList(t.params)),t.body=this.parseBlock(!1),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=o}this.exitScope(),this.strict&&t.id&&this.checkLVal(t.id,Z),this.strict=i},ft.isSimpleParamList=function(t){for(var e=0,n=t;e<n.length;e+=1)if("Identifier"!==n[e].type)return!1;return!0},ft.checkParams=function(t,e){for(var n={},r=0,i=t.params;r<i.length;r+=1){var a=i[r];this.checkLVal(a,q,e?null:n)}},ft.parseExprList=function(t,e,n,r){for(var i=[],a=!0;!this.eat(t);){if(a)a=!1;else if(this.expect(x.comma),e&&this.afterTrailingComma(t))break;var s=void 0;n&&this.type===x.comma?s=null:this.type===x.ellipsis?(s=this.parseSpread(r),r&&this.type===x.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):s=this.parseMaybeAssign(!1,r),i.push(s)}return i},ft.checkUnreserved=function(t){var e=t.start,n=t.end,r=t.name;this.inGenerator&&"yield"===r&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(e,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,n).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+r+"' is reserved"))},ft.parseIdent=function(t,e){var n=this.startNode();return this.type===x.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!t),this.finishNode(n,"Identifier"),t||(this.checkUnreserved(n),"await"!==n.name||this.awaitIdentPos||(this.awaitIdentPos=n.start)),n},ft.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===x.semi||this.canInsertSemicolon()||this.type!==x.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(x.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},ft.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!1),this.finishNode(t,"AwaitExpression")};var mt=tt.prototype;mt.raise=function(t,e){var n=M(this.input,t);e+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(e);throw r.pos=t,r.loc=n,r.raisedAt=this.pos,r},mt.raiseRecoverable=mt.raise,mt.curPosition=function(){if(this.options.locations)return new C(this.curLine,this.pos-this.lineStart)};var gt=tt.prototype,yt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};gt.enterScope=function(t){this.scopeStack.push(new yt(t))},gt.exitScope=function(){this.scopeStack.pop()},gt.treatFunctionsAsVarInScope=function(t){return t.flags&z||!this.inModule&&t.flags&R},gt.declareName=function(t,e,n){var r=!1;if(e===Y){var i=this.currentScope();r=i.lexical.indexOf(t)>-1||i.functions.indexOf(t)>-1||i.var.indexOf(t)>-1,i.lexical.push(t),this.inModule&&i.flags&R&&delete this.undefinedExports[t]}else if(e===Q)this.currentScope().lexical.push(t);else if(e===J){var a=this.currentScope();r=this.treatFunctionsAsVar?a.lexical.indexOf(t)>-1:a.lexical.indexOf(t)>-1||a.var.indexOf(t)>-1,a.functions.push(t)}else for(var s=this.scopeStack.length-1;s>=0;--s){var o=this.scopeStack[s];if(o.lexical.indexOf(t)>-1&&!(o.flags&K&&o.lexical[0]===t)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(t)>-1){r=!0;break}if(o.var.push(t),this.inModule&&o.flags&R&&delete this.undefinedExports[t],o.flags&F)break}r&&this.raiseRecoverable(n,"Identifier '"+t+"' has already been declared")},gt.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},gt.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},gt.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&F)return e}},gt.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&F&&!(e.flags&U))return e}};var vt=function(t,e,n){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new D(t,n)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},bt=tt.prototype;function xt(t,e,n,r){return t.type=e,t.end=n,this.options.locations&&(t.loc.end=r),this.options.ranges&&(t.range[1]=n),t}bt.startNode=function(){return new vt(this,this.start,this.startLoc)},bt.startNodeAt=function(t,e){return new vt(this,t,e)},bt.finishNode=function(t,e){return xt.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},bt.finishNodeAt=function(t,e,n,r){return xt.call(this,t,e,n,r)};var wt=function(t,e,n,r,i){this.token=t,this.isExpr=!!e,this.preserveSpace=!!n,this.override=r,this.generator=!!i},St={b_stat:new wt("{",!1),b_expr:new wt("{",!0),b_tmpl:new wt("${",!1),p_stat:new wt("(",!1),p_expr:new wt("(",!0),q_tmpl:new wt("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new wt("function",!1),f_expr:new wt("function",!0),f_expr_gen:new wt("function",!0,!1,null,!0),f_gen:new wt("function",!1,!1,null,!0)},Tt=tt.prototype;Tt.initialContext=function(){return[St.b_stat]},Tt.braceIsBlock=function(t){var e=this.curContext();return e===St.f_expr||e===St.f_stat||(t!==x.colon||e!==St.b_stat&&e!==St.b_expr?t===x._return||t===x.name&&this.exprAllowed?w.test(this.input.slice(this.lastTokEnd,this.start)):t===x._else||t===x.semi||t===x.eof||t===x.parenR||t===x.arrow||(t===x.braceL?e===St.b_stat:t!==x._var&&t!==x._const&&t!==x.name&&!this.exprAllowed):!e.isExpr)},Tt.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},Tt.updateContext=function(t){var e,n=this.type;n.keyword&&t===x.dot?this.exprAllowed=!1:(e=n.updateContext)?e.call(this,t):this.exprAllowed=n.beforeExpr},x.parenR.updateContext=x.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===St.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},x.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?St.b_stat:St.b_expr),this.exprAllowed=!0},x.dollarBraceL.updateContext=function(){this.context.push(St.b_tmpl),this.exprAllowed=!0},x.parenL.updateContext=function(t){var e=t===x._if||t===x._for||t===x._with||t===x._while;this.context.push(e?St.p_stat:St.p_expr),this.exprAllowed=!0},x.incDec.updateContext=function(){},x._function.updateContext=x._class.updateContext=function(t){!t.beforeExpr||t===x.semi||t===x._else||t===x._return&&w.test(this.input.slice(this.lastTokEnd,this.start))||(t===x.colon||t===x.braceL)&&this.curContext()===St.b_stat?this.context.push(St.f_stat):this.context.push(St.f_expr),this.exprAllowed=!1},x.backQuote.updateContext=function(){this.curContext()===St.q_tmpl?this.context.pop():this.context.push(St.q_tmpl),this.exprAllowed=!1},x.star.updateContext=function(t){if(t===x._function){var e=this.context.length-1;this.context[e]===St.f_expr?this.context[e]=St.f_expr_gen:this.context[e]=St.f_gen}this.exprAllowed=!0},x.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==x.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var kt="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",At=kt+" Extended_Pictographic",Et={9:kt,10:At,11:At},_t="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Ot="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",It=Ot+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Lt={9:Ot,10:It,11:It+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho"},Pt={};function Ct(t){var e=Pt[t]={binary:P(Et[t]+" "+_t),nonBinary:{General_Category:P(_t),Script:P(Lt[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}Ct(9),Ct(10),Ct(11);var Dt=tt.prototype,Mt=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":""),this.unicodeProperties=Pt[t.options.ecmaVersion>=11?11:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function Nt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function jt(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function $t(t){return p(t,!0)||36===t||95===t}function Rt(t){return f(t,!0)||36===t||95===t||8204===t||8205===t}function zt(t){return t>=65&&t<=90||t>=97&&t<=122}function Ft(t){return t>=0&&t<=1114111}function Vt(t){return 100===t||68===t||115===t||83===t||119===t||87===t}function Bt(t){return zt(t)||95===t}function Ut(t){return Bt(t)||Kt(t)}function Kt(t){return t>=48&&t<=57}function Gt(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function Wt(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function Ht(t){return t>=48&&t<=55}Mt.prototype.reset=function(t,e,n){var r=-1!==n.indexOf("u");this.start=0|t,this.source=e+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},Mt.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},Mt.prototype.at=function(t){var e=this.source,n=e.length;if(t>=n)return-1;var r=e.charCodeAt(t);if(!this.switchU||r<=55295||r>=57344||t+1>=n)return r;var i=e.charCodeAt(t+1);return i>=56320&&i<=57343?(r<<10)+i-56613888:r},Mt.prototype.nextIndex=function(t){var e=this.source,n=e.length;if(t>=n)return n;var r,i=e.charCodeAt(t);return!this.switchU||i<=55295||i>=57344||t+1>=n||(r=e.charCodeAt(t+1))<56320||r>57343?t+1:t+2},Mt.prototype.current=function(){return this.at(this.pos)},Mt.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},Mt.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},Mt.prototype.eat=function(t){return this.current()===t&&(this.advance(),!0)},Dt.validateRegExpFlags=function(t){for(var e=t.validFlags,n=t.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===e.indexOf(i)&&this.raise(t.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},Dt.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},Dt.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,n=t.backReferenceNames;e<n.length;e+=1){var r=n[e];-1===t.groupNames.indexOf(r)&&t.raise("Invalid named capture referenced")}},Dt.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},Dt.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},Dt.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!!(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},Dt.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!n,!0}return t.pos=e,!1},Dt.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},Dt.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},Dt.regexp_eatBracedQuantifier=function(t,e){var n=t.pos;if(t.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue),t.eat(125)))return-1!==i&&i<r&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=n}return!1},Dt.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},Dt.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},Dt.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},Dt.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},Dt.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},Dt.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},Dt.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!jt(e)&&(t.lastIntValue=e,t.advance(),!0)},Dt.regexp_eatPatternCharacters=function(t){for(var e=t.pos,n=0;-1!==(n=t.current())&&!jt(n);)t.advance();return t.pos!==e},Dt.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e)&&(t.advance(),!0)},Dt.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},Dt.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},Dt.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=Nt(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=Nt(t.lastIntValue);return!0}return!1},Dt.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,n=t.current();return t.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(n=t.lastIntValue),$t(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},Dt.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,n=t.current();return t.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(n=t.lastIntValue),Rt(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},Dt.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},Dt.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var n=t.lastIntValue;if(t.switchU)return n>t.maxBackReference&&(t.maxBackReference=n),!0;if(n<=t.numCapturingParens)return!0;t.pos=e}return!1},Dt.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},Dt.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},Dt.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},Dt.regexp_eatZero=function(t){return 48===t.current()&&!Kt(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},Dt.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},Dt.regexp_eatControlLetter=function(t){var e=t.current();return!!zt(e)&&(t.lastIntValue=e%32,t.advance(),!0)},Dt.regexp_eatRegExpUnicodeEscapeSequence=function(t){var e=t.pos;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var n=t.lastIntValue;if(t.switchU&&n>=55296&&n<=56319){var r=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var i=t.lastIntValue;if(i>=56320&&i<=57343)return t.lastIntValue=1024*(n-55296)+(i-56320)+65536,!0}t.pos=r,t.lastIntValue=n}return!0}if(t.switchU&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&Ft(t.lastIntValue))return!0;t.switchU&&t.raise("Invalid unicode escape"),t.pos=e}return!1},Dt.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e)&&(t.lastIntValue=e,t.advance(),!0)},Dt.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},Dt.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(Vt(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},Dt.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var n=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,n,r),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var i=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,i),!0}return!1},Dt.regexp_validateUnicodePropertyNameAndValue=function(t,e,n){I(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(n)||t.raise("Invalid property value")},Dt.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")},Dt.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";Bt(e=t.current());)t.lastStringValue+=Nt(e),t.advance();return""!==t.lastStringValue},Dt.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";Ut(e=t.current());)t.lastStringValue+=Nt(e),t.advance();return""!==t.lastStringValue},Dt.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},Dt.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},Dt.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var n=t.lastIntValue;!t.switchU||-1!==e&&-1!==n||t.raise("Invalid character class"),-1!==e&&-1!==n&&e>n&&t.raise("Range out of order in character class")}}},Dt.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var n=t.current();(99===n||Ht(n))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var r=t.current();return 93!==r&&(t.lastIntValue=r,t.advance(),!0)},Dt.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},Dt.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!Kt(e)&&95!==e)&&(t.lastIntValue=e%32,t.advance(),!0)},Dt.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},Dt.regexp_eatDecimalDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;Kt(n=t.current());)t.lastIntValue=10*t.lastIntValue+(n-48),t.advance();return t.pos!==e},Dt.regexp_eatHexDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;Gt(n=t.current());)t.lastIntValue=16*t.lastIntValue+Wt(n),t.advance();return t.pos!==e},Dt.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var n=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*n+t.lastIntValue:t.lastIntValue=8*e+n}else t.lastIntValue=e;return!0}return!1},Dt.regexp_eatOctalDigit=function(t){var e=t.current();return Ht(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},Dt.regexp_eatFixedHexDigits=function(t,e){var n=t.pos;t.lastIntValue=0;for(var r=0;r<e;++r){var i=t.current();if(!Gt(i))return t.pos=n,!1;t.lastIntValue=16*t.lastIntValue+Wt(i),t.advance()}return!0};var Xt=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new D(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},qt=tt.prototype;function Yt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}qt.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Xt(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},qt.getToken=function(){return this.next(),new Xt(this)},"undefined"!==typeof Symbol&&(qt[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===x.eof,value:e}}}}),qt.curContext=function(){return this.context[this.context.length-1]},qt.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(x.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},qt.readToken=function(t){return p(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},qt.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||t>=57344?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},qt.skipBlockComment=function(){var t,e=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(S.lastIndex=n;(t=S.exec(this.input))&&t.index<this.pos;)++this.curLine,this.lineStart=t.index+t[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,e,this.curPosition())},qt.skipLineComment=function(t){for(var e=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!T(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,n,this.curPosition())},qt.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&k.test(String.fromCharCode(t))))break t;++this.pos}}},qt.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=t,this.value=e,this.updateContext(n)},qt.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(x.ellipsis)):(++this.pos,this.finishToken(x.dot))},qt.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(x.assign,2):this.finishOp(x.slash,1)},qt.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),n=1,r=42===t?x.star:x.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++n,r=x.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(x.assign,n+1):this.finishOp(r,n)},qt.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.finishOp(124===t?x.logicalOR:x.logicalAND,2):61===e?this.finishOp(x.assign,2):this.finishOp(124===t?x.bitwiseOR:x.bitwiseAND,1)},qt.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(x.assign,2):this.finishOp(x.bitwiseXOR,1)},qt.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!w.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(x.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(x.assign,2):this.finishOp(x.plusMin,1)},qt.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),n=1;return e===t?(n=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(x.assign,n+1):this.finishOp(x.bitShift,n)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(n=2),this.finishOp(x.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},qt.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(x.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(x.arrow)):this.finishOp(61===t?x.eq:x.prefix,1)},qt.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(x.parenL);case 41:return++this.pos,this.finishToken(x.parenR);case 59:return++this.pos,this.finishToken(x.semi);case 44:return++this.pos,this.finishToken(x.comma);case 91:return++this.pos,this.finishToken(x.bracketL);case 93:return++this.pos,this.finishToken(x.bracketR);case 123:return++this.pos,this.finishToken(x.braceL);case 125:return++this.pos,this.finishToken(x.braceR);case 58:return++this.pos,this.finishToken(x.colon);case 63:return++this.pos,this.finishToken(x.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(x.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 126:return this.finishOp(x.prefix,1)}this.raise(this.pos,"Unexpected character '"+Yt(t)+"'")},qt.finishOp=function(t,e){var n=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,n)},qt.readRegexp=function(){for(var t,e,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(w.test(r)&&this.raise(n,"Unterminated regular expression"),t)t=!1;else{if("["===r)e=!0;else if("]"===r&&e)e=!1;else if("/"===r&&!e)break;t="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var a=this.pos,s=this.readWord1();this.containsEsc&&this.unexpected(a);var o=this.regexpState||(this.regexpState=new Mt(this));o.reset(n,i,s),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var u=null;try{u=new RegExp(i,s)}catch(l){}return this.finishToken(x.regexp,{pattern:i,flags:s,value:u})},qt.readInt=function(t,e){for(var n=this.pos,r=0,i=0,a=null==e?1/0:e;i<a;++i){var s=this.input.charCodeAt(this.pos),o=void 0;if((o=s>=97?s-97+10:s>=65?s-65+10:s>=48&&s<=57?s-48:1/0)>=t)break;++this.pos,r=r*t+o}return this.pos===n||null!=e&&this.pos-n!==e?null:r},qt.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var n=this.readInt(t);return null==n&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n="undefined"!==typeof BigInt?BigInt(this.input.slice(e,this.pos)):null,++this.pos):p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(x.num,n)},qt.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10)||this.raise(e,"Invalid number");var n=this.pos-e>=2&&48===this.input.charCodeAt(e);n&&this.strict&&this.raise(e,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!t&&this.options.ecmaVersion>=11&&110===r){var i=this.input.slice(e,this.pos),a="undefined"!==typeof BigInt?BigInt(i):null;return++this.pos,p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(x.num,a)}n&&/[89]/.test(this.input.slice(e,this.pos))&&(n=!1),46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=this.input.slice(e,this.pos),o=n?parseInt(s,8):parseFloat(s);return this.finishToken(x.num,o)},qt.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},qt.readString=function(t){for(var e="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===t)break;92===r?(e+=this.input.slice(n,this.pos),e+=this.readEscapedChar(!1),n=this.pos):(T(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(n,this.pos++),this.finishToken(x.string,e)};var Jt={};qt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==Jt)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},qt.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Jt;this.raise(t,e)},qt.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==x.template&&this.type!==x.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(x.template,t)):36===n?(this.pos+=2,this.finishToken(x.dollarBraceL)):(++this.pos,this.finishToken(x.backQuote));if(92===n)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(T(n)){switch(t+=this.input.slice(e,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},qt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(x.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},qt.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Yt(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(t){var n=this.pos-1;return this.invalidStringToken(n,"Invalid escape sequence in template string"),null}default:if(e>=48&&e<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,e=this.input.charCodeAt(this.pos),"0"===r&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-r.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return T(e)?"":String.fromCharCode(e)}},qt.readHexChar=function(t){var e=this.pos,n=this.readInt(16,t);return null===n&&this.invalidStringToken(e,"Bad character escape sequence"),n},qt.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(f(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,t+=this.input.slice(n,this.pos);var a=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var s=this.readCodePoint();(e?p:f)(s,r)||this.invalidStringToken(a,"Invalid Unicode escape"),t+=Yt(s),n=this.pos}e=!1}return t+this.input.slice(n,this.pos)},qt.readWord=function(){var t=this.readWord1(),e=x.name;return this.keywords.test(t)&&(e=v[t]),this.finishToken(e,t)};var Qt="7.1.0";function Zt(t,e){return tt.parse(t,e)}function te(t,e,n){return tt.parseExpressionAt(t,e,n)}function ee(t,e){return tt.tokenizer(t,e)}tt.acorn={Parser:tt,version:Qt,defaultOptions:N,Position:C,SourceLocation:D,getLineInfo:M,Node:vt,TokenType:d,tokTypes:x,keywordTypes:v,TokContext:wt,tokContexts:St,isIdentifierChar:f,isIdentifierStart:p,Token:Xt,isNewLine:T,lineBreak:w,lineBreakG:S,nonASCIIwhitespace:k},t.Node=vt,t.Parser=tt,t.Position=C,t.SourceLocation=D,t.TokContext=wt,t.Token=Xt,t.TokenType=d,t.defaultOptions=N,t.getLineInfo=M,t.isIdentifierChar=f,t.isIdentifierStart=p,t.isNewLine=T,t.keywordTypes=v,t.lineBreak=w,t.lineBreakG=S,t.nonASCIIwhitespace=k,t.parse=Zt,t.parseExpressionAt=te,t.tokContexts=St,t.tokTypes=x,t.tokenizer=ee,t.version=Qt,Object.defineProperty(t,"__esModule",{value:!0})}))},{}],2:[function(t,e,n){},{}],3:[function(t,e,n){function r(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{contextName:n="gl",throwGetError:r,useTrackablePrimitives:s,readPixelsFile:u,recording:l=[],variables:c={},onReadPixels:h,onUnrecognizedArgumentLookup:p}=e,f=new Proxy(t,{get:b}),d=[],m={};let g,y=0,v="";return f;function b(e,f){switch(f){case"addComment":return _;case"checkThrowError":return O;case"getReadPixelsVariableName":return g;case"insertVariable":return S;case"reset":return w;case"setIndent":return k;case"toString":return x;case"getContextVariableName":return P}return"function"===typeof t[f]?function(){switch(f){case"getError":return r?l.push(`${v}if (${n}.getError() !== ${n}.NONE) throw new Error('error');`):l.push(`${v}${n}.getError();`),t.getError();case"getExtension":{const e=`${n}Variables${d.length}`;l.push(`${v}const ${e} = ${n}.getExtension('${arguments[0]}');`);const r=t.getExtension(arguments[0]);if(r&&"object"===typeof r){const t=i(r,{getEntity:T,useTrackablePrimitives:s,recording:l,contextName:e,contextVariables:d,variables:c,indent:v,onUnrecognizedArgumentLookup:p});return d.push(t),t}return d.push(null),r}case"readPixels":const e=d.indexOf(arguments[6]);let o;if(-1===e){const t=L(arguments[6]);t?(o=t,l.push(`${v}${t}`)):(o=`${n}Variable${d.length}`,d.push(arguments[6]),l.push(`${v}const ${o} = new ${arguments[6].constructor.name}(${arguments[6].length});`))}else o=`${n}Variable${e}`;g=o;const f=[arguments[0],arguments[1],arguments[2],arguments[3],T(arguments[4]),T(arguments[5]),o];return l.push(`${v}${n}.readPixels(${f.join(", ")});`),u&&E(arguments[2],arguments[3]),h&&h(o,f),t.readPixels.apply(t,arguments);case"drawBuffers":return l.push(`${v}${n}.drawBuffers([${a(arguments[0],{contextName:n,contextVariables:d,getEntity:T,addVariable:A,variables:c,onUnrecognizedArgumentLookup:p})}]);`),t.drawBuffers(arguments[0])}let e=t[f].apply(t,arguments);switch(typeof e){case"undefined":return void l.push(`${v}${I(f,arguments)};`);case"number":case"boolean":if(s&&-1===d.indexOf(o(e))){l.push(`${v}const ${n}Variable${d.length} = ${I(f,arguments)};`),d.push(e=o(e));break}default:null===e?l.push(`${I(f,arguments)};`):l.push(`${v}const ${n}Variable${d.length} = ${I(f,arguments)};`),d.push(e)}return e}:(m[t[f]]=f,t[f])}function x(){return l.join("\n")}function w(){for(;l.length>0;)l.pop()}function S(t,e){c[t]=e}function T(t){const e=m[t];return e?n+"."+e:t}function k(t){v=" ".repeat(t)}function A(t,e){const r=`${n}Variable${d.length}`;return l.push(`${v}const ${r} = ${e};`),d.push(t),r}function E(t,e){const r=`${n}Variable${d.length}`,i=`imageDatum${y}`;l.push(`${v}let ${i} = ["P3\\n# ${u}.ppm\\n", ${t}, ' ', ${e}, "\\n255\\n"].join("");`),l.push(`${v}for (let i = 0; i < ${i}.length; i += 4) {`),l.push(`${v}  ${i} += ${r}[i] + ' ' + ${r}[i + 1] + ' ' + ${r}[i + 2] + ' ';`),l.push(`${v}}`),l.push(`${v}if (typeof require !== "undefined") {`),l.push(`${v}  require('fs').writeFileSync('./${u}.ppm', ${i});`),l.push(`${v}}`),y++}function _(t){l.push(`${v}// ${t}`)}function O(){l.push(`${v}(() => {\n${v}const error = ${n}.getError();\n${v}if (error !== ${n}.NONE) {\n${v}  const names = Object.getOwnPropertyNames(gl);\n${v}  for (let i = 0; i < names.length; i++) {\n${v}    const name = names[i];\n${v}    if (${n}[name] === error) {\n${v}      throw new Error('${n} threw ' + name);\n${v}    }\n${v}  }\n${v}}\n${v}})();`)}function I(t,e){return`${n}.${t}(${a(e,{contextName:n,contextVariables:d,getEntity:T,addVariable:A,variables:c,onUnrecognizedArgumentLookup:p})})`}function L(t){if(c)for(const e in c)if(c[e]===t)return e;return null}function P(t){const e=d.indexOf(t);return-1!==e?`${n}Variable${e}`:null}}function i(t,e){const n=new Proxy(t,{get:d}),r={},{contextName:i,contextVariables:s,getEntity:u,useTrackablePrimitives:l,recording:c,variables:h,indent:p,onUnrecognizedArgumentLookup:f}=e;return n;function d(e,n){return"function"===typeof e[n]?function(){if("drawBuffersWEBGL"===n)return c.push(`${p}${i}.drawBuffersWEBGL([${a(arguments[0],{contextName:i,contextVariables:s,getEntity:m,addVariable:y,variables:h,onUnrecognizedArgumentLookup:f})}]);`),t.drawBuffersWEBGL(arguments[0]);let e=t[n].apply(t,arguments);switch(typeof e){case"undefined":return void c.push(`${p}${g(n,arguments)};`);case"number":case"boolean":l&&-1===s.indexOf(o(e))?(c.push(`${p}const ${i}Variable${s.length} = ${g(n,arguments)};`),s.push(e=o(e))):(c.push(`${p}const ${i}Variable${s.length} = ${g(n,arguments)};`),s.push(e));break;default:null===e?c.push(`${g(n,arguments)};`):c.push(`${p}const ${i}Variable${s.length} = ${g(n,arguments)};`),s.push(e)}return e}:(r[t[n]]=n,t[n])}function m(t){return r.hasOwnProperty(t)?`${i}.${r[t]}`:u(t)}function g(t,e){return`${i}.${t}(${a(e,{contextName:i,contextVariables:s,getEntity:m,addVariable:y,variables:h,onUnrecognizedArgumentLookup:f})})`}function y(t,e){const n=`${i}Variable${s.length}`;return s.push(t),c.push(`${p}const ${n} = ${e};`),n}}function a(t,e){const{variables:n,onUnrecognizedArgumentLookup:r}=e;return Array.from(t).map((t=>{const n=i(t);return n||s(t,e)})).join(", ");function i(t){if(n)for(const e in n)if(n.hasOwnProperty(e)&&n[e]===t)return e;return r?r(t):null}}function s(t,e){const{contextName:n,contextVariables:r,getEntity:i,addVariable:a,onUnrecognizedArgumentLookup:s}=e;if("undefined"===typeof t)return"undefined";if(null===t)return"null";const o=r.indexOf(t);if(o>-1)return`${n}Variable${o}`;switch(t.constructor.name){case"String":const e=/\n/.test(t),n=/'/.test(t),r=/"/.test(t);return e?"`"+t+"`":n&&!r?'"'+t+'"':"'"+t+"'";case"Number":case"Boolean":return i(t);case"Array":return a(t,`new ${t.constructor.name}([${Array.from(t).join(",")}])`);case"Float32Array":case"Uint8Array":case"Uint16Array":case"Int32Array":return a(t,`new ${t.constructor.name}(${JSON.stringify(Array.from(t))})`);default:if(s){const e=s(t);if(e)return e}throw new Error(`unrecognized argument type ${t.constructor.name}`)}}function o(t){return new t.constructor(t)}"undefined"!==typeof e&&(e.exports={glWiretap:r,glExtensionWiretap:i}),"undefined"!==typeof window&&(r.glExtensionWiretap=i,window.glWiretap=r)},{}],4:[function(t,e,n){function r(t){const e=new Array(t.length);for(let n=0;n<t.length;n++){const r=t[n];r.toArray?e[n]=r.toArray():e[n]=r}return e}function i(){const t=r(arguments),e=new Float32Array(this.output.x);for(let n=0;n<this.output.x;n++)this.thread.x=n,this.thread.y=0,this.thread.z=0,e[n]=this._fn.apply(this,t);return e}function a(){const t=r(arguments),e=new Array(this.output.y);for(let n=0;n<this.output.y;n++){const r=new Float32Array(this.output.x);for(let e=0;e<this.output.x;e++)this.thread.x=e,this.thread.y=n,this.thread.z=0,r[e]=this._fn.apply(this,t);e[n]=r}return e}function s(){const t=r(arguments);for(let e=0;e<this.output.y;e++)for(let n=0;n<this.output.x;n++)this.thread.x=n,this.thread.y=e,this.thread.z=0,this._fn.apply(this,t)}function o(){const t=r(arguments),e=new Array(this.output.z);for(let n=0;n<this.output.z;n++){const r=new Array(this.output.y);for(let e=0;e<this.output.y;e++){const i=new Float32Array(this.output.x);for(let r=0;r<this.output.x;r++)this.thread.x=r,this.thread.y=e,this.thread.z=n,i[r]=this._fn.apply(this,t);r[e]=i}e[n]=r}return e}function u(t){t.setOutput=e=>{t.output=c(e),t.graphical&&l(t)},t.toJSON=()=>{throw new Error("Not usable with gpuMock")},t.setConstants=e=>(t.constants=e,t),t.setGraphical=e=>(t.graphical=e,t),t.setCanvas=e=>(t.canvas=e,t),t.setContext=e=>(t.context=e,t),t.destroy=()=>{},t.validateSettings=()=>{},t.graphical&&t.output&&l(t),t.exec=function(){return new Promise(((e,n)=>{try{e(t.apply(t,arguments))}catch(r){n(r)}}))},t.getPixels=e=>{const{x:n,y:r}=t.output;return e?p(t._imageData.data,n,r):t._imageData.data.slice(0)},t.color=function(e,n,r,i){"undefined"===typeof i&&(i=1),e=Math.floor(255*e),n=Math.floor(255*n),r=Math.floor(255*r),i=Math.floor(255*i);const a=t.output.x,s=t.output.y,o=t.thread.x+(s-t.thread.y-1)*a;t._colorData[4*o+0]=e,t._colorData[4*o+1]=n,t._colorData[4*o+2]=r,t._colorData[4*o+3]=i};const e=()=>t,n=["setWarnVarUsage","setArgumentTypes","setTactic","setOptimizeFloatMemory","setDebug","setLoopMaxIterations","setConstantTypes","setFunctions","setNativeFunctions","setInjectedNative","setPipeline","setPrecision","setOutputToTexture","setImmutable","setStrictIntegers","setDynamicOutput","setHardcodeConstants","setDynamicArguments","setUseLegacyEncoder","setWarnVarUsage","addSubKernel"];for(let r=0;r<n.length;r++)t[n[r]]=e;return t}function l(t){const{x:e,y:n}=t.output;if(t.context&&t.context.createImageData){const r=new Uint8ClampedArray(e*n*4);t._imageData=t.context.createImageData(e,n),t._colorData=r}else{const r=new Uint8ClampedArray(e*n*4);t._imageData={data:r},t._colorData=r}}function c(t){let e=null;if(t.length)if(3===t.length){const[n,r,i]=t;e={x:n,y:r,z:i}}else if(2===t.length){const[n,r]=t;e={x:n,y:r}}else{const[n]=t;e={x:n}}else e=t;return e}function h(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.output?c(e.output):null;function r(){return r.output.z?o.apply(r,arguments):r.output.y?r.graphical?s.apply(r,arguments):a.apply(r,arguments):i.apply(r,arguments)}return r._fn=t,r.constants=e.constants||null,r.context=e.context||null,r.canvas=e.canvas||null,r.graphical=e.graphical||!1,r._imageData=null,r._colorData=null,r.output=n,r.thread={x:0,y:0,z:0},u(r)}function p(t,e,n){const r=n/2|0,i=4*e,a=new Uint8ClampedArray(4*e),s=t.slice(0);for(let o=0;o<r;++o){const t=o*i,e=(n-o-1)*i;a.set(s.subarray(t,t+i)),s.copyWithin(t,e,e+i),s.set(a,e)}return s}e.exports={gpuMock:h}},{}],5:[function(t,e,n){const{utils:r}=t("./utils");function i(t,e){const n=e.toString();return new Function(`return function ${t} (${r.getArgumentNamesFromString(n).join(", ")}) {\n  ${r.getFunctionBodyFromString(n)}\n}`)()}e.exports={alias:i}},{"./utils":114}],6:[function(t,e,n){const{FunctionNode:r}=t("../function-node");class i extends r{astFunction(t,e){if(!this.isRootKernel){e.push("function"),e.push(" "),e.push(this.name),e.push("(");for(let t=0;t<this.argumentNames.length;++t){const n=this.argumentNames[t];t>0&&e.push(", "),e.push("user_"),e.push(n)}e.push(") {\n")}for(let n=0;n<t.body.body.length;++n)this.astGeneric(t.body.body[n],e),e.push("\n");return this.isRootKernel||e.push("}\n"),e}astReturnStatement(t,e){const n=this.returnType||this.getType(t.argument);return this.returnType||(this.returnType=n),this.isRootKernel?(e.push(this.leadingReturnStatement),this.astGeneric(t.argument,e),e.push(";\n"),e.push(this.followingReturnStatement),e.push("continue;\n")):this.isSubKernel?(e.push(`subKernelResult_${this.name} = `),this.astGeneric(t.argument,e),e.push(";"),e.push(`return subKernelResult_${this.name};`)):(e.push("return "),this.astGeneric(t.argument,e),e.push(";")),e}astLiteral(t,e){if(isNaN(t.value))throw this.astErrorOutput("Non-numeric literal not supported : "+t.value,t);return e.push(t.value),e}astBinaryExpression(t,e){return e.push("("),this.astGeneric(t.left,e),e.push(t.operator),this.astGeneric(t.right,e),e.push(")"),e}astIdentifierExpression(t,e){if("Identifier"!==t.type)throw this.astErrorOutput("IdentifierExpression - not an Identifier",t);return"Infinity"===t.name?e.push("Infinity"):this.constants&&this.constants.hasOwnProperty(t.name)?e.push("constants_"+t.name):e.push("user_"+t.name),e}astForStatement(t,e){if("ForStatement"!==t.type)throw this.astErrorOutput("Invalid for statement",t);const n=[],r=[],i=[],a=[];let s=null;if(t.init){this.pushState("in-for-loop-init"),this.astGeneric(t.init,n);for(let t=0;t<n.length;t++)n[t].includes&&n[t].includes(",")&&(s=!1);this.popState("in-for-loop-init")}else s=!1;if(t.test?this.astGeneric(t.test,r):s=!1,t.update?this.astGeneric(t.update,i):s=!1,t.body&&(this.pushState("loop-body"),this.astGeneric(t.body,a),this.popState("loop-body")),null===s&&(s=this.isSafe(t.init)&&this.isSafe(t.test)),s)e.push(`for (${n.join("")};${r.join("")};${i.join("")}){\n`),e.push(a.join("")),e.push("}\n");else{const t=this.getInternalVariableName("safeI");n.length>0&&e.push(n.join(""),";\n"),e.push(`for (let ${t}=0;${t}<LOOP_MAX;${t}++){\n`),r.length>0&&e.push(`if (!${r.join("")}) break;\n`),e.push(a.join("")),e.push(`\n${i.join("")};`),e.push("}\n")}return e}astWhileStatement(t,e){if("WhileStatement"!==t.type)throw this.astErrorOutput("Invalid while statement",t);return e.push("for (let i = 0; i < LOOP_MAX; i++) {"),e.push("if ("),this.astGeneric(t.test,e),e.push(") {\n"),this.astGeneric(t.body,e),e.push("} else {\n"),e.push("break;\n"),e.push("}\n"),e.push("}\n"),e}astDoWhileStatement(t,e){if("DoWhileStatement"!==t.type)throw this.astErrorOutput("Invalid while statement",t);return e.push("for (let i = 0; i < LOOP_MAX; i++) {"),this.astGeneric(t.body,e),e.push("if (!"),this.astGeneric(t.test,e),e.push(") {\n"),e.push("break;\n"),e.push("}\n"),e.push("}\n"),e}astAssignmentExpression(t,e){const n=this.getDeclaration(t.left);if(n&&!n.assignable)throw this.astErrorOutput(`Variable ${t.left.name} is not assignable here`,t);return this.astGeneric(t.left,e),e.push(t.operator),this.astGeneric(t.right,e),e}astBlockStatement(t,e){if(this.isState("loop-body")){this.pushState("block-body");for(let n=0;n<t.body.length;n++)this.astGeneric(t.body[n],e);this.popState("block-body")}else{e.push("{\n");for(let n=0;n<t.body.length;n++)this.astGeneric(t.body[n],e);e.push("}\n")}return e}astVariableDeclaration(t,e){e.push(`${t.kind} `);const{declarations:n}=t;for(let r=0;r<n.length;r++){r>0&&e.push(",");const t=n[r],i=this.getDeclaration(t.id);i.valueType||(i.valueType=this.getType(t.init)),this.astGeneric(t,e)}return this.isState("in-for-loop-init")||e.push(";"),e}astIfStatement(t,e){return e.push("if ("),this.astGeneric(t.test,e),e.push(")"),"BlockStatement"===t.consequent.type?this.astGeneric(t.consequent,e):(e.push(" {\n"),this.astGeneric(t.consequent,e),e.push("\n}\n")),t.alternate&&(e.push("else "),"BlockStatement"===t.alternate.type||"IfStatement"===t.alternate.type?this.astGeneric(t.alternate,e):(e.push(" {\n"),this.astGeneric(t.alternate,e),e.push("\n}\n"))),e}astSwitchStatement(t,e){const{discriminant:n,cases:r}=t;e.push("switch ("),this.astGeneric(n,e),e.push(") {\n");for(let i=0;i<r.length;i++)null!==r[i].test?(e.push("case "),this.astGeneric(r[i].test,e),e.push(":\n"),r[i].consequent&&r[i].consequent.length>0&&(this.astGeneric(r[i].consequent,e),e.push("break;\n"))):(e.push("default:\n"),this.astGeneric(r[i].consequent,e),r[i].consequent&&r[i].consequent.length>0&&e.push("break;\n"));e.push("\n}")}astThisExpression(t,e){return e.push("_this"),e}astMemberExpression(t,e){const{signature:n,type:r,property:i,xProperty:a,yProperty:s,zProperty:o,name:u,origin:l}=this.getMemberExpressionDetails(t);switch(n){case"this.thread.value":return e.push(`_this.thread.${u}`),e;case"this.output.value":switch(u){case"x":e.push("outputX");break;case"y":e.push("outputY");break;case"z":e.push("outputZ");break;default:throw this.astErrorOutput("Unexpected expression",t)}return e;case"value":default:throw this.astErrorOutput("Unexpected expression",t);case"value[]":case"value[][]":case"value[][][]":case"value.value":if("Math"===l)return e.push(Math[u]),e;switch(i){case"r":return e.push(`user_${u}[0]`),e;case"g":return e.push(`user_${u}[1]`),e;case"b":return e.push(`user_${u}[2]`),e;case"a":return e.push(`user_${u}[3]`),e}break;case"this.constants.value":case"this.constants.value[]":case"this.constants.value[][]":case"this.constants.value[][][]":break;case"fn()[]":return this.astGeneric(t.object,e),e.push("["),this.astGeneric(t.property,e),e.push("]"),e;case"fn()[][]":return this.astGeneric(t.object.object,e),e.push("["),this.astGeneric(t.object.property,e),e.push("]"),e.push("["),this.astGeneric(t.property,e),e.push("]"),e}if(!t.computed)switch(r){case"Number":case"Integer":case"Float":case"Boolean":return e.push(`${l}_${u}`),e}const c=`${l}_${u}`;{let t,n;if("constants"===l){const e=this.constants[u];n="Input"===this.constantTypes[u],t=n?e.size:null}else n=this.isInput(u),t=n?this.argumentSizes[this.argumentNames.indexOf(u)]:null;e.push(`${c}`),o&&s?n?(e.push("[("),this.astGeneric(o,e),e.push(`*${this.dynamicArguments?"(outputY * outputX)":t[1]*t[0]})+(`),this.astGeneric(s,e),e.push(`*${this.dynamicArguments?"outputX":t[0]})+`),this.astGeneric(a,e),e.push("]")):(e.push("["),this.astGeneric(o,e),e.push("]"),e.push("["),this.astGeneric(s,e),e.push("]"),e.push("["),this.astGeneric(a,e),e.push("]")):s?n?(e.push("[("),this.astGeneric(s,e),e.push(`*${this.dynamicArguments?"outputX":t[0]})+`),this.astGeneric(a,e),e.push("]")):(e.push("["),this.astGeneric(s,e),e.push("]"),e.push("["),this.astGeneric(a,e),e.push("]")):"undefined"!==typeof a&&(e.push("["),this.astGeneric(a,e),e.push("]"))}return e}astCallExpression(t,e){if("CallExpression"!==t.type)throw this.astErrorOutput("Unknown CallExpression",t);let n=this.astMemberExpressionUnroll(t.callee);this.calledFunctions.indexOf(n)<0&&this.calledFunctions.push(n),this.isAstMathFunction(t),this.onFunctionCall&&this.onFunctionCall(this.name,n,t.arguments),e.push(n),e.push("(");const r=this.lookupFunctionArgumentTypes(n)||[];for(let i=0;i<t.arguments.length;++i){const a=t.arguments[i];let s=this.getType(a);r[i]||this.triggerImplyArgumentType(n,i,s,this),i>0&&e.push(", "),this.astGeneric(a,e)}return e.push(")"),e}astArrayExpression(t,e){const n=this.getType(t),r=t.elements.length,i=[];for(let a=0;a<r;++a){const e=[];this.astGeneric(t.elements[a],e),i.push(e.join(""))}switch(n){case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":e.push(`[${i.join(", ")}]`);break;default:e.push(`new Float32Array([${i.join(", ")}])`)}return e}astDebuggerStatement(t,e){return e.push("debugger;"),e}}e.exports={CPUFunctionNode:i}},{"../function-node":10}],7:[function(t,e,n){const{utils:r}=t("../../utils");function i(t,e){const n=[];for(const r in e){if(!e.hasOwnProperty(r))continue;const i=e[r],a=t[r];switch(i){case"Number":case"Integer":case"Float":case"Boolean":n.push(`${r}:${a}`);break;case"Array(2)":case"Array(3)":case"Array(4)":case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":n.push(`${r}:new ${a.constructor.name}(${JSON.stringify(Array.from(a))})`)}}return`{ ${n.join()} }`}function a(t,e){const n=[],a=[],s=[],o=!/^function/.test(t.color.toString());if(n.push("  const { context, canvas, constants: incomingConstants } = settings;",`  const output = new Int32Array(${JSON.stringify(Array.from(t.output))});`,`  const _constantTypes = ${JSON.stringify(t.constantTypes)};`,`  const _constants = ${i(t.constants,t.constantTypes)};`),a.push("    constants: _constants,","    context,","    output,","    thread: {x: 0, y: 0, z: 0},"),t.graphical){n.push(`  const _imageData = context.createImageData(${t.output[0]}, ${t.output[1]});`),n.push(`  const _colorData = new Uint8ClampedArray(${t.output[0]} * ${t.output[1]} * 4);`);const e=r.flattenFunctionToString((o?"function ":"")+t.color.toString(),{thisLookup:e=>{switch(e){case"_colorData":return"_colorData";case"_imageData":return"_imageData";case"output":return"output";case"thread":return"this.thread"}return JSON.stringify(t[e])},findDependency:(t,e)=>null}),i=r.flattenFunctionToString((o?"function ":"")+t.getPixels.toString(),{thisLookup:e=>{switch(e){case"_colorData":return"_colorData";case"_imageData":return"_imageData";case"output":return"output";case"thread":return"this.thread"}return JSON.stringify(t[e])},findDependency:()=>null});a.push("    _imageData,","    _colorData,",`    color: ${e},`),s.push(`  kernel.getPixels = ${i};`)}const u=[],l=Object.keys(t.constantTypes);for(let r=0;r<l.length;r++)u.push(t.constantTypes[l]);if(-1!==t.argumentTypes.indexOf("HTMLImageArray")||-1!==u.indexOf("HTMLImageArray")){const e=r.flattenFunctionToString((o?"function ":"")+t._imageTo3DArray.toString(),{doNotDefine:["canvas"],findDependency:(e,n)=>"this"===e?(o?"function ":"")+t[n].toString():null,thisLookup:t=>{switch(t){case"canvas":return;case"context":return"context"}}});s.push(e),a.push("    _mediaTo2DArray,"),a.push("    _imageTo3DArray,")}else if(-1!==t.argumentTypes.indexOf("HTMLImage")||-1!==u.indexOf("HTMLImage")){const e=r.flattenFunctionToString((o?"function ":"")+t._mediaTo2DArray.toString(),{findDependency:(t,e)=>null,thisLookup:t=>{switch(t){case"canvas":return"settings.canvas";case"context":return"settings.context"}throw new Error("unhandled thisLookup")}});s.push(e),a.push("    _mediaTo2DArray,")}return`function(settings) {\n${n.join("\n")}\n  for (const p in _constantTypes) {\n    if (!_constantTypes.hasOwnProperty(p)) continue;\n    const type = _constantTypes[p];\n    switch (type) {\n      case 'Number':\n      case 'Integer':\n      case 'Float':\n      case 'Boolean':\n      case 'Array(2)':\n      case 'Array(3)':\n      case 'Array(4)':\n      case 'Matrix(2)':\n      case 'Matrix(3)':\n      case 'Matrix(4)':\n        if (incomingConstants.hasOwnProperty(p)) {\n          console.warn('constant ' + p + ' of type ' + type + ' cannot be resigned');\n        }\n        continue;\n    }\n    if (!incomingConstants.hasOwnProperty(p)) {\n      throw new Error('constant ' + p + ' not found');\n    }\n    _constants[p] = incomingConstants[p];\n  }\n  const kernel = (function() {\n${t._kernelString}\n  })\n    .apply({ ${a.join("\n")} });\n  ${s.join("\n")}\n  return kernel;\n}`}e.exports={cpuKernelString:a}},{"../../utils":114}],8:[function(t,e,n){const{Kernel:r}=t("../kernel"),{FunctionBuilder:i}=t("../function-builder"),{CPUFunctionNode:a}=t("./function-node"),{utils:s}=t("../../utils"),{cpuKernelString:o}=t("./kernel-string");class u extends r{static getFeatures(){return this.features}static get features(){return Object.freeze({kernelMap:!0,isIntegerDivisionAccurate:!0})}static get isSupported(){return!0}static isContextMatch(t){return!1}static get mode(){return"cpu"}static nativeFunctionArguments(){return null}static nativeFunctionReturnType(){throw new Error(`Looking up native function return type not supported on ${this.name}`)}static combineKernels(t){return t}static getSignature(t,e){return"cpu"+(e.length>0?":"+e.join(","):"")}constructor(t,e){super(t,e),this.mergeSettings(t.settings||e),this._imageData=null,this._colorData=null,this._kernelString=null,this._prependedString=[],this.thread={x:0,y:0,z:0},this.translatedSources=null}initCanvas(){return"undefined"!==typeof document?document.createElement("canvas"):"undefined"!==typeof OffscreenCanvas?new OffscreenCanvas(0,0):void 0}initContext(){return this.canvas?this.canvas.getContext("2d"):null}initPlugins(t){return[]}validateSettings(t){if(!this.output||0===this.output.length){if(1!==t.length)throw new Error("Auto output only supported for kernels with only one input");const e=s.getVariableType(t[0],this.strictIntegers);if("Array"===e)this.output=s.getDimensions(e);else{if("NumberTexture"!==e&&"ArrayTexture(4)"!==e)throw new Error("Auto output not supported for input type: "+e);this.output=t[0].output}}if(this.graphical&&2!==this.output.length)throw new Error("Output must have 2 dimensions on graphical mode");this.checkOutput()}translateSource(){if(this.leadingReturnStatement=this.output.length>1?"resultX[x] = ":"result[x] = ",this.subKernels){const t=[];for(let e=0;e<this.subKernels.length;e++){const{name:n}=this.subKernels[e];t.push(this.output.length>1?`resultX_${n}[x] = subKernelResult_${n};\n`:`result_${n}[x] = subKernelResult_${n};\n`)}this.followingReturnStatement=t.join("")}const t=i.fromKernel(this,a);this.translatedSources=t.getPrototypes("kernel"),this.graphical||this.returnType||(this.returnType=t.getKernelResultType())}build(){if(this.built)return;if(this.setupConstants(),this.setupArguments(arguments),this.validateSettings(arguments),this.translateSource(),this.graphical){const{canvas:t,output:e}=this;if(!t)throw new Error("no canvas available for using graphical output");const n=e[0],r=e[1]||1;t.width=n,t.height=r,this._imageData=this.context.createImageData(n,r),this._colorData=new Uint8ClampedArray(n*r*4)}const t=this.getKernelString();this.kernelString=t,this.debug&&(console.log("Function output:"),console.log(t));try{this.run=new Function([],t).bind(this)()}catch(e){console.error("An error occurred compiling the javascript: ",e)}this.buildSignature(arguments),this.built=!0}color(t,e,n,r){"undefined"===typeof r&&(r=1),t=Math.floor(255*t),e=Math.floor(255*e),n=Math.floor(255*n),r=Math.floor(255*r);const i=this.output[0],a=this.output[1],s=this.thread.x+(a-this.thread.y-1)*i;this._colorData[4*s+0]=t,this._colorData[4*s+1]=e,this._colorData[4*s+2]=n,this._colorData[4*s+3]=r}getKernelString(){if(null!==this._kernelString)return this._kernelString;let t=null,{translatedSources:e}=this;return e.length>1?e=e.filter((e=>/^function/.test(e)?e:(t=e,!1))):t=e.shift(),this._kernelString=`  const LOOP_MAX = ${this._getLoopMaxString()};\n  ${this.injectedNative||""}\n  const _this = this;\n  ${this._resultKernelHeader()}\n  ${this._processConstants()}\n  return (${this.argumentNames.map((t=>"user_"+t)).join(", ")}) => {\n    ${this._prependedString.join("")}\n    ${this._earlyThrows()}\n    ${this._processArguments()}\n    ${this.graphical?this._graphicalKernelBody(t):this._resultKernelBody(t)}\n    ${e.length>0?e.join("\n"):""}\n  };`}toString(){return o(this)}_getLoopMaxString(){return this.loopMaxIterations?` ${parseInt(this.loopMaxIterations)};`:" 1000;"}_processConstants(){if(!this.constants)return"";const t=[];for(let e in this.constants)switch(this.constantTypes[e]){case"HTMLCanvas":case"OffscreenCanvas":case"HTMLImage":case"ImageBitmap":case"ImageData":case"HTMLVideo":t.push(`    const constants_${e} = this._mediaTo2DArray(this.constants.${e});\n`);break;case"HTMLImageArray":t.push(`    const constants_${e} = this._imageTo3DArray(this.constants.${e});\n`);break;case"Input":t.push(`    const constants_${e} = this.constants.${e}.value;\n`);break;default:t.push(`    const constants_${e} = this.constants.${e};\n`)}return t.join("")}_earlyThrows(){if(this.graphical)return"";if(this.immutable)return"";if(!this.pipeline)return"";const t=[];for(let n=0;n<this.argumentTypes.length;n++)"Array"===this.argumentTypes[n]&&t.push(this.argumentNames[n]);if(0===t.length)return"";const e=[];for(let n=0;n<t.length;n++){const r=t[n],i=this._mapSubKernels((t=>`user_${r} === result_${t.name}`)).join(" || ");e.push(`user_${r} === result${i?` || ${i}`:""}`)}return`if (${e.join(" || ")}) throw new Error('Source and destination arrays are the same.  Use immutable = true');`}_processArguments(){const t=[];for(let e=0;e<this.argumentTypes.length;e++){const n=`user_${this.argumentNames[e]}`;switch(this.argumentTypes[e]){case"HTMLCanvas":case"OffscreenCanvas":case"HTMLImage":case"ImageBitmap":case"ImageData":case"HTMLVideo":t.push(`    ${n} = this._mediaTo2DArray(${n});\n`);break;case"HTMLImageArray":t.push(`    ${n} = this._imageTo3DArray(${n});\n`);break;case"Input":t.push(`    ${n} = ${n}.value;\n`);break;case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":case"NumberTexture":case"MemoryOptimizedNumberTexture":t.push(`\n    if (${n}.toArray) {\n      if (!_this.textureCache) {\n        _this.textureCache = [];\n        _this.arrayCache = [];\n      }\n      const textureIndex = _this.textureCache.indexOf(${n});\n      if (textureIndex !== -1) {\n        ${n} = _this.arrayCache[textureIndex];\n      } else {\n        _this.textureCache.push(${n});\n        ${n} = ${n}.toArray();\n        _this.arrayCache.push(${n});\n      }\n    }`)}}return t.join("")}_mediaTo2DArray(t){const e=this.canvas,n=t.width>0?t.width:t.videoWidth,r=t.height>0?t.height:t.videoHeight;e.width<n&&(e.width=n),e.height<r&&(e.height=r);const i=this.context;let a;t.constructor===ImageData?a=t.data:(i.drawImage(t,0,0,n,r),a=i.getImageData(0,0,n,r).data);const s=new Array(r);let o=0;for(let u=r-1;u>=0;u--){const t=s[u]=new Array(n);for(let e=0;e<n;e++){const n=new Float32Array(4);n[0]=a[o++]/255,n[1]=a[o++]/255,n[2]=a[o++]/255,n[3]=a[o++]/255,t[e]=n}}return s}getPixels(t){const[e,n]=this.output;return t?s.flipPixels(this._imageData.data,e,n):this._imageData.data.slice(0)}_imageTo3DArray(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=this._mediaTo2DArray(t[n]);return e}_resultKernelHeader(){if(this.graphical)return"";if(this.immutable)return"";if(!this.pipeline)return"";switch(this.output.length){case 1:return this._mutableKernel1DResults();case 2:return this._mutableKernel2DResults();case 3:return this._mutableKernel3DResults()}}_resultKernelBody(t){switch(this.output.length){case 1:return(!this.immutable&&this.pipeline?this._resultMutableKernel1DLoop(t):this._resultImmutableKernel1DLoop(t))+this._kernelOutput();case 2:return(!this.immutable&&this.pipeline?this._resultMutableKernel2DLoop(t):this._resultImmutableKernel2DLoop(t))+this._kernelOutput();case 3:return(!this.immutable&&this.pipeline?this._resultMutableKernel3DLoop(t):this._resultImmutableKernel3DLoop(t))+this._kernelOutput();default:throw new Error("unsupported size kernel")}}_graphicalKernelBody(t){if(2===this.output.length)return this._graphicalKernel2DLoop(t)+this._graphicalOutput();throw new Error("unsupported size kernel")}_graphicalOutput(){return"\n    this._imageData.data.set(this._colorData);\n    this.context.putImageData(this._imageData, 0, 0);\n    return;"}_getKernelResultTypeConstructorString(){switch(this.returnType){case"LiteralInteger":case"Number":case"Integer":case"Float":return"Float32Array";case"Array(2)":case"Array(3)":case"Array(4)":return"Array";default:if(this.graphical)return"Float32Array";throw new Error(`unhandled returnType ${this.returnType}`)}}_resultImmutableKernel1DLoop(t){const e=this._getKernelResultTypeConstructorString();return`  const outputX = _this.output[0];\n    const result = new ${e}(outputX);\n    ${this._mapSubKernels((t=>`const result_${t.name} = new ${e}(outputX);\n`)).join("    ")}\n    ${this._mapSubKernels((t=>`let subKernelResult_${t.name};\n`)).join("    ")}\n    for (let x = 0; x < outputX; x++) {\n      this.thread.x = x;\n      this.thread.y = 0;\n      this.thread.z = 0;\n      ${t}\n    }`}_mutableKernel1DResults(){const t=this._getKernelResultTypeConstructorString();return`  const outputX = _this.output[0];\n    const result = new ${t}(outputX);\n    ${this._mapSubKernels((e=>`const result_${e.name} = new ${t}(outputX);\n`)).join("    ")}\n    ${this._mapSubKernels((t=>`let subKernelResult_${t.name};\n`)).join("    ")}`}_resultMutableKernel1DLoop(t){return`  const outputX = _this.output[0];\n    for (let x = 0; x < outputX; x++) {\n      this.thread.x = x;\n      this.thread.y = 0;\n      this.thread.z = 0;\n      ${t}\n    }`}_resultImmutableKernel2DLoop(t){const e=this._getKernelResultTypeConstructorString();return`  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const result = new Array(outputY);\n    ${this._mapSubKernels((t=>`const result_${t.name} = new Array(outputY);\n`)).join("    ")}\n    ${this._mapSubKernels((t=>`let subKernelResult_${t.name};\n`)).join("    ")}\n    for (let y = 0; y < outputY; y++) {\n      this.thread.z = 0;\n      this.thread.y = y;\n      const resultX = result[y] = new ${e}(outputX);\n      ${this._mapSubKernels((t=>`const resultX_${t.name} = result_${t.name}[y] = new ${e}(outputX);\n`)).join("")}\n      for (let x = 0; x < outputX; x++) {\n        this.thread.x = x;\n        ${t}\n      }\n    }`}_mutableKernel2DResults(){const t=this._getKernelResultTypeConstructorString();return`  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const result = new Array(outputY);\n    ${this._mapSubKernels((t=>`const result_${t.name} = new Array(outputY);\n`)).join("    ")}\n    ${this._mapSubKernels((t=>`let subKernelResult_${t.name};\n`)).join("    ")}\n    for (let y = 0; y < outputY; y++) {\n      const resultX = result[y] = new ${t}(outputX);\n      ${this._mapSubKernels((e=>`const resultX_${e.name} = result_${e.name}[y] = new ${t}(outputX);\n`)).join("")}\n    }`}_resultMutableKernel2DLoop(t){const e=this._getKernelResultTypeConstructorString();return`  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    for (let y = 0; y < outputY; y++) {\n      this.thread.z = 0;\n      this.thread.y = y;\n      const resultX = result[y];\n      ${this._mapSubKernels((t=>`const resultX_${t.name} = result_${t.name}[y] = new ${e}(outputX);\n`)).join("")}\n      for (let x = 0; x < outputX; x++) {\n        this.thread.x = x;\n        ${t}\n      }\n    }`}_graphicalKernel2DLoop(t){return`  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    for (let y = 0; y < outputY; y++) {\n      this.thread.z = 0;\n      this.thread.y = y;\n      for (let x = 0; x < outputX; x++) {\n        this.thread.x = x;\n        ${t}\n      }\n    }`}_resultImmutableKernel3DLoop(t){const e=this._getKernelResultTypeConstructorString();return`  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const outputZ = _this.output[2];\n    const result = new Array(outputZ);\n    ${this._mapSubKernels((t=>`const result_${t.name} = new Array(outputZ);\n`)).join("    ")}\n    ${this._mapSubKernels((t=>`let subKernelResult_${t.name};\n`)).join("    ")}\n    for (let z = 0; z < outputZ; z++) {\n      this.thread.z = z;\n      const resultY = result[z] = new Array(outputY);\n      ${this._mapSubKernels((t=>`const resultY_${t.name} = result_${t.name}[z] = new Array(outputY);\n`)).join("      ")}\n      for (let y = 0; y < outputY; y++) {\n        this.thread.y = y;\n        const resultX = resultY[y] = new ${e}(outputX);\n        ${this._mapSubKernels((t=>`const resultX_${t.name} = resultY_${t.name}[y] = new ${e}(outputX);\n`)).join("        ")}\n        for (let x = 0; x < outputX; x++) {\n          this.thread.x = x;\n          ${t}\n        }\n      }\n    }`}_mutableKernel3DResults(){const t=this._getKernelResultTypeConstructorString();return`  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const outputZ = _this.output[2];\n    const result = new Array(outputZ);\n    ${this._mapSubKernels((t=>`const result_${t.name} = new Array(outputZ);\n`)).join("    ")}\n    ${this._mapSubKernels((t=>`let subKernelResult_${t.name};\n`)).join("    ")}\n    for (let z = 0; z < outputZ; z++) {\n      const resultY = result[z] = new Array(outputY);\n      ${this._mapSubKernels((t=>`const resultY_${t.name} = result_${t.name}[z] = new Array(outputY);\n`)).join("      ")}\n      for (let y = 0; y < outputY; y++) {\n        const resultX = resultY[y] = new ${t}(outputX);\n        ${this._mapSubKernels((e=>`const resultX_${e.name} = resultY_${e.name}[y] = new ${t}(outputX);\n`)).join("        ")}\n      }\n    }`}_resultMutableKernel3DLoop(t){return`  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const outputZ = _this.output[2];\n    for (let z = 0; z < outputZ; z++) {\n      this.thread.z = z;\n      const resultY = result[z];\n      for (let y = 0; y < outputY; y++) {\n        this.thread.y = y;\n        const resultX = resultY[y];\n        for (let x = 0; x < outputX; x++) {\n          this.thread.x = x;\n          ${t}\n        }\n      }\n    }`}_kernelOutput(){return this.subKernels?`\n    return {\n      result: result,\n      ${this.subKernels.map((t=>`${t.property}: result_${t.name}`)).join(",\n      ")}\n    };`:"\n    return result;"}_mapSubKernels(t){return null===this.subKernels?[""]:this.subKernels.map(t)}destroy(t){t&&delete this.canvas}static destroyContext(t){}toJSON(){const t=super.toJSON();return t.functionNodes=i.fromKernel(this,a).toJSON(),t}setOutput(t){super.setOutput(t);const[e,n]=this.output;this.graphical&&(this._imageData=this.context.createImageData(e,n),this._colorData=new Uint8ClampedArray(e*n*4))}prependString(t){if(this._kernelString)throw new Error("Kernel already built");this._prependedString.push(t)}hasPrependString(t){return this._prependedString.indexOf(t)>-1}}e.exports={CPUKernel:u}},{"../../utils":114,"../function-builder":9,"../kernel":36,"./function-node":6,"./kernel-string":7}],9:[function(t,e,n){class r{static fromKernel(t,e,n){const{kernelArguments:i,kernelConstants:a,argumentNames:s,argumentSizes:o,argumentBitRatios:u,constants:l,constantBitRatios:c,debug:h,loopMaxIterations:p,nativeFunctions:f,output:d,optimizeFloatMemory:m,precision:g,plugins:y,source:v,subKernels:b,functions:x,leadingReturnStatement:w,followingReturnStatement:S,dynamicArguments:T,dynamicOutput:k}=t,A=new Array(i.length),E={};for(let r=0;r<i.length;r++)A[r]=i[r].type;for(let r=0;r<a.length;r++){const t=a[r];E[t.name]=t.type}const _=(t,e)=>B.needsArgumentType(t,e),O=(t,e,n)=>{B.assignArgumentType(t,e,n)},I=(t,e,n)=>B.lookupReturnType(t,e,n),L=t=>B.lookupFunctionArgumentTypes(t),P=(t,e)=>B.lookupFunctionArgumentName(t,e),C=(t,e)=>B.lookupFunctionArgumentBitRatio(t,e),D=(t,e,n,r)=>{B.assignArgumentType(t,e,n,r)},M=(t,e,n,r)=>{B.assignArgumentBitRatio(t,e,n,r)},N=(t,e,n)=>{B.trackFunctionCall(t,e,n)},j=(t,n)=>{const r=[];for(let e=0;e<t.params.length;e++)r.push(t.params[e].name);const i=new e(n,Object.assign({},$,{returnType:null,ast:t,name:t.id.name,argumentNames:r,lookupReturnType:I,lookupFunctionArgumentTypes:L,lookupFunctionArgumentName:P,lookupFunctionArgumentBitRatio:C,needsArgumentType:_,assignArgumentType:O,triggerImplyArgumentType:D,triggerImplyArgumentBitRatio:M,onFunctionCall:N}));i.traceFunctionAST(t),B.addFunctionNode(i)},$=Object.assign({isRootKernel:!1,onNestedFunction:j,lookupReturnType:I,lookupFunctionArgumentTypes:L,lookupFunctionArgumentName:P,lookupFunctionArgumentBitRatio:C,needsArgumentType:_,assignArgumentType:O,triggerImplyArgumentType:D,triggerImplyArgumentBitRatio:M,onFunctionCall:N,optimizeFloatMemory:m,precision:g,constants:l,constantTypes:E,constantBitRatios:c,debug:h,loopMaxIterations:p,output:d,plugins:y,dynamicArguments:T,dynamicOutput:k},n||{}),R=Object.assign({},$,{isRootKernel:!0,name:"kernel",argumentNames:s,argumentTypes:A,argumentSizes:o,argumentBitRatios:u,leadingReturnStatement:w,followingReturnStatement:S});if("object"===typeof v&&v.functionNodes)return(new r).fromJSON(v.functionNodes,e);const z=new e(v,R);let F=null;x&&(F=x.map((t=>new e(t.source,{returnType:t.returnType,argumentTypes:t.argumentTypes,output:d,plugins:y,constants:l,constantTypes:E,constantBitRatios:c,optimizeFloatMemory:m,precision:g,lookupReturnType:I,lookupFunctionArgumentTypes:L,lookupFunctionArgumentName:P,lookupFunctionArgumentBitRatio:C,needsArgumentType:_,assignArgumentType:O,triggerImplyArgumentType:D,triggerImplyArgumentBitRatio:M,onFunctionCall:N,onNestedFunction:j}))));let V=null;b&&(V=b.map((t=>{const{name:n,source:r}=t;return new e(r,Object.assign({},$,{name:n,isSubKernel:!0,isRootKernel:!1}))})));const B=new r({kernel:t,rootNode:z,functionNodes:F,nativeFunctions:f,subKernelNodes:V});return B}constructor(t){if(t=t||{},this.kernel=t.kernel,this.rootNode=t.rootNode,this.functionNodes=t.functionNodes||[],this.subKernelNodes=t.subKernelNodes||[],this.nativeFunctions=t.nativeFunctions||[],this.functionMap={},this.nativeFunctionNames=[],this.lookupChain=[],this.functionNodeDependencies={},this.functionCalls={},this.rootNode&&(this.functionMap.kernel=this.rootNode),this.functionNodes)for(let e=0;e<this.functionNodes.length;e++)this.functionMap[this.functionNodes[e].name]=this.functionNodes[e];if(this.subKernelNodes)for(let e=0;e<this.subKernelNodes.length;e++)this.functionMap[this.subKernelNodes[e].name]=this.subKernelNodes[e];if(this.nativeFunctions)for(let e=0;e<this.nativeFunctions.length;e++){const t=this.nativeFunctions[e];this.nativeFunctionNames.push(t.name)}}addFunctionNode(t){if(!t.name)throw new Error("functionNode.name needs set");this.functionMap[t.name]=t,t.isRootKernel&&(this.rootNode=t)}traceFunctionCalls(t,e){if(t=t||"kernel",e=e||[],this.nativeFunctionNames.indexOf(t)>-1){const n=e.indexOf(t);if(-1===n)e.push(t);else{const t=e.splice(n,1)[0];e.push(t)}return e}const n=this.functionMap[t];if(n){const r=e.indexOf(t);if(-1===r){e.push(t),n.toString();for(let t=0;t<n.calledFunctions.length;++t)this.traceFunctionCalls(n.calledFunctions[t],e)}else{const t=e.splice(r,1)[0];e.push(t)}}return e}getPrototypeString(t){return this.getPrototypes(t).join("\n")}getPrototypes(t){return this.rootNode&&this.rootNode.toString(),t?this.getPrototypesFromFunctionNames(this.traceFunctionCalls(t,[]).reverse()):this.getPrototypesFromFunctionNames(Object.keys(this.functionMap))}getStringFromFunctionNames(t){const e=[];for(let n=0;n<t.length;++n)this.functionMap[t[n]]&&e.push(this.functionMap[t[n]].toString());return e.join("\n")}getPrototypesFromFunctionNames(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n],i=this.nativeFunctionNames.indexOf(r);if(i>-1){e.push(this.nativeFunctions[i].source);continue}const a=this.functionMap[r];a&&e.push(a.toString())}return e}toJSON(){return this.traceFunctionCalls(this.rootNode.name).reverse().map((t=>{const e=this.nativeFunctions.indexOf(t);if(e>-1)return{name:t,source:this.nativeFunctions[e].source};if(this.functionMap[t])return this.functionMap[t].toJSON();throw new Error(`function ${t} not found`)}))}fromJSON(t,e){this.functionMap={};for(let n=0;n<t.length;n++){const r=t[n];this.functionMap[r.settings.name]=new e(r.ast,r.settings)}return this}getString(t){return t?this.getStringFromFunctionNames(this.traceFunctionCalls(t).reverse()):this.getStringFromFunctionNames(Object.keys(this.functionMap))}lookupReturnType(t,e,n){if("CallExpression"!==e.type)throw new Error(`expected ast type of "CallExpression", but is ${e.type}`);if(this._isNativeFunction(t))return this._lookupNativeFunctionReturnType(t);if(this._isFunction(t)){const r=this._getFunction(t);if(r.returnType)return r.returnType;{for(let i=0;i<this.lookupChain.length;i++)if(this.lookupChain[i].ast===e){if(0===r.argumentTypes.length&&e.arguments.length>0){const t=e.arguments;for(let e=0;e<t.length;e++)this.lookupChain.push({name:n.name,ast:t[i],requestingNode:n}),r.argumentTypes[e]=n.getType(t[e]),this.lookupChain.pop();return r.returnType=r.getType(r.getJsAST())}throw new Error("circlical logic detected!")}this.lookupChain.push({name:n.name,ast:e,requestingNode:n});const t=r.getType(r.getJsAST());return this.lookupChain.pop(),r.returnType=t}}return null}_getFunction(t){return this._isFunction(t),this.functionMap[t]}_isFunction(t){return Boolean(this.functionMap[t])}_getNativeFunction(t){for(let e=0;e<this.nativeFunctions.length;e++)if(this.nativeFunctions[e].name===t)return this.nativeFunctions[e];return null}_isNativeFunction(t){return Boolean(this._getNativeFunction(t))}_lookupNativeFunctionReturnType(t){let e=this._getNativeFunction(t);if(e)return e.returnType;throw new Error(`Native function ${t} not found`)}lookupFunctionArgumentTypes(t){return this._isNativeFunction(t)?this._getNativeFunction(t).argumentTypes:this._isFunction(t)?this._getFunction(t).argumentTypes:null}lookupFunctionArgumentName(t,e){return this._getFunction(t).argumentNames[e]}lookupFunctionArgumentBitRatio(t,e){if(!this._isFunction(t))throw new Error("function not found");if(this.rootNode.name===t){const t=this.rootNode.argumentNames.indexOf(e);if(-1!==t)return this.rootNode.argumentBitRatios[t]}const n=this._getFunction(t),r=n.argumentNames.indexOf(e);if(-1===r)throw new Error("argument not found");const i=n.argumentBitRatios[r];if("number"!==typeof i)throw new Error("argument bit ratio not found");return i}needsArgumentType(t,e){return!!this._isFunction(t)&&!this._getFunction(t).argumentTypes[e]}assignArgumentType(t,e,n,r){if(!this._isFunction(t))return;const i=this._getFunction(t);i.argumentTypes[e]||(i.argumentTypes[e]=n)}assignArgumentBitRatio(t,e,n,r){const i=this._getFunction(t);if(this._isNativeFunction(n))return null;const a=this._getFunction(n),s=i.argumentNames.indexOf(e);if(-1===s)throw new Error(`Argument ${e} not found in arguments from function ${t}`);const o=i.argumentBitRatios[s];if("number"!==typeof o)throw new Error(`Bit ratio for argument ${e} not found in function ${t}`);a.argumentBitRatios||(a.argumentBitRatios=new Array(a.argumentNames.length));const u=a.argumentBitRatios[s];if("number"===typeof u){if(u!==o)throw new Error(`Incompatible bit ratio found at function ${t} at argument ${e}`);return u}return a.argumentBitRatios[s]=o,o}trackFunctionCall(t,e,n){this.functionNodeDependencies[t]||(this.functionNodeDependencies[t]=new Set,this.functionCalls[t]=[]),this.functionNodeDependencies[t].add(e),this.functionCalls[t].push(n)}getKernelResultType(){return this.rootNode.returnType||this.rootNode.getType(this.rootNode.ast)}getSubKernelResultType(t){const e=this.subKernelNodes[t];let n=!1;for(let r=0;r<this.rootNode.functionCalls.length;r++)this.rootNode.functionCalls[r].ast.callee.name===e.name&&(n=!0);if(!n)throw new Error(`SubKernel ${e.name} never called by kernel`);return e.returnType||e.getType(e.getJsAST())}getReturnTypes(){const t={[this.rootNode.name]:this.rootNode.getType(this.rootNode.ast)},e=this.traceFunctionCalls(this.rootNode.name);for(let n=0;n<e.length;n++){const r=e[n],i=this.functionMap[r];t[r]=i.getType(i.ast)}return t}}e.exports={FunctionBuilder:r}},{}],10:[function(t,e,n){const r=t("acorn"),{utils:i}=t("../utils"),{FunctionTracer:a}=t("./function-tracer");class s{constructor(t,e){if(!t&&!e.ast)throw new Error("source parameter is missing");if(e=e||{},this.source=t,this.ast=null,this.name="string"===typeof t?e.isRootKernel?"kernel":e.name||i.getFunctionNameFromString(t):null,this.calledFunctions=[],this.constants={},this.constantTypes={},this.constantBitRatios={},this.isRootKernel=!1,this.isSubKernel=!1,this.debug=null,this.functions=null,this.identifiers=null,this.contexts=null,this.functionCalls=null,this.states=[],this.needsArgumentType=null,this.assignArgumentType=null,this.lookupReturnType=null,this.lookupFunctionArgumentTypes=null,this.lookupFunctionArgumentBitRatio=null,this.triggerImplyArgumentType=null,this.triggerImplyArgumentBitRatio=null,this.onNestedFunction=null,this.onFunctionCall=null,this.optimizeFloatMemory=null,this.precision=null,this.loopMaxIterations=null,this.argumentNames="string"===typeof this.source?i.getArgumentNamesFromString(this.source):null,this.argumentTypes=[],this.argumentSizes=[],this.argumentBitRatios=null,this.returnType=null,this.output=[],this.plugins=null,this.leadingReturnStatement=null,this.followingReturnStatement=null,this.dynamicOutput=null,this.dynamicArguments=null,this.strictTypingChecking=!1,this.fixIntegerDivisionAccuracy=null,e)for(const n in e)e.hasOwnProperty(n)&&this.hasOwnProperty(n)&&(this[n]=e[n]);this.literalTypes={},this.validate(),this._string=null,this._internalVariableNames={}}validate(){if("string"!==typeof this.source&&!this.ast)throw new Error("this.source not a string");if(!this.ast&&!i.isFunctionString(this.source))throw new Error("this.source not a function string");if(!this.name)throw new Error("this.name could not be set");if(this.argumentTypes.length>0&&this.argumentTypes.length!==this.argumentNames.length)throw new Error(`argumentTypes count of ${this.argumentTypes.length} exceeds ${this.argumentNames.length}`);if(this.output.length<1)throw new Error("this.output is not big enough")}isIdentifierConstant(t){return!!this.constants&&this.constants.hasOwnProperty(t)}isInput(t){return"Input"===this.argumentTypes[this.argumentNames.indexOf(t)]}pushState(t){this.states.push(t)}popState(t){if(this.state!==t)throw new Error(`Cannot popState ${t} when in ${this.state}`);this.states.pop()}isState(t){return this.state===t}get state(){return this.states[this.states.length-1]}astMemberExpressionUnroll(t){if("Identifier"===t.type)return t.name;if("ThisExpression"===t.type)return"this";if("MemberExpression"===t.type&&t.object&&t.property)return t.object.hasOwnProperty("name")&&"Math"!==t.object.name?this.astMemberExpressionUnroll(t.property):this.astMemberExpressionUnroll(t.object)+"."+this.astMemberExpressionUnroll(t.property);if(t.hasOwnProperty("expressions")){const e=t.expressions[0];if("Literal"===e.type&&0===e.value&&2===t.expressions.length)return this.astMemberExpressionUnroll(t.expressions[1])}throw this.astErrorOutput("Unknown astMemberExpressionUnroll",t)}getJsAST(t){if(this.ast)return this.ast;if("object"===typeof this.source)return this.traceFunctionAST(this.source),this.ast=this.source;if(null===(t=t||r))throw new Error("Missing JS to AST parser");const e=Object.freeze(t.parse(`const parser_${this.name} = ${this.source};`,{locations:!0})),n=e.body[0].declarations[0].init;if(this.traceFunctionAST(n),!e)throw new Error("Failed to parse JS code");return this.ast=n}traceFunctionAST(t){const{contexts:e,declarations:n,functions:r,identifiers:i,functionCalls:s}=new a(t);this.contexts=e,this.identifiers=i,this.functionCalls=s,this.functions=r;for(let a=0;a<n.length;a++){const t=n[a],{ast:e,inForLoopInit:r,inForLoopTest:i}=t,{init:s}=e,o=this.getDependencies(s);let u=null;if(r&&i)u="Integer";else if(s){const t=this.getType(s);switch(t){case"Integer":case"Float":case"Number":u="MemberExpression"===s.type?t:"Number";break;case"LiteralInteger":u="Number";break;default:u=t}}t.valueType=u,t.dependencies=o,t.isSafe=this.isSafeDependencies(o)}for(let a=0;a<r.length;a++)this.onNestedFunction(r[a],this.source)}getDeclaration(t){for(let e=0;e<this.identifiers.length;e++){const n=this.identifiers[e];if(t===n.ast)return n.declaration}return null}getVariableType(t){if("Identifier"!==t.type)throw new Error(`ast of ${t.type} not "Identifier"`);let e=null;const n=this.argumentNames.indexOf(t.name);if(-1===n){const e=this.getDeclaration(t);if(e)return e.valueType}else{const t=this.argumentTypes[n];t&&(e=t)}if(!e&&this.strictTypingChecking)throw new Error(`Declaration of ${name} not found`);return e}getLookupType(t){if(!o.hasOwnProperty(t))throw new Error(`unknown typeLookupMap ${t}`);return o[t]}getConstantType(t){if(this.constantTypes[t]){const e=this.constantTypes[t];return"Float"===e?"Number":e}throw new Error(`Type for constant "${t}" not declared`)}toString(){return this._string?this._string:this._string=this.astGeneric(this.getJsAST(),[]).join("").trim()}toJSON(){const t={source:this.source,name:this.name,constants:this.constants,constantTypes:this.constantTypes,isRootKernel:this.isRootKernel,isSubKernel:this.isSubKernel,debug:this.debug,output:this.output,loopMaxIterations:this.loopMaxIterations,argumentNames:this.argumentNames,argumentTypes:this.argumentTypes,argumentSizes:this.argumentSizes,returnType:this.returnType,leadingReturnStatement:this.leadingReturnStatement,followingReturnStatement:this.followingReturnStatement};return{ast:this.ast,settings:t}}getType(t){if(Array.isArray(t))return this.getType(t[t.length-1]);switch(t.type){case"BlockStatement":return this.getType(t.body);case"ArrayExpression":switch(this.getType(t.elements[0])){case"Array(2)":case"Array(3)":case"Array(4)":return`Matrix(${t.elements.length})`}return`Array(${t.elements.length})`;case"Literal":const e=this.astKey(t);return this.literalTypes[e]?this.literalTypes[e]:Number.isInteger(t.value)?"LiteralInteger":!0===t.value||!1===t.value?"Boolean":"Number";case"AssignmentExpression":return this.getType(t.left);case"CallExpression":if(this.isAstMathFunction(t))return"Number";if(!t.callee||!t.callee.name){if("SequenceExpression"===t.callee.type&&t.callee.expressions[t.callee.expressions.length-1].property.name){const e=t.callee.expressions[t.callee.expressions.length-1].property.name;return this.inferArgumentTypesIfNeeded(e,t.arguments),this.lookupReturnType(e,t,this)}if("this.color"===this.getVariableSignature(t.callee,!0))return null;if("MemberExpression"===t.callee.type&&t.callee.object&&t.callee.property&&t.callee.property.name&&t.arguments){const e=t.callee.property.name;return this.inferArgumentTypesIfNeeded(e,t.arguments),this.lookupReturnType(e,t,this)}throw this.astErrorOutput("Unknown call expression",t)}if(t.callee&&t.callee.name){const e=t.callee.name;return this.inferArgumentTypesIfNeeded(e,t.arguments),this.lookupReturnType(e,t,this)}throw this.astErrorOutput(`Unhandled getType Type "${t.type}"`,t);case"LogicalExpression":return"Boolean";case"BinaryExpression":switch(t.operator){case"%":case"/":if(this.fixIntegerDivisionAccuracy)return"Number";break;case">":case"<":return"Boolean";case"&":case"|":case"^":case"<<":case">>":case">>>":return"Integer"}const n=this.getType(t.left);if(this.isState("skip-literal-correction"))return n;if("LiteralInteger"===n){const e=this.getType(t.right);return"LiteralInteger"===e?t.left.value%1===0?"Integer":"Float":e}return o[n]||n;case"UpdateExpression":case"ReturnStatement":return this.getType(t.argument);case"UnaryExpression":return"~"===t.operator?"Integer":this.getType(t.argument);case"VariableDeclaration":{const e=t.declarations;let n;for(let t=0;t<e.length;t++){const r=e[t];n=this.getType(r)}if(!n)throw this.astErrorOutput("Unable to find type for declaration",t);return n}case"VariableDeclarator":const r=this.getDeclaration(t.id);if(!r)throw this.astErrorOutput("Unable to find declarator",t);if(!r.valueType)throw this.astErrorOutput("Unable to find declarator valueType",t);return r.valueType;case"Identifier":if("Infinity"===t.name)return"Number";if(this.isAstVariable(t)&&"value"===this.getVariableSignature(t))return this.getCheckVariableType(t);const i=this.findIdentifierOrigin(t);return i&&i.init?this.getType(i.init):null;case"MemberExpression":if(this.isAstMathFunction(t)){switch(t.property.name){case"ceil":case"floor":case"round":return"Integer"}return"Number"}if(this.isAstVariable(t)){switch(this.getVariableSignature(t)){case"value[]":return this.getLookupType(this.getCheckVariableType(t.object));case"value[][]":return this.getLookupType(this.getCheckVariableType(t.object.object));case"value[][][]":return this.getLookupType(this.getCheckVariableType(t.object.object.object));case"value[][][][]":return this.getLookupType(this.getCheckVariableType(t.object.object.object.object));case"value.thread.value":case"this.thread.value":return"Integer";case"this.output.value":return this.dynamicOutput?"Integer":"LiteralInteger";case"this.constants.value":return this.getConstantType(t.property.name);case"this.constants.value[]":return this.getLookupType(this.getConstantType(t.object.property.name));case"this.constants.value[][]":return this.getLookupType(this.getConstantType(t.object.object.property.name));case"this.constants.value[][][]":return this.getLookupType(this.getConstantType(t.object.object.object.property.name));case"this.constants.value[][][][]":return this.getLookupType(this.getConstantType(t.object.object.object.object.property.name));case"fn()[]":case"fn()[][]":case"fn()[][][]":return this.getLookupType(this.getType(t.object));case"value.value":if(this.isAstMathVariable(t))return"Number";switch(t.property.name){case"r":case"g":case"b":case"a":return this.getLookupType(this.getCheckVariableType(t.object))}case"[][]":return"Number"}throw this.astErrorOutput("Unhandled getType MemberExpression",t)}throw this.astErrorOutput("Unhandled getType MemberExpression",t);case"ConditionalExpression":case"IfStatement":return this.getType(t.consequent);case"FunctionDeclaration":case"FunctionExpression":const a=this.findLastReturn(t.body);return a?this.getType(a):null;case"SequenceExpression":return this.getType(t.expressions[t.expressions.length-1]);default:throw this.astErrorOutput(`Unhandled getType Type "${t.type}"`,t)}}getCheckVariableType(t){const e=this.getVariableType(t);if(!e)throw this.astErrorOutput(`${t.type} is not defined`,t);return e}inferArgumentTypesIfNeeded(t,e){for(let n=0;n<e.length;n++){if(!this.needsArgumentType(t,n))continue;const r=this.getType(e[n]);if(!r)throw this.astErrorOutput(`Unable to infer argument ${n}`,e[n]);this.assignArgumentType(t,n,r)}}isAstMathVariable(t){const e=["E","PI","SQRT2","SQRT1_2","LN2","LN10","LOG2E","LOG10E"];return"MemberExpression"===t.type&&t.object&&"Identifier"===t.object.type&&"Math"===t.object.name&&t.property&&"Identifier"===t.property.type&&e.indexOf(t.property.name)>-1}isAstMathFunction(t){const e=["abs","acos","acosh","asin","asinh","atan","atan2","atanh","cbrt","ceil","clz32","cos","cosh","expm1","exp","floor","fround","imul","log","log2","log10","log1p","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc"];return"CallExpression"===t.type&&t.callee&&"MemberExpression"===t.callee.type&&t.callee.object&&"Identifier"===t.callee.object.type&&"Math"===t.callee.object.name&&t.callee.property&&"Identifier"===t.callee.property.type&&e.indexOf(t.callee.property.name)>-1}isAstVariable(t){return"Identifier"===t.type||"MemberExpression"===t.type}isSafe(t){return this.isSafeDependencies(this.getDependencies(t))}isSafeDependencies(t){return!t||!t.every||t.every((t=>t.isSafe))}getDependencies(t,e,n){if(e||(e=[]),!t)return null;if(Array.isArray(t)){for(let r=0;r<t.length;r++)this.getDependencies(t[r],e,n);return e}switch(t.type){case"AssignmentExpression":return this.getDependencies(t.left,e,n),this.getDependencies(t.right,e,n),e;case"ConditionalExpression":return this.getDependencies(t.test,e,n),this.getDependencies(t.alternate,e,n),this.getDependencies(t.consequent,e,n),e;case"Literal":e.push({origin:"literal",value:t.value,isSafe:!0!==n&&t.value>-1/0&&t.value<1/0&&!isNaN(t.value)});break;case"VariableDeclarator":return this.getDependencies(t.init,e,n);case"Identifier":const r=this.getDeclaration(t);if(r)e.push({name:t.name,origin:"declaration",isSafe:!n&&this.isSafeDependencies(r.dependencies)});else if(this.argumentNames.indexOf(t.name)>-1)e.push({name:t.name,origin:"argument",isSafe:!1});else if(this.strictTypingChecking)throw new Error(`Cannot find identifier origin "${t.name}"`);break;case"FunctionDeclaration":return this.getDependencies(t.body.body[t.body.body.length-1],e,n);case"ReturnStatement":return this.getDependencies(t.argument,e);case"BinaryExpression":case"LogicalExpression":return n="/"===t.operator||"*"===t.operator,this.getDependencies(t.left,e,n),this.getDependencies(t.right,e,n),e;case"UnaryExpression":case"UpdateExpression":return this.getDependencies(t.argument,e,n);case"VariableDeclaration":return this.getDependencies(t.declarations,e,n);case"ArrayExpression":return e.push({origin:"declaration",isSafe:!0}),e;case"CallExpression":return e.push({origin:"function",isSafe:!0}),e;case"MemberExpression":const i=this.getMemberExpressionDetails(t);switch(i.signature){case"value[]":this.getDependencies(t.object,e,n);break;case"value[][]":this.getDependencies(t.object.object,e,n);break;case"value[][][]":this.getDependencies(t.object.object.object,e,n);break;case"this.output.value":this.dynamicOutput&&e.push({name:i.name,origin:"output",isSafe:!1})}if(i)return i.property&&this.getDependencies(i.property,e,n),i.xProperty&&this.getDependencies(i.xProperty,e,n),i.yProperty&&this.getDependencies(i.yProperty,e,n),i.zProperty&&this.getDependencies(i.zProperty,e,n),e;case"SequenceExpression":return this.getDependencies(t.expressions,e,n);default:throw this.astErrorOutput(`Unhandled type ${t.type} in getDependencies`,t)}return e}getVariableSignature(t,e){if(!this.isAstVariable(t))throw new Error(`ast of type "${t.type}" is not a variable signature`);if("Identifier"===t.type)return"value";const n=[];for(;t;)t.computed?n.push("[]"):"ThisExpression"===t.type?n.unshift("this"):t.property&&t.property.name?"x"===t.property.name||"y"===t.property.name||"z"===t.property.name?n.unshift(e?"."+t.property.name:".value"):"constants"===t.property.name||"thread"===t.property.name||"output"===t.property.name?n.unshift("."+t.property.name):n.unshift(e?"."+t.property.name:".value"):t.name?n.unshift(e?t.name:"value"):t.callee&&t.callee.name?n.unshift(e?t.callee.name+"()":"fn()"):t.elements?n.unshift("[]"):n.unshift("unknown"),t=t.object;const r=n.join("");return e||["value","value[]","value[][]","value[][][]","value[][][][]","value.value","value.thread.value","this.thread.value","this.output.value","this.constants.value","this.constants.value[]","this.constants.value[][]","this.constants.value[][][]","this.constants.value[][][][]","fn()[]","fn()[][]","fn()[][][]","[][]"].indexOf(r)>-1?r:null}build(){return this.toString().length>0}astGeneric(t,e){if(null===t)throw this.astErrorOutput("NULL ast",t);if(Array.isArray(t)){for(let n=0;n<t.length;n++)this.astGeneric(t[n],e);return e}switch(t.type){case"FunctionDeclaration":return this.astFunctionDeclaration(t,e);case"FunctionExpression":return this.astFunctionExpression(t,e);case"ReturnStatement":return this.astReturnStatement(t,e);case"Literal":return this.astLiteral(t,e);case"BinaryExpression":return this.astBinaryExpression(t,e);case"Identifier":return this.astIdentifierExpression(t,e);case"AssignmentExpression":return this.astAssignmentExpression(t,e);case"ExpressionStatement":return this.astExpressionStatement(t,e);case"EmptyStatement":return this.astEmptyStatement(t,e);case"BlockStatement":return this.astBlockStatement(t,e);case"IfStatement":return this.astIfStatement(t,e);case"SwitchStatement":return this.astSwitchStatement(t,e);case"BreakStatement":return this.astBreakStatement(t,e);case"ContinueStatement":return this.astContinueStatement(t,e);case"ForStatement":return this.astForStatement(t,e);case"WhileStatement":return this.astWhileStatement(t,e);case"DoWhileStatement":return this.astDoWhileStatement(t,e);case"VariableDeclaration":return this.astVariableDeclaration(t,e);case"VariableDeclarator":return this.astVariableDeclarator(t,e);case"ThisExpression":return this.astThisExpression(t,e);case"SequenceExpression":return this.astSequenceExpression(t,e);case"UnaryExpression":return this.astUnaryExpression(t,e);case"UpdateExpression":return this.astUpdateExpression(t,e);case"LogicalExpression":return this.astLogicalExpression(t,e);case"MemberExpression":return this.astMemberExpression(t,e);case"CallExpression":return this.astCallExpression(t,e);case"ArrayExpression":return this.astArrayExpression(t,e);case"DebuggerStatement":return this.astDebuggerStatement(t,e);case"ConditionalExpression":return this.astConditionalExpression(t,e)}throw this.astErrorOutput("Unknown ast type : "+t.type,t)}astErrorOutput(t,e){if("string"!==typeof this.source)return new Error(t);const n=i.getAstString(this.source,e),r=this.source.substr(e.start).split(/\n/),a=r.length>0?r[r.length-1]:0;return new Error(`${t} on line ${r.length}, position ${a.length}:\n ${n}`)}astDebuggerStatement(t,e){return e}astConditionalExpression(t,e){if("ConditionalExpression"!==t.type)throw this.astErrorOutput("Not a conditional expression",t);return e.push("("),this.astGeneric(t.test,e),e.push("?"),this.astGeneric(t.consequent,e),e.push(":"),this.astGeneric(t.alternate,e),e.push(")"),e}astFunction(t,e){throw new Error(`"astFunction" not defined on ${this.constructor.name}`)}astFunctionDeclaration(t,e){return this.isChildFunction(t)?e:this.astFunction(t,e)}astFunctionExpression(t,e){return this.isChildFunction(t)?e:this.astFunction(t,e)}isChildFunction(t){for(let e=0;e<this.functions.length;e++)if(this.functions[e]===t)return!0;return!1}astReturnStatement(t,e){return e}astLiteral(t,e){return this.literalTypes[this.astKey(t)]="Number",e}astBinaryExpression(t,e){return e}astIdentifierExpression(t,e){return e}astAssignmentExpression(t,e){return e}astExpressionStatement(t,e){return this.astGeneric(t.expression,e),e.push(";"),e}astEmptyStatement(t,e){return e}astBlockStatement(t,e){return e}astIfStatement(t,e){return e}astSwitchStatement(t,e){return e}astBreakStatement(t,e){return e.push("break;"),e}astContinueStatement(t,e){return e.push("continue;\n"),e}astForStatement(t,e){return e}astWhileStatement(t,e){return e}astDoWhileStatement(t,e){return e}astVariableDeclarator(t,e){return this.astGeneric(t.id,e),null!==t.init&&(e.push("="),this.astGeneric(t.init,e)),e}astThisExpression(t,e){return e}astSequenceExpression(t,e){const{expressions:n}=t,r=[];for(let i=0;i<n.length;i++){const t=n[i],e=[];this.astGeneric(t,e),r.push(e.join(""))}return r.length>1?e.push("(",r.join(","),")"):e.push(r[0]),e}astUnaryExpression(t,e){return this.checkAndUpconvertBitwiseUnary(t,e)||(t.prefix?(e.push(t.operator),this.astGeneric(t.argument,e)):(this.astGeneric(t.argument,e),e.push(t.operator))),e}checkAndUpconvertBitwiseUnary(t,e){}astUpdateExpression(t,e){return t.prefix?(e.push(t.operator),this.astGeneric(t.argument,e)):(this.astGeneric(t.argument,e),e.push(t.operator)),e}astLogicalExpression(t,e){return e.push("("),this.astGeneric(t.left,e),e.push(t.operator),this.astGeneric(t.right,e),e.push(")"),e}astMemberExpression(t,e){return e}astCallExpression(t,e){return e}astArrayExpression(t,e){return e}getMemberExpressionDetails(t){if("MemberExpression"!==t.type)throw this.astErrorOutput(`Expression ${t.type} not a MemberExpression`,t);let e=null,n=null;const r=this.getVariableSignature(t);switch(r){case"value":return null;case"value.thread.value":case"this.thread.value":case"this.output.value":return{signature:r,type:"Integer",name:t.property.name};case"value[]":if("string"!==typeof t.object.name)throw this.astErrorOutput("Unexpected expression",t);return e=t.object.name,{name:e,origin:"user",signature:r,type:this.getVariableType(t.object),xProperty:t.property};case"value[][]":if("string"!==typeof t.object.object.name)throw this.astErrorOutput("Unexpected expression",t);return e=t.object.object.name,{name:e,origin:"user",signature:r,type:this.getVariableType(t.object.object),yProperty:t.object.property,xProperty:t.property};case"value[][][]":if("string"!==typeof t.object.object.object.name)throw this.astErrorOutput("Unexpected expression",t);return e=t.object.object.object.name,{name:e,origin:"user",signature:r,type:this.getVariableType(t.object.object.object),zProperty:t.object.object.property,yProperty:t.object.property,xProperty:t.property};case"value[][][][]":if("string"!==typeof t.object.object.object.object.name)throw this.astErrorOutput("Unexpected expression",t);return e=t.object.object.object.object.name,{name:e,origin:"user",signature:r,type:this.getVariableType(t.object.object.object.object),zProperty:t.object.object.property,yProperty:t.object.property,xProperty:t.property};case"value.value":if("string"!==typeof t.property.name)throw this.astErrorOutput("Unexpected expression",t);if(this.isAstMathVariable(t))return e=t.property.name,{name:e,origin:"Math",type:"Number",signature:r};switch(t.property.name){case"r":case"g":case"b":case"a":return e=t.object.name,{name:e,property:t.property.name,origin:"user",signature:r,type:"Number"};default:throw this.astErrorOutput("Unexpected expression",t)}case"this.constants.value":if("string"!==typeof t.property.name)throw this.astErrorOutput("Unexpected expression",t);if(e=t.property.name,n=this.getConstantType(e),!n)throw this.astErrorOutput("Constant has no type",t);return{name:e,type:n,origin:"constants",signature:r};case"this.constants.value[]":if("string"!==typeof t.object.property.name)throw this.astErrorOutput("Unexpected expression",t);if(e=t.object.property.name,n=this.getConstantType(e),!n)throw this.astErrorOutput("Constant has no type",t);return{name:e,type:n,origin:"constants",signature:r,xProperty:t.property};case"this.constants.value[][]":if("string"!==typeof t.object.object.property.name)throw this.astErrorOutput("Unexpected expression",t);if(e=t.object.object.property.name,n=this.getConstantType(e),!n)throw this.astErrorOutput("Constant has no type",t);return{name:e,type:n,origin:"constants",signature:r,yProperty:t.object.property,xProperty:t.property};case"this.constants.value[][][]":if("string"!==typeof t.object.object.object.property.name)throw this.astErrorOutput("Unexpected expression",t);if(e=t.object.object.object.property.name,n=this.getConstantType(e),!n)throw this.astErrorOutput("Constant has no type",t);return{name:e,type:n,origin:"constants",signature:r,zProperty:t.object.object.property,yProperty:t.object.property,xProperty:t.property};case"fn()[]":case"fn()[][]":case"[][]":return{signature:r,property:t.property};default:throw this.astErrorOutput("Unexpected expression",t)}}findIdentifierOrigin(t){const e=[this.ast];for(;e.length>0;){const n=e[0];if("VariableDeclarator"===n.type&&n.id&&n.id.name&&n.id.name===t.name)return n;if(e.shift(),n.argument)e.push(n.argument);else if(n.body)e.push(n.body);else if(n.declarations)e.push(n.declarations);else if(Array.isArray(n))for(let t=0;t<n.length;t++)e.push(n[t])}return null}findLastReturn(t){const e=[t||this.ast];for(;e.length>0;){const t=e.pop();if("ReturnStatement"===t.type)return t;if("FunctionDeclaration"!==t.type)if(t.argument)e.push(t.argument);else if(t.body)e.push(t.body);else if(t.declarations)e.push(t.declarations);else if(Array.isArray(t))for(let n=0;n<t.length;n++)e.push(t[n]);else t.consequent?e.push(t.consequent):t.cases&&e.push(t.cases)}return null}getInternalVariableName(t){return this._internalVariableNames.hasOwnProperty(t)||(this._internalVariableNames[t]=0),this._internalVariableNames[t]++,1===this._internalVariableNames[t]?t:t+this._internalVariableNames[t]}astKey(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(!t.start||!t.end)throw new Error("AST start and end needed");return`${t.start}${e}${t.end}`}}const o={Number:"Number",Float:"Float",Integer:"Integer",Array:"Number","Array(2)":"Number","Array(3)":"Number","Array(4)":"Number","Matrix(2)":"Number","Matrix(3)":"Number","Matrix(4)":"Number",Array2D:"Number",Array3D:"Number",Input:"Number",HTMLCanvas:"Array(4)",OffscreenCanvas:"Array(4)",HTMLImage:"Array(4)",ImageBitmap:"Array(4)",ImageData:"Array(4)",HTMLVideo:"Array(4)",HTMLImageArray:"Array(4)",NumberTexture:"Number",MemoryOptimizedNumberTexture:"Number","Array1D(2)":"Array(2)","Array1D(3)":"Array(3)","Array1D(4)":"Array(4)","Array2D(2)":"Array(2)","Array2D(3)":"Array(3)","Array2D(4)":"Array(4)","Array3D(2)":"Array(2)","Array3D(3)":"Array(3)","Array3D(4)":"Array(4)","ArrayTexture(1)":"Number","ArrayTexture(2)":"Array(2)","ArrayTexture(3)":"Array(3)","ArrayTexture(4)":"Array(4)"};e.exports={FunctionNode:s}},{"../utils":114,"./function-tracer":11,acorn:1}],11:[function(t,e,n){const{utils:r}=t("../utils");function i(t){return t.length>0?t[t.length-1]:null}const a={trackIdentifiers:"trackIdentifiers",memberExpression:"memberExpression",inForLoopInit:"inForLoopInit"};class s{constructor(t){this.runningContexts=[],this.functionContexts=[],this.contexts=[],this.functionCalls=[],this.declarations=[],this.identifiers=[],this.functions=[],this.returnStatements=[],this.trackedIdentifiers=null,this.states=[],this.newFunctionContext(),this.scan(t)}isState(t){return this.states[this.states.length-1]===t}hasState(t){return this.states.indexOf(t)>-1}pushState(t){this.states.push(t)}popState(t){if(!this.isState(t))throw new Error(`Cannot pop the non-active state "${t}"`);this.states.pop()}get currentFunctionContext(){return i(this.functionContexts)}get currentContext(){return i(this.runningContexts)}newFunctionContext(){const t={"@contextType":"function"};this.contexts.push(t),this.functionContexts.push(t)}newContext(t){const e=Object.assign({"@contextType":"const/let"},this.currentContext);this.contexts.push(e),this.runningContexts.push(e),t();const{currentFunctionContext:n}=this;for(const r in n)n.hasOwnProperty(r)&&!e.hasOwnProperty(r)&&(e[r]=n[r]);return this.runningContexts.pop(),e}useFunctionContext(t){const e=i(this.functionContexts);this.runningContexts.push(e),t(),this.runningContexts.pop()}getIdentifiers(t){const e=this.trackedIdentifiers=[];return this.pushState(a.trackIdentifiers),t(),this.trackedIdentifiers=null,this.popState(a.trackIdentifiers),e}getDeclaration(t){const{currentContext:e,currentFunctionContext:n,runningContexts:r}=this,i=e[t]||n[t]||null;if(!i&&e===n&&r.length>0){const e=r[r.length-2];if(e[t])return e[t]}return i}scan(t){if(t)if(Array.isArray(t))for(let e=0;e<t.length;e++)this.scan(t[e]);else switch(t.type){case"Program":this.useFunctionContext((()=>{this.scan(t.body)}));break;case"BlockStatement":this.newContext((()=>{this.scan(t.body)}));break;case"AssignmentExpression":case"LogicalExpression":case"BinaryExpression":this.scan(t.left),this.scan(t.right);break;case"UpdateExpression":if("++"===t.operator){const e=this.getDeclaration(t.argument.name);e&&(e.suggestedType="Integer")}this.scan(t.argument);break;case"UnaryExpression":this.scan(t.argument);break;case"VariableDeclaration":"var"===t.kind?this.useFunctionContext((()=>{t.declarations=r.normalizeDeclarations(t),this.scan(t.declarations)})):(t.declarations=r.normalizeDeclarations(t),this.scan(t.declarations));break;case"VariableDeclarator":{const{currentContext:e}=this,n=this.hasState(a.inForLoopInit),r={ast:t,context:e,name:t.id.name,origin:"declaration",inForLoopInit:n,inForLoopTest:null,assignable:e===this.currentFunctionContext||!n&&!e.hasOwnProperty(t.id.name),suggestedType:null,valueType:null,dependencies:null,isSafe:null};e[t.id.name]||(e[t.id.name]=r),this.declarations.push(r),this.scan(t.id),this.scan(t.init);break}case"FunctionExpression":case"FunctionDeclaration":0===this.runningContexts.length?this.scan(t.body):this.functions.push(t);break;case"IfStatement":this.scan(t.test),this.scan(t.consequent),t.alternate&&this.scan(t.alternate);break;case"ForStatement":{let e;const n=this.newContext((()=>{this.pushState(a.inForLoopInit),this.scan(t.init),this.popState(a.inForLoopInit),e=this.getIdentifiers((()=>{this.scan(t.test)})),this.scan(t.update),this.newContext((()=>{this.scan(t.body)}))}));if(e)for(const t in n)"@contextType"!==t&&e.indexOf(t)>-1&&(n[t].inForLoopTest=!0);break}case"DoWhileStatement":case"WhileStatement":this.newContext((()=>{this.scan(t.body),this.scan(t.test)}));break;case"Identifier":this.isState(a.trackIdentifiers)&&this.trackedIdentifiers.push(t.name),this.identifiers.push({context:this.currentContext,declaration:this.getDeclaration(t.name),ast:t});break;case"ReturnStatement":this.returnStatements.push(t),this.scan(t.argument);break;case"MemberExpression":this.pushState(a.memberExpression),this.scan(t.object),this.scan(t.property),this.popState(a.memberExpression);break;case"ExpressionStatement":this.scan(t.expression);break;case"SequenceExpression":this.scan(t.expressions);break;case"CallExpression":this.functionCalls.push({context:this.currentContext,ast:t}),this.scan(t.arguments);break;case"ArrayExpression":this.scan(t.elements);break;case"ConditionalExpression":this.scan(t.test),this.scan(t.alternate),this.scan(t.consequent);break;case"SwitchStatement":this.scan(t.discriminant),this.scan(t.cases);break;case"SwitchCase":this.scan(t.test),this.scan(t.consequent);break;case"ThisExpression":case"Literal":case"DebuggerStatement":case"EmptyStatement":case"BreakStatement":case"ContinueStatement":break;default:throw new Error(`unhandled type "${t.type}"`)}}}e.exports={FunctionTracer:s}},{"../utils":114}],12:[function(t,e,n){const{glWiretap:r}=t("gl-wiretap"),{utils:i}=t("../../utils");function a(t){return t.toString().replace("=>","").replace(/^function /,"").replace(/utils[.]/g,"/*utils.*/")}function s(t,e,n,s,h){n.built||n.build.apply(n,e),e=e?Array.from(e).map((t=>{switch(typeof t){case"boolean":return new Boolean(t);case"number":return new Number(t);default:return t}})):null;const p=[],f=r(n.context,{useTrackablePrimitives:!0,onReadPixels:t=>{if(N.subKernels){if(d){const e=N.subKernels[m++].property;p.push(`    result${isNaN(e)?"."+e:`[${e}]`} = ${o(t,N)};`)}else p.push(`    const result = { result: ${o(t,N)} };`),d=!0;m===N.subKernels.length&&p.push("    return result;")}else t?p.push(`    return ${o(t,N)};`):p.push("    return null;")},onUnrecognizedArgumentLookup:t=>{const e=c(t,N.kernelArguments,[],f);if(e)return e;const n=c(t,N.kernelConstants,S?Object.keys(S).map((t=>S[t])):[],f);return n||null}});let d=!1,m=0;const{source:g,canvas:y,output:v,pipeline:b,graphical:x,loopMaxIterations:w,constants:S,optimizeFloatMemory:T,precision:k,fixIntegerDivisionAccuracy:A,functions:E,nativeFunctions:_,subKernels:O,immutable:I,argumentTypes:L,constantTypes:P,kernelArguments:C,kernelConstants:D,tactic:M}=n,N=new t(g,{canvas:y,context:f,checkContext:!1,output:v,pipeline:b,graphical:x,loopMaxIterations:w,constants:S,optimizeFloatMemory:T,precision:k,fixIntegerDivisionAccuracy:A,functions:E,nativeFunctions:_,subKernels:O,immutable:I,argumentTypes:L,constantTypes:P,tactic:M});let j=[];if(f.setIndent(2),N.build.apply(N,e),j.push(f.toString()),f.reset(),N.kernelArguments.forEach(((t,n)=>{switch(t.type){case"Integer":case"Boolean":case"Number":case"Float":case"Array":case"Array(2)":case"Array(3)":case"Array(4)":case"HTMLCanvas":case"HTMLImage":case"HTMLVideo":case"Input":f.insertVariable(`uploadValue_${t.name}`,t.uploadValue);break;case"HTMLImageArray":for(let r=0;r<e[n].length;r++){const i=e[n];f.insertVariable(`uploadValue_${t.name}[${r}]`,i[r])}break;case"MemoryOptimizedNumberTexture":case"NumberTexture":case"Array1D(2)":case"Array1D(3)":case"Array1D(4)":case"Array2D(2)":case"Array2D(3)":case"Array2D(4)":case"Array3D(2)":case"Array3D(3)":case"Array3D(4)":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":f.insertVariable(`uploadValue_${t.name}`,e[n].texture);break;default:throw new Error(`unhandled kernelArgumentType insertion for glWiretap of type ${t.type}`)}})),j.push("/** start of injected functions **/"),j.push(`function ${a(i.flattenTo)}`),j.push(`function ${a(i.flatten2dArrayTo)}`),j.push(`function ${a(i.flatten3dArrayTo)}`),j.push(`function ${a(i.flatten4dArrayTo)}`),j.push(`function ${a(i.isArray)}`),N.renderOutput!==N.renderTexture&&N.formatValues&&j.push(`  const renderOutput = function ${a(N.formatValues)};`),j.push("/** end of injected functions **/"),j.push(`  const innerKernel = function (${N.kernelArguments.map((t=>t.varName)).join(", ")}) {`),f.setIndent(4),N.run.apply(N,e),N.renderKernels?N.renderKernels():N.renderOutput&&N.renderOutput(),j.push("    /** start setup uploads for kernel values **/"),N.kernelArguments.forEach((t=>{j.push("    "+t.getStringValueHandler().split("\n").join("\n    "))})),j.push("    /** end setup uploads for kernel values **/"),j.push(f.toString()),N.renderOutput===N.renderTexture){f.reset();const t=f.getContextVariableName(N.framebuffer);if(N.renderKernels){const e=N.renderKernels(),n=f.getContextVariableName(N.texture.texture);j.push(`    return {\n      result: {\n        texture: ${n},\n        type: '${e.result.type}',\n        toArray: ${l(e.result,n,t)}\n      },`);const{subKernels:r,mappedTextures:i}=N;for(let a=0;a<r.length;a++){const n=i[a],s=r[a],o=e[s.property],u=f.getContextVariableName(n.texture);j.push(`\n      ${s.property}: {\n        texture: ${u},\n        type: '${o.type}',\n        toArray: ${l(o,u,t)}\n      },`)}j.push("    };")}else{const e=N.renderOutput(),n=f.getContextVariableName(N.texture.texture);j.push(`    return {\n        texture: ${n},\n        type: '${e.type}',\n        toArray: ${l(e,n,t)}\n      };`)}}j.push("    "+(h?"\n"+h+"    ":"")),j.push(p.join("\n")),j.push("  };"),N.graphical&&(j.push(u(N)),j.push("  innerKernel.getPixels = getPixels;")),j.push("  return innerKernel;");let $=[];return D.forEach((t=>{$.push(`${t.getStringValueHandler()}`)})),`function kernel(settings) {\n  const { context, constants } = settings;\n  ${$.join("")}\n  ${s||""}\n${j.join("\n")}\n}`}function o(t,e){const n="single"===e.precision?t:`new Float32Array(${t}.buffer)`;return e.output[2]?`renderOutput(${n}, ${e.output[0]}, ${e.output[1]}, ${e.output[2]})`:e.output[1]?`renderOutput(${n}, ${e.output[0]}, ${e.output[1]})`:`renderOutput(${n}, ${e.output[0]})`}function u(t){const e=t.getPixels.toString(),n=!/^function/.test(e);return i.flattenFunctionToString(`${n?"function ":""}${e}`,{findDependency:(t,e)=>"utils"===t?`const ${e} = ${i[e].toString()};`:null,thisLookup:e=>{if("context"===e)return null;if(t.hasOwnProperty(e))return JSON.stringify(t[e]);throw new Error(`unhandled thisLookup ${e}`)}})}function l(t,e,n){const r=t.toArray.toString(),a=!/^function/.test(r);return`() => {\n  function framebuffer() { return ${n}; };\n  ${i.flattenFunctionToString(`${a?"function ":""}${r}`,{findDependency:(e,n)=>{if("utils"===e)return`const ${n} = ${i[n].toString()};`;if("this"===e)return"framebuffer"===n?"":`${a?"function ":""}${t[n].toString()}`;throw new Error("unhandled fromObject")},thisLookup:(n,r)=>{if("texture"===n)return e;if("context"===n)return r?null:"gl";if(t.hasOwnProperty(n))return JSON.stringify(t[n]);throw new Error(`unhandled thisLookup ${n}`)}})}\n  return toArray();\n  }`}function c(t,e,n,r,i){if(null===t)return null;if(null===e)return null;switch(typeof t){case"boolean":case"number":return null}if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement)for(let a=0;a<e.length;a++){const i=e[a];if("HTMLImageArray"!==i.type&&i)continue;if(i.uploadValue!==t)continue;const s=n[a].indexOf(t);if(-1===s)continue;const o=`uploadValue_${i.name}[${s}]`;return r.insertVariable(o,t),o}for(let a=0;a<e.length;a++){const n=e[a];if(t!==n.uploadValue)continue;const i=`uploadValue_${n.name}`;return r.insertVariable(i,n),i}return null}e.exports={glKernelString:s}},{"../../utils":114,"gl-wiretap":3}],13:[function(t,e,n){const{Kernel:r}=t("../kernel"),{utils:i}=t("../../utils"),{GLTextureArray2Float:a}=t("./texture/array-2-float"),{GLTextureArray2Float2D:s}=t("./texture/array-2-float-2d"),{GLTextureArray2Float3D:o}=t("./texture/array-2-float-3d"),{GLTextureArray3Float:u}=t("./texture/array-3-float"),{GLTextureArray3Float2D:l}=t("./texture/array-3-float-2d"),{GLTextureArray3Float3D:c}=t("./texture/array-3-float-3d"),{GLTextureArray4Float:h}=t("./texture/array-4-float"),{GLTextureArray4Float2D:p}=t("./texture/array-4-float-2d"),{GLTextureArray4Float3D:f}=t("./texture/array-4-float-3d"),{GLTextureFloat:d}=t("./texture/float"),{GLTextureFloat2D:m}=t("./texture/float-2d"),{GLTextureFloat3D:g}=t("./texture/float-3d"),{GLTextureMemoryOptimized:y}=t("./texture/memory-optimized"),{GLTextureMemoryOptimized2D:v}=t("./texture/memory-optimized-2d"),{GLTextureMemoryOptimized3D:b}=t("./texture/memory-optimized-3d"),{GLTextureUnsigned:x}=t("./texture/unsigned"),{GLTextureUnsigned2D:w}=t("./texture/unsigned-2d"),{GLTextureUnsigned3D:S}=t("./texture/unsigned-3d"),{GLTextureGraphical:T}=t("./texture/graphical");class k extends r{static get mode(){return"gpu"}static getIsFloatRead(){const t=new this("function kernelFunction() {\n      return 1;\n    }",{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[1],precision:"single",returnType:"Number",tactic:"speed"});t.build(),t.run();const e=t.renderOutput();return t.destroy(!0),1===e[0]}static getIsIntegerDivisionAccurate(){function t(t,e){return t[this.thread.x]/e[this.thread.x]}const e=new this(t.toString(),{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[2],returnType:"Number",precision:"unsigned",tactic:"speed"}),n=[[6,6030401],[3,3991]];e.build.apply(e,n),e.run.apply(e,n);const r=e.renderOutput();return e.destroy(!0),2===r[0]&&1511===r[1]}static getIsSpeedTacticSupported(){function t(t){return t[this.thread.x]}const e=new this(t.toString(),{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[4],returnType:"Number",precision:"unsigned",tactic:"speed"}),n=[[0,1,2,3]];e.build.apply(e,n),e.run.apply(e,n);const r=e.renderOutput();return e.destroy(!0),0===Math.round(r[0])&&1===Math.round(r[1])&&2===Math.round(r[2])&&3===Math.round(r[3])}static get testCanvas(){throw new Error(`"testCanvas" not defined on ${this.name}`)}static get testContext(){throw new Error(`"testContext" not defined on ${this.name}`)}static getFeatures(){const t=this.testContext,e=this.getIsDrawBuffers();return Object.freeze({isFloatRead:this.getIsFloatRead(),isIntegerDivisionAccurate:this.getIsIntegerDivisionAccurate(),isSpeedTacticSupported:this.getIsSpeedTacticSupported(),isTextureFloat:this.getIsTextureFloat(),isDrawBuffers:e,kernelMap:e,channelCount:this.getChannelCount(),maxTextureSize:this.getMaxTextureSize(),lowIntPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.LOW_INT),lowFloatPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.LOW_FLOAT),mediumIntPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_INT),mediumFloatPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT),highIntPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_INT),highFloatPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT)})}static setupFeatureChecks(){throw new Error(`"setupFeatureChecks" not defined on ${this.name}`)}static getSignature(t,e){return t.getVariablePrecisionString()+(e.length>0?":"+e.join(","):"")}setFixIntegerDivisionAccuracy(t){return this.fixIntegerDivisionAccuracy=t,this}setPrecision(t){return this.precision=t,this}setFloatTextures(t){return i.warnDeprecated("method","setFloatTextures","setOptimizeFloatMemory"),this.floatTextures=t,this}static nativeFunctionArguments(t){const e=[],n=[],r=[],i=/^[a-zA-Z_]/,a=/[a-zA-Z_0-9]/;let s=0,o=null,u=null;for(;s<t.length;){const l=t[s],c=t[s+1],h=r.length>0?r[r.length-1]:null;if("FUNCTION_ARGUMENTS"!==h||"/"!==l||"*"!==c)if("MULTI_LINE_COMMENT"!==h||"*"!==l||"/"!==c)if("FUNCTION_ARGUMENTS"!==h||"/"!==l||"/"!==c)if("COMMENT"!==h||"\n"!==l)if(null!==h||"("!==l){if("FUNCTION_ARGUMENTS"===h){if(")"===l){r.pop();break}if("f"===l&&"l"===c&&"o"===t[s+2]&&"a"===t[s+3]&&"t"===t[s+4]&&" "===t[s+5]){r.push("DECLARE_VARIABLE"),u="float",o="",s+=6;continue}if("i"===l&&"n"===c&&"t"===t[s+2]&&" "===t[s+3]){r.push("DECLARE_VARIABLE"),u="int",o="",s+=4;continue}if("v"===l&&"e"===c&&"c"===t[s+2]&&"2"===t[s+3]&&" "===t[s+4]){r.push("DECLARE_VARIABLE"),u="vec2",o="",s+=5;continue}if("v"===l&&"e"===c&&"c"===t[s+2]&&"3"===t[s+3]&&" "===t[s+4]){r.push("DECLARE_VARIABLE"),u="vec3",o="",s+=5;continue}if("v"===l&&"e"===c&&"c"===t[s+2]&&"4"===t[s+3]&&" "===t[s+4]){r.push("DECLARE_VARIABLE"),u="vec4",o="",s+=5;continue}}else if("DECLARE_VARIABLE"===h){if(""===o){if(" "===l){s++;continue}if(!i.test(l))throw new Error("variable name is not expected string")}o+=l,a.test(c)||(r.pop(),n.push(o),e.push(A[u]))}s++}else r.push("FUNCTION_ARGUMENTS"),s++;else r.pop(),s++;else r.push("COMMENT"),s+=2;else r.pop(),s+=2;else r.push("MULTI_LINE_COMMENT"),s+=2}if(r.length>0)throw new Error("GLSL function was not parsable");return{argumentNames:n,argumentTypes:e}}static nativeFunctionReturnType(t){return A[t.match(/int|float|vec[2-4]/)[0]]}static combineKernels(t,e){t.apply(null,arguments);const{texSize:n,context:r,threadDim:a}=e.texSize;let s;if("single"===e.precision){const t=n[0],e=Math.ceil(n[1]/4);s=new Float32Array(t*e*4*4),r.readPixels(0,0,t,4*e,r.RGBA,r.FLOAT,s)}else{const t=new Uint8Array(n[0]*n[1]*4);r.readPixels(0,0,n[0],n[1],r.RGBA,r.UNSIGNED_BYTE,t),s=new Float32Array(t.buffer)}return s=s.subarray(0,a[0]*a[1]*a[2]),1===e.output.length?s:2===e.output.length?i.splitArray(s,e.output[0]):3===e.output.length?i.splitArray(s,e.output[0]*e.output[1]).map((function(t){return i.splitArray(t,e.output[0])})):void 0}constructor(t,e){super(t,e),this.transferValues=null,this.formatValues=null,this.TextureConstructor=null,this.renderOutput=null,this.renderRawOutput=null,this.texSize=null,this.translatedSource=null,this.compiledFragmentShader=null,this.compiledVertexShader=null,this.switchingKernels=null,this._textureSwitched=null,this._mappedTextureSwitched=null}checkTextureSize(){const{features:t}=this.constructor;if(this.texSize[0]>t.maxTextureSize||this.texSize[1]>t.maxTextureSize)throw new Error(`Texture size [${this.texSize[0]},${this.texSize[1]}] generated by kernel is larger than supported size [${t.maxTextureSize},${t.maxTextureSize}]`)}translateSource(){throw new Error(`"translateSource" not defined on ${this.constructor.name}`)}pickRenderStrategy(t){if(this.graphical)return this.renderRawOutput=this.readPackedPixelsToUint8Array,this.transferValues=t=>t,this.TextureConstructor=T,null;if("unsigned"===this.precision)if(this.renderRawOutput=this.readPackedPixelsToUint8Array,this.transferValues=this.readPackedPixelsToFloat32Array,this.pipeline)switch(this.renderOutput=this.renderTexture,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToTextures),this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.output[2]>0?(this.TextureConstructor=S,null):this.output[1]>0?(this.TextureConstructor=w,null):(this.TextureConstructor=x,null);case"Array(2)":case"Array(3)":case"Array(4)":return this.requestFallback(t)}else switch(null!==this.subKernels&&(this.renderKernels=this.renderKernelsToArrays),this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.renderOutput=this.renderValues,this.output[2]>0?(this.TextureConstructor=S,this.formatValues=i.erect3DPackedFloat,null):this.output[1]>0?(this.TextureConstructor=w,this.formatValues=i.erect2DPackedFloat,null):(this.TextureConstructor=x,this.formatValues=i.erectPackedFloat,null);case"Array(2)":case"Array(3)":case"Array(4)":return this.requestFallback(t)}else{if("single"!==this.precision)throw new Error(`unhandled precision of "${this.precision}"`);if(this.renderRawOutput=this.readFloatPixelsToFloat32Array,this.transferValues=this.readFloatPixelsToFloat32Array,this.pipeline)switch(this.renderOutput=this.renderTexture,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToTextures),this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.optimizeFloatMemory?this.output[2]>0?(this.TextureConstructor=b,null):this.output[1]>0?(this.TextureConstructor=v,null):(this.TextureConstructor=y,null):this.output[2]>0?(this.TextureConstructor=g,null):this.output[1]>0?(this.TextureConstructor=m,null):(this.TextureConstructor=d,null);case"Array(2)":return this.output[2]>0?(this.TextureConstructor=o,null):this.output[1]>0?(this.TextureConstructor=s,null):(this.TextureConstructor=a,null);case"Array(3)":return this.output[2]>0?(this.TextureConstructor=c,null):this.output[1]>0?(this.TextureConstructor=l,null):(this.TextureConstructor=u,null);case"Array(4)":return this.output[2]>0?(this.TextureConstructor=f,null):this.output[1]>0?(this.TextureConstructor=p,null):(this.TextureConstructor=h,null)}if(this.renderOutput=this.renderValues,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToArrays),this.optimizeFloatMemory)switch(this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.output[2]>0?(this.TextureConstructor=b,this.formatValues=i.erectMemoryOptimized3DFloat,null):this.output[1]>0?(this.TextureConstructor=v,this.formatValues=i.erectMemoryOptimized2DFloat,null):(this.TextureConstructor=y,this.formatValues=i.erectMemoryOptimizedFloat,null);case"Array(2)":return this.output[2]>0?(this.TextureConstructor=o,this.formatValues=i.erect3DArray2,null):this.output[1]>0?(this.TextureConstructor=s,this.formatValues=i.erect2DArray2,null):(this.TextureConstructor=a,this.formatValues=i.erectArray2,null);case"Array(3)":return this.output[2]>0?(this.TextureConstructor=c,this.formatValues=i.erect3DArray3,null):this.output[1]>0?(this.TextureConstructor=l,this.formatValues=i.erect2DArray3,null):(this.TextureConstructor=u,this.formatValues=i.erectArray3,null);case"Array(4)":return this.output[2]>0?(this.TextureConstructor=f,this.formatValues=i.erect3DArray4,null):this.output[1]>0?(this.TextureConstructor=p,this.formatValues=i.erect2DArray4,null):(this.TextureConstructor=h,this.formatValues=i.erectArray4,null)}else switch(this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.output[2]>0?(this.TextureConstructor=g,this.formatValues=i.erect3DFloat,null):this.output[1]>0?(this.TextureConstructor=m,this.formatValues=i.erect2DFloat,null):(this.TextureConstructor=d,this.formatValues=i.erectFloat,null);case"Array(2)":return this.output[2]>0?(this.TextureConstructor=o,this.formatValues=i.erect3DArray2,null):this.output[1]>0?(this.TextureConstructor=s,this.formatValues=i.erect2DArray2,null):(this.TextureConstructor=a,this.formatValues=i.erectArray2,null);case"Array(3)":return this.output[2]>0?(this.TextureConstructor=c,this.formatValues=i.erect3DArray3,null):this.output[1]>0?(this.TextureConstructor=l,this.formatValues=i.erect2DArray3,null):(this.TextureConstructor=u,this.formatValues=i.erectArray3,null);case"Array(4)":return this.output[2]>0?(this.TextureConstructor=f,this.formatValues=i.erect3DArray4,null):this.output[1]>0?(this.TextureConstructor=p,this.formatValues=i.erect2DArray4,null):(this.TextureConstructor=h,this.formatValues=i.erectArray4,null)}}throw new Error(`unhandled return type "${this.returnType}"`)}getKernelString(){throw new Error("abstract method call")}getMainResultTexture(){switch(this.returnType){case"LiteralInteger":case"Float":case"Integer":case"Number":return this.getMainResultNumberTexture();case"Array(2)":return this.getMainResultArray2Texture();case"Array(3)":return this.getMainResultArray3Texture();case"Array(4)":return this.getMainResultArray4Texture();default:throw new Error(`unhandled returnType type ${this.returnType}`)}}getMainResultKernelNumberTexture(){throw new Error("abstract method call")}getMainResultSubKernelNumberTexture(){throw new Error("abstract method call")}getMainResultKernelArray2Texture(){throw new Error("abstract method call")}getMainResultSubKernelArray2Texture(){throw new Error("abstract method call")}getMainResultKernelArray3Texture(){throw new Error("abstract method call")}getMainResultSubKernelArray3Texture(){throw new Error("abstract method call")}getMainResultKernelArray4Texture(){throw new Error("abstract method call")}getMainResultSubKernelArray4Texture(){throw new Error("abstract method call")}getMainResultGraphical(){throw new Error("abstract method call")}getMainResultMemoryOptimizedFloats(){throw new Error("abstract method call")}getMainResultPackedPixels(){throw new Error("abstract method call")}getMainResultString(){return this.graphical?this.getMainResultGraphical():"single"===this.precision?this.optimizeFloatMemory?this.getMainResultMemoryOptimizedFloats():this.getMainResultTexture():this.getMainResultPackedPixels()}getMainResultNumberTexture(){return i.linesToString(this.getMainResultKernelNumberTexture())+i.linesToString(this.getMainResultSubKernelNumberTexture())}getMainResultArray2Texture(){return i.linesToString(this.getMainResultKernelArray2Texture())+i.linesToString(this.getMainResultSubKernelArray2Texture())}getMainResultArray3Texture(){return i.linesToString(this.getMainResultKernelArray3Texture())+i.linesToString(this.getMainResultSubKernelArray3Texture())}getMainResultArray4Texture(){return i.linesToString(this.getMainResultKernelArray4Texture())+i.linesToString(this.getMainResultSubKernelArray4Texture())}getFloatTacticDeclaration(){return`precision ${this.getVariablePrecisionString(this.texSize,this.tactic)} float;\n`}getIntTacticDeclaration(){return`precision ${this.getVariablePrecisionString(this.texSize,this.tactic,!0)} int;\n`}getSampler2DTacticDeclaration(){return`precision ${this.getVariablePrecisionString(this.texSize,this.tactic)} sampler2D;\n`}getSampler2DArrayTacticDeclaration(){return`precision ${this.getVariablePrecisionString(this.texSize,this.tactic)} sampler2DArray;\n`}renderTexture(){return this.immutable?this.texture.clone():this.texture}readPackedPixelsToUint8Array(){if("unsigned"!==this.precision)throw new Error('Requires this.precision to be "unsigned"');const{texSize:t,context:e}=this,n=new Uint8Array(t[0]*t[1]*4);return e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,n),n}readPackedPixelsToFloat32Array(){return new Float32Array(this.readPackedPixelsToUint8Array().buffer)}readFloatPixelsToFloat32Array(){if("single"!==this.precision)throw new Error('Requires this.precision to be "single"');const{texSize:t,context:e}=this,n=t[0],r=t[1],i=new Float32Array(n*r*4);return e.readPixels(0,0,n,r,e.RGBA,e.FLOAT,i),i}getPixels(t){const{context:e,output:n}=this,[r,a]=n,s=new Uint8Array(r*a*4);return e.readPixels(0,0,r,a,e.RGBA,e.UNSIGNED_BYTE,s),new Uint8ClampedArray((t?s:i.flipPixels(s,r,a)).buffer)}renderKernelsToArrays(){const t={result:this.renderOutput()};for(let e=0;e<this.subKernels.length;e++)t[this.subKernels[e].property]=this.mappedTextures[e].toArray();return t}renderKernelsToTextures(){const t={result:this.renderOutput()};if(this.immutable)for(let e=0;e<this.subKernels.length;e++)t[this.subKernels[e].property]=this.mappedTextures[e].clone();else for(let e=0;e<this.subKernels.length;e++)t[this.subKernels[e].property]=this.mappedTextures[e];return t}resetSwitchingKernels(){const t=this.switchingKernels;return this.switchingKernels=null,t}setOutput(t){const e=this.toKernelOutput(t);if(this.program){if(!this.dynamicOutput)throw new Error("Resizing a kernel with dynamicOutput: false is not possible");const n=[e[0],e[1]||1,e[2]||1],r=i.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},n),a=this.texSize;if(a){const e=this.getVariablePrecisionString(a,this.tactic),n=this.getVariablePrecisionString(r,this.tactic);if(e!==n)return this.debug&&console.warn("Precision requirement changed, asking GPU instance to recompile"),void this.switchKernels({type:"outputPrecisionMismatch",precision:n,needed:t})}this.output=e,this.threadDim=n,this.texSize=r;const{context:s}=this;if(s.bindFramebuffer(s.FRAMEBUFFER,this.framebuffer),this.updateMaxTexSize(),this.framebuffer.width=this.texSize[0],this.framebuffer.height=this.texSize[1],s.viewport(0,0,this.maxTexSize[0],this.maxTexSize[1]),this.canvas.width=this.maxTexSize[0],this.canvas.height=this.maxTexSize[1],this.texture&&this.texture.delete(),this.texture=null,this._setupOutputTexture(),this.mappedTextures&&this.mappedTextures.length>0){for(let t=0;t<this.mappedTextures.length;t++)this.mappedTextures[t].delete();this.mappedTextures=null,this._setupSubOutputTextures()}}else this.output=e;return this}renderValues(){return this.formatValues(this.transferValues(),this.output[0],this.output[1],this.output[2])}switchKernels(t){this.switchingKernels?this.switchingKernels.push(t):this.switchingKernels=[t]}getVariablePrecisionString(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.texSize,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tactic,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e){if(!this.constructor.features.isSpeedTacticSupported)return"highp";const e=this.constructor.features[n?"lowIntPrecision":"lowFloatPrecision"],r=this.constructor.features[n?"mediumIntPrecision":"mediumFloatPrecision"],i=this.constructor.features[n?"highIntPrecision":"highFloatPrecision"],a=Math.log2(t[0]*t[1]);if(a<=e.rangeMax)return"lowp";if(a<=r.rangeMax)return"mediump";if(a<=i.rangeMax)return"highp";throw new Error("The required size exceeds that of the ability of your system")}switch(e){case"speed":return"lowp";case"balanced":return"mediump";case"precision":return"highp";default:throw new Error(`Unknown tactic "${e}" use "speed", "balanced", "precision", or empty for auto`)}}updateTextureArgumentRefs(t,e){if(this.immutable)if(this.texture.texture===e.texture){const{prevArg:n}=t;n&&(1===n.texture._refs&&(this.texture.delete(),this.texture=n.clone(),this._textureSwitched=!0),n.delete()),t.prevArg=e.clone()}else if(this.mappedTextures&&this.mappedTextures.length>0){const{mappedTextures:n}=this;for(let r=0;r<n.length;r++){const i=n[r];if(i.texture===e.texture){const{prevArg:a}=t;return a&&(1===a.texture._refs&&(i.delete(),n[r]=a.clone(),this._mappedTextureSwitched[r]=!0),a.delete()),void(t.prevArg=e.clone())}}}}onActivate(t){if(this._textureSwitched=!0,this.texture=t.texture,this.mappedTextures){for(let t=0;t<this.mappedTextures.length;t++)this._mappedTextureSwitched[t]=!0;this.mappedTextures=t.mappedTextures}}initCanvas(){}}const A={int:"Integer",float:"Number",vec2:"Array(2)",vec3:"Array(3)",vec4:"Array(4)"};e.exports={GLKernel:k}},{"../../utils":114,"../kernel":36,"./texture/array-2-float":16,"./texture/array-2-float-2d":14,"./texture/array-2-float-3d":15,"./texture/array-3-float":19,"./texture/array-3-float-2d":17,"./texture/array-3-float-3d":18,"./texture/array-4-float":22,"./texture/array-4-float-2d":20,"./texture/array-4-float-3d":21,"./texture/float":25,"./texture/float-2d":23,"./texture/float-3d":24,"./texture/graphical":26,"./texture/memory-optimized":30,"./texture/memory-optimized-2d":28,"./texture/memory-optimized-3d":29,"./texture/unsigned":33,"./texture/unsigned-2d":31,"./texture/unsigned-3d":32}],14:[function(t,e,n){const{utils:r}=t("../../../utils"),{GLTextureFloat:i}=t("./float");class a extends i{constructor(t){super(t),this.type="ArrayTexture(2)"}toArray(){return r.erect2DArray2(this.renderValues(),this.output[0],this.output[1])}}e.exports={GLTextureArray2Float2D:a}},{"../../../utils":114,"./float":25}],15:[function(t,e,n){const{utils:r}=t("../../../utils"),{GLTextureFloat:i}=t("./float");class a extends i{constructor(t){super(t),this.type="ArrayTexture(2)"}toArray(){return r.erect3DArray2(this.renderValues(),this.output[0],this.output[1],this.output[2])}}e.exports={GLTextureArray2Float3D:a}},{"../../../utils":114,"./float":25}],16:[function(t,e,n){const{utils:r}=t("../../../utils"),{GLTextureFloat:i}=t("./float");class a extends i{constructor(t){super(t),this.type="ArrayTexture(2)"}toArray(){return r.erectArray2(this.renderValues(),this.output[0],this.output[1])}}e.exports={GLTextureArray2Float:a}},{"../../../utils":114,"./float":25}],17:[function(t,e,n){const{utils:r}=t("../../../utils"),{GLTextureFloat:i}=t("./float");class a extends i{constructor(t){super(t),this.type="ArrayTexture(3)"}toArray(){return r.erect2DArray3(this.renderValues(),this.output[0],this.output[1])}}e.exports={GLTextureArray3Float2D:a}},{"../../../utils":114,"./float":25}],18:[function(t,e,n){const{utils:r}=t("../../../utils"),{GLTextureFloat:i}=t("./float");class a extends i{constructor(t){super(t),this.type="ArrayTexture(3)"}toArray(){return r.erect3DArray3(this.renderValues(),this.output[0],this.output[1],this.output[2])}}e.exports={GLTextureArray3Float3D:a}},{"../../../utils":114,"./float":25}],19:[function(t,e,n){const{utils:r}=t("../../../utils"),{GLTextureFloat:i}=t("./float");class a extends i{constructor(t){super(t),this.type="ArrayTexture(3)"}toArray(){return r.erectArray3(this.renderValues(),this.output[0])}}e.exports={GLTextureArray3Float:a}},{"../../../utils":114,"./float":25}],20:[function(t,e,n){const{utils:r}=t("../../../utils"),{GLTextureFloat:i}=t("./float");class a extends i{constructor(t){super(t),this.type="ArrayTexture(4)"}toArray(){return r.erect2DArray4(this.renderValues(),this.output[0],this.output[1])}}e.exports={GLTextureArray4Float2D:a}},{"../../../utils":114,"./float":25}],21:[function(t,e,n){const{utils:r}=t("../../../utils"),{GLTextureFloat:i}=t("./float");class a extends i{constructor(t){super(t),this.type="ArrayTexture(4)"}toArray(){return r.erect3DArray4(this.renderValues(),this.output[0],this.output[1],this.output[2])}}e.exports={GLTextureArray4Float3D:a}},{"../../../utils":114,"./float":25}],22:[function(t,e,n){const{utils:r}=t("../../../utils"),{GLTextureFloat:i}=t("./float");class a extends i{constructor(t){super(t),this.type="ArrayTexture(4)"}toArray(){return r.erectArray4(this.renderValues(),this.output[0])}}e.exports={GLTextureArray4Float:a}},{"../../../utils":114,"./float":25}],23:[function(t,e,n){const{utils:r}=t("../../../utils"),{GLTextureFloat:i}=t("./float");class a extends i{constructor(t){super(t),this.type="ArrayTexture(1)"}toArray(){return r.erect2DFloat(this.renderValues(),this.output[0],this.output[1])}}e.exports={GLTextureFloat2D:a}},{"../../../utils":114,"./float":25}],24:[function(t,e,n){const{utils:r}=t("../../../utils"),{GLTextureFloat:i}=t("./float");class a extends i{constructor(t){super(t),this.type="ArrayTexture(1)"}toArray(){return r.erect3DFloat(this.renderValues(),this.output[0],this.output[1],this.output[2])}}e.exports={GLTextureFloat3D:a}},{"../../../utils":114,"./float":25}],25:[function(t,e,n){const{utils:r}=t("../../../utils"),{GLTexture:i}=t("./index");class a extends i{get textureType(){return this.context.FLOAT}constructor(t){super(t),this.type="ArrayTexture(1)"}renderRawOutput(){const t=this.context,e=this.size;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer()),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0);const n=new Float32Array(e[0]*e[1]*4);return t.readPixels(0,0,e[0],e[1],t.RGBA,t.FLOAT,n),n}renderValues(){return this._deleted?null:this.renderRawOutput()}toArray(){return r.erectFloat(this.renderValues(),this.output[0])}}e.exports={GLTextureFloat:a}},{"../../../utils":114,"./index":27}],26:[function(t,e,n){const{GLTextureUnsigned:r}=t("./unsigned");class i extends r{constructor(t){super(t),this.type="ArrayTexture(4)"}toArray(){return this.renderValues()}}e.exports={GLTextureGraphical:i}},{"./unsigned":33}],27:[function(t,e,n){const{Texture:r}=t("../../../texture");class i extends r{get textureType(){throw new Error(`"textureType" not implemented on ${this.name}`)}clone(){return new this.constructor(this)}beforeMutate(){return this.texture._refs>1&&(this.newTexture(),!0)}cloneTexture(){this.texture._refs--;const{context:t,size:e,texture:n,kernel:r}=this;r.debug&&console.warn("cloning internal texture"),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer()),a(t,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const i=t.createTexture();a(t,i),t.texImage2D(t.TEXTURE_2D,0,this.internalFormat,e[0],e[1],0,this.textureFormat,this.textureType,null),t.copyTexSubImage2D(t.TEXTURE_2D,0,0,0,0,0,e[0],e[1]),i._refs=1,this.texture=i}newTexture(){this.texture._refs--;const t=this.context,e=this.size;this.kernel.debug&&console.warn("new internal texture");const n=t.createTexture();a(t,n),t.texImage2D(t.TEXTURE_2D,0,this.internalFormat,e[0],e[1],0,this.textureFormat,this.textureType,null),n._refs=1,this.texture=n}clear(){if(this.texture._refs){this.texture._refs--;const t=this.context,e=this.texture=t.createTexture();a(t,e);const n=this.size;e._refs=1,t.texImage2D(t.TEXTURE_2D,0,this.internalFormat,n[0],n[1],0,this.textureFormat,this.textureType,null)}const{context:t,texture:e}=this;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer()),t.bindTexture(t.TEXTURE_2D,e),a(t,e),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}delete(){this._deleted||(this._deleted=!0,this.texture._refs&&(this.texture._refs--,this.texture._refs)||this.context.deleteTexture(this.texture))}framebuffer(){return this._framebuffer||(this._framebuffer=this.kernel.getRawValueFramebuffer(this.size[0],this.size[1])),this._framebuffer}}function a(t,e){t.activeTexture(t.TEXTURE15),t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)}e.exports={GLTexture:i}},{"../../../texture":113}],28:[function(t,e,n){const{utils:r}=t("../../../utils"),{GLTextureFloat:i}=t("./float");class a extends i{constructor(t){super(t),this.type="MemoryOptimizedNumberTexture"}toArray(){return r.erectMemoryOptimized2DFloat(this.renderValues(),this.output[0],this.output[1])}}e.exports={GLTextureMemoryOptimized2D:a}},{"../../../utils":114,"./float":25}],29:[function(t,e,n){const{utils:r}=t("../../../utils"),{GLTextureFloat:i}=t("./float");class a extends i{constructor(t){super(t),this.type="MemoryOptimizedNumberTexture"}toArray(){return r.erectMemoryOptimized3DFloat(this.renderValues(),this.output[0],this.output[1],this.output[2])}}e.exports={GLTextureMemoryOptimized3D:a}},{"../../../utils":114,"./float":25}],30:[function(t,e,n){const{utils:r}=t("../../../utils"),{GLTextureFloat:i}=t("./float");class a extends i{constructor(t){super(t),this.type="MemoryOptimizedNumberTexture"}toArray(){return r.erectMemoryOptimizedFloat(this.renderValues(),this.output[0])}}e.exports={GLTextureMemoryOptimized:a}},{"../../../utils":114,"./float":25}],31:[function(t,e,n){const{utils:r}=t("../../../utils"),{GLTextureUnsigned:i}=t("./unsigned");class a extends i{constructor(t){super(t),this.type="NumberTexture"}toArray(){return r.erect2DPackedFloat(this.renderValues(),this.output[0],this.output[1])}}e.exports={GLTextureUnsigned2D:a}},{"../../../utils":114,"./unsigned":33}],32:[function(t,e,n){const{utils:r}=t("../../../utils"),{GLTextureUnsigned:i}=t("./unsigned");class a extends i{constructor(t){super(t),this.type="NumberTexture"}toArray(){return r.erect3DPackedFloat(this.renderValues(),this.output[0],this.output[1],this.output[2])}}e.exports={GLTextureUnsigned3D:a}},{"../../../utils":114,"./unsigned":33}],33:[function(t,e,n){const{utils:r}=t("../../../utils"),{GLTexture:i}=t("./index");class a extends i{get textureType(){return this.context.UNSIGNED_BYTE}constructor(t){super(t),this.type="NumberTexture"}renderRawOutput(){const{context:t}=this;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer()),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0);const e=new Uint8Array(this.size[0]*this.size[1]*4);return t.readPixels(0,0,this.size[0],this.size[1],t.RGBA,t.UNSIGNED_BYTE,e),e}renderValues(){return this._deleted?null:new Float32Array(this.renderRawOutput().buffer)}toArray(){return r.erectPackedFloat(this.renderValues(),this.output[0])}}e.exports={GLTextureUnsigned:a}},{"../../../utils":114,"./index":27}],34:[function(t,e,n){const r=t("gl"),{WebGLKernel:i}=t("../web-gl/kernel"),{glKernelString:a}=t("../gl/kernel-string");let s=null,o=null,u=null,l=null,c=null;class h extends i{static get isSupported(){return null!==s||(this.setupFeatureChecks(),s=null!==u),s}static setupFeatureChecks(){if(o=null,l=null,"function"===typeof r)try{if(u=r(2,2,{preserveDrawingBuffer:!0}),!u||!u.getExtension)return;l={STACKGL_resize_drawingbuffer:u.getExtension("STACKGL_resize_drawingbuffer"),STACKGL_destroy_context:u.getExtension("STACKGL_destroy_context"),OES_texture_float:u.getExtension("OES_texture_float"),OES_texture_float_linear:u.getExtension("OES_texture_float_linear"),OES_element_index_uint:u.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:u.getExtension("WEBGL_draw_buffers"),WEBGL_color_buffer_float:u.getExtension("WEBGL_color_buffer_float")},c=this.getFeatures()}catch(t){console.warn(t)}}static isContextMatch(t){try{return"ANGLE"===t.getParameter(t.RENDERER)}catch(e){return!1}}static getIsTextureFloat(){return Boolean(l.OES_texture_float)}static getIsDrawBuffers(){return Boolean(l.WEBGL_draw_buffers)}static getChannelCount(){return l.WEBGL_draw_buffers?u.getParameter(l.WEBGL_draw_buffers.MAX_DRAW_BUFFERS_WEBGL):1}static getMaxTextureSize(){return u.getParameter(u.MAX_TEXTURE_SIZE)}static get testCanvas(){return o}static get testContext(){return u}static get features(){return c}initCanvas(){return{}}initContext(){return r(2,2,{preserveDrawingBuffer:!0})}initExtensions(){this.extensions={STACKGL_resize_drawingbuffer:this.context.getExtension("STACKGL_resize_drawingbuffer"),STACKGL_destroy_context:this.context.getExtension("STACKGL_destroy_context"),OES_texture_float:this.context.getExtension("OES_texture_float"),OES_texture_float_linear:this.context.getExtension("OES_texture_float_linear"),OES_element_index_uint:this.context.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:this.context.getExtension("WEBGL_draw_buffers")}}build(){super.build.apply(this,arguments),this.fallbackRequested||this.extensions.STACKGL_resize_drawingbuffer.resize(this.maxTexSize[0],this.maxTexSize[1])}destroyExtensions(){this.extensions.STACKGL_resize_drawingbuffer=null,this.extensions.STACKGL_destroy_context=null,this.extensions.OES_texture_float=null,this.extensions.OES_texture_float_linear=null,this.extensions.OES_element_index_uint=null,this.extensions.WEBGL_draw_buffers=null}static destroyContext(t){const e=t.getExtension("STACKGL_destroy_context");e&&e.destroy&&e.destroy()}toString(){const t="const gl = context || require('gl')(1, 1);\n",e="    if (!context) { gl.getExtension('STACKGL_destroy_context').destroy(); }\n";return a(this.constructor,arguments,this,t,e)}setOutput(t){return super.setOutput(t),this.graphical&&this.extensions.STACKGL_resize_drawingbuffer&&this.extensions.STACKGL_resize_drawingbuffer.resize(this.maxTexSize[0],this.maxTexSize[1]),this}}e.exports={HeadlessGLKernel:h}},{"../gl/kernel-string":12,"../web-gl/kernel":70,gl:2}],35:[function(t,e,n){class r{constructor(t,e){const{name:n,kernel:r,context:i,checkContext:a,onRequestContextHandle:s,onUpdateValueMismatch:o,origin:u,strictIntegers:l,type:c,tactic:h}=e;if(!n)throw new Error("name not set");if(!c)throw new Error("type not set");if(!u)throw new Error("origin not set");if("user"!==u&&"constants"!==u)throw new Error(`origin must be "user" or "constants" value is "${u}"`);if(!s)throw new Error("onRequestContextHandle is not set");this.name=n,this.origin=u,this.tactic=h,this.varName="constants"===u?`constants.${n}`:n,this.kernel=r,this.strictIntegers=l,this.type=t.type||c,this.size=t.size||null,this.index=null,this.context=i,this.checkContext=null===a||void 0===a||a,this.contextHandle=null,this.onRequestContextHandle=s,this.onUpdateValueMismatch=o,this.forceUploadEachRun=null}get id(){return`${this.origin}_${name}`}getSource(){throw new Error(`"getSource" not defined on ${this.constructor.name}`)}updateValue(t){throw new Error(`"updateValue" not defined on ${this.constructor.name}`)}}e.exports={KernelValue:r}},{}],36:[function(t,e,n){const{utils:r}=t("../utils"),{Input:i}=t("../input");class a{static get isSupported(){throw new Error(`"isSupported" not implemented on ${this.name}`)}static isContextMatch(t){throw new Error(`"isContextMatch" not implemented on ${this.name}`)}static getFeatures(){throw new Error(`"getFeatures" not implemented on ${this.name}`)}static destroyContext(t){throw new Error(`"destroyContext" called on ${this.name}`)}static nativeFunctionArguments(){throw new Error(`"nativeFunctionArguments" called on ${this.name}`)}static nativeFunctionReturnType(){throw new Error(`"nativeFunctionReturnType" called on ${this.name}`)}static combineKernels(){throw new Error(`"combineKernels" called on ${this.name}`)}constructor(t,e){if("object"!==typeof t){if("string"!==typeof t)throw new Error("source not a string");if(!r.isFunctionString(t))throw new Error("source not a function string")}this.useLegacyEncoder=!1,this.fallbackRequested=!1,this.onRequestFallback=null,this.argumentNames="string"===typeof t?r.getArgumentNamesFromString(t):null,this.argumentTypes=null,this.argumentSizes=null,this.argumentBitRatios=null,this.kernelArguments=null,this.kernelConstants=null,this.forceUploadKernelConstants=null,this.source=t,this.output=null,this.debug=!1,this.graphical=!1,this.loopMaxIterations=0,this.constants=null,this.constantTypes=null,this.constantBitRatios=null,this.dynamicArguments=!1,this.dynamicOutput=!1,this.canvas=null,this.context=null,this.checkContext=null,this.gpu=null,this.functions=null,this.nativeFunctions=null,this.injectedNative=null,this.subKernels=null,this.validate=!0,this.immutable=!1,this.pipeline=!1,this.precision=null,this.tactic=null,this.plugins=null,this.returnType=null,this.leadingReturnStatement=null,this.followingReturnStatement=null,this.optimizeFloatMemory=null,this.strictIntegers=!1,this.fixIntegerDivisionAccuracy=null,this.built=!1,this.signature=null}mergeSettings(t){for(let e in t)if(t.hasOwnProperty(e)&&this.hasOwnProperty(e)){switch(e){case"output":if(!Array.isArray(t.output)){this.setOutput(t.output);continue}break;case"functions":this.functions=[];for(let e=0;e<t.functions.length;e++)this.addFunction(t.functions[e]);continue;case"graphical":t[e]&&!t.hasOwnProperty("precision")&&(this.precision="unsigned"),this[e]=t[e];continue;case"nativeFunctions":if(!t.nativeFunctions)continue;this.nativeFunctions=[];for(let e=0;e<t.nativeFunctions.length;e++){const n=t.nativeFunctions[e],{name:r,source:i}=n;this.addNativeFunction(r,i,n)}continue}this[e]=t[e]}this.canvas||(this.canvas=this.initCanvas()),this.context||(this.context=this.initContext()),this.plugins||(this.plugins=this.initPlugins(t))}build(){throw new Error(`"build" not defined on ${this.constructor.name}`)}run(){throw new Error(`"run" not defined on ${this.constructor.name}`)}initCanvas(){throw new Error(`"initCanvas" not defined on ${this.constructor.name}`)}initContext(){throw new Error(`"initContext" not defined on ${this.constructor.name}`)}initPlugins(t){throw new Error(`"initPlugins" not defined on ${this.constructor.name}`)}addFunction(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.name&&t.source&&t.argumentTypes&&"returnType"in t)this.functions.push(t);else if("settings"in t&&"source"in t)this.functions.push(this.functionToIGPUFunction(t.source,t.settings));else{if("string"!==typeof t&&"function"!==typeof t)throw new Error("function not properly defined");this.functions.push(this.functionToIGPUFunction(t,e))}return this}addNativeFunction(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{argumentTypes:r,argumentNames:i}=n.argumentTypes?s(n.argumentTypes):this.constructor.nativeFunctionArguments(e)||{};return this.nativeFunctions.push({name:t,source:e,settings:n,argumentTypes:r,argumentNames:i,returnType:n.returnType||this.constructor.nativeFunctionReturnType(e)}),this}setupArguments(t){if(this.kernelArguments=[],this.argumentTypes)for(let e=0;e<this.argumentTypes.length;e++)this.kernelArguments.push({type:this.argumentTypes[e]});else if(!this.argumentTypes){this.argumentTypes=[];for(let e=0;e<t.length;e++){const n=r.getVariableType(t[e],this.strictIntegers),i="Integer"===n?"Number":n;this.argumentTypes.push(i),this.kernelArguments.push({type:i})}}this.argumentSizes=new Array(t.length),this.argumentBitRatios=new Int32Array(t.length);for(let e=0;e<t.length;e++){const n=t[e];this.argumentSizes[e]=n.constructor===i?n.size:null,this.argumentBitRatios[e]=this.getBitRatio(n)}if(this.argumentNames.length!==t.length)throw new Error("arguments are miss-aligned")}setupConstants(){this.kernelConstants=[];let t=null===this.constantTypes;if(t&&(this.constantTypes={}),this.constantBitRatios={},this.constants)for(let e in this.constants){if(t){const t=r.getVariableType(this.constants[e],this.strictIntegers);this.constantTypes[e]=t,this.kernelConstants.push({name:e,type:t})}else this.kernelConstants.push({name:e,type:this.constantTypes[e]});this.constantBitRatios[e]=this.getBitRatio(this.constants[e])}}setOptimizeFloatMemory(t){return this.optimizeFloatMemory=t,this}toKernelOutput(t){return t.hasOwnProperty("x")?t.hasOwnProperty("y")?t.hasOwnProperty("z")?[t.x,t.y,t.z]:[t.x,t.y]:[t.x]:t}setOutput(t){return this.output=this.toKernelOutput(t),this}setDebug(t){return this.debug=t,this}setGraphical(t){return this.graphical=t,this.precision="unsigned",this}setLoopMaxIterations(t){return this.loopMaxIterations=t,this}setConstants(t){return this.constants=t,this}setConstantTypes(t){return this.constantTypes=t,this}setFunctions(t){for(let e=0;e<t.length;e++)this.addFunction(t[e]);return this}setNativeFunctions(t){for(let e=0;e<t.length;e++){const n=t[e],{name:r,source:i}=n;this.addNativeFunction(r,i,n)}return this}setInjectedNative(t){return this.injectedNative=t,this}setPipeline(t){return this.pipeline=t,this}setPrecision(t){return this.precision=t,this}setDimensions(t){return r.warnDeprecated("method","setDimensions","setOutput"),this.output=t,this}setOutputToTexture(t){return r.warnDeprecated("method","setOutputToTexture","setPipeline"),this.pipeline=t,this}setImmutable(t){return this.immutable=t,this}setCanvas(t){return this.canvas=t,this}setStrictIntegers(t){return this.strictIntegers=t,this}setDynamicOutput(t){return this.dynamicOutput=t,this}setHardcodeConstants(t){return r.warnDeprecated("method","setHardcodeConstants"),this.setDynamicOutput(t),this.setDynamicArguments(t),this}setDynamicArguments(t){return this.dynamicArguments=t,this}setUseLegacyEncoder(t){return this.useLegacyEncoder=t,this}setWarnVarUsage(t){return r.warnDeprecated("method","setWarnVarUsage"),this}getCanvas(){return r.warnDeprecated("method","getCanvas"),this.canvas}getWebGl(){return r.warnDeprecated("method","getWebGl"),this.context}setContext(t){return this.context=t,this}setArgumentTypes(t){if(Array.isArray(t))this.argumentTypes=t;else{this.argumentTypes=[];for(const e in t){if(!t.hasOwnProperty(e))continue;const n=this.argumentNames.indexOf(e);if(-1===n)throw new Error(`unable to find argument ${e}`);this.argumentTypes[n]=t[e]}}return this}setTactic(t){return this.tactic=t,this}requestFallback(t){if(!this.onRequestFallback)throw new Error(`"onRequestFallback" not defined on ${this.constructor.name}`);return this.fallbackRequested=!0,this.onRequestFallback(t)}validateSettings(){throw new Error(`"validateSettings" not defined on ${this.constructor.name}`)}addSubKernel(t){if(null===this.subKernels&&(this.subKernels=[]),!t.source)throw new Error('subKernel missing "source" property');if(!t.property&&isNaN(t.property))throw new Error('subKernel missing "property" property');if(!t.name)throw new Error('subKernel missing "name" property');return this.subKernels.push(t),this}destroy(t){throw new Error(`"destroy" called on ${this.constructor.name}`)}getBitRatio(t){if("single"===this.precision)return 4;if(Array.isArray(t[0]))return this.getBitRatio(t[0]);if(t.constructor===i)return this.getBitRatio(t.value);switch(t.constructor){case Uint8ClampedArray:case Uint8Array:case Int8Array:return 1;case Uint16Array:case Int16Array:return 2;case Float32Array:case Int32Array:default:return 4}}getPixels(t){throw new Error(`"getPixels" called on ${this.constructor.name}`)}checkOutput(){if(!this.output||!r.isArray(this.output))throw new Error("kernel.output not an array");if(this.output.length<1)throw new Error("kernel.output is empty, needs at least 1 value");for(let t=0;t<this.output.length;t++)if(isNaN(this.output[t])||this.output[t]<1)throw new Error(`${this.constructor.name}.output[${t}] incorrectly defined as \`${this.output[t]}\`, needs to be numeric, and greater than 0`)}prependString(t){throw new Error(`"prependString" called on ${this.constructor.name}`)}hasPrependString(t){throw new Error(`"hasPrependString" called on ${this.constructor.name}`)}toJSON(){return{settings:{output:this.output,pipeline:this.pipeline,argumentNames:this.argumentNames,argumentsTypes:this.argumentTypes,constants:this.constants,pluginNames:this.plugins?this.plugins.map((t=>t.name)):null,returnType:this.returnType}}}buildSignature(t){const e=this.constructor;this.signature=e.getSignature(this,e.getArgumentTypes(this,t))}static getArgumentTypes(t,e){const n=new Array(e.length);for(let i=0;i<e.length;i++){const a=e[i],s=t.argumentTypes[i];if(a.type)n[i]=a.type;else switch(s){case"Number":case"Integer":case"Float":case"ArrayTexture(1)":n[i]=r.getVariableType(a);break;default:n[i]=s}}return n}static getSignature(t,e){throw new Error(`"getSignature" not implemented on ${this.name}`)}functionToIGPUFunction(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!==typeof t&&"function"!==typeof t)throw new Error("source not a string or function");const n="string"===typeof t?t:t.toString();let i=[];return i=Array.isArray(e.argumentTypes)?e.argumentTypes:"object"===typeof e.argumentTypes?r.getArgumentNamesFromString(n).map((t=>e.argumentTypes[t]))||[]:e.argumentTypes||[],{name:r.getFunctionNameFromString(n)||null,source:n,argumentTypes:i,returnType:e.returnType||null}}onActivate(t){}}function s(t){const e=Object.keys(t),n=[];for(let r=0;r<e.length;r++){const i=e[r];n.push(t[i])}return{argumentTypes:n,argumentNames:e}}e.exports={Kernel:a}},{"../input":110,"../utils":114}],37:[function(t,e,n){const r=`__HEADER__;\n__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n\nconst int LOOP_MAX = __LOOP_MAX__;\n\n__PLUGINS__;\n__CONSTANTS__;\n\nvarying vec2 vTexCoord;\n\nfloat acosh(float x) {\n  return log(x + sqrt(x * x - 1.0));\n}\n\nfloat sinh(float x) {\n  return (pow(${Math.E}, x) - pow(${Math.E}, -x)) / 2.0;\n}\n\nfloat asinh(float x) {\n  return log(x + sqrt(x * x + 1.0));\n}\n\nfloat atan2(float v1, float v2) {\n  if (v1 == 0.0 || v2 == 0.0) return 0.0;\n  return atan(v1 / v2);\n}\n\nfloat atanh(float x) {\n  x = (x + 1.0) / (x - 1.0);\n  if (x < 0.0) {\n    return 0.5 * log(-x);\n  }\n  return 0.5 * log(x);\n}\n\nfloat cbrt(float x) {\n  if (x >= 0.0) {\n    return pow(x, 1.0 / 3.0);\n  } else {\n    return -pow(x, 1.0 / 3.0);\n  }\n}\n\nfloat cosh(float x) {\n  return (pow(${Math.E}, x) + pow(${Math.E}, -x)) / 2.0; \n}\n\nfloat expm1(float x) {\n  return pow(${Math.E}, x) - 1.0; \n}\n\nfloat fround(highp float x) {\n  return x;\n}\n\nfloat imul(float v1, float v2) {\n  return float(int(v1) * int(v2));\n}\n\nfloat log10(float x) {\n  return log2(x) * (1.0 / log2(10.0));\n}\n\nfloat log1p(float x) {\n  return log(1.0 + x);\n}\n\nfloat _pow(float v1, float v2) {\n  if (v2 == 0.0) return 1.0;\n  return pow(v1, v2);\n}\n\nfloat tanh(float x) {\n  float e = exp(2.0 * x);\n  return (e - 1.0) / (e + 1.0);\n}\n\nfloat trunc(float x) {\n  if (x >= 0.0) {\n    return floor(x); \n  } else {\n    return ceil(x);\n  }\n}\n\nvec4 _round(vec4 x) {\n  return floor(x + 0.5);\n}\n\nfloat _round(float x) {\n  return floor(x + 0.5);\n}\n\nconst int BIT_COUNT = 32;\nint modi(int x, int y) {\n  return x - y * (x / y);\n}\n\nint bitwiseOr(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) || (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseXOR(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) != (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseAnd(int a, int b) {\n  int result = 0;\n  int n = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) && (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 && b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseNot(int a) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (modi(a, 2) == 0) {\n      result += n;    \n    }\n    a = a / 2;\n    n = n * 2;\n  }\n  return result;\n}\nint bitwiseZeroFillLeftShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n *= 2;\n  }\n\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nint bitwiseSignedRightShift(int num, int shifts) {\n  return int(floor(float(num) / pow(2.0, float(shifts))));\n}\n\nint bitwiseZeroFillRightShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n /= 2;\n  }\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nvec2 integerMod(vec2 x, float y) {\n  vec2 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec3 integerMod(vec3 x, float y) {\n  vec3 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec4 integerMod(vec4 x, vec4 y) {\n  vec4 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nfloat integerMod(float x, float y) {\n  float res = floor(mod(x, y));\n  return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);\n}\n\nint integerMod(int x, int y) {\n  return x - (y * int(x / y));\n}\n\n__DIVIDE_WITH_INTEGER_CHECK__;\n\n// Here be dragons!\n// DO NOT OPTIMIZE THIS CODE\n// YOU WILL BREAK SOMETHING ON SOMEBODY'S MACHINE\n// LEAVE IT AS IT IS, LEST YOU WASTE YOUR OWN TIME\nconst vec2 MAGIC_VEC = vec2(1.0, -256.0);\nconst vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);\nconst vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536\nfloat decode32(vec4 texel) {\n  __DECODE32_ENDIANNESS__;\n  texel *= 255.0;\n  vec2 gte128;\n  gte128.x = texel.b >= 128.0 ? 1.0 : 0.0;\n  gte128.y = texel.a >= 128.0 ? 1.0 : 0.0;\n  float exponent = 2.0 * texel.a - 127.0 + dot(gte128, MAGIC_VEC);\n  float res = exp2(_round(exponent));\n  texel.b = texel.b - 128.0 * gte128.x;\n  res = dot(texel, SCALE_FACTOR) * exp2(_round(exponent-23.0)) + res;\n  res *= gte128.y * -2.0 + 1.0;\n  return res;\n}\n\nfloat decode16(vec4 texel, int index) {\n  int channel = integerMod(index, 2);\n  if (channel == 0) return texel.r * 255.0 + texel.g * 65280.0;\n  if (channel == 1) return texel.b * 255.0 + texel.a * 65280.0;\n  return 0.0;\n}\n\nfloat decode8(vec4 texel, int index) {\n  int channel = integerMod(index, 4);\n  if (channel == 0) return texel.r * 255.0;\n  if (channel == 1) return texel.g * 255.0;\n  if (channel == 2) return texel.b * 255.0;\n  if (channel == 3) return texel.a * 255.0;\n  return 0.0;\n}\n\nvec4 legacyEncode32(float f) {\n  float F = abs(f);\n  float sign = f < 0.0 ? 1.0 : 0.0;\n  float exponent = floor(log2(F));\n  float mantissa = (exp2(-exponent) * F);\n  // exponent += floor(log2(mantissa));\n  vec4 texel = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;\n  texel.rg = integerMod(texel.rg, 256.0);\n  texel.b = integerMod(texel.b, 128.0);\n  texel.a = exponent*0.5 + 63.5;\n  texel.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;\n  texel = floor(texel);\n  texel *= 0.003921569; // 1/255\n  __ENCODE32_ENDIANNESS__;\n  return texel;\n}\n\n// https://github.com/gpujs/gpu.js/wiki/Encoder-details\nvec4 encode32(float value) {\n  if (value == 0.0) return vec4(0, 0, 0, 0);\n\n  float exponent;\n  float mantissa;\n  vec4  result;\n  float sgn;\n\n  sgn = step(0.0, -value);\n  value = abs(value);\n\n  exponent = floor(log2(value));\n\n  mantissa = value*pow(2.0, -exponent)-1.0;\n  exponent = exponent+127.0;\n  result   = vec4(0,0,0,0);\n\n  result.a = floor(exponent/2.0);\n  exponent = exponent - result.a*2.0;\n  result.a = result.a + 128.0*sgn;\n\n  result.b = floor(mantissa * 128.0);\n  mantissa = mantissa - result.b / 128.0;\n  result.b = result.b + exponent*128.0;\n\n  result.g = floor(mantissa*32768.0);\n  mantissa = mantissa - result.g/32768.0;\n\n  result.r = floor(mantissa*8388608.0);\n  return result/255.0;\n}\n// Dragons end here\n\nint index;\nivec3 threadId;\n\nivec3 indexTo3D(int idx, ivec3 texDim) {\n  int z = int(idx / (texDim.x * texDim.y));\n  idx -= z * int(texDim.x * texDim.y);\n  int y = int(idx / texDim.x);\n  int x = int(integerMod(idx, texDim.x));\n  return ivec3(x, y, z);\n}\n\nfloat get32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  return decode32(texel);\n}\n\nfloat get16(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x * 2;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize.x * 2, texSize.y));\n  return decode16(texel, index);\n}\n\nfloat get8(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x * 4;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize.x * 4, texSize.y));\n  return decode8(texel, index);\n}\n\nfloat getMemoryOptimized32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 4);\n  index = index / 4;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  if (channel == 0) return texel.r;\n  if (channel == 1) return texel.g;\n  if (channel == 2) return texel.b;\n  if (channel == 3) return texel.a;\n  return 0.0;\n}\n\nvec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  return texture2D(tex, st / vec2(texSize));\n}\n\nfloat getFloatFromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return result[0];\n}\n\nvec2 getVec2FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec2(result[0], result[1]);\n}\n\nvec2 getMemoryOptimizedVec2(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int channel = integerMod(index, 2);\n  index = index / 2;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  if (channel == 0) return vec2(texel.r, texel.g);\n  if (channel == 1) return vec2(texel.b, texel.a);\n  return vec2(0.0, 0.0);\n}\n\nvec3 getVec3FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec3(result[0], result[1], result[2]);\n}\n\nvec3 getMemoryOptimizedVec3(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int fieldIndex = 3 * (x + texDim.x * (y + texDim.y * z));\n  int vectorIndex = fieldIndex / 4;\n  int vectorOffset = fieldIndex - vectorIndex * 4;\n  int readY = vectorIndex / texSize.x;\n  int readX = vectorIndex - readY * texSize.x;\n  vec4 tex1 = texture2D(tex, (vec2(readX, readY) + 0.5) / vec2(texSize));\n  \n  if (vectorOffset == 0) {\n    return tex1.xyz;\n  } else if (vectorOffset == 1) {\n    return tex1.yzw;\n  } else {\n    readX++;\n    if (readX >= texSize.x) {\n      readX = 0;\n      readY++;\n    }\n    vec4 tex2 = texture2D(tex, vec2(readX, readY) / vec2(texSize));\n    if (vectorOffset == 2) {\n      return vec3(tex1.z, tex1.w, tex2.x);\n    } else {\n      return vec3(tex1.w, tex2.x, tex2.y);\n    }\n  }\n}\n\nvec4 getVec4FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  return getImage2D(tex, texSize, texDim, z, y, x);\n}\n\nvec4 getMemoryOptimizedVec4(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 2);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  return vec4(texel.r, texel.g, texel.b, texel.a);\n}\n\nvec4 actualColor;\nvoid color(float r, float g, float b, float a) {\n  actualColor = vec4(r,g,b,a);\n}\n\nvoid color(float r, float g, float b) {\n  color(r,g,b,1.0);\n}\n\nvoid color(sampler2D image) {\n  actualColor = texture2D(image, vTexCoord);\n}\n\nfloat modulo(float number, float divisor) {\n  if (number < 0.0) {\n    number = abs(number);\n    if (divisor < 0.0) {\n      divisor = abs(divisor);\n    }\n    return -mod(number, divisor);\n  }\n  if (divisor < 0.0) {\n    divisor = abs(divisor);\n  }\n  return mod(number, divisor);\n}\n\n__INJECTED_NATIVE__;\n__MAIN_CONSTANTS__;\n__MAIN_ARGUMENTS__;\n__KERNEL__;\n\nvoid main(void) {\n  index = int(vTexCoord.s * float(uTexSize.x)) + int(vTexCoord.t * float(uTexSize.y)) * uTexSize.x;\n  __MAIN_RESULT__;\n}`;e.exports={fragmentShader:r}},{}],38:[function(t,e,n){const{utils:r}=t("../../utils"),{FunctionNode:i}=t("../function-node");class a extends i{constructor(t,e){super(t,e),e&&e.hasOwnProperty("fixIntegerDivisionAccuracy")&&(this.fixIntegerDivisionAccuracy=e.fixIntegerDivisionAccuracy)}astConditionalExpression(t,e){if("ConditionalExpression"!==t.type)throw this.astErrorOutput("Not a conditional expression",t);const n=this.getType(t.consequent),r=this.getType(t.alternate);return null===n&&null===r?(e.push("if ("),this.astGeneric(t.test,e),e.push(") {"),this.astGeneric(t.consequent,e),e.push(";"),e.push("} else {"),this.astGeneric(t.alternate,e),e.push(";"),e.push("}"),e):(e.push("("),this.astGeneric(t.test,e),e.push("?"),this.astGeneric(t.consequent,e),e.push(":"),this.astGeneric(t.alternate,e),e.push(")"),e)}astFunction(t,e){if(this.isRootKernel)e.push("void");else{this.returnType||this.findLastReturn()&&(this.returnType=this.getType(t.body),"LiteralInteger"===this.returnType&&(this.returnType="Number"));const{returnType:n}=this;if(n){const t=s[n];if(!t)throw new Error(`unknown type ${n}`);e.push(t)}else e.push("void")}if(e.push(" "),e.push(this.name),e.push("("),!this.isRootKernel)for(let n=0;n<this.argumentNames.length;++n){const i=this.argumentNames[n];n>0&&e.push(", ");let a=this.argumentTypes[this.argumentNames.indexOf(i)];if(!a)throw this.astErrorOutput(`Unknown argument ${i} type`,t);"LiteralInteger"===a&&(this.argumentTypes[n]=a="Number");const o=s[a];if(!o)throw this.astErrorOutput("Unexpected expression",t);const u=r.sanitizeName(i);"sampler2D"===o||"sampler2DArray"===o?e.push(`${o} user_${u},ivec2 user_${u}Size,ivec3 user_${u}Dim`):e.push(`${o} user_${u}`)}e.push(") {\n");for(let n=0;n<t.body.body.length;++n)this.astGeneric(t.body.body[n],e),e.push("\n");return e.push("}\n"),e}astReturnStatement(t,e){if(!t.argument)throw this.astErrorOutput("Unexpected return statement",t);this.pushState("skip-literal-correction");const n=this.getType(t.argument);this.popState("skip-literal-correction");const r=[];switch(this.returnType||(this.returnType="LiteralInteger"===n||"Integer"===n?"Number":n),this.returnType){case"LiteralInteger":case"Number":case"Float":switch(n){case"Integer":r.push("float("),this.astGeneric(t.argument,r),r.push(")");break;case"LiteralInteger":this.castLiteralToFloat(t.argument,r),"Integer"===this.getType(t)&&(r.unshift("float("),r.push(")"));break;default:this.astGeneric(t.argument,r)}break;case"Integer":switch(n){case"Float":case"Number":this.castValueToInteger(t.argument,r);break;case"LiteralInteger":this.castLiteralToInteger(t.argument,r);break;default:this.astGeneric(t.argument,r)}break;case"Array(4)":case"Array(3)":case"Array(2)":case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":case"Input":this.astGeneric(t.argument,r);break;default:throw this.astErrorOutput(`unhandled return type ${this.returnType}`,t)}return this.isRootKernel?(e.push(`kernelResult = ${r.join("")};`),e.push("return;")):this.isSubKernel?(e.push(`subKernelResult_${this.name} = ${r.join("")};`),e.push(`return subKernelResult_${this.name};`)):e.push(`return ${r.join("")};`),e}astLiteral(t,e){if(isNaN(t.value))throw this.astErrorOutput("Non-numeric literal not supported : "+t.value,t);const n=this.astKey(t);return Number.isInteger(t.value)?this.isState("casting-to-integer")||this.isState("building-integer")?(this.literalTypes[n]="Integer",e.push(`${t.value}`)):(this.isState("casting-to-float")||this.isState("building-float"),this.literalTypes[n]="Number",e.push(`${t.value}.0`)):this.isState("casting-to-integer")||this.isState("building-integer")?(this.literalTypes[n]="Integer",e.push(Math.round(t.value))):(this.literalTypes[n]="Number",e.push(`${t.value}`)),e}astBinaryExpression(t,e){if(this.checkAndUpconvertOperator(t,e))return e;if(this.fixIntegerDivisionAccuracy&&"/"===t.operator){switch(e.push("divWithIntCheck("),this.pushState("building-float"),this.getType(t.left)){case"Integer":this.castValueToFloat(t.left,e);break;case"LiteralInteger":this.castLiteralToFloat(t.left,e);break;default:this.astGeneric(t.left,e)}switch(e.push(", "),this.getType(t.right)){case"Integer":this.castValueToFloat(t.right,e);break;case"LiteralInteger":this.castLiteralToFloat(t.right,e);break;default:this.astGeneric(t.right,e)}return this.popState("building-float"),e.push(")"),e}e.push("(");const n=this.getType(t.left)||"Number",r=this.getType(t.right)||"Number";if(!n||!r)throw this.astErrorOutput("Unhandled binary expression",t);const i=n+" & "+r;switch(i){case"Integer & Integer":this.pushState("building-integer"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.astGeneric(t.right,e),this.popState("building-integer");break;case"Number & Float":case"Float & Number":case"Float & Float":case"Number & Number":this.pushState("building-float"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.astGeneric(t.right,e),this.popState("building-float");break;case"LiteralInteger & LiteralInteger":this.isState("casting-to-integer")||this.isState("building-integer")?(this.pushState("building-integer"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.astGeneric(t.right,e),this.popState("building-integer")):(this.pushState("building-float"),this.castLiteralToFloat(t.left,e),e.push(o[t.operator]||t.operator),this.castLiteralToFloat(t.right,e),this.popState("building-float"));break;case"Integer & Float":case"Integer & Number":if((">"===t.operator||"<"===t.operator&&"Literal"===t.right.type)&&!Number.isInteger(t.right.value)){this.pushState("building-float"),this.castValueToFloat(t.left,e),e.push(o[t.operator]||t.operator),this.astGeneric(t.right,e),this.popState("building-float");break}if(this.pushState("building-integer"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.pushState("casting-to-integer"),"Literal"===t.right.type){const n=[];if(this.astGeneric(t.right,n),"Integer"!==this.getType(t.right))throw this.astErrorOutput("Unhandled binary expression with literal",t);e.push(n.join(""))}else e.push("int("),this.astGeneric(t.right,e),e.push(")");this.popState("casting-to-integer"),this.popState("building-integer");break;case"Integer & LiteralInteger":this.pushState("building-integer"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.castLiteralToInteger(t.right,e),this.popState("building-integer");break;case"Number & Integer":case"Float & Integer":this.pushState("building-float"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.castValueToFloat(t.right,e),this.popState("building-float");break;case"Float & LiteralInteger":case"Number & LiteralInteger":this.pushState("building-float"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.castLiteralToFloat(t.right,e),this.popState("building-float");break;case"LiteralInteger & Float":case"LiteralInteger & Number":this.isState("casting-to-integer")?(this.pushState("building-integer"),this.castLiteralToInteger(t.left,e),e.push(o[t.operator]||t.operator),this.castValueToInteger(t.right,e),this.popState("building-integer")):(this.pushState("building-float"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.pushState("casting-to-float"),this.astGeneric(t.right,e),this.popState("casting-to-float"),this.popState("building-float"));break;case"LiteralInteger & Integer":this.pushState("building-integer"),this.castLiteralToInteger(t.left,e),e.push(o[t.operator]||t.operator),this.astGeneric(t.right,e),this.popState("building-integer");break;case"Boolean & Boolean":this.pushState("building-boolean"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.astGeneric(t.right,e),this.popState("building-boolean");break;default:throw this.astErrorOutput(`Unhandled binary expression between ${i}`,t)}return e.push(")"),e}checkAndUpconvertOperator(t,e){const n=this.checkAndUpconvertBitwiseOperators(t,e);if(n)return n;const r={"%":this.fixIntegerDivisionAccuracy?"integerCorrectionModulo":"modulo","**":"pow"}[t.operator];if(!r)return null;switch(e.push(r),e.push("("),this.getType(t.left)){case"Integer":this.castValueToFloat(t.left,e);break;case"LiteralInteger":this.castLiteralToFloat(t.left,e);break;default:this.astGeneric(t.left,e)}switch(e.push(","),this.getType(t.right)){case"Integer":this.castValueToFloat(t.right,e);break;case"LiteralInteger":this.castLiteralToFloat(t.right,e);break;default:this.astGeneric(t.right,e)}return e.push(")"),e}checkAndUpconvertBitwiseOperators(t,e){const n={"&":"bitwiseAnd","|":"bitwiseOr","^":"bitwiseXOR","<<":"bitwiseZeroFillLeftShift",">>":"bitwiseSignedRightShift",">>>":"bitwiseZeroFillRightShift"}[t.operator];if(!n)return null;switch(e.push(n),e.push("("),this.getType(t.left)){case"Number":case"Float":this.castValueToInteger(t.left,e);break;case"LiteralInteger":this.castLiteralToInteger(t.left,e);break;default:this.astGeneric(t.left,e)}switch(e.push(","),this.getType(t.right)){case"Number":case"Float":this.castValueToInteger(t.right,e);break;case"LiteralInteger":this.castLiteralToInteger(t.right,e);break;default:this.astGeneric(t.right,e)}return e.push(")"),e}checkAndUpconvertBitwiseUnary(t,e){const n={"~":"bitwiseNot"}[t.operator];if(!n)return null;switch(e.push(n),e.push("("),this.getType(t.argument)){case"Number":case"Float":this.castValueToInteger(t.argument,e);break;case"LiteralInteger":this.castLiteralToInteger(t.argument,e);break;default:this.astGeneric(t.argument,e)}return e.push(")"),e}castLiteralToInteger(t,e){return this.pushState("casting-to-integer"),this.astGeneric(t,e),this.popState("casting-to-integer"),e}castLiteralToFloat(t,e){return this.pushState("casting-to-float"),this.astGeneric(t,e),this.popState("casting-to-float"),e}castValueToInteger(t,e){return this.pushState("casting-to-integer"),e.push("int("),this.astGeneric(t,e),e.push(")"),this.popState("casting-to-integer"),e}castValueToFloat(t,e){return this.pushState("casting-to-float"),e.push("float("),this.astGeneric(t,e),e.push(")"),this.popState("casting-to-float"),e}astIdentifierExpression(t,e){if("Identifier"!==t.type)throw this.astErrorOutput("IdentifierExpression - not an Identifier",t);const n=this.getType(t),i=r.sanitizeName(t.name);return"Infinity"===t.name?e.push("3.402823466e+38"):"Boolean"===n&&this.argumentNames.indexOf(i)>-1?e.push(`bool(user_${i})`):e.push(`user_${i}`),e}astForStatement(t,e){if("ForStatement"!==t.type)throw this.astErrorOutput("Invalid for statement",t);const n=[],r=[],i=[],a=[];let s=null;if(t.init){const{declarations:e}=t.init;e.length>1&&(s=!1),this.astGeneric(t.init,n);for(let t=0;t<e.length;t++)e[t].init&&"Literal"!==e[t].init.type&&(s=!1)}else s=!1;if(t.test?this.astGeneric(t.test,r):s=!1,t.update?this.astGeneric(t.update,i):s=!1,t.body&&(this.pushState("loop-body"),this.astGeneric(t.body,a),this.popState("loop-body")),null===s&&(s=this.isSafe(t.init)&&this.isSafe(t.test)),s){const t=n.join(""),s=";"!==t[t.length-1];e.push(`for (${t}${s?";":""}${r.join("")};${i.join("")}){\n`),e.push(a.join("")),e.push("}\n")}else{const t=this.getInternalVariableName("safeI");n.length>0&&e.push(n.join(""),"\n"),e.push(`for (int ${t}=0;${t}<LOOP_MAX;${t}++){\n`),r.length>0&&e.push(`if (!${r.join("")}) break;\n`),e.push(a.join("")),e.push(`\n${i.join("")};`),e.push("}\n")}return e}astWhileStatement(t,e){if("WhileStatement"!==t.type)throw this.astErrorOutput("Invalid while statement",t);const n=this.getInternalVariableName("safeI");return e.push(`for (int ${n}=0;${n}<LOOP_MAX;${n}++){\n`),e.push("if (!"),this.astGeneric(t.test,e),e.push(") break;\n"),this.astGeneric(t.body,e),e.push("}\n"),e}astDoWhileStatement(t,e){if("DoWhileStatement"!==t.type)throw this.astErrorOutput("Invalid while statement",t);const n=this.getInternalVariableName("safeI");return e.push(`for (int ${n}=0;${n}<LOOP_MAX;${n}++){\n`),this.astGeneric(t.body,e),e.push("if (!"),this.astGeneric(t.test,e),e.push(") break;\n"),e.push("}\n"),e}astAssignmentExpression(t,e){if("%="===t.operator)this.astGeneric(t.left,e),e.push("="),e.push("mod("),this.astGeneric(t.left,e),e.push(","),this.astGeneric(t.right,e),e.push(")");else{if("**="!==t.operator){const n=this.getType(t.left),r=this.getType(t.right);return this.astGeneric(t.left,e),e.push(t.operator),"Integer"!==n&&"Integer"===r?(e.push("float("),this.astGeneric(t.right,e),e.push(")")):this.astGeneric(t.right,e),e}this.astGeneric(t.left,e),e.push("="),e.push("pow("),this.astGeneric(t.left,e),e.push(","),this.astGeneric(t.right,e),e.push(")")}}astBlockStatement(t,e){if(this.isState("loop-body")){this.pushState("block-body");for(let n=0;n<t.body.length;n++)this.astGeneric(t.body[n],e);this.popState("block-body")}else{e.push("{\n");for(let n=0;n<t.body.length;n++)this.astGeneric(t.body[n],e);e.push("}\n")}return e}astVariableDeclaration(t,e){const n=t.declarations;if(!n||!n[0]||!n[0].init)throw this.astErrorOutput("Unexpected expression",t);const i=[];let a=null;const o=[];let u=[];for(let l=0;l<n.length;l++){const e=n[l],i=e.init,c=this.getDeclaration(e.id),h=this.getType(e.init);let p=h;"LiteralInteger"===p&&(p="Integer"===c.suggestedType?"Integer":"Number");const f=s[p];if(!f)throw this.astErrorOutput(`Markup type ${p} not handled`,t);const d=[];if("Integer"===h&&"Integer"===p){if(c.valueType="Number",0===l||null===a)d.push("float ");else if(p!==a)throw new Error("Unhandled declaration");a=p,d.push(`user_${r.sanitizeName(e.id.name)}=`),d.push("float("),this.astGeneric(i,d),d.push(")")}else c.valueType=p,0===l||null===a?d.push(`${f} `):p!==a&&(o.push(u.join(",")),u=[],d.push(`${f} `)),a=p,d.push(`user_${r.sanitizeName(e.id.name)}=`),"Number"===h&&"Integer"===p?i.left&&"Literal"===i.left.type?this.astGeneric(i,d):(d.push("int("),this.astGeneric(i,d),d.push(")")):"LiteralInteger"===h&&"Integer"===p?this.castLiteralToInteger(i,d):this.astGeneric(i,d);u.push(d.join(""))}return u.length>0&&o.push(u.join(",")),i.push(o.join(";")),e.push(i.join("")),e.push(";"),e}astIfStatement(t,e){return e.push("if ("),this.astGeneric(t.test,e),e.push(")"),"BlockStatement"===t.consequent.type?this.astGeneric(t.consequent,e):(e.push(" {\n"),this.astGeneric(t.consequent,e),e.push("\n}\n")),t.alternate&&(e.push("else "),"BlockStatement"===t.alternate.type||"IfStatement"===t.alternate.type?this.astGeneric(t.alternate,e):(e.push(" {\n"),this.astGeneric(t.alternate,e),e.push("\n}\n"))),e}astSwitchStatement(t,e){if("SwitchStatement"!==t.type)throw this.astErrorOutput("Invalid switch statement",t);const{discriminant:n,cases:r}=t,i=this.getType(n),a=`switchDiscriminant${this.astKey(t,"_")}`;switch(i){case"Float":case"Number":e.push(`float ${a} = `),this.astGeneric(n,e),e.push(";\n");break;case"Integer":e.push(`int ${a} = `),this.astGeneric(n,e),e.push(";\n")}if(1===r.length&&!r[0].test)return this.astGeneric(r[0].consequent,e),e;let s=!1,o=[],u=!1,l=!1;for(let c=0;c<r.length;c++){if(r[c].test){if(0!==c&&l?s?(e.push(`${a} == `),s=!1):e.push(` else if (${a} == `):(l=!0,e.push(`if (${a} == `)),"Integer"===i)switch(this.getType(r[c].test)){case"Number":case"Float":this.castValueToInteger(r[c].test,e);break;case"LiteralInteger":this.castLiteralToInteger(r[c].test,e)}else{if("Float"!==i)throw new Error("unhanlded");switch(this.getType(r[c].test)){case"LiteralInteger":this.castLiteralToFloat(r[c].test,e);break;case"Integer":this.castValueToFloat(r[c].test,e)}}if(!r[c].consequent||0===r[c].consequent.length){s=!0,e.push(" || ");continue}e.push(") {\n")}else{if(r.length>c+1){u=!0,this.astGeneric(r[c].consequent,o);continue}e.push(" else {\n")}this.astGeneric(r[c].consequent,e),e.push("\n}")}return u&&(e.push(" else {"),e.push(o.join("")),e.push("}")),e}astThisExpression(t,e){return e.push("this"),e}astMemberExpression(t,e){const{property:n,name:i,signature:a,origin:s,type:o,xProperty:u,yProperty:l,zProperty:c}=this.getMemberExpressionDetails(t);switch(a){case"value.thread.value":case"this.thread.value":if("x"!==i&&"y"!==i&&"z"!==i)throw this.astErrorOutput("Unexpected expression, expected `this.thread.x`, `this.thread.y`, or `this.thread.z`",t);return e.push(`threadId.${i}`),e;case"this.output.value":if(this.dynamicOutput)switch(i){case"x":this.isState("casting-to-float")?e.push("float(uOutputDim.x)"):e.push("uOutputDim.x");break;case"y":this.isState("casting-to-float")?e.push("float(uOutputDim.y)"):e.push("uOutputDim.y");break;case"z":this.isState("casting-to-float")?e.push("float(uOutputDim.z)"):e.push("uOutputDim.z");break;default:throw this.astErrorOutput("Unexpected expression",t)}else switch(i){case"x":this.isState("casting-to-integer")?e.push(this.output[0]):e.push(this.output[0],".0");break;case"y":this.isState("casting-to-integer")?e.push(this.output[1]):e.push(this.output[1],".0");break;case"z":this.isState("casting-to-integer")?e.push(this.output[2]):e.push(this.output[2],".0");break;default:throw this.astErrorOutput("Unexpected expression",t)}return e;case"value":throw this.astErrorOutput("Unexpected expression",t);case"value[]":case"value[][]":case"value[][][]":case"value[][][][]":case"value.value":if("Math"===s)return e.push(Math[i]),e;const a=r.sanitizeName(i);switch(n){case"r":return e.push(`user_${a}.r`),e;case"g":return e.push(`user_${a}.g`),e;case"b":return e.push(`user_${a}.b`),e;case"a":return e.push(`user_${a}.a`),e}break;case"this.constants.value":if("undefined"===typeof u)switch(o){case"Array(2)":case"Array(3)":case"Array(4)":return e.push(`constants_${r.sanitizeName(i)}`),e}case"this.constants.value[]":case"this.constants.value[][]":case"this.constants.value[][][]":case"this.constants.value[][][][]":break;case"fn()[]":return this.astCallExpression(t.object,e),e.push("["),e.push(this.memberExpressionPropertyMarkup(n)),e.push("]"),e;case"fn()[][]":return this.astCallExpression(t.object.object,e),e.push("["),e.push(this.memberExpressionPropertyMarkup(t.object.property)),e.push("]"),e.push("["),e.push(this.memberExpressionPropertyMarkup(t.property)),e.push("]"),e;case"[][]":return this.astArrayExpression(t.object,e),e.push("["),e.push(this.memberExpressionPropertyMarkup(n)),e.push("]"),e;default:throw this.astErrorOutput("Unexpected expression",t)}if(!1===t.computed)switch(o){case"Number":case"Integer":case"Float":case"Boolean":return e.push(`${s}_${r.sanitizeName(i)}`),e}const h=`${s}_${r.sanitizeName(i)}`;switch(o){case"Array(2)":case"Array(3)":case"Array(4)":this.astGeneric(t.object,e),e.push("["),e.push(this.memberExpressionPropertyMarkup(u)),e.push("]");break;case"HTMLImageArray":e.push(`getImage3D(${h}, ${h}Size, ${h}Dim, `),this.memberExpressionXYZ(u,l,c,e),e.push(")");break;case"ArrayTexture(1)":e.push(`getFloatFromSampler2D(${h}, ${h}Size, ${h}Dim, `),this.memberExpressionXYZ(u,l,c,e),e.push(")");break;case"Array1D(2)":case"Array2D(2)":case"Array3D(2)":e.push(`getMemoryOptimizedVec2(${h}, ${h}Size, ${h}Dim, `),this.memberExpressionXYZ(u,l,c,e),e.push(")");break;case"ArrayTexture(2)":e.push(`getVec2FromSampler2D(${h}, ${h}Size, ${h}Dim, `),this.memberExpressionXYZ(u,l,c,e),e.push(")");break;case"Array1D(3)":case"Array2D(3)":case"Array3D(3)":e.push(`getMemoryOptimizedVec3(${h}, ${h}Size, ${h}Dim, `),this.memberExpressionXYZ(u,l,c,e),e.push(")");break;case"ArrayTexture(3)":e.push(`getVec3FromSampler2D(${h}, ${h}Size, ${h}Dim, `),this.memberExpressionXYZ(u,l,c,e),e.push(")");break;case"Array1D(4)":case"Array2D(4)":case"Array3D(4)":e.push(`getMemoryOptimizedVec4(${h}, ${h}Size, ${h}Dim, `),this.memberExpressionXYZ(u,l,c,e),e.push(")");break;case"ArrayTexture(4)":case"HTMLCanvas":case"OffscreenCanvas":case"HTMLImage":case"ImageBitmap":case"ImageData":case"HTMLVideo":e.push(`getVec4FromSampler2D(${h}, ${h}Size, ${h}Dim, `),this.memberExpressionXYZ(u,l,c,e),e.push(")");break;case"NumberTexture":case"Array":case"Array2D":case"Array3D":case"Array4D":case"Input":case"Number":case"Float":case"Integer":if("single"===this.precision)e.push(`getMemoryOptimized32(${h}, ${h}Size, ${h}Dim, `),this.memberExpressionXYZ(u,l,c,e),e.push(")");else{const t="user"===s?this.lookupFunctionArgumentBitRatio(this.name,i):this.constantBitRatios[i];switch(t){case 1:e.push(`get8(${h}, ${h}Size, ${h}Dim, `);break;case 2:e.push(`get16(${h}, ${h}Size, ${h}Dim, `);break;case 4:case 0:e.push(`get32(${h}, ${h}Size, ${h}Dim, `);break;default:throw new Error(`unhandled bit ratio of ${t}`)}this.memberExpressionXYZ(u,l,c,e),e.push(")")}break;case"MemoryOptimizedNumberTexture":e.push(`getMemoryOptimized32(${h}, ${h}Size, ${h}Dim, `),this.memberExpressionXYZ(u,l,c,e),e.push(")");break;case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":e.push(`${h}[${this.memberExpressionPropertyMarkup(l)}]`),l&&e.push(`[${this.memberExpressionPropertyMarkup(u)}]`);break;default:throw new Error(`unhandled member expression "${o}"`)}return e}astCallExpression(t,e){if(!t.callee)throw this.astErrorOutput("Unknown CallExpression",t);let n=null;const i=this.isAstMathFunction(t);if(n=i||t.callee.object&&"ThisExpression"===t.callee.object.type?t.callee.property.name:"SequenceExpression"!==t.callee.type||"Literal"!==t.callee.expressions[0].type||isNaN(t.callee.expressions[0].raw)?t.callee.name:t.callee.expressions[1].property.name,!n)throw this.astErrorOutput("Unhandled function, couldn't find name",t);switch(n){case"pow":n="_pow";break;case"round":n="_round"}if(this.calledFunctions.indexOf(n)<0&&this.calledFunctions.push(n),"random"===n&&this.plugins&&this.plugins.length>0)for(let r=0;r<this.plugins.length;r++){const t=this.plugins[r];if("Math.random()"===t.functionMatch&&t.functionReplace)return e.push(t.functionReplace),e}if(this.onFunctionCall&&this.onFunctionCall(this.name,n,t.arguments),e.push(n),e.push("("),i)for(let r=0;r<t.arguments.length;++r){const n=t.arguments[r],i=this.getType(n);r>0&&e.push(", "),"Integer"===i?this.castValueToFloat(n,e):this.astGeneric(n,e)}else{const i=this.lookupFunctionArgumentTypes(n)||[];for(let a=0;a<t.arguments.length;++a){const s=t.arguments[a];let o=i[a];a>0&&e.push(", ");const u=this.getType(s);switch(o||(this.triggerImplyArgumentType(n,a,u,this),o=u),u){case"Boolean":this.astGeneric(s,e);continue;case"Number":case"Float":if("Integer"===o){e.push("int("),this.astGeneric(s,e),e.push(")");continue}if("Number"===o||"Float"===o){this.astGeneric(s,e);continue}if("LiteralInteger"===o){this.castLiteralToFloat(s,e);continue}break;case"Integer":if("Number"===o||"Float"===o){e.push("float("),this.astGeneric(s,e),e.push(")");continue}if("Integer"===o){this.astGeneric(s,e);continue}break;case"LiteralInteger":if("Integer"===o){this.castLiteralToInteger(s,e);continue}if("Number"===o||"Float"===o){this.castLiteralToFloat(s,e);continue}if("LiteralInteger"===o){this.astGeneric(s,e);continue}break;case"Array(2)":case"Array(3)":case"Array(4)":if(o===u){if("Identifier"===s.type)e.push(`user_${r.sanitizeName(s.name)}`);else{if("ArrayExpression"!==s.type&&"MemberExpression"!==s.type&&"CallExpression"!==s.type)throw this.astErrorOutput(`Unhandled argument type ${s.type}`,t);this.astGeneric(s,e)}continue}break;case"HTMLCanvas":case"OffscreenCanvas":case"HTMLImage":case"ImageBitmap":case"ImageData":case"HTMLImageArray":case"HTMLVideo":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":case"Array":case"Input":if(o===u){if("Identifier"!==s.type)throw this.astErrorOutput(`Unhandled argument type ${s.type}`,t);this.triggerImplyArgumentBitRatio(this.name,s.name,n,a);const i=r.sanitizeName(s.name);e.push(`user_${i},user_${i}Size,user_${i}Dim`);continue}}throw this.astErrorOutput(`Unhandled argument combination of ${u} and ${o} for argument named "${s.name}"`,t)}}return e.push(")"),e}astArrayExpression(t,e){const n=this.getType(t),r=t.elements.length;switch(n){case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":e.push(`mat${r}(`);break;default:e.push(`vec${r}(`)}for(let i=0;i<r;++i){i>0&&e.push(", ");const n=t.elements[i];this.astGeneric(n,e)}return e.push(")"),e}memberExpressionXYZ(t,e,n,r){return n?r.push(this.memberExpressionPropertyMarkup(n),", "):r.push("0, "),e?r.push(this.memberExpressionPropertyMarkup(e),", "):r.push("0, "),r.push(this.memberExpressionPropertyMarkup(t)),r}memberExpressionPropertyMarkup(t){if(!t)throw new Error("Property not set");const e=[];switch(this.getType(t)){case"Number":case"Float":this.castValueToInteger(t,e);break;case"LiteralInteger":this.castLiteralToInteger(t,e);break;default:this.astGeneric(t,e)}return e.join("")}}const s={Array:"sampler2D","Array(2)":"vec2","Array(3)":"vec3","Array(4)":"vec4","Matrix(2)":"mat2","Matrix(3)":"mat3","Matrix(4)":"mat4",Array2D:"sampler2D",Array3D:"sampler2D",Boolean:"bool",Float:"float",Input:"sampler2D",Integer:"int",Number:"float",LiteralInteger:"float",NumberTexture:"sampler2D",MemoryOptimizedNumberTexture:"sampler2D","ArrayTexture(1)":"sampler2D","ArrayTexture(2)":"sampler2D","ArrayTexture(3)":"sampler2D","ArrayTexture(4)":"sampler2D",HTMLVideo:"sampler2D",HTMLCanvas:"sampler2D",OffscreenCanvas:"sampler2D",HTMLImage:"sampler2D",ImageBitmap:"sampler2D",ImageData:"sampler2D",HTMLImageArray:"sampler2DArray"},o={"===":"==","!==":"!="};e.exports={WebGLFunctionNode:a}},{"../../utils":114,"../function-node":10}],39:[function(t,e,n){const{WebGLKernelValueBoolean:r}=t("./kernel-value/boolean"),{WebGLKernelValueFloat:i}=t("./kernel-value/float"),{WebGLKernelValueInteger:a}=t("./kernel-value/integer"),{WebGLKernelValueHTMLImage:s}=t("./kernel-value/html-image"),{WebGLKernelValueDynamicHTMLImage:o}=t("./kernel-value/dynamic-html-image"),{WebGLKernelValueHTMLVideo:u}=t("./kernel-value/html-video"),{WebGLKernelValueDynamicHTMLVideo:l}=t("./kernel-value/dynamic-html-video"),{WebGLKernelValueSingleInput:c}=t("./kernel-value/single-input"),{WebGLKernelValueDynamicSingleInput:h}=t("./kernel-value/dynamic-single-input"),{WebGLKernelValueUnsignedInput:p}=t("./kernel-value/unsigned-input"),{WebGLKernelValueDynamicUnsignedInput:f}=t("./kernel-value/dynamic-unsigned-input"),{WebGLKernelValueMemoryOptimizedNumberTexture:d}=t("./kernel-value/memory-optimized-number-texture"),{WebGLKernelValueDynamicMemoryOptimizedNumberTexture:m}=t("./kernel-value/dynamic-memory-optimized-number-texture"),{WebGLKernelValueNumberTexture:g}=t("./kernel-value/number-texture"),{WebGLKernelValueDynamicNumberTexture:y}=t("./kernel-value/dynamic-number-texture"),{WebGLKernelValueSingleArray:v}=t("./kernel-value/single-array"),{WebGLKernelValueDynamicSingleArray:b}=t("./kernel-value/dynamic-single-array"),{WebGLKernelValueSingleArray1DI:x}=t("./kernel-value/single-array1d-i"),{WebGLKernelValueDynamicSingleArray1DI:w}=t("./kernel-value/dynamic-single-array1d-i"),{WebGLKernelValueSingleArray2DI:S}=t("./kernel-value/single-array2d-i"),{WebGLKernelValueDynamicSingleArray2DI:T}=t("./kernel-value/dynamic-single-array2d-i"),{WebGLKernelValueSingleArray3DI:k}=t("./kernel-value/single-array3d-i"),{WebGLKernelValueDynamicSingleArray3DI:A}=t("./kernel-value/dynamic-single-array3d-i"),{WebGLKernelValueArray2:E}=t("./kernel-value/array2"),{WebGLKernelValueArray3:_}=t("./kernel-value/array3"),{WebGLKernelValueArray4:O}=t("./kernel-value/array4"),{WebGLKernelValueUnsignedArray:I}=t("./kernel-value/unsigned-array"),{WebGLKernelValueDynamicUnsignedArray:L}=t("./kernel-value/dynamic-unsigned-array"),P={unsigned:{dynamic:{Boolean:r,Integer:a,Float:i,Array:L,"Array(2)":E,"Array(3)":_,"Array(4)":O,"Array1D(2)":!1,"Array1D(3)":!1,"Array1D(4)":!1,"Array2D(2)":!1,"Array2D(3)":!1,"Array2D(4)":!1,"Array3D(2)":!1,"Array3D(3)":!1,"Array3D(4)":!1,Input:f,NumberTexture:y,"ArrayTexture(1)":y,"ArrayTexture(2)":y,"ArrayTexture(3)":y,"ArrayTexture(4)":y,MemoryOptimizedNumberTexture:m,HTMLCanvas:o,OffscreenCanvas:o,HTMLImage:o,ImageBitmap:o,ImageData:o,HTMLImageArray:!1,HTMLVideo:l},static:{Boolean:r,Float:i,Integer:a,Array:I,"Array(2)":E,"Array(3)":_,"Array(4)":O,"Array1D(2)":!1,"Array1D(3)":!1,"Array1D(4)":!1,"Array2D(2)":!1,"Array2D(3)":!1,"Array2D(4)":!1,"Array3D(2)":!1,"Array3D(3)":!1,"Array3D(4)":!1,Input:p,NumberTexture:g,"ArrayTexture(1)":g,"ArrayTexture(2)":g,"ArrayTexture(3)":g,"ArrayTexture(4)":g,MemoryOptimizedNumberTexture:d,HTMLCanvas:s,OffscreenCanvas:s,HTMLImage:s,ImageBitmap:s,ImageData:s,HTMLImageArray:!1,HTMLVideo:u}},single:{dynamic:{Boolean:r,Integer:a,Float:i,Array:b,"Array(2)":E,"Array(3)":_,"Array(4)":O,"Array1D(2)":w,"Array1D(3)":w,"Array1D(4)":w,"Array2D(2)":T,"Array2D(3)":T,"Array2D(4)":T,"Array3D(2)":A,"Array3D(3)":A,"Array3D(4)":A,Input:h,NumberTexture:y,"ArrayTexture(1)":y,"ArrayTexture(2)":y,"ArrayTexture(3)":y,"ArrayTexture(4)":y,MemoryOptimizedNumberTexture:m,HTMLCanvas:o,OffscreenCanvas:o,HTMLImage:o,ImageBitmap:o,ImageData:o,HTMLImageArray:!1,HTMLVideo:l},static:{Boolean:r,Float:i,Integer:a,Array:v,"Array(2)":E,"Array(3)":_,"Array(4)":O,"Array1D(2)":x,"Array1D(3)":x,"Array1D(4)":x,"Array2D(2)":S,"Array2D(3)":S,"Array2D(4)":S,"Array3D(2)":k,"Array3D(3)":k,"Array3D(4)":k,Input:c,NumberTexture:g,"ArrayTexture(1)":g,"ArrayTexture(2)":g,"ArrayTexture(3)":g,"ArrayTexture(4)":g,MemoryOptimizedNumberTexture:d,HTMLCanvas:s,OffscreenCanvas:s,HTMLImage:s,ImageBitmap:s,ImageData:s,HTMLImageArray:!1,HTMLVideo:u}}};function C(t,e,n,r){if(!t)throw new Error("type missing");if(!e)throw new Error("dynamic missing");if(!n)throw new Error("precision missing");r.type&&(t=r.type);const i=P[n][e];if(!1===i[t])return null;if(void 0===i[t])throw new Error(`Could not find a KernelValue for ${t}`);return i[t]}e.exports={lookupKernelValueType:C,kernelValueMaps:P}},{"./kernel-value/array2":41,"./kernel-value/array3":42,"./kernel-value/array4":43,"./kernel-value/boolean":44,"./kernel-value/dynamic-html-image":45,"./kernel-value/dynamic-html-video":46,"./kernel-value/dynamic-memory-optimized-number-texture":47,"./kernel-value/dynamic-number-texture":48,"./kernel-value/dynamic-single-array":49,"./kernel-value/dynamic-single-array1d-i":50,"./kernel-value/dynamic-single-array2d-i":51,"./kernel-value/dynamic-single-array3d-i":52,"./kernel-value/dynamic-single-input":53,"./kernel-value/dynamic-unsigned-array":54,"./kernel-value/dynamic-unsigned-input":55,"./kernel-value/float":56,"./kernel-value/html-image":57,"./kernel-value/html-video":58,"./kernel-value/integer":60,"./kernel-value/memory-optimized-number-texture":61,"./kernel-value/number-texture":62,"./kernel-value/single-array":63,"./kernel-value/single-array1d-i":64,"./kernel-value/single-array2d-i":65,"./kernel-value/single-array3d-i":66,"./kernel-value/single-input":67,"./kernel-value/unsigned-array":68,"./kernel-value/unsigned-input":69}],40:[function(t,e,n){const{WebGLKernelValue:r}=t("./index"),{Input:i}=t("../../../input");class a extends r{checkSize(t,e){if(!this.kernel.validate)return;const{maxTextureSize:n}=this.kernel.constructor.features;if(t>n||e>n)throw t>e?new Error(`Argument texture width of ${t} larger than maximum size of ${n} for your GPU`):t<e?new Error(`Argument texture height of ${e} larger than maximum size of ${n} for your GPU`):new Error(`Argument texture height and width of ${e} larger than maximum size of ${n} for your GPU`)}setup(){this.requestTexture(),this.setupTexture(),this.defineTexture()}requestTexture(){this.texture=this.onRequestTexture()}defineTexture(){const{context:t}=this;t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)}setupTexture(){this.contextHandle=this.onRequestContextHandle(),this.index=this.onRequestIndex(),this.dimensionsId=this.id+"Dim",this.sizeId=this.id+"Size"}getBitRatio(t){if(Array.isArray(t[0]))return this.getBitRatio(t[0]);if(t.constructor===i)return this.getBitRatio(t.value);switch(t.constructor){case Uint8ClampedArray:case Uint8Array:case Int8Array:return 1;case Uint16Array:case Int16Array:return 2;case Float32Array:case Int32Array:default:return 4}}destroy(){this.prevArg&&this.prevArg.delete(),this.context.deleteTexture(this.texture)}}e.exports={WebGLKernelArray:a}},{"../../../input":110,"./index":59}],41:[function(t,e,n){const{WebGLKernelValue:r}=t("./index");class i extends r{constructor(t,e){super(t,e),this.uploadValue=t}getSource(t){return"constants"===this.origin?`const vec2 ${this.id} = vec2(${t[0]},${t[1]});\n`:`uniform vec2 ${this.id};\n`}getStringValueHandler(){return"constants"===this.origin?"":`const uploadValue_${this.name} = ${this.varName};\n`}updateValue(t){"constants"!==this.origin&&this.kernel.setUniform2fv(this.id,this.uploadValue=t)}}e.exports={WebGLKernelValueArray2:i}},{"./index":59}],42:[function(t,e,n){const{WebGLKernelValue:r}=t("./index");class i extends r{constructor(t,e){super(t,e),this.uploadValue=t}getSource(t){return"constants"===this.origin?`const vec3 ${this.id} = vec3(${t[0]},${t[1]},${t[2]});\n`:`uniform vec3 ${this.id};\n`}getStringValueHandler(){return"constants"===this.origin?"":`const uploadValue_${this.name} = ${this.varName};\n`}updateValue(t){"constants"!==this.origin&&this.kernel.setUniform3fv(this.id,this.uploadValue=t)}}e.exports={WebGLKernelValueArray3:i}},{"./index":59}],43:[function(t,e,n){const{WebGLKernelValue:r}=t("./index");class i extends r{constructor(t,e){super(t,e),this.uploadValue=t}getSource(t){return"constants"===this.origin?`const vec4 ${this.id} = vec4(${t[0]},${t[1]},${t[2]},${t[3]});\n`:`uniform vec4 ${this.id};\n`}getStringValueHandler(){return"constants"===this.origin?"":`const uploadValue_${this.name} = ${this.varName};\n`}updateValue(t){"constants"!==this.origin&&this.kernel.setUniform4fv(this.id,this.uploadValue=t)}}e.exports={WebGLKernelValueArray4:i}},{"./index":59}],44:[function(t,e,n){t("../../../utils");const{WebGLKernelValue:r}=t("./index");class i extends r{constructor(t,e){super(t,e),this.uploadValue=t}getSource(t){return"constants"===this.origin?`const bool ${this.id} = ${t};\n`:`uniform bool ${this.id};\n`}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName};\n`}updateValue(t){"constants"!==this.origin&&this.kernel.setUniform1i(this.id,this.uploadValue=t)}}e.exports={WebGLKernelValueBoolean:i}},{"../../../utils":114,"./index":59}],45:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueHTMLImage:i}=t("./html-image");class a extends i{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(t){const{width:e,height:n}=t;this.checkSize(e,n),this.dimensions=[e,n,1],this.textureSize=[e,n],this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(t)}}e.exports={WebGLKernelValueDynamicHTMLImage:a}},{"../../../utils":114,"./html-image":57}],46:[function(t,e,n){const{WebGLKernelValueDynamicHTMLImage:r}=t("./dynamic-html-image");class i extends r{}e.exports={WebGLKernelValueDynamicHTMLVideo:i}},{"./dynamic-html-image":45}],47:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueMemoryOptimizedNumberTexture:i}=t("./memory-optimized-number-texture");class a extends i{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(t){this.dimensions=t.dimensions,this.checkSize(t.size[0],t.size[1]),this.textureSize=t.size,this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(t)}}e.exports={WebGLKernelValueDynamicMemoryOptimizedNumberTexture:a}},{"../../../utils":114,"./memory-optimized-number-texture":61}],48:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueNumberTexture:i}=t("./number-texture");class a extends i{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(t){this.dimensions=t.dimensions,this.checkSize(t.size[0],t.size[1]),this.textureSize=t.size,this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(t)}}e.exports={WebGLKernelValueDynamicNumberTexture:a}},{"../../../utils":114,"./number-texture":62}],49:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueSingleArray:i}=t("./single-array");class a extends i{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(t){this.dimensions=r.getDimensions(t,!0),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(t)}}e.exports={WebGLKernelValueDynamicSingleArray:a}},{"../../../utils":114,"./single-array":63}],50:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueSingleArray1DI:i}=t("./single-array1d-i");class a extends i{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(t){this.setShape(t),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(t)}}e.exports={WebGLKernelValueDynamicSingleArray1DI:a}},{"../../../utils":114,"./single-array1d-i":64}],51:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueSingleArray2DI:i}=t("./single-array2d-i");class a extends i{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(t){this.setShape(t),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(t)}}e.exports={WebGLKernelValueDynamicSingleArray2DI:a}},{"../../../utils":114,"./single-array2d-i":65}],52:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueSingleArray3DI:i}=t("./single-array3d-i");class a extends i{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(t){this.setShape(t),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(t)}}e.exports={WebGLKernelValueDynamicSingleArray3DI:a}},{"../../../utils":114,"./single-array3d-i":66}],53:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueSingleInput:i}=t("./single-input");class a extends i{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(t){let[e,n,i]=t.size;this.dimensions=new Int32Array([e||1,n||1,i||1]),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(t)}}e.exports={WebGLKernelValueDynamicSingleInput:a}},{"../../../utils":114,"./single-input":67}],54:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueUnsignedArray:i}=t("./unsigned-array");class a extends i{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(t){this.dimensions=r.getDimensions(t,!0),this.textureSize=r.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio),this.checkSize(this.textureSize[0],this.textureSize[1]);const e=this.getTransferArrayType(t);this.preUploadValue=new e(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(t)}}e.exports={WebGLKernelValueDynamicUnsignedArray:a}},{"../../../utils":114,"./unsigned-array":68}],55:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueUnsignedInput:i}=t("./unsigned-input");class a extends i{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(t){let[e,n,i]=t.size;this.dimensions=new Int32Array([e||1,n||1,i||1]),this.textureSize=r.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio),this.checkSize(this.textureSize[0],this.textureSize[1]);const a=this.getTransferArrayType(t.value);this.preUploadValue=new a(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(t)}}e.exports={WebGLKernelValueDynamicUnsignedInput:a}},{"../../../utils":114,"./unsigned-input":69}],56:[function(t,e,n){t("../../../utils");const{WebGLKernelValue:r}=t("./index");class i extends r{constructor(t,e){super(t,e),this.uploadValue=t}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName};\n`}getSource(t){return"constants"===this.origin?Number.isInteger(t)?`const float ${this.id} = ${t}.0;\n`:`const float ${this.id} = ${t};\n`:`uniform float ${this.id};\n`}updateValue(t){"constants"!==this.origin&&this.kernel.setUniform1f(this.id,this.uploadValue=t)}}e.exports={WebGLKernelValueFloat:i}},{"../../../utils":114,"./index":59}],57:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelArray:i}=t("./array");class a extends i{constructor(t,e){super(t,e);const{width:n,height:r}=t;this.checkSize(n,r),this.dimensions=[n,r,1],this.textureSize=[n,r],this.uploadValue=t}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName};\n`}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(t){if(t.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(t.constructor);const{context:e}=this;e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.uploadValue=t),this.kernel.setUniform1i(this.id,this.index)}}e.exports={WebGLKernelValueHTMLImage:a}},{"../../../utils":114,"./array":40}],58:[function(t,e,n){const{WebGLKernelValueHTMLImage:r}=t("./html-image");class i extends r{}e.exports={WebGLKernelValueHTMLVideo:i}},{"./html-image":57}],59:[function(t,e,n){const{utils:r}=t("../../../utils"),{KernelValue:i}=t("../../kernel-value");class a extends i{constructor(t,e){super(t,e),this.dimensionsId=null,this.sizeId=null,this.initialValueConstructor=t.constructor,this.onRequestTexture=e.onRequestTexture,this.onRequestIndex=e.onRequestIndex,this.uploadValue=null,this.textureSize=null,this.bitRatio=null,this.prevArg=null}get id(){return`${this.origin}_${r.sanitizeName(this.name)}`}setup(){}getTransferArrayType(t){if(Array.isArray(t[0]))return this.getTransferArrayType(t[0]);switch(t.constructor){case Array:case Int32Array:case Int16Array:case Int8Array:return Float32Array;case Uint8ClampedArray:case Uint8Array:case Uint16Array:case Uint32Array:case Float32Array:case Float64Array:return t.constructor}return console.warn("Unfamiliar constructor type.  Will go ahead and use, but likley this may result in a transfer of zeros"),t.constructor}getStringValueHandler(){throw new Error(`"getStringValueHandler" not implemented on ${this.constructor.name}`)}getVariablePrecisionString(){return this.kernel.getVariablePrecisionString(this.textureSize||void 0,this.tactic||void 0)}destroy(){}}e.exports={WebGLKernelValue:a}},{"../../../utils":114,"../../kernel-value":35}],60:[function(t,e,n){t("../../../utils");const{WebGLKernelValue:r}=t("./index");class i extends r{constructor(t,e){super(t,e),this.uploadValue=t}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName};\n`}getSource(t){return"constants"===this.origin?`const int ${this.id} = ${parseInt(t)};\n`:`uniform int ${this.id};\n`}updateValue(t){"constants"!==this.origin&&this.kernel.setUniform1i(this.id,this.uploadValue=t)}}e.exports={WebGLKernelValueInteger:i}},{"../../../utils":114,"./index":59}],61:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelArray:i}=t("./array"),a="Source and destination textures are the same.  Use immutable = true and manually cleanup kernel output texture memory with texture.delete()";class s extends i{constructor(t,e){super(t,e);const[n,r]=t.size;this.checkSize(n,r),this.dimensions=t.dimensions,this.textureSize=t.size,this.uploadValue=t.texture,this.forceUploadEachRun=!0}setup(){this.setupTexture()}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName}.texture;\n`}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(t){if(t.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(t.constructor);if(this.checkContext&&t.context!==this.context)throw new Error(`Value ${this.name} (${this.type}) must be from same context`);const{kernel:e,context:n}=this;if(e.pipeline)if(e.immutable)e.updateTextureArgumentRefs(this,t);else{if(e.texture&&e.texture.texture===t.texture)throw new Error(a);if(e.mappedTextures){const{mappedTextures:n}=e;for(let e=0;e<n.length;e++)if(n[e].texture===t.texture)throw new Error(a)}}n.activeTexture(this.contextHandle),n.bindTexture(n.TEXTURE_2D,this.uploadValue=t.texture),this.kernel.setUniform1i(this.id,this.index)}}e.exports={WebGLKernelValueMemoryOptimizedNumberTexture:s,sameError:a}},{"../../../utils":114,"./array":40}],62:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelArray:i}=t("./array"),{sameError:a}=t("./memory-optimized-number-texture");class s extends i{constructor(t,e){super(t,e);const[n,r]=t.size;this.checkSize(n,r);const{size:i,dimensions:a}=t;this.bitRatio=this.getBitRatio(t),this.dimensions=a,this.textureSize=i,this.uploadValue=t.texture,this.forceUploadEachRun=!0}setup(){this.setupTexture()}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName}.texture;\n`}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(t){if(t.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(t.constructor);if(this.checkContext&&t.context!==this.context)throw new Error(`Value ${this.name} (${this.type}) must be from same context`);const{kernel:e,context:n}=this;if(e.pipeline)if(e.immutable)e.updateTextureArgumentRefs(this,t);else{if(e.texture&&e.texture.texture===t.texture)throw new Error(a);if(e.mappedTextures){const{mappedTextures:n}=e;for(let e=0;e<n.length;e++)if(n[e].texture===t.texture)throw new Error(a)}}n.activeTexture(this.contextHandle),n.bindTexture(n.TEXTURE_2D,this.uploadValue=t.texture),this.kernel.setUniform1i(this.id,this.index)}}e.exports={WebGLKernelValueNumberTexture:s}},{"../../../utils":114,"./array":40,"./memory-optimized-number-texture":61}],63:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelArray:i}=t("./array");class a extends i{constructor(t,e){super(t,e),this.bitRatio=4,this.dimensions=r.getDimensions(t,!0),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength)}getStringValueHandler(){return r.linesToString([`const uploadValue_${this.name} = new Float32Array(${this.uploadArrayLength})`,`flattenTo(${this.varName}, uploadValue_${this.name})`])}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(t){if(t.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(t.constructor);const{context:e}=this;r.flattenTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}e.exports={WebGLKernelValueSingleArray:a}},{"../../../utils":114,"./array":40}],64:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelArray:i}=t("./array");class a extends i{constructor(t,e){super(t,e),this.bitRatio=4,this.setShape(t)}setShape(t){const e=r.getDimensions(t,!0);this.textureSize=r.getMemoryOptimizedFloatTextureSize(e,this.bitRatio),this.dimensions=new Int32Array([e[1],1,1]),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength)}getStringValueHandler(){return r.linesToString([`const uploadValue_${this.name} = new Float32Array(${this.uploadArrayLength})`,`flattenTo(${this.varName}, uploadValue_${this.name})`])}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(t){if(t.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(t.constructor);const{context:e}=this;r.flatten2dArrayTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}e.exports={WebGLKernelValueSingleArray1DI:a}},{"../../../utils":114,"./array":40}],65:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelArray:i}=t("./array");class a extends i{constructor(t,e){super(t,e),this.bitRatio=4,this.setShape(t)}setShape(t){const e=r.getDimensions(t,!0);this.textureSize=r.getMemoryOptimizedFloatTextureSize(e,this.bitRatio),this.dimensions=new Int32Array([e[1],e[2],1]),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength)}getStringValueHandler(){return r.linesToString([`const uploadValue_${this.name} = new Float32Array(${this.uploadArrayLength})`,`flattenTo(${this.varName}, uploadValue_${this.name})`])}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(t){if(t.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(t.constructor);const{context:e}=this;r.flatten3dArrayTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}e.exports={WebGLKernelValueSingleArray2DI:a}},{"../../../utils":114,"./array":40}],66:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelArray:i}=t("./array");class a extends i{constructor(t,e){super(t,e),this.bitRatio=4,this.setShape(t)}setShape(t){const e=r.getDimensions(t,!0);this.textureSize=r.getMemoryOptimizedFloatTextureSize(e,this.bitRatio),this.dimensions=new Int32Array([e[1],e[2],e[3]]),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength)}getStringValueHandler(){return r.linesToString([`const uploadValue_${this.name} = new Float32Array(${this.uploadArrayLength})`,`flattenTo(${this.varName}, uploadValue_${this.name})`])}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(t){if(t.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(t.constructor);const{context:e}=this;r.flatten4dArrayTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}e.exports={WebGLKernelValueSingleArray3DI:a}},{"../../../utils":114,"./array":40}],67:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelArray:i}=t("./array");class a extends i{constructor(t,e){super(t,e),this.bitRatio=4;let[n,i,a]=t.size;this.dimensions=new Int32Array([n||1,i||1,a||1]),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength)}getStringValueHandler(){return r.linesToString([`const uploadValue_${this.name} = new Float32Array(${this.uploadArrayLength})`,`flattenTo(${this.varName}.value, uploadValue_${this.name})`])}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(t){if(t.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(t.constructor);const{context:e}=this;r.flattenTo(t.value,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}e.exports={WebGLKernelValueSingleInput:a}},{"../../../utils":114,"./array":40}],68:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelArray:i}=t("./array");class a extends i{constructor(t,e){super(t,e),this.bitRatio=this.getBitRatio(t),this.dimensions=r.getDimensions(t,!0),this.textureSize=r.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio),this.checkSize(this.textureSize[0],this.textureSize[1]),this.TranserArrayType=this.getTransferArrayType(t),this.preUploadValue=new this.TranserArrayType(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer)}getStringValueHandler(){return r.linesToString([`const preUploadValue_${this.name} = new ${this.TranserArrayType.name}(${this.uploadArrayLength})`,`const uploadValue_${this.name} = new Uint8Array(preUploadValue_${this.name}.buffer)`,`flattenTo(${this.varName}, preUploadValue_${this.name})`])}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(t){if(t.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(t.constructor);const{context:e}=this;r.flattenTo(t,this.preUploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.UNSIGNED_BYTE,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}e.exports={WebGLKernelValueUnsignedArray:a}},{"../../../utils":114,"./array":40}],69:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelArray:i}=t("./array");class a extends i{constructor(t,e){super(t,e),this.bitRatio=this.getBitRatio(t);const[n,i,a]=t.size;this.dimensions=new Int32Array([n||1,i||1,a||1]),this.textureSize=r.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio),this.checkSize(this.textureSize[0],this.textureSize[1]),this.TranserArrayType=this.getTransferArrayType(t.value),this.preUploadValue=new this.TranserArrayType(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer)}getStringValueHandler(){return r.linesToString([`const preUploadValue_${this.name} = new ${this.TranserArrayType.name}(${this.uploadArrayLength})`,`const uploadValue_${this.name} = new Uint8Array(preUploadValue_${this.name}.buffer)`,`flattenTo(${this.varName}.value, preUploadValue_${this.name})`])}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(t){if(t.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(value.constructor);const{context:e}=this;r.flattenTo(t.value,this.preUploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.UNSIGNED_BYTE,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}e.exports={WebGLKernelValueUnsignedInput:a}},{"../../../utils":114,"./array":40}],70:[function(t,e,n){const{GLKernel:r}=t("../gl/kernel"),{FunctionBuilder:i}=t("../function-builder"),{WebGLFunctionNode:a}=t("./function-node"),{utils:s}=t("../../utils"),o=t("../../plugins/math-random-uniformly-distributed"),{fragmentShader:u}=t("./fragment-shader"),{vertexShader:l}=t("./vertex-shader"),{glKernelString:c}=t("../gl/kernel-string"),{lookupKernelValueType:h}=t("./kernel-value-maps");let p=null,f=null,d=null,m=null,g=null;const y=[o],v=[],b={};class x extends r{static get isSupported(){return null!==p||(this.setupFeatureChecks(),p=this.isContextMatch(d)),p}static setupFeatureChecks(){"undefined"!==typeof document?f=document.createElement("canvas"):"undefined"!==typeof OffscreenCanvas&&(f=new OffscreenCanvas(0,0)),f&&(d=f.getContext("webgl")||f.getContext("experimental-webgl"),d&&d.getExtension&&(m={OES_texture_float:d.getExtension("OES_texture_float"),OES_texture_float_linear:d.getExtension("OES_texture_float_linear"),OES_element_index_uint:d.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:d.getExtension("WEBGL_draw_buffers")},g=this.getFeatures()))}static isContextMatch(t){return"undefined"!==typeof WebGLRenderingContext&&t instanceof WebGLRenderingContext}static getIsTextureFloat(){return Boolean(m.OES_texture_float)}static getIsDrawBuffers(){return Boolean(m.WEBGL_draw_buffers)}static getChannelCount(){return m.WEBGL_draw_buffers?d.getParameter(m.WEBGL_draw_buffers.MAX_DRAW_BUFFERS_WEBGL):1}static getMaxTextureSize(){return d.getParameter(d.MAX_TEXTURE_SIZE)}static lookupKernelValueType(t,e,n,r){return h(t,e,n,r)}static get testCanvas(){return f}static get testContext(){return d}static get features(){return g}static get fragmentShader(){return u}static get vertexShader(){return l}constructor(t,e){super(t,e),this.program=null,this.pipeline=e.pipeline,this.endianness=s.systemEndianness(),this.extensions={},this.argumentTextureCount=0,this.constantTextureCount=0,this.fragShader=null,this.vertShader=null,this.drawBuffersMap=null,this.maxTexSize=null,this.onRequestSwitchKernel=null,this.texture=null,this.mappedTextures=null,this.mergeSettings(t.settings||e),this.threadDim=null,this.framebuffer=null,this.buffer=null,this.textureCache=[],this.programUniformLocationCache={},this.uniform1fCache={},this.uniform1iCache={},this.uniform2fCache={},this.uniform2fvCache={},this.uniform2ivCache={},this.uniform3fvCache={},this.uniform3ivCache={},this.uniform4fvCache={},this.uniform4ivCache={}}initCanvas(){if("undefined"!==typeof document){const t=document.createElement("canvas");return t.width=2,t.height=2,t}if("undefined"!==typeof OffscreenCanvas)return new OffscreenCanvas(0,0)}initContext(){const t={alpha:!1,depth:!1,antialias:!1};return this.canvas.getContext("webgl",t)||this.canvas.getContext("experimental-webgl",t)}initPlugins(t){const e=[],{source:n}=this;if("string"===typeof n)for(let r=0;r<y.length;r++){const t=y[r];n.match(t.functionMatch)&&e.push(t)}else if("object"===typeof n&&t.pluginNames)for(let r=0;r<y.length;r++){const n=y[r];t.pluginNames.some((t=>t===n.name))&&e.push(n)}return e}initExtensions(){this.extensions={OES_texture_float:this.context.getExtension("OES_texture_float"),OES_texture_float_linear:this.context.getExtension("OES_texture_float_linear"),OES_element_index_uint:this.context.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:this.context.getExtension("WEBGL_draw_buffers"),WEBGL_color_buffer_float:this.context.getExtension("WEBGL_color_buffer_float")}}validateSettings(t){if(!this.validate)return void(this.texSize=s.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output));const{features:e}=this.constructor;if(!0===this.optimizeFloatMemory&&!e.isTextureFloat)throw new Error("Float textures are not supported");if("single"===this.precision&&!e.isFloatRead)throw new Error("Single precision not supported");if(!this.graphical&&null===this.precision&&e.isTextureFloat&&(this.precision=e.isFloatRead?"single":"unsigned"),this.subKernels&&this.subKernels.length>0&&!this.extensions.WEBGL_draw_buffers)throw new Error("could not instantiate draw buffers extension");if(null===this.fixIntegerDivisionAccuracy?this.fixIntegerDivisionAccuracy=!e.isIntegerDivisionAccurate:this.fixIntegerDivisionAccuracy&&e.isIntegerDivisionAccurate&&(this.fixIntegerDivisionAccuracy=!1),this.checkOutput(),!this.output||0===this.output.length){if(1!==t.length)throw new Error("Auto output only supported for kernels with only one input");const e=s.getVariableType(t[0],this.strictIntegers);switch(e){case"Array":this.output=s.getDimensions(e);break;case"NumberTexture":case"MemoryOptimizedNumberTexture":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":this.output=t[0].output;break;default:throw new Error("Auto output not supported for input type: "+e)}}if(this.graphical){if(2!==this.output.length)throw new Error("Output must have 2 dimensions on graphical mode");return"precision"===this.precision&&(this.precision="unsigned",console.warn("Cannot use graphical mode and single precision at the same time")),void(this.texSize=s.clone(this.output))}null===this.precision&&e.isTextureFloat&&(this.precision="single"),this.texSize=s.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output),this.checkTextureSize()}updateMaxTexSize(){const{texSize:t,canvas:e}=this;if(null===this.maxTexSize){let n=v.indexOf(e);-1===n&&(n=v.length,v.push(e),b[n]=[t[0],t[1]]),this.maxTexSize=b[n]}this.maxTexSize[0]<t[0]&&(this.maxTexSize[0]=t[0]),this.maxTexSize[1]<t[1]&&(this.maxTexSize[1]=t[1])}setupArguments(t){this.kernelArguments=[],this.argumentTextureCount=0;const e=null===this.argumentTypes;if(e&&(this.argumentTypes=[]),this.argumentSizes=[],this.argumentBitRatios=[],t.length<this.argumentNames.length)throw new Error("not enough arguments for kernel");if(t.length>this.argumentNames.length)throw new Error("too many arguments for kernel");const{context:n}=this;let r=0;const i=()=>this.createTexture(),a=()=>this.constantTextureCount+r++,o=t=>{this.switchKernels({type:"argumentMismatch",needed:t})},u=()=>n.TEXTURE0+this.constantTextureCount+this.argumentTextureCount++;for(let l=0;l<t.length;l++){const r=t[l],c=this.argumentNames[l];let h;e?(h=s.getVariableType(r,this.strictIntegers),this.argumentTypes.push(h)):h=this.argumentTypes[l];const p=this.constructor.lookupKernelValueType(h,this.dynamicArguments?"dynamic":"static",this.precision,t[l]);if(null===p)return this.requestFallback(t);const f=new p(r,{name:c,type:h,tactic:this.tactic,origin:"user",context:n,checkContext:this.checkContext,kernel:this,strictIntegers:this.strictIntegers,onRequestTexture:i,onRequestIndex:a,onUpdateValueMismatch:o,onRequestContextHandle:u});this.kernelArguments.push(f),f.setup(),this.argumentSizes.push(f.textureSize),this.argumentBitRatios[l]=f.bitRatio}}createTexture(){const t=this.context.createTexture();return this.textureCache.push(t),t}setupConstants(t){const{context:e}=this;this.kernelConstants=[],this.forceUploadKernelConstants=[];let n=null===this.constantTypes;n&&(this.constantTypes={}),this.constantBitRatios={};let r=0;for(const i in this.constants){const a=this.constants[i];let o;n?(o=s.getVariableType(a,this.strictIntegers),this.constantTypes[i]=o):o=this.constantTypes[i];const u=this.constructor.lookupKernelValueType(o,"static",this.precision,a);if(null===u)return this.requestFallback(t);const l=new u(a,{name:i,type:o,tactic:this.tactic,origin:"constants",context:this.context,checkContext:this.checkContext,kernel:this,strictIntegers:this.strictIntegers,onRequestTexture:()=>this.createTexture(),onRequestIndex:()=>r++,onRequestContextHandle:()=>e.TEXTURE0+this.constantTextureCount++});this.constantBitRatios[i]=l.bitRatio,this.kernelConstants.push(l),l.setup(),l.forceUploadEachRun&&this.forceUploadKernelConstants.push(l)}}build(){if(this.built)return;if(this.initExtensions(),this.validateSettings(arguments),this.setupConstants(arguments),this.fallbackRequested)return;if(this.setupArguments(arguments),this.fallbackRequested)return;this.updateMaxTexSize(),this.translateSource();const t=this.pickRenderStrategy(arguments);if(t)return t;const{texSize:e,context:n,canvas:r}=this;n.enable(n.SCISSOR_TEST),this.pipeline&&this.precision,n.viewport(0,0,this.maxTexSize[0],this.maxTexSize[1]),r.width=this.maxTexSize[0],r.height=this.maxTexSize[1];const i=this.threadDim=Array.from(this.output);for(;i.length<3;)i.push(1);const a=this.getVertexShader(arguments),s=n.createShader(n.VERTEX_SHADER);n.shaderSource(s,a),n.compileShader(s),this.vertShader=s;const o=this.getFragmentShader(arguments),u=n.createShader(n.FRAGMENT_SHADER);if(n.shaderSource(u,o),n.compileShader(u),this.fragShader=u,this.debug&&(console.log("GLSL Shader Output:"),console.log(o)),!n.getShaderParameter(s,n.COMPILE_STATUS))throw new Error("Error compiling vertex shader: "+n.getShaderInfoLog(s));if(!n.getShaderParameter(u,n.COMPILE_STATUS))throw new Error("Error compiling fragment shader: "+n.getShaderInfoLog(u));const l=this.program=n.createProgram();n.attachShader(l,s),n.attachShader(l,u),n.linkProgram(l),this.framebuffer=n.createFramebuffer(),this.framebuffer.width=e[0],this.framebuffer.height=e[1],this.rawValueFramebuffers={};const c=new Float32Array([-1,-1,1,-1,-1,1,1,1]),h=new Float32Array([0,0,1,0,0,1,1,1]),p=c.byteLength;let f=this.buffer;f?n.bindBuffer(n.ARRAY_BUFFER,f):(f=this.buffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,f),n.bufferData(n.ARRAY_BUFFER,c.byteLength+h.byteLength,n.STATIC_DRAW)),n.bufferSubData(n.ARRAY_BUFFER,0,c),n.bufferSubData(n.ARRAY_BUFFER,p,h);const d=n.getAttribLocation(this.program,"aPos");n.enableVertexAttribArray(d),n.vertexAttribPointer(d,2,n.FLOAT,!1,0,0);const m=n.getAttribLocation(this.program,"aTexCoord");n.enableVertexAttribArray(m),n.vertexAttribPointer(m,2,n.FLOAT,!1,0,p),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer);let g=0;n.useProgram(this.program);for(let y in this.constants)this.kernelConstants[g++].updateValue(this.constants[y]);this._setupOutputTexture(),null!==this.subKernels&&this.subKernels.length>0&&(this._mappedTextureSwitched={},this._setupSubOutputTextures()),this.buildSignature(arguments),this.built=!0}translateSource(){const t=i.fromKernel(this,a,{fixIntegerDivisionAccuracy:this.fixIntegerDivisionAccuracy});this.translatedSource=t.getPrototypeString("kernel"),this.setupReturnTypes(t)}setupReturnTypes(t){if(this.graphical||this.returnType||(this.returnType=t.getKernelResultType()),this.subKernels&&this.subKernels.length>0)for(let e=0;e<this.subKernels.length;e++){const n=this.subKernels[e];n.returnType||(n.returnType=t.getSubKernelResultType(e))}}run(){const{kernelArguments:t,texSize:e,forceUploadKernelConstants:n,context:r}=this;r.useProgram(this.program),r.scissor(0,0,e[0],e[1]),this.dynamicOutput&&(this.setUniform3iv("uOutputDim",new Int32Array(this.threadDim)),this.setUniform2iv("uTexSize",e)),this.setUniform2f("ratio",e[0]/this.maxTexSize[0],e[1]/this.maxTexSize[1]);for(let i=0;i<n.length;i++){const t=n[i];if(t.updateValue(this.constants[t.name]),this.switchingKernels)return}for(let i=0;i<t.length;i++)if(t[i].updateValue(arguments[i]),this.switchingKernels)return;if(this.plugins)for(let i=0;i<this.plugins.length;i++){const t=this.plugins[i];t.onBeforeRun&&t.onBeforeRun(this)}if(this.graphical)return this.pipeline?(r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),this.immutable&&this._replaceOutputTexture(),r.drawArrays(r.TRIANGLE_STRIP,0,4),this.immutable?this.texture.clone():this.texture):(r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindFramebuffer(r.FRAMEBUFFER,null),void r.drawArrays(r.TRIANGLE_STRIP,0,4));r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),this.immutable&&this._replaceOutputTexture(),null!==this.subKernels&&(this.immutable&&this._replaceSubOutputTextures(),this.drawBuffers()),r.drawArrays(r.TRIANGLE_STRIP,0,4)}drawBuffers(){this.extensions.WEBGL_draw_buffers.drawBuffersWEBGL(this.drawBuffersMap)}getInternalFormat(){return this.context.RGBA}getTextureFormat(){const{context:t}=this;if(this.getInternalFormat()===t.RGBA)return t.RGBA;throw new Error("Unknown internal format")}_replaceOutputTexture(){if(this.texture.beforeMutate()||this._textureSwitched){const t=this.context;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0),this._textureSwitched=!1}}_setupOutputTexture(){const t=this.context,e=this.texSize;if(this.texture)return void t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0);const n=this.createTexture();t.activeTexture(t.TEXTURE0+this.constantTextureCount+this.argumentTextureCount),t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);const r=this.getInternalFormat();"single"===this.precision?t.texImage2D(t.TEXTURE_2D,0,r,e[0],e[1],0,t.RGBA,t.FLOAT,null):t.texImage2D(t.TEXTURE_2D,0,r,e[0],e[1],0,r,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),this.texture=new this.TextureConstructor({texture:n,size:e,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this})}_replaceSubOutputTextures(){const t=this.context;for(let e=0;e<this.mappedTextures.length;e++){const n=this.mappedTextures[e];(n.beforeMutate()||this._mappedTextureSwitched[e])&&(t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e+1,t.TEXTURE_2D,n.texture,0),this._mappedTextureSwitched[e]=!1)}}_setupSubOutputTextures(){const t=this.context;if(this.mappedTextures){for(let e=0;e<this.subKernels.length;e++)t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e+1,t.TEXTURE_2D,this.mappedTextures[e].texture,0);return}const e=this.texSize;this.drawBuffersMap=[t.COLOR_ATTACHMENT0],this.mappedTextures=[];for(let n=0;n<this.subKernels.length;n++){const r=this.createTexture();this.drawBuffersMap.push(t.COLOR_ATTACHMENT0+n+1),t.activeTexture(t.TEXTURE0+this.constantTextureCount+this.argumentTextureCount+n),t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),"single"===this.precision?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e[0],e[1],0,t.RGBA,t.FLOAT,null):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e[0],e[1],0,t.RGBA,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+n+1,t.TEXTURE_2D,r,0),this.mappedTextures.push(new this.TextureConstructor({texture:r,size:e,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this}))}}setUniform1f(t,e){if(this.uniform1fCache.hasOwnProperty(t)&&e===this.uniform1fCache[t])return;this.uniform1fCache[t]=e;const n=this.getUniformLocation(t);this.context.uniform1f(n,e)}setUniform1i(t,e){if(this.uniform1iCache.hasOwnProperty(t)&&e===this.uniform1iCache[t])return;this.uniform1iCache[t]=e;const n=this.getUniformLocation(t);this.context.uniform1i(n,e)}setUniform2f(t,e,n){if(this.uniform2fCache.hasOwnProperty(t)){const r=this.uniform2fCache[t];if(e===r[0]&&n===r[1])return}this.uniform2fCache[t]=[e,n];const r=this.getUniformLocation(t);this.context.uniform2f(r,e,n)}setUniform2fv(t,e){if(this.uniform2fvCache.hasOwnProperty(t)){const n=this.uniform2fvCache[t];if(e[0]===n[0]&&e[1]===n[1])return}this.uniform2fvCache[t]=e;const n=this.getUniformLocation(t);this.context.uniform2fv(n,e)}setUniform2iv(t,e){if(this.uniform2ivCache.hasOwnProperty(t)){const n=this.uniform2ivCache[t];if(e[0]===n[0]&&e[1]===n[1])return}this.uniform2ivCache[t]=e;const n=this.getUniformLocation(t);this.context.uniform2iv(n,e)}setUniform3fv(t,e){if(this.uniform3fvCache.hasOwnProperty(t)){const n=this.uniform3fvCache[t];if(e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2])return}this.uniform3fvCache[t]=e;const n=this.getUniformLocation(t);this.context.uniform3fv(n,e)}setUniform3iv(t,e){if(this.uniform3ivCache.hasOwnProperty(t)){const n=this.uniform3ivCache[t];if(e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2])return}this.uniform3ivCache[t]=e;const n=this.getUniformLocation(t);this.context.uniform3iv(n,e)}setUniform4fv(t,e){if(this.uniform4fvCache.hasOwnProperty(t)){const n=this.uniform4fvCache[t];if(e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3])return}this.uniform4fvCache[t]=e;const n=this.getUniformLocation(t);this.context.uniform4fv(n,e)}setUniform4iv(t,e){if(this.uniform4ivCache.hasOwnProperty(t)){const n=this.uniform4ivCache[t];if(e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3])return}this.uniform4ivCache[t]=e;const n=this.getUniformLocation(t);this.context.uniform4iv(n,e)}getUniformLocation(t){return this.programUniformLocationCache.hasOwnProperty(t)?this.programUniformLocationCache[t]:this.programUniformLocationCache[t]=this.context.getUniformLocation(this.program,t)}_getFragShaderArtifactMap(t){return{HEADER:this._getHeaderString(),LOOP_MAX:this._getLoopMaxString(),PLUGINS:this._getPluginsString(),CONSTANTS:this._getConstantsString(),DECODE32_ENDIANNESS:this._getDecode32EndiannessString(),ENCODE32_ENDIANNESS:this._getEncode32EndiannessString(),DIVIDE_WITH_INTEGER_CHECK:this._getDivideWithIntegerCheckString(),INJECTED_NATIVE:this._getInjectedNative(),MAIN_CONSTANTS:this._getMainConstantsString(),MAIN_ARGUMENTS:this._getMainArgumentsString(t),KERNEL:this.getKernelString(),MAIN_RESULT:this.getMainResultString(),FLOAT_TACTIC_DECLARATION:this.getFloatTacticDeclaration(),INT_TACTIC_DECLARATION:this.getIntTacticDeclaration(),SAMPLER_2D_TACTIC_DECLARATION:this.getSampler2DTacticDeclaration(),SAMPLER_2D_ARRAY_TACTIC_DECLARATION:this.getSampler2DArrayTacticDeclaration()}}_getVertShaderArtifactMap(t){return{FLOAT_TACTIC_DECLARATION:this.getFloatTacticDeclaration(),INT_TACTIC_DECLARATION:this.getIntTacticDeclaration(),SAMPLER_2D_TACTIC_DECLARATION:this.getSampler2DTacticDeclaration(),SAMPLER_2D_ARRAY_TACTIC_DECLARATION:this.getSampler2DArrayTacticDeclaration()}}_getHeaderString(){return null!==this.subKernels?"#extension GL_EXT_draw_buffers : require\n":""}_getLoopMaxString(){return this.loopMaxIterations?` ${parseInt(this.loopMaxIterations)};\n`:" 1000;\n"}_getPluginsString(){return this.plugins?this.plugins.map((t=>t.source&&this.source.match(t.functionMatch)?t.source:"")).join("\n"):"\n"}_getConstantsString(){const t=[],{threadDim:e,texSize:n}=this;return this.dynamicOutput?t.push("uniform ivec3 uOutputDim","uniform ivec2 uTexSize"):t.push(`ivec3 uOutputDim = ivec3(${e[0]}, ${e[1]}, ${e[2]})`,`ivec2 uTexSize = ivec2(${n[0]}, ${n[1]})`),s.linesToString(t)}_getTextureCoordinate(){const t=this.subKernels;return null===t||t.length<1?"varying vec2 vTexCoord;\n":"out vec2 vTexCoord;\n"}_getDecode32EndiannessString(){return"LE"===this.endianness?"":"  texel.rgba = texel.abgr;\n"}_getEncode32EndiannessString(){return"LE"===this.endianness?"":"  texel.rgba = texel.abgr;\n"}_getDivideWithIntegerCheckString(){return this.fixIntegerDivisionAccuracy?"float divWithIntCheck(float x, float y) {\n  if (floor(x) == x && floor(y) == y && integerMod(x, y) == 0.0) {\n    return float(int(x) / int(y));\n  }\n  return x / y;\n}\n\nfloat integerCorrectionModulo(float number, float divisor) {\n  if (number < 0.0) {\n    number = abs(number);\n    if (divisor < 0.0) {\n      divisor = abs(divisor);\n    }\n    return -(number - (divisor * floor(divWithIntCheck(number, divisor))));\n  }\n  if (divisor < 0.0) {\n    divisor = abs(divisor);\n  }\n  return number - (divisor * floor(divWithIntCheck(number, divisor)));\n}":""}_getMainArgumentsString(t){const e=[],{argumentNames:n}=this;for(let r=0;r<n.length;r++)e.push(this.kernelArguments[r].getSource(t[r]));return e.join("")}_getInjectedNative(){return this.injectedNative||""}_getMainConstantsString(){const t=[],{constants:e}=this;if(e){let n=0;for(const r in e)this.constants.hasOwnProperty(r)&&t.push(this.kernelConstants[n++].getSource(this.constants[r]))}return t.join("")}getRawValueFramebuffer(t,e){if(this.rawValueFramebuffers[t]||(this.rawValueFramebuffers[t]={}),!this.rawValueFramebuffers[t][e]){const n=this.context.createFramebuffer();n.width=t,n.height=e,this.rawValueFramebuffers[t][e]=n}return this.rawValueFramebuffers[t][e]}getKernelResultDeclaration(){switch(this.returnType){case"Array(2)":return"vec2 kernelResult";case"Array(3)":return"vec3 kernelResult";case"Array(4)":return"vec4 kernelResult";case"LiteralInteger":case"Float":case"Number":case"Integer":return"float kernelResult";default:if(this.graphical)return"float kernelResult";throw new Error(`unrecognized output type "${this.returnType}"`)}}getKernelString(){const t=[this.getKernelResultDeclaration()],{subKernels:e}=this;if(null!==e)switch(this.returnType){case"Number":case"Float":case"Integer":for(let n=0;n<e.length;n++){const r=e[n];t.push("Integer"===r.returnType?`int subKernelResult_${r.name} = 0`:`float subKernelResult_${r.name} = 0.0`)}break;case"Array(2)":for(let n=0;n<e.length;n++)t.push(`vec2 subKernelResult_${e[n].name}`);break;case"Array(3)":for(let n=0;n<e.length;n++)t.push(`vec3 subKernelResult_${e[n].name}`);break;case"Array(4)":for(let n=0;n<e.length;n++)t.push(`vec4 subKernelResult_${e[n].name}`)}return s.linesToString(t)+this.translatedSource}getMainResultGraphical(){return s.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragColor = actualColor"])}getMainResultPackedPixels(){switch(this.returnType){case"LiteralInteger":case"Number":case"Integer":case"Float":return this.getMainResultKernelPackedPixels()+this.getMainResultSubKernelPackedPixels();default:throw new Error(`packed output only usable with Numbers, "${this.returnType}" specified`)}}getMainResultKernelPackedPixels(){return s.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()",`  gl_FragData[0] = ${this.useLegacyEncoder?"legacyEncode32":"encode32"}(kernelResult)`])}getMainResultSubKernelPackedPixels(){const t=[];if(!this.subKernels)return"";for(let e=0;e<this.subKernels.length;e++)"Integer"===this.subKernels[e].returnType?t.push(`  gl_FragData[${e+1}] = ${this.useLegacyEncoder?"legacyEncode32":"encode32"}(float(subKernelResult_${this.subKernels[e].name}))`):t.push(`  gl_FragData[${e+1}] = ${this.useLegacyEncoder?"legacyEncode32":"encode32"}(subKernelResult_${this.subKernels[e].name})`);return s.linesToString(t)}getMainResultMemoryOptimizedFloats(){const t=["  index *= 4"];switch(this.returnType){case"Number":case"Integer":case"Float":const e=["r","g","b","a"];for(let n=0;n<e.length;n++){const r=e[n];this.getMainResultKernelMemoryOptimizedFloats(t,r),this.getMainResultSubKernelMemoryOptimizedFloats(t,r),n+1<e.length&&t.push("  index += 1")}break;default:throw new Error(`optimized output only usable with Numbers, ${this.returnType} specified`)}return s.linesToString(t)}getMainResultKernelMemoryOptimizedFloats(t,e){t.push("  threadId = indexTo3D(index, uOutputDim)","  kernel()",`  gl_FragData[0].${e} = kernelResult`)}getMainResultSubKernelMemoryOptimizedFloats(t,e){if(!this.subKernels)return t;for(let n=0;n<this.subKernels.length;n++)"Integer"===this.subKernels[n].returnType?t.push(`  gl_FragData[${n+1}].${e} = float(subKernelResult_${this.subKernels[n].name})`):t.push(`  gl_FragData[${n+1}].${e} = subKernelResult_${this.subKernels[n].name}`)}getMainResultKernelNumberTexture(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0][0] = kernelResult"]}getMainResultSubKernelNumberTexture(){const t=[];if(!this.subKernels)return t;for(let e=0;e<this.subKernels.length;++e){const n=this.subKernels[e];"Integer"===n.returnType?t.push(`  gl_FragData[${e+1}][0] = float(subKernelResult_${n.name})`):t.push(`  gl_FragData[${e+1}][0] = subKernelResult_${n.name}`)}return t}getMainResultKernelArray2Texture(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0][0] = kernelResult[0]","  gl_FragData[0][1] = kernelResult[1]"]}getMainResultSubKernelArray2Texture(){const t=[];if(!this.subKernels)return t;for(let e=0;e<this.subKernels.length;++e)t.push(`  gl_FragData[${e+1}][0] = subKernelResult_${this.subKernels[e].name}[0]`,`  gl_FragData[${e+1}][1] = subKernelResult_${this.subKernels[e].name}[1]`);return t}getMainResultKernelArray3Texture(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0][0] = kernelResult[0]","  gl_FragData[0][1] = kernelResult[1]","  gl_FragData[0][2] = kernelResult[2]"]}getMainResultSubKernelArray3Texture(){const t=[];if(!this.subKernels)return t;for(let e=0;e<this.subKernels.length;++e)t.push(`  gl_FragData[${e+1}][0] = subKernelResult_${this.subKernels[e].name}[0]`,`  gl_FragData[${e+1}][1] = subKernelResult_${this.subKernels[e].name}[1]`,`  gl_FragData[${e+1}][2] = subKernelResult_${this.subKernels[e].name}[2]`);return t}getMainResultKernelArray4Texture(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0] = kernelResult"]}getMainResultSubKernelArray4Texture(){const t=[];if(!this.subKernels)return t;switch(this.returnType){case"Number":case"Float":case"Integer":for(let e=0;e<this.subKernels.length;++e)"Integer"===this.subKernels[e].returnType?t.push(`  gl_FragData[${e+1}] = float(subKernelResult_${this.subKernels[e].name})`):t.push(`  gl_FragData[${e+1}] = subKernelResult_${this.subKernels[e].name}`);break;case"Array(2)":for(let e=0;e<this.subKernels.length;++e)t.push(`  gl_FragData[${e+1}][0] = subKernelResult_${this.subKernels[e].name}[0]`,`  gl_FragData[${e+1}][1] = subKernelResult_${this.subKernels[e].name}[1]`);break;case"Array(3)":for(let e=0;e<this.subKernels.length;++e)t.push(`  gl_FragData[${e+1}][0] = subKernelResult_${this.subKernels[e].name}[0]`,`  gl_FragData[${e+1}][1] = subKernelResult_${this.subKernels[e].name}[1]`,`  gl_FragData[${e+1}][2] = subKernelResult_${this.subKernels[e].name}[2]`);break;case"Array(4)":for(let e=0;e<this.subKernels.length;++e)t.push(`  gl_FragData[${e+1}][0] = subKernelResult_${this.subKernels[e].name}[0]`,`  gl_FragData[${e+1}][1] = subKernelResult_${this.subKernels[e].name}[1]`,`  gl_FragData[${e+1}][2] = subKernelResult_${this.subKernels[e].name}[2]`,`  gl_FragData[${e+1}][3] = subKernelResult_${this.subKernels[e].name}[3]`)}return t}replaceArtifacts(t,e){return t.replace(/[ ]*__([A-Z]+[0-9]*([_]?[A-Z]*[0-9]?)*)__;\n/g,((t,n)=>{if(e.hasOwnProperty(n))return e[n];throw`unhandled artifact ${n}`}))}getFragmentShader(t){return null!==this.compiledFragmentShader?this.compiledFragmentShader:this.compiledFragmentShader=this.replaceArtifacts(this.constructor.fragmentShader,this._getFragShaderArtifactMap(t))}getVertexShader(t){return null!==this.compiledVertexShader?this.compiledVertexShader:this.compiledVertexShader=this.replaceArtifacts(this.constructor.vertexShader,this._getVertShaderArtifactMap(t))}toString(){const t=s.linesToString(["const gl = context"]);return c(this.constructor,arguments,this,t)}destroy(t){if(!this.context)return;this.buffer&&this.context.deleteBuffer(this.buffer),this.framebuffer&&this.context.deleteFramebuffer(this.framebuffer);for(const n in this.rawValueFramebuffers){for(const t in this.rawValueFramebuffers[n])this.context.deleteFramebuffer(this.rawValueFramebuffers[n][t]),delete this.rawValueFramebuffers[n][t];delete this.rawValueFramebuffers[n]}if(this.vertShader&&this.context.deleteShader(this.vertShader),this.fragShader&&this.context.deleteShader(this.fragShader),this.program&&this.context.deleteProgram(this.program),this.texture){this.texture.delete();const t=this.textureCache.indexOf(this.texture.texture);t>-1&&this.textureCache.splice(t,1),this.texture=null}if(this.mappedTextures&&this.mappedTextures.length){for(let t=0;t<this.mappedTextures.length;t++){const e=this.mappedTextures[t];e.delete();const n=this.textureCache.indexOf(e.texture);n>-1&&this.textureCache.splice(n,1)}this.mappedTextures=null}if(this.kernelArguments)for(let n=0;n<this.kernelArguments.length;n++)this.kernelArguments[n].destroy();if(this.kernelConstants)for(let n=0;n<this.kernelConstants.length;n++)this.kernelConstants[n].destroy();for(;this.textureCache.length>0;){const t=this.textureCache.pop();this.context.deleteTexture(t)}if(t){const t=v.indexOf(this.canvas);t>=0&&(v[t]=null,b[t]=null)}if(this.destroyExtensions(),delete this.context,delete this.canvas,!this.gpu)return;const e=this.gpu.kernels.indexOf(this);-1!==e&&this.gpu.kernels.splice(e,1)}destroyExtensions(){this.extensions.OES_texture_float=null,this.extensions.OES_texture_float_linear=null,this.extensions.OES_element_index_uint=null,this.extensions.WEBGL_draw_buffers=null}static destroyContext(t){const e=t.getExtension("WEBGL_lose_context");e&&e.loseContext()}toJSON(){const t=super.toJSON();return t.functionNodes=i.fromKernel(this,a).toJSON(),t.settings.threadDim=this.threadDim,t}}e.exports={WebGLKernel:x}},{"../../plugins/math-random-uniformly-distributed":112,"../../utils":114,"../function-builder":9,"../gl/kernel":13,"../gl/kernel-string":12,"./fragment-shader":37,"./function-node":38,"./kernel-value-maps":39,"./vertex-shader":71}],71:[function(t,e,n){const r="__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n\nattribute vec2 aPos;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord;\nuniform vec2 ratio;\n\nvoid main(void) {\n  gl_Position = vec4((aPos + vec2(1)) * ratio + vec2(-1), 0, 1);\n  vTexCoord = aTexCoord;\n}";e.exports={vertexShader:r}},{}],72:[function(t,e,n){const r=`#version 300 es\n__HEADER__;\n__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n__SAMPLER_2D_ARRAY_TACTIC_DECLARATION__;\n\nconst int LOOP_MAX = __LOOP_MAX__;\n\n__PLUGINS__;\n__CONSTANTS__;\n\nin vec2 vTexCoord;\n\nfloat atan2(float v1, float v2) {\n  if (v1 == 0.0 || v2 == 0.0) return 0.0;\n  return atan(v1 / v2);\n}\n\nfloat cbrt(float x) {\n  if (x >= 0.0) {\n    return pow(x, 1.0 / 3.0);\n  } else {\n    return -pow(x, 1.0 / 3.0);\n  }\n}\n\nfloat expm1(float x) {\n  return pow(${Math.E}, x) - 1.0; \n}\n\nfloat fround(highp float x) {\n  return x;\n}\n\nfloat imul(float v1, float v2) {\n  return float(int(v1) * int(v2));\n}\n\nfloat log10(float x) {\n  return log2(x) * (1.0 / log2(10.0));\n}\n\nfloat log1p(float x) {\n  return log(1.0 + x);\n}\n\nfloat _pow(float v1, float v2) {\n  if (v2 == 0.0) return 1.0;\n  return pow(v1, v2);\n}\n\nfloat _round(float x) {\n  return floor(x + 0.5);\n}\n\n\nconst int BIT_COUNT = 32;\nint modi(int x, int y) {\n  return x - y * (x / y);\n}\n\nint bitwiseOr(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) || (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseXOR(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) != (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseAnd(int a, int b) {\n  int result = 0;\n  int n = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) && (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 && b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseNot(int a) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (modi(a, 2) == 0) {\n      result += n;    \n    }\n    a = a / 2;\n    n = n * 2;\n  }\n  return result;\n}\nint bitwiseZeroFillLeftShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n *= 2;\n  }\n\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nint bitwiseSignedRightShift(int num, int shifts) {\n  return int(floor(float(num) / pow(2.0, float(shifts))));\n}\n\nint bitwiseZeroFillRightShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n /= 2;\n  }\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nvec2 integerMod(vec2 x, float y) {\n  vec2 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec3 integerMod(vec3 x, float y) {\n  vec3 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec4 integerMod(vec4 x, vec4 y) {\n  vec4 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nfloat integerMod(float x, float y) {\n  float res = floor(mod(x, y));\n  return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);\n}\n\nint integerMod(int x, int y) {\n  return x - (y * int(x/y));\n}\n\n__DIVIDE_WITH_INTEGER_CHECK__;\n\n// Here be dragons!\n// DO NOT OPTIMIZE THIS CODE\n// YOU WILL BREAK SOMETHING ON SOMEBODY'S MACHINE\n// LEAVE IT AS IT IS, LEST YOU WASTE YOUR OWN TIME\nconst vec2 MAGIC_VEC = vec2(1.0, -256.0);\nconst vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);\nconst vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536\nfloat decode32(vec4 texel) {\n  __DECODE32_ENDIANNESS__;\n  texel *= 255.0;\n  vec2 gte128;\n  gte128.x = texel.b >= 128.0 ? 1.0 : 0.0;\n  gte128.y = texel.a >= 128.0 ? 1.0 : 0.0;\n  float exponent = 2.0 * texel.a - 127.0 + dot(gte128, MAGIC_VEC);\n  float res = exp2(round(exponent));\n  texel.b = texel.b - 128.0 * gte128.x;\n  res = dot(texel, SCALE_FACTOR) * exp2(round(exponent-23.0)) + res;\n  res *= gte128.y * -2.0 + 1.0;\n  return res;\n}\n\nfloat decode16(vec4 texel, int index) {\n  int channel = integerMod(index, 2);\n  return texel[channel*2] * 255.0 + texel[channel*2 + 1] * 65280.0;\n}\n\nfloat decode8(vec4 texel, int index) {\n  int channel = integerMod(index, 4);\n  return texel[channel] * 255.0;\n}\n\nvec4 legacyEncode32(float f) {\n  float F = abs(f);\n  float sign = f < 0.0 ? 1.0 : 0.0;\n  float exponent = floor(log2(F));\n  float mantissa = (exp2(-exponent) * F);\n  // exponent += floor(log2(mantissa));\n  vec4 texel = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;\n  texel.rg = integerMod(texel.rg, 256.0);\n  texel.b = integerMod(texel.b, 128.0);\n  texel.a = exponent*0.5 + 63.5;\n  texel.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;\n  texel = floor(texel);\n  texel *= 0.003921569; // 1/255\n  __ENCODE32_ENDIANNESS__;\n  return texel;\n}\n\n// https://github.com/gpujs/gpu.js/wiki/Encoder-details\nvec4 encode32(float value) {\n  if (value == 0.0) return vec4(0, 0, 0, 0);\n\n  float exponent;\n  float mantissa;\n  vec4  result;\n  float sgn;\n\n  sgn = step(0.0, -value);\n  value = abs(value);\n\n  exponent = floor(log2(value));\n\n  mantissa = value*pow(2.0, -exponent)-1.0;\n  exponent = exponent+127.0;\n  result   = vec4(0,0,0,0);\n\n  result.a = floor(exponent/2.0);\n  exponent = exponent - result.a*2.0;\n  result.a = result.a + 128.0*sgn;\n\n  result.b = floor(mantissa * 128.0);\n  mantissa = mantissa - result.b / 128.0;\n  result.b = result.b + exponent*128.0;\n\n  result.g = floor(mantissa*32768.0);\n  mantissa = mantissa - result.g/32768.0;\n\n  result.r = floor(mantissa*8388608.0);\n  return result/255.0;\n}\n// Dragons end here\n\nint index;\nivec3 threadId;\n\nivec3 indexTo3D(int idx, ivec3 texDim) {\n  int z = int(idx / (texDim.x * texDim.y));\n  idx -= z * int(texDim.x * texDim.y);\n  int y = int(idx / texDim.x);\n  int x = int(integerMod(idx, texDim.x));\n  return ivec3(x, y, z);\n}\n\nfloat get32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  return decode32(texel);\n}\n\nfloat get16(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int w = texSize.x * 2;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize.x * 2, texSize.y));\n  return decode16(texel, index);\n}\n\nfloat get8(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int w = texSize.x * 4;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize.x * 4, texSize.y));\n  return decode8(texel, index);\n}\n\nfloat getMemoryOptimized32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int channel = integerMod(index, 4);\n  index = index / 4;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  index = index / 4;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  return texel[channel];\n}\n\nvec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  return texture(tex, st / vec2(texSize));\n}\n\nvec4 getImage3D(sampler2DArray tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  return texture(tex, vec3(st / vec2(texSize), z));\n}\n\nfloat getFloatFromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return result[0];\n}\n\nvec2 getVec2FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec2(result[0], result[1]);\n}\n\nvec2 getMemoryOptimizedVec2(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 2);\n  index = index / 2;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  if (channel == 0) return vec2(texel.r, texel.g);\n  if (channel == 1) return vec2(texel.b, texel.a);\n  return vec2(0.0, 0.0);\n}\n\nvec3 getVec3FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec3(result[0], result[1], result[2]);\n}\n\nvec3 getMemoryOptimizedVec3(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int fieldIndex = 3 * (x + texDim.x * (y + texDim.y * z));\n  int vectorIndex = fieldIndex / 4;\n  int vectorOffset = fieldIndex - vectorIndex * 4;\n  int readY = vectorIndex / texSize.x;\n  int readX = vectorIndex - readY * texSize.x;\n  vec4 tex1 = texture(tex, (vec2(readX, readY) + 0.5) / vec2(texSize));\n\n  if (vectorOffset == 0) {\n    return tex1.xyz;\n  } else if (vectorOffset == 1) {\n    return tex1.yzw;\n  } else {\n    readX++;\n    if (readX >= texSize.x) {\n      readX = 0;\n      readY++;\n    }\n    vec4 tex2 = texture(tex, vec2(readX, readY) / vec2(texSize));\n    if (vectorOffset == 2) {\n      return vec3(tex1.z, tex1.w, tex2.x);\n    } else {\n      return vec3(tex1.w, tex2.x, tex2.y);\n    }\n  }\n}\n\nvec4 getVec4FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  return getImage2D(tex, texSize, texDim, z, y, x);\n}\n\nvec4 getMemoryOptimizedVec4(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 2);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  return vec4(texel.r, texel.g, texel.b, texel.a);\n}\n\nvec4 actualColor;\nvoid color(float r, float g, float b, float a) {\n  actualColor = vec4(r,g,b,a);\n}\n\nvoid color(float r, float g, float b) {\n  color(r,g,b,1.0);\n}\n\nfloat modulo(float number, float divisor) {\n  if (number < 0.0) {\n    number = abs(number);\n    if (divisor < 0.0) {\n      divisor = abs(divisor);\n    }\n    return -mod(number, divisor);\n  }\n  if (divisor < 0.0) {\n    divisor = abs(divisor);\n  }\n  return mod(number, divisor);\n}\n\n__INJECTED_NATIVE__;\n__MAIN_CONSTANTS__;\n__MAIN_ARGUMENTS__;\n__KERNEL__;\n\nvoid main(void) {\n  index = int(vTexCoord.s * float(uTexSize.x)) + int(vTexCoord.t * float(uTexSize.y)) * uTexSize.x;\n  __MAIN_RESULT__;\n}`;e.exports={fragmentShader:r}},{}],73:[function(t,e,n){const{utils:r}=t("../../utils"),{WebGLFunctionNode:i}=t("../web-gl/function-node");class a extends i{astIdentifierExpression(t,e){if("Identifier"!==t.type)throw this.astErrorOutput("IdentifierExpression - not an Identifier",t);const n=this.getType(t),i=r.sanitizeName(t.name);return"Infinity"===t.name?e.push("intBitsToFloat(2139095039)"):"Boolean"===n&&this.argumentNames.indexOf(i)>-1?e.push(`bool(user_${i})`):e.push(`user_${i}`),e}}e.exports={WebGL2FunctionNode:a}},{"../../utils":114,"../web-gl/function-node":38}],74:[function(t,e,n){const{WebGL2KernelValueBoolean:r}=t("./kernel-value/boolean"),{WebGL2KernelValueFloat:i}=t("./kernel-value/float"),{WebGL2KernelValueInteger:a}=t("./kernel-value/integer"),{WebGL2KernelValueHTMLImage:s}=t("./kernel-value/html-image"),{WebGL2KernelValueDynamicHTMLImage:o}=t("./kernel-value/dynamic-html-image"),{WebGL2KernelValueHTMLImageArray:u}=t("./kernel-value/html-image-array"),{WebGL2KernelValueDynamicHTMLImageArray:l}=t("./kernel-value/dynamic-html-image-array"),{WebGL2KernelValueHTMLVideo:c}=t("./kernel-value/html-video"),{WebGL2KernelValueDynamicHTMLVideo:h}=t("./kernel-value/dynamic-html-video"),{WebGL2KernelValueSingleInput:p}=t("./kernel-value/single-input"),{WebGL2KernelValueDynamicSingleInput:f}=t("./kernel-value/dynamic-single-input"),{WebGL2KernelValueUnsignedInput:d}=t("./kernel-value/unsigned-input"),{WebGL2KernelValueDynamicUnsignedInput:m}=t("./kernel-value/dynamic-unsigned-input"),{WebGL2KernelValueMemoryOptimizedNumberTexture:g}=t("./kernel-value/memory-optimized-number-texture"),{WebGL2KernelValueDynamicMemoryOptimizedNumberTexture:y}=t("./kernel-value/dynamic-memory-optimized-number-texture"),{WebGL2KernelValueNumberTexture:v}=t("./kernel-value/number-texture"),{WebGL2KernelValueDynamicNumberTexture:b}=t("./kernel-value/dynamic-number-texture"),{WebGL2KernelValueSingleArray:x}=t("./kernel-value/single-array"),{WebGL2KernelValueDynamicSingleArray:w}=t("./kernel-value/dynamic-single-array"),{WebGL2KernelValueSingleArray1DI:S}=t("./kernel-value/single-array1d-i"),{WebGL2KernelValueDynamicSingleArray1DI:T}=t("./kernel-value/dynamic-single-array1d-i"),{WebGL2KernelValueSingleArray2DI:k}=t("./kernel-value/single-array2d-i"),{WebGL2KernelValueDynamicSingleArray2DI:A}=t("./kernel-value/dynamic-single-array2d-i"),{WebGL2KernelValueSingleArray3DI:E}=t("./kernel-value/single-array3d-i"),{WebGL2KernelValueDynamicSingleArray3DI:_}=t("./kernel-value/dynamic-single-array3d-i"),{WebGL2KernelValueArray2:O}=t("./kernel-value/array2"),{WebGL2KernelValueArray3:I}=t("./kernel-value/array3"),{WebGL2KernelValueArray4:L}=t("./kernel-value/array4"),{WebGL2KernelValueUnsignedArray:P}=t("./kernel-value/unsigned-array"),{WebGL2KernelValueDynamicUnsignedArray:C}=t("./kernel-value/dynamic-unsigned-array"),D={unsigned:{dynamic:{Boolean:r,Integer:a,Float:i,Array:C,"Array(2)":O,"Array(3)":I,"Array(4)":L,"Array1D(2)":!1,"Array1D(3)":!1,"Array1D(4)":!1,"Array2D(2)":!1,"Array2D(3)":!1,"Array2D(4)":!1,"Array3D(2)":!1,"Array3D(3)":!1,"Array3D(4)":!1,Input:m,NumberTexture:b,"ArrayTexture(1)":b,"ArrayTexture(2)":b,"ArrayTexture(3)":b,"ArrayTexture(4)":b,MemoryOptimizedNumberTexture:y,HTMLCanvas:o,OffscreenCanvas:o,HTMLImage:o,ImageBitmap:o,ImageData:o,HTMLImageArray:l,HTMLVideo:h},static:{Boolean:r,Float:i,Integer:a,Array:P,"Array(2)":O,"Array(3)":I,"Array(4)":L,"Array1D(2)":!1,"Array1D(3)":!1,"Array1D(4)":!1,"Array2D(2)":!1,"Array2D(3)":!1,"Array2D(4)":!1,"Array3D(2)":!1,"Array3D(3)":!1,"Array3D(4)":!1,Input:d,NumberTexture:v,"ArrayTexture(1)":v,"ArrayTexture(2)":v,"ArrayTexture(3)":v,"ArrayTexture(4)":v,MemoryOptimizedNumberTexture:y,HTMLCanvas:s,OffscreenCanvas:s,HTMLImage:s,ImageBitmap:s,ImageData:s,HTMLImageArray:u,HTMLVideo:c}},single:{dynamic:{Boolean:r,Integer:a,Float:i,Array:w,"Array(2)":O,"Array(3)":I,"Array(4)":L,"Array1D(2)":T,"Array1D(3)":T,"Array1D(4)":T,"Array2D(2)":A,"Array2D(3)":A,"Array2D(4)":A,"Array3D(2)":_,"Array3D(3)":_,"Array3D(4)":_,Input:f,NumberTexture:b,"ArrayTexture(1)":b,"ArrayTexture(2)":b,"ArrayTexture(3)":b,"ArrayTexture(4)":b,MemoryOptimizedNumberTexture:y,HTMLCanvas:o,OffscreenCanvas:o,HTMLImage:o,ImageBitmap:o,ImageData:o,HTMLImageArray:l,HTMLVideo:h},static:{Boolean:r,Float:i,Integer:a,Array:x,"Array(2)":O,"Array(3)":I,"Array(4)":L,"Array1D(2)":S,"Array1D(3)":S,"Array1D(4)":S,"Array2D(2)":k,"Array2D(3)":k,"Array2D(4)":k,"Array3D(2)":E,"Array3D(3)":E,"Array3D(4)":E,Input:p,NumberTexture:v,"ArrayTexture(1)":v,"ArrayTexture(2)":v,"ArrayTexture(3)":v,"ArrayTexture(4)":v,MemoryOptimizedNumberTexture:g,HTMLCanvas:s,OffscreenCanvas:s,HTMLImage:s,ImageBitmap:s,ImageData:s,HTMLImageArray:u,HTMLVideo:c}}};function M(t,e,n,r){if(!t)throw new Error("type missing");if(!e)throw new Error("dynamic missing");if(!n)throw new Error("precision missing");r.type&&(t=r.type);const i=D[n][e];if(!1===i[t])return null;if(void 0===i[t])throw new Error(`Could not find a KernelValue for ${t}`);return i[t]}e.exports={kernelValueMaps:D,lookupKernelValueType:M}},{"./kernel-value/array2":75,"./kernel-value/array3":76,"./kernel-value/array4":77,"./kernel-value/boolean":78,"./kernel-value/dynamic-html-image":80,"./kernel-value/dynamic-html-image-array":79,"./kernel-value/dynamic-html-video":81,"./kernel-value/dynamic-memory-optimized-number-texture":82,"./kernel-value/dynamic-number-texture":83,"./kernel-value/dynamic-single-array":84,"./kernel-value/dynamic-single-array1d-i":85,"./kernel-value/dynamic-single-array2d-i":86,"./kernel-value/dynamic-single-array3d-i":87,"./kernel-value/dynamic-single-input":88,"./kernel-value/dynamic-unsigned-array":89,"./kernel-value/dynamic-unsigned-input":90,"./kernel-value/float":91,"./kernel-value/html-image":93,"./kernel-value/html-image-array":92,"./kernel-value/html-video":94,"./kernel-value/integer":95,"./kernel-value/memory-optimized-number-texture":96,"./kernel-value/number-texture":97,"./kernel-value/single-array":98,"./kernel-value/single-array1d-i":99,"./kernel-value/single-array2d-i":100,"./kernel-value/single-array3d-i":101,"./kernel-value/single-input":102,"./kernel-value/unsigned-array":103,"./kernel-value/unsigned-input":104}],75:[function(t,e,n){const{WebGLKernelValueArray2:r}=t("../../web-gl/kernel-value/array2");class i extends r{}e.exports={WebGL2KernelValueArray2:i}},{"../../web-gl/kernel-value/array2":41}],76:[function(t,e,n){const{WebGLKernelValueArray3:r}=t("../../web-gl/kernel-value/array3");class i extends r{}e.exports={WebGL2KernelValueArray3:i}},{"../../web-gl/kernel-value/array3":42}],77:[function(t,e,n){const{WebGLKernelValueArray4:r}=t("../../web-gl/kernel-value/array4");class i extends r{}e.exports={WebGL2KernelValueArray4:i}},{"../../web-gl/kernel-value/array4":43}],78:[function(t,e,n){const{WebGLKernelValueBoolean:r}=t("../../web-gl/kernel-value/boolean");class i extends r{}e.exports={WebGL2KernelValueBoolean:i}},{"../../web-gl/kernel-value/boolean":44}],79:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGL2KernelValueHTMLImageArray:i}=t("./html-image-array");class a extends i{getSource(){const t=this.getVariablePrecisionString();return r.linesToString([`uniform ${t} sampler2DArray ${this.id}`,`uniform ${t} ivec2 ${this.sizeId}`,`uniform ${t} ivec3 ${this.dimensionsId}`])}updateValue(t){const{width:e,height:n}=t[0];this.checkSize(e,n),this.dimensions=[e,n,t.length],this.textureSize=[e,n],this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(t)}}e.exports={WebGL2KernelValueDynamicHTMLImageArray:a}},{"../../../utils":114,"./html-image-array":92}],80:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueDynamicHTMLImage:i}=t("../../web-gl/kernel-value/dynamic-html-image");class a extends i{getSource(){const t=this.getVariablePrecisionString();return r.linesToString([`uniform ${t} sampler2D ${this.id}`,`uniform ${t} ivec2 ${this.sizeId}`,`uniform ${t} ivec3 ${this.dimensionsId}`])}}e.exports={WebGL2KernelValueDynamicHTMLImage:a}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-html-image":45}],81:[function(t,e,n){t("../../../utils");const{WebGL2KernelValueDynamicHTMLImage:r}=t("./dynamic-html-image");class i extends r{}e.exports={WebGL2KernelValueDynamicHTMLVideo:i}},{"../../../utils":114,"./dynamic-html-image":80}],82:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueDynamicMemoryOptimizedNumberTexture:i}=t("../../web-gl/kernel-value/dynamic-memory-optimized-number-texture");class a extends i{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}}e.exports={WebGL2KernelValueDynamicMemoryOptimizedNumberTexture:a}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-memory-optimized-number-texture":47}],83:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueDynamicNumberTexture:i}=t("../../web-gl/kernel-value/dynamic-number-texture");class a extends i{getSource(){const t=this.getVariablePrecisionString();return r.linesToString([`uniform ${t} sampler2D ${this.id}`,`uniform ${t} ivec2 ${this.sizeId}`,`uniform ${t} ivec3 ${this.dimensionsId}`])}}e.exports={WebGL2KernelValueDynamicNumberTexture:a}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-number-texture":48}],84:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGL2KernelValueSingleArray:i}=t("../../web-gl2/kernel-value/single-array");class a extends i{getSource(){const t=this.getVariablePrecisionString();return r.linesToString([`uniform ${t} sampler2D ${this.id}`,`uniform ${t} ivec2 ${this.sizeId}`,`uniform ${t} ivec3 ${this.dimensionsId}`])}updateValue(t){this.dimensions=r.getDimensions(t,!0),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(t)}}e.exports={WebGL2KernelValueDynamicSingleArray:a}},{"../../../utils":114,"../../web-gl2/kernel-value/single-array":98}],85:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGL2KernelValueSingleArray1DI:i}=t("../../web-gl2/kernel-value/single-array1d-i");class a extends i{getSource(){const t=this.getVariablePrecisionString();return r.linesToString([`uniform ${t} sampler2D ${this.id}`,`uniform ${t} ivec2 ${this.sizeId}`,`uniform ${t} ivec3 ${this.dimensionsId}`])}updateValue(t){this.setShape(t),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(t)}}e.exports={WebGL2KernelValueDynamicSingleArray1DI:a}},{"../../../utils":114,"../../web-gl2/kernel-value/single-array1d-i":99}],86:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGL2KernelValueSingleArray2DI:i}=t("../../web-gl2/kernel-value/single-array2d-i");class a extends i{getSource(){const t=this.getVariablePrecisionString();return r.linesToString([`uniform ${t} sampler2D ${this.id}`,`uniform ${t} ivec2 ${this.sizeId}`,`uniform ${t} ivec3 ${this.dimensionsId}`])}updateValue(t){this.setShape(t),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(t)}}e.exports={WebGL2KernelValueDynamicSingleArray2DI:a}},{"../../../utils":114,"../../web-gl2/kernel-value/single-array2d-i":100}],87:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGL2KernelValueSingleArray3DI:i}=t("../../web-gl2/kernel-value/single-array3d-i");class a extends i{getSource(){const t=this.getVariablePrecisionString();return r.linesToString([`uniform ${t} sampler2D ${this.id}`,`uniform ${t} ivec2 ${this.sizeId}`,`uniform ${t} ivec3 ${this.dimensionsId}`])}updateValue(t){this.setShape(t),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(t)}}e.exports={WebGL2KernelValueDynamicSingleArray3DI:a}},{"../../../utils":114,"../../web-gl2/kernel-value/single-array3d-i":101}],88:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGL2KernelValueSingleInput:i}=t("../../web-gl2/kernel-value/single-input");class a extends i{getSource(){const t=this.getVariablePrecisionString();return r.linesToString([`uniform ${t} sampler2D ${this.id}`,`uniform ${t} ivec2 ${this.sizeId}`,`uniform ${t} ivec3 ${this.dimensionsId}`])}updateValue(t){let[e,n,i]=t.size;this.dimensions=new Int32Array([e||1,n||1,i||1]),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(t)}}e.exports={WebGL2KernelValueDynamicSingleInput:a}},{"../../../utils":114,"../../web-gl2/kernel-value/single-input":102}],89:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueDynamicUnsignedArray:i}=t("../../web-gl/kernel-value/dynamic-unsigned-array");class a extends i{getSource(){const t=this.getVariablePrecisionString();return r.linesToString([`uniform ${t} sampler2D ${this.id}`,`uniform ${t} ivec2 ${this.sizeId}`,`uniform ${t} ivec3 ${this.dimensionsId}`])}}e.exports={WebGL2KernelValueDynamicUnsignedArray:a}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-unsigned-array":54}],90:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueDynamicUnsignedInput:i}=t("../../web-gl/kernel-value/dynamic-unsigned-input");class a extends i{getSource(){const t=this.getVariablePrecisionString();return r.linesToString([`uniform ${t} sampler2D ${this.id}`,`uniform ${t} ivec2 ${this.sizeId}`,`uniform ${t} ivec3 ${this.dimensionsId}`])}}e.exports={WebGL2KernelValueDynamicUnsignedInput:a}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-unsigned-input":55}],91:[function(t,e,n){t("../../../utils");const{WebGLKernelValueFloat:r}=t("../../web-gl/kernel-value/float");class i extends r{}e.exports={WebGL2KernelValueFloat:i}},{"../../../utils":114,"../../web-gl/kernel-value/float":56}],92:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelArray:i}=t("../../web-gl/kernel-value/array");class a extends i{constructor(t,e){super(t,e),this.checkSize(t[0].width,t[0].height),this.dimensions=[t[0].width,t[0].height,t.length],this.textureSize=[t[0].width,t[0].height]}defineTexture(){const{context:t}=this;t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D_ARRAY,this.texture),t.texParameteri(t.TEXTURE_2D_ARRAY,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D_ARRAY,t.TEXTURE_MIN_FILTER,t.NEAREST)}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName};\n`}getSource(){const t=this.getVariablePrecisionString();return r.linesToString([`uniform ${t} sampler2DArray ${this.id}`,`${t} ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`${t} ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(t){const{context:e}=this;e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D_ARRAY,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage3D(e.TEXTURE_2D_ARRAY,0,e.RGBA,t[0].width,t[0].height,t.length,0,e.RGBA,e.UNSIGNED_BYTE,null);for(let n=0;n<t.length;n++){const r=0,i=0,a=1;e.texSubImage3D(e.TEXTURE_2D_ARRAY,0,r,i,n,t[n].width,t[n].height,a,e.RGBA,e.UNSIGNED_BYTE,this.uploadValue=t[n])}this.kernel.setUniform1i(this.id,this.index)}}e.exports={WebGL2KernelValueHTMLImageArray:a}},{"../../../utils":114,"../../web-gl/kernel-value/array":40}],93:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueHTMLImage:i}=t("../../web-gl/kernel-value/html-image");class a extends i{getSource(){const t=this.getVariablePrecisionString();return r.linesToString([`uniform ${t} sampler2D ${this.id}`,`${t} ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`${t} ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}}e.exports={WebGL2KernelValueHTMLImage:a}},{"../../../utils":114,"../../web-gl/kernel-value/html-image":57}],94:[function(t,e,n){t("../../../utils");const{WebGL2KernelValueHTMLImage:r}=t("./html-image");class i extends r{}e.exports={WebGL2KernelValueHTMLVideo:i}},{"../../../utils":114,"./html-image":93}],95:[function(t,e,n){const{WebGLKernelValueInteger:r}=t("../../web-gl/kernel-value/integer");class i extends r{getSource(t){const e=this.getVariablePrecisionString();return"constants"===this.origin?`const ${e} int ${this.id} = ${parseInt(t)};\n`:`uniform ${e} int ${this.id};\n`}updateValue(t){"constants"!==this.origin&&this.kernel.setUniform1i(this.id,this.uploadValue=t)}}e.exports={WebGL2KernelValueInteger:i}},{"../../web-gl/kernel-value/integer":60}],96:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueMemoryOptimizedNumberTexture:i}=t("../../web-gl/kernel-value/memory-optimized-number-texture");class a extends i{getSource(){const{id:t,sizeId:e,textureSize:n,dimensionsId:i,dimensions:a}=this,s=this.getVariablePrecisionString();return r.linesToString([`uniform sampler2D ${t}`,`${s} ivec2 ${e} = ivec2(${n[0]}, ${n[1]})`,`${s} ivec3 ${i} = ivec3(${a[0]}, ${a[1]}, ${a[2]})`])}}e.exports={WebGL2KernelValueMemoryOptimizedNumberTexture:a}},{"../../../utils":114,"../../web-gl/kernel-value/memory-optimized-number-texture":61}],97:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueNumberTexture:i}=t("../../web-gl/kernel-value/number-texture");class a extends i{getSource(){const{id:t,sizeId:e,textureSize:n,dimensionsId:i,dimensions:a}=this,s=this.getVariablePrecisionString();return r.linesToString([`uniform ${s} sampler2D ${t}`,`${s} ivec2 ${e} = ivec2(${n[0]}, ${n[1]})`,`${s} ivec3 ${i} = ivec3(${a[0]}, ${a[1]}, ${a[2]})`])}}e.exports={WebGL2KernelValueNumberTexture:a}},{"../../../utils":114,"../../web-gl/kernel-value/number-texture":62}],98:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueSingleArray:i}=t("../../web-gl/kernel-value/single-array");class a extends i{getSource(){const t=this.getVariablePrecisionString();return r.linesToString([`uniform ${t} sampler2D ${this.id}`,`${t} ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`${t} ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(t){if(t.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(t.constructor);const{context:e}=this;r.flattenTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}e.exports={WebGL2KernelValueSingleArray:a}},{"../../../utils":114,"../../web-gl/kernel-value/single-array":63}],99:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueSingleArray1DI:i}=t("../../web-gl/kernel-value/single-array1d-i");class a extends i{updateValue(t){if(t.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(t.constructor);const{context:e}=this;r.flattenTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}e.exports={WebGL2KernelValueSingleArray1DI:a}},{"../../../utils":114,"../../web-gl/kernel-value/single-array1d-i":64}],100:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueSingleArray2DI:i}=t("../../web-gl/kernel-value/single-array2d-i");class a extends i{updateValue(t){if(t.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(t.constructor);const{context:e}=this;r.flattenTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}e.exports={WebGL2KernelValueSingleArray2DI:a}},{"../../../utils":114,"../../web-gl/kernel-value/single-array2d-i":65}],101:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueSingleArray3DI:i}=t("../../web-gl/kernel-value/single-array3d-i");class a extends i{updateValue(t){if(t.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(t.constructor);const{context:e}=this;r.flattenTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}e.exports={WebGL2KernelValueSingleArray3DI:a}},{"../../../utils":114,"../../web-gl/kernel-value/single-array3d-i":66}],102:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueSingleInput:i}=t("../../web-gl/kernel-value/single-input");class a extends i{getSource(){const t=this.getVariablePrecisionString();return r.linesToString([`uniform ${t} sampler2D ${this.id}`,`${t} ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`${t} ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(t){const{context:e}=this;r.flattenTo(t.value,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}e.exports={WebGL2KernelValueSingleInput:a}},{"../../../utils":114,"../../web-gl/kernel-value/single-input":67}],103:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueUnsignedArray:i}=t("../../web-gl/kernel-value/unsigned-array");class a extends i{getSource(){const t=this.getVariablePrecisionString();return r.linesToString([`uniform ${t} sampler2D ${this.id}`,`${t} ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`${t} ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}}e.exports={WebGL2KernelValueUnsignedArray:a}},{"../../../utils":114,"../../web-gl/kernel-value/unsigned-array":68}],104:[function(t,e,n){const{utils:r}=t("../../../utils"),{WebGLKernelValueUnsignedInput:i}=t("../../web-gl/kernel-value/unsigned-input");class a extends i{getSource(){const t=this.getVariablePrecisionString();return r.linesToString([`uniform ${t} sampler2D ${this.id}`,`${t} ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`${t} ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}}e.exports={WebGL2KernelValueUnsignedInput:a}},{"../../../utils":114,"../../web-gl/kernel-value/unsigned-input":69}],105:[function(t,e,n){const{WebGLKernel:r}=t("../web-gl/kernel"),{WebGL2FunctionNode:i}=t("./function-node"),{FunctionBuilder:a}=t("../function-builder"),{utils:s}=t("../../utils"),{fragmentShader:o}=t("./fragment-shader"),{vertexShader:u}=t("./vertex-shader"),{lookupKernelValueType:l}=t("./kernel-value-maps");let c=null,h=null,p=null,f=null;class d extends r{static get isSupported(){return null!==c||(this.setupFeatureChecks(),c=this.isContextMatch(p)),c}static setupFeatureChecks(){"undefined"!==typeof document?h=document.createElement("canvas"):"undefined"!==typeof OffscreenCanvas&&(h=new OffscreenCanvas(0,0)),h&&(p=h.getContext("webgl2"),p&&p.getExtension&&(p.getExtension("EXT_color_buffer_float"),p.getExtension("OES_texture_float_linear"),f=this.getFeatures()))}static isContextMatch(t){return"undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext}static getFeatures(){const t=this.testContext;return Object.freeze({isFloatRead:this.getIsFloatRead(),isIntegerDivisionAccurate:this.getIsIntegerDivisionAccurate(),isSpeedTacticSupported:this.getIsSpeedTacticSupported(),kernelMap:!0,isTextureFloat:!0,isDrawBuffers:!0,channelCount:this.getChannelCount(),maxTextureSize:this.getMaxTextureSize(),lowIntPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.LOW_INT),lowFloatPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.LOW_FLOAT),mediumIntPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_INT),mediumFloatPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT),highIntPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_INT),highFloatPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT)})}static getIsTextureFloat(){return!0}static getChannelCount(){return p.getParameter(p.MAX_DRAW_BUFFERS)}static getMaxTextureSize(){return p.getParameter(p.MAX_TEXTURE_SIZE)}static lookupKernelValueType(t,e,n,r){return l(t,e,n,r)}static get testCanvas(){return h}static get testContext(){return p}static get features(){return f}static get fragmentShader(){return o}static get vertexShader(){return u}initContext(){const t={alpha:!1,depth:!1,antialias:!1};return this.canvas.getContext("webgl2",t)}initExtensions(){this.extensions={EXT_color_buffer_float:this.context.getExtension("EXT_color_buffer_float"),OES_texture_float_linear:this.context.getExtension("OES_texture_float_linear")}}validateSettings(t){if(!this.validate)return void(this.texSize=s.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output));const{features:e}=this.constructor;if("single"===this.precision&&!e.isFloatRead)throw new Error("Float texture outputs are not supported");if(this.graphical||null!==this.precision||(this.precision=e.isFloatRead?"single":"unsigned"),null===this.fixIntegerDivisionAccuracy?this.fixIntegerDivisionAccuracy=!e.isIntegerDivisionAccurate:this.fixIntegerDivisionAccuracy&&e.isIntegerDivisionAccurate&&(this.fixIntegerDivisionAccuracy=!1),this.checkOutput(),!this.output||0===this.output.length){if(1!==t.length)throw new Error("Auto output only supported for kernels with only one input");const e=s.getVariableType(t[0],this.strictIntegers);switch(e){case"Array":this.output=s.getDimensions(e);break;case"NumberTexture":case"MemoryOptimizedNumberTexture":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":this.output=t[0].output;break;default:throw new Error("Auto output not supported for input type: "+e)}}if(this.graphical){if(2!==this.output.length)throw new Error("Output must have 2 dimensions on graphical mode");return"single"===this.precision&&(console.warn("Cannot use graphical mode and single precision at the same time"),this.precision="unsigned"),void(this.texSize=s.clone(this.output))}!this.graphical&&null===this.precision&&e.isTextureFloat&&(this.precision="single"),this.texSize=s.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output),this.checkTextureSize()}translateSource(){const t=a.fromKernel(this,i,{fixIntegerDivisionAccuracy:this.fixIntegerDivisionAccuracy});this.translatedSource=t.getPrototypeString("kernel"),this.setupReturnTypes(t)}drawBuffers(){this.context.drawBuffers(this.drawBuffersMap)}getTextureFormat(){const{context:t}=this;switch(this.getInternalFormat()){case t.R32F:return t.RED;case t.RG32F:return t.RG;case t.RGBA32F:case t.RGBA:return t.RGBA;default:throw new Error("Unknown internal format")}}getInternalFormat(){const{context:t}=this;if("single"===this.precision){if(this.pipeline)switch(this.returnType){case"Number":case"Float":case"Integer":return this.optimizeFloatMemory?t.RGBA32F:t.R32F;case"Array(2)":return t.RG32F;case"Array(3)":case"Array(4)":return t.RGBA32F;default:throw new Error("Unhandled return type")}return t.RGBA32F}return t.RGBA}_setupOutputTexture(){const t=this.context;if(this.texture)return void t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0);t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer);const e=t.createTexture(),n=this.texSize;t.activeTexture(t.TEXTURE0+this.constantTextureCount+this.argumentTextureCount),t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);const r=this.getInternalFormat();"single"===this.precision?t.texStorage2D(t.TEXTURE_2D,1,r,n[0],n[1]):t.texImage2D(t.TEXTURE_2D,0,r,n[0],n[1],0,r,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.texture=new this.TextureConstructor({texture:e,size:n,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this})}_setupSubOutputTextures(){const t=this.context;if(this.mappedTextures){for(let e=0;e<this.subKernels.length;e++)t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e+1,t.TEXTURE_2D,this.mappedTextures[e].texture,0);return}const e=this.texSize;this.drawBuffersMap=[t.COLOR_ATTACHMENT0],this.mappedTextures=[];for(let n=0;n<this.subKernels.length;n++){const r=this.createTexture();this.drawBuffersMap.push(t.COLOR_ATTACHMENT0+n+1),t.activeTexture(t.TEXTURE0+this.constantTextureCount+this.argumentTextureCount+n),t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);const i=this.getInternalFormat();"single"===this.precision?t.texStorage2D(t.TEXTURE_2D,1,i,e[0],e[1]):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e[0],e[1],0,t.RGBA,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+n+1,t.TEXTURE_2D,r,0),this.mappedTextures.push(new this.TextureConstructor({texture:r,size:e,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this}))}}_getHeaderString(){return""}_getTextureCoordinate(){const t=this.subKernels,e=this.getVariablePrecisionString(this.texSize,this.tactic);return null===t||t.length<1?`in ${e} vec2 vTexCoord;\n`:`out ${e} vec2 vTexCoord;\n`}_getMainArgumentsString(t){const e=[],n=this.argumentNames;for(let r=0;r<n.length;r++)e.push(this.kernelArguments[r].getSource(t[r]));return e.join("")}getKernelString(){const t=[this.getKernelResultDeclaration()],e=this.subKernels;if(null!==e)switch(t.push("layout(location = 0) out vec4 data0"),this.returnType){case"Number":case"Float":case"Integer":for(let n=0;n<e.length;n++){const r=e[n];t.push("Integer"===r.returnType?`int subKernelResult_${r.name} = 0`:`float subKernelResult_${r.name} = 0.0`,`layout(location = ${n+1}) out vec4 data${n+1}`)}break;case"Array(2)":for(let n=0;n<e.length;n++)t.push(`vec2 subKernelResult_${e[n].name}`,`layout(location = ${n+1}) out vec4 data${n+1}`);break;case"Array(3)":for(let n=0;n<e.length;n++)t.push(`vec3 subKernelResult_${e[n].name}`,`layout(location = ${n+1}) out vec4 data${n+1}`);break;case"Array(4)":for(let n=0;n<e.length;n++)t.push(`vec4 subKernelResult_${e[n].name}`,`layout(location = ${n+1}) out vec4 data${n+1}`)}else t.push("out vec4 data0");return s.linesToString(t)+this.translatedSource}getMainResultGraphical(){return s.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0 = actualColor"])}getMainResultPackedPixels(){switch(this.returnType){case"LiteralInteger":case"Number":case"Integer":case"Float":return this.getMainResultKernelPackedPixels()+this.getMainResultSubKernelPackedPixels();default:throw new Error(`packed output only usable with Numbers, "${this.returnType}" specified`)}}getMainResultKernelPackedPixels(){return s.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()",`  data0 = ${this.useLegacyEncoder?"legacyEncode32":"encode32"}(kernelResult)`])}getMainResultSubKernelPackedPixels(){const t=[];if(!this.subKernels)return"";for(let e=0;e<this.subKernels.length;e++)"Integer"===this.subKernels[e].returnType?t.push(`  data${e+1} = ${this.useLegacyEncoder?"legacyEncode32":"encode32"}(float(subKernelResult_${this.subKernels[e].name}))`):t.push(`  data${e+1} = ${this.useLegacyEncoder?"legacyEncode32":"encode32"}(subKernelResult_${this.subKernels[e].name})`);return s.linesToString(t)}getMainResultKernelMemoryOptimizedFloats(t,e){t.push("  threadId = indexTo3D(index, uOutputDim)","  kernel()",`  data0.${e} = kernelResult`)}getMainResultSubKernelMemoryOptimizedFloats(t,e){if(!this.subKernels)return t;for(let n=0;n<this.subKernels.length;n++){const r=this.subKernels[n];"Integer"===r.returnType?t.push(`  data${n+1}.${e} = float(subKernelResult_${r.name})`):t.push(`  data${n+1}.${e} = subKernelResult_${r.name}`)}}getMainResultKernelNumberTexture(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0[0] = kernelResult"]}getMainResultSubKernelNumberTexture(){const t=[];if(!this.subKernels)return t;for(let e=0;e<this.subKernels.length;++e){const n=this.subKernels[e];"Integer"===n.returnType?t.push(`  data${e+1}[0] = float(subKernelResult_${n.name})`):t.push(`  data${e+1}[0] = subKernelResult_${n.name}`)}return t}getMainResultKernelArray2Texture(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0[0] = kernelResult[0]","  data0[1] = kernelResult[1]"]}getMainResultSubKernelArray2Texture(){const t=[];if(!this.subKernels)return t;for(let e=0;e<this.subKernels.length;++e){const n=this.subKernels[e];t.push(`  data${e+1}[0] = subKernelResult_${n.name}[0]`,`  data${e+1}[1] = subKernelResult_${n.name}[1]`)}return t}getMainResultKernelArray3Texture(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0[0] = kernelResult[0]","  data0[1] = kernelResult[1]","  data0[2] = kernelResult[2]"]}getMainResultSubKernelArray3Texture(){const t=[];if(!this.subKernels)return t;for(let e=0;e<this.subKernels.length;++e){const n=this.subKernels[e];t.push(`  data${e+1}[0] = subKernelResult_${n.name}[0]`,`  data${e+1}[1] = subKernelResult_${n.name}[1]`,`  data${e+1}[2] = subKernelResult_${n.name}[2]`)}return t}getMainResultKernelArray4Texture(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0 = kernelResult"]}getMainResultSubKernelArray4Texture(){const t=[];if(!this.subKernels)return t;for(let e=0;e<this.subKernels.length;++e)t.push(`  data${e+1} = subKernelResult_${this.subKernels[e].name}`);return t}destroyExtensions(){this.extensions.EXT_color_buffer_float=null,this.extensions.OES_texture_float_linear=null}toJSON(){const t=super.toJSON();return t.functionNodes=a.fromKernel(this,i).toJSON(),t.settings.threadDim=this.threadDim,t}}e.exports={WebGL2Kernel:d}},{"../../utils":114,"../function-builder":9,"../web-gl/kernel":70,"./fragment-shader":72,"./function-node":73,"./kernel-value-maps":74,"./vertex-shader":106}],106:[function(t,e,n){const r="#version 300 es\n__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n\nin vec2 aPos;\nin vec2 aTexCoord;\n\nout vec2 vTexCoord;\nuniform vec2 ratio;\n\nvoid main(void) {\n  gl_Position = vec4((aPos + vec2(1)) * ratio + vec2(-1), 0, 1);\n  vTexCoord = aTexCoord;\n}";e.exports={vertexShader:r}},{}],107:[function(t,e,n){const r=t("./index"),i=r.GPU;for(const s in r)r.hasOwnProperty(s)&&"GPU"!==s&&(i[s]=r[s]);function a(t){t.GPU||Object.defineProperty(t,"GPU",{get:()=>i})}"undefined"!==typeof window&&a(window),"undefined"!==typeof self&&a(self),e.exports=r},{"./index":109}],108:[function(t,e,n){const{gpuMock:r}=t("gpu-mock.js"),{utils:i}=t("./utils");t("./backend/kernel");const{CPUKernel:a}=t("./backend/cpu/kernel"),{HeadlessGLKernel:s}=t("./backend/headless-gl/kernel"),{WebGL2Kernel:o}=t("./backend/web-gl2/kernel"),{WebGLKernel:u}=t("./backend/web-gl/kernel"),{kernelRunShortcut:l}=t("./kernel-run-shortcut"),c=[s,o,u],h=["gpu","cpu"],p={headlessgl:s,webgl2:o,webgl:u};let f=!0;class d{static disableValidation(){f=!1}static enableValidation(){f=!0}static get isGPUSupported(){return c.some((t=>t.isSupported))}static get isKernelMapSupported(){return c.some((t=>t.isSupported&&t.features.kernelMap))}static get isOffscreenCanvasSupported(){return"undefined"!==typeof Worker&&"undefined"!==typeof OffscreenCanvas||"undefined"!==typeof importScripts}static get isWebGLSupported(){return u.isSupported}static get isWebGL2Supported(){return o.isSupported}static get isHeadlessGLSupported(){return s.isSupported}static get isCanvasSupported(){return"undefined"!==typeof HTMLCanvasElement}static get isGPUHTMLImageArraySupported(){return o.isSupported}static get isSinglePrecisionSupported(){return c.some((t=>t.isSupported&&t.features.isFloatRead&&t.features.isTextureFloat))}constructor(t){if(t=t||{},this.canvas=t.canvas||null,this.context=t.context||null,this.mode=t.mode,this.Kernel=null,this.kernels=[],this.functions=[],this.nativeFunctions=[],this.injectedNative=null,"dev"!==this.mode){if(this.chooseKernel(),t.functions)for(let e=0;e<t.functions.length;e++)this.addFunction(t.functions[e]);if(t.nativeFunctions)for(const e in t.nativeFunctions){if(!t.nativeFunctions.hasOwnProperty(e))continue;const n=t.nativeFunctions[e],{name:r,source:i}=n;this.addNativeFunction(r,i,n)}}}chooseKernel(){if(this.Kernel)return;let t=null;if(this.context){for(let e=0;e<c.length;e++){const n=c[e];if(n.isContextMatch(this.context)){if(!n.isSupported)throw new Error(`Kernel type ${n.name} not supported`);t=n;break}}if(null===t)throw new Error("unknown Context")}else if(this.mode){if(this.mode in p)f&&!p[this.mode].isSupported||(t=p[this.mode]);else if("gpu"===this.mode){for(let e=0;e<c.length;e++)if(c[e].isSupported){t=c[e];break}}else"cpu"===this.mode&&(t=a);if(!t)throw new Error(`A requested mode of "${this.mode}" and is not supported`)}else{for(let e=0;e<c.length;e++)if(c[e].isSupported){t=c[e];break}t||(t=a)}this.mode||(this.mode=t.mode),this.Kernel=t}createKernel(t,e){if("undefined"===typeof t)throw new Error("Missing source parameter");if("object"!==typeof t&&!i.isFunction(t)&&"string"!==typeof t)throw new Error("source parameter not a function");const n=this.kernels;if("dev"===this.mode){const i=r(t,m(e));return n.push(i),i}t="function"===typeof t?t.toString():t;const s={},o=m(e)||{};function u(e){console.warn("Falling back to CPU");const n=new a(t,{argumentTypes:d.argumentTypes,constantTypes:d.constantTypes,graphical:d.graphical,loopMaxIterations:d.loopMaxIterations,constants:d.constants,dynamicOutput:d.dynamicOutput,dynamicArgument:d.dynamicArguments,output:d.output,precision:d.precision,pipeline:d.pipeline,immutable:d.immutable,optimizeFloatMemory:d.optimizeFloatMemory,fixIntegerDivisionAccuracy:d.fixIntegerDivisionAccuracy,functions:d.functions,nativeFunctions:d.nativeFunctions,injectedNative:d.injectedNative,subKernels:d.subKernels,strictIntegers:d.strictIntegers,debug:d.debug});n.build.apply(n,e);const r=n.run.apply(n,e);return d.replaceKernel(n),r}function c(e,r,i){i.debug&&console.warn("Switching kernels");let a=null;if(i.signature&&!s[i.signature]&&(s[i.signature]=i),i.dynamicOutput)for(let t=e.length-1;t>=0;t--){const n=e[t];"outputPrecisionMismatch"===n.type&&(a=n.needed)}const o=i.constructor,l=o.getArgumentTypes(i,r),h=o.getSignature(i,l),p=s[h];if(p)return p.onActivate(i),p;const m=s[h]=new o(t,{argumentTypes:l,constantTypes:i.constantTypes,graphical:i.graphical,loopMaxIterations:i.loopMaxIterations,constants:i.constants,dynamicOutput:i.dynamicOutput,dynamicArgument:i.dynamicArguments,context:i.context,canvas:i.canvas,output:a||i.output,precision:i.precision,pipeline:i.pipeline,immutable:i.immutable,optimizeFloatMemory:i.optimizeFloatMemory,fixIntegerDivisionAccuracy:i.fixIntegerDivisionAccuracy,functions:i.functions,nativeFunctions:i.nativeFunctions,injectedNative:i.injectedNative,subKernels:i.subKernels,strictIntegers:i.strictIntegers,debug:i.debug,gpu:i.gpu,validate:f,returnType:i.returnType,tactic:i.tactic,onRequestFallback:u,onRequestSwitchKernel:c,texture:i.texture,mappedTextures:i.mappedTextures,drawBuffersMap:i.drawBuffersMap});return m.build.apply(m,r),d.replaceKernel(m),n.push(m),m}e&&"object"===typeof e.argumentTypes&&(o.argumentTypes=Object.keys(e.argumentTypes).map((t=>e.argumentTypes[t])));const h=Object.assign({context:this.context,canvas:this.canvas,functions:this.functions,nativeFunctions:this.nativeFunctions,injectedNative:this.injectedNative,gpu:this,validate:f,onRequestFallback:u,onRequestSwitchKernel:c},o),p=new this.Kernel(t,h),d=l(p);return this.canvas||(this.canvas=p.canvas),this.context||(this.context=p.context),n.push(p),d}createKernelMap(){let t,e;const n=typeof arguments[arguments.length-2];if("function"===n||"string"===n?(t=arguments[arguments.length-2],e=arguments[arguments.length-1]):t=arguments[arguments.length-1],"dev"!==this.mode&&(!this.Kernel.isSupported||!this.Kernel.features.kernelMap)&&this.mode&&h.indexOf(this.mode)<0)throw new Error(`kernelMap not supported on ${this.Kernel.name}`);const r=m(e);if(e&&"object"===typeof e.argumentTypes&&(r.argumentTypes=Object.keys(e.argumentTypes).map((t=>e.argumentTypes[t]))),Array.isArray(arguments[0])){r.subKernels=[];const t=arguments[0];for(let e=0;e<t.length;e++){const n=t[e].toString(),a=i.getFunctionNameFromString(n);r.subKernels.push({name:a,source:n,property:e})}}else{r.subKernels=[];const t=arguments[0];for(let e in t){if(!t.hasOwnProperty(e))continue;const n=t[e].toString(),a=i.getFunctionNameFromString(n);r.subKernels.push({name:a||e,source:n,property:e})}}return this.createKernel(t,r)}combineKernels(){const t=arguments[arguments.length-1];if("cpu"===arguments[0].kernel.constructor.mode)return t;const e=arguments[0].canvas,n=arguments[0].context,r=arguments.length-1;for(let i=0;i<r;i++)arguments[i].setCanvas(e).setContext(n).setPipeline(!0);return function(){const e=t.apply(this,arguments);return e.toArray?e.toArray():e}}setFunctions(t){return this.functions=t,this}setNativeFunctions(t){return this.nativeFunctions=t,this}addFunction(t,e){return this.functions.push({source:t,settings:e}),this}addNativeFunction(t,e,n){if(this.kernels.length>0)throw new Error('Cannot call "addNativeFunction" after "createKernels" has been called.');return this.nativeFunctions.push(Object.assign({name:t,source:e},n)),this}injectNative(t){return this.injectedNative=t,this}destroy(){return new Promise(((t,e)=>{this.kernels||t(),setTimeout((()=>{try{for(let e=0;e<this.kernels.length;e++)this.kernels[e].destroy(!0);let t=this.kernels[0];t&&(t.kernel&&(t=t.kernel),t.constructor.destroyContext&&t.constructor.destroyContext(this.context))}catch(n){e(n)}t()}),0)}))}}function m(t){if(!t)return{};const e=Object.assign({},t);return t.hasOwnProperty("floatOutput")&&(i.warnDeprecated("setting","floatOutput","precision"),e.precision=t.floatOutput?"single":"unsigned"),t.hasOwnProperty("outputToTexture")&&(i.warnDeprecated("setting","outputToTexture","pipeline"),e.pipeline=Boolean(t.outputToTexture)),t.hasOwnProperty("outputImmutable")&&(i.warnDeprecated("setting","outputImmutable","immutable"),e.immutable=Boolean(t.outputImmutable)),t.hasOwnProperty("floatTextures")&&(i.warnDeprecated("setting","floatTextures","optimizeFloatMemory"),e.optimizeFloatMemory=Boolean(t.floatTextures)),e}e.exports={GPU:d,kernelOrder:c,kernelTypes:h}},{"./backend/cpu/kernel":8,"./backend/headless-gl/kernel":34,"./backend/kernel":36,"./backend/web-gl/kernel":70,"./backend/web-gl2/kernel":105,"./kernel-run-shortcut":111,"./utils":114,"gpu-mock.js":4}],109:[function(t,e,n){const{GPU:r}=t("./gpu"),{alias:i}=t("./alias"),{utils:a}=t("./utils"),{Input:s,input:o}=t("./input"),{Texture:u}=t("./texture"),{FunctionBuilder:l}=t("./backend/function-builder"),{FunctionNode:c}=t("./backend/function-node"),{CPUFunctionNode:h}=t("./backend/cpu/function-node"),{CPUKernel:p}=t("./backend/cpu/kernel"),{HeadlessGLKernel:f}=t("./backend/headless-gl/kernel"),{WebGLFunctionNode:d}=t("./backend/web-gl/function-node"),{WebGLKernel:m}=t("./backend/web-gl/kernel"),{kernelValueMaps:g}=t("./backend/web-gl/kernel-value-maps"),{WebGL2FunctionNode:y}=t("./backend/web-gl2/function-node"),{WebGL2Kernel:v}=t("./backend/web-gl2/kernel"),{kernelValueMaps:b}=t("./backend/web-gl2/kernel-value-maps"),{GLKernel:x}=t("./backend/gl/kernel"),{Kernel:w}=t("./backend/kernel"),{FunctionTracer:S}=t("./backend/function-tracer"),T=t("./plugins/math-random-uniformly-distributed");e.exports={alias:i,CPUFunctionNode:h,CPUKernel:p,GPU:r,FunctionBuilder:l,FunctionNode:c,HeadlessGLKernel:f,Input:s,input:o,Texture:u,utils:a,WebGL2FunctionNode:y,WebGL2Kernel:v,webGL2KernelValueMaps:b,WebGLFunctionNode:d,WebGLKernel:m,webGLKernelValueMaps:g,GLKernel:x,Kernel:w,FunctionTracer:S,plugins:{mathRandom:T}}},{"./alias":5,"./backend/cpu/function-node":6,"./backend/cpu/kernel":8,"./backend/function-builder":9,"./backend/function-node":10,"./backend/function-tracer":11,"./backend/gl/kernel":13,"./backend/headless-gl/kernel":34,"./backend/kernel":36,"./backend/web-gl/function-node":38,"./backend/web-gl/kernel":70,"./backend/web-gl/kernel-value-maps":39,"./backend/web-gl2/function-node":73,"./backend/web-gl2/kernel":105,"./backend/web-gl2/kernel-value-maps":74,"./gpu":108,"./input":110,"./plugins/math-random-uniformly-distributed":112,"./texture":113,"./utils":114}],110:[function(t,e,n){class r{constructor(t,e){this.value=t,Array.isArray(e)?this.size=e:(this.size=new Int32Array(3),e.z?this.size=new Int32Array([e.x,e.y,e.z]):e.y?this.size=new Int32Array([e.x,e.y]):this.size=new Int32Array([e.x]));const[n,r,i]=this.size;if(i){if(this.value.length!==n*r*i)throw new Error(`Input size ${this.value.length} does not match ${n} * ${r} * ${i} = ${r*n*i}`)}else if(r){if(this.value.length!==n*r)throw new Error(`Input size ${this.value.length} does not match ${n} * ${r} = ${r*n}`)}else if(this.value.length!==n)throw new Error(`Input size ${this.value.length} does not match ${n}`)}toArray(){const{utils:e}=t("./utils"),[n,r,i]=this.size;return i?e.erectMemoryOptimized3DFloat(this.value.subarray?this.value:new Float32Array(this.value),n,r,i):r?e.erectMemoryOptimized2DFloat(this.value.subarray?this.value:new Float32Array(this.value),n,r):this.value}}function i(t,e){return new r(t,e)}e.exports={Input:r,input:i}},{"./utils":114}],111:[function(t,e,n){const{utils:r}=t("./utils");function i(t){let e=function(){return t.build.apply(t,arguments),e=function(){let e=t.run.apply(t,arguments);if(t.switchingKernels){const r=t.resetSwitchingKernels(),i=t.onRequestSwitchKernel(r,arguments,t);n.kernel=t=i,e=i.run.apply(i,arguments)}return t.renderKernels?t.renderKernels():t.renderOutput?t.renderOutput():e},e.apply(t,arguments)};const n=function(){return e.apply(t,arguments)};return n.exec=function(){return new Promise(((t,n)=>{try{t(e.apply(this,arguments))}catch(r){n(r)}}))},n.replaceKernel=function(e){a(t=e,n)},a(t,n),n}function a(t,e){if(e.kernel)return void(e.kernel=t);const n=r.allPropertiesOf(t);for(let r=0;r<n.length;r++){const i=n[r];"_"===i[0]&&"_"===i[1]||("function"===typeof t[i]?"add"===i.substring(0,3)||"set"===i.substring(0,3)?e[i]=function(){return e.kernel[i].apply(e.kernel,arguments),e}:e[i]=function(){return e.kernel[i].apply(e.kernel,arguments)}:(e.__defineGetter__(i,(()=>e.kernel[i])),e.__defineSetter__(i,(t=>{e.kernel[i]=t}))))}e.kernel=t}e.exports={kernelRunShortcut:i}},{"./utils":114}],112:[function(t,e,n){const r={name:"math-random-uniformly-distributed",onBeforeRun:t=>{t.setUniform1f("randomSeed1",Math.random()),t.setUniform1f("randomSeed2",Math.random())},functionMatch:"Math.random()",functionReplace:"nrand(vTexCoord)",functionReturnType:"Number",source:"// https://www.shadertoy.com/view/4t2SDh\n//note: uniformly distributed, normalized rand, [0,1]\nhighp float randomSeedShift = 1.0;\nhighp float slide = 1.0;\nuniform highp float randomSeed1;\nuniform highp float randomSeed2;\n\nhighp float nrand(highp vec2 n) {\n  highp float result = fract(sin(dot((n.xy + 1.0) * vec2(randomSeed1 * slide, randomSeed2 * randomSeedShift), vec2(12.9898, 78.233))) * 43758.5453);\n  randomSeedShift = result;\n  if (randomSeedShift > 0.5) {\n    slide += 0.00009; \n  } else {\n    slide += 0.0009;\n  }\n  return result;\n}"};e.exports=r},{}],113:[function(t,e,n){class r{constructor(t){const{texture:e,size:n,dimensions:r,output:i,context:a,type:s="NumberTexture",kernel:o,internalFormat:u,textureFormat:l}=t;if(!i)throw new Error('settings property "output" required.');if(!a)throw new Error('settings property "context" required.');if(!e)throw new Error('settings property "texture" required.');if(!o)throw new Error('settings property "kernel" required.');this.texture=e,e._refs?e._refs++:e._refs=1,this.size=n,this.dimensions=r,this.output=i,this.context=a,this.kernel=o,this.type=s,this._deleted=!1,this.internalFormat=u,this.textureFormat=l}toArray(){throw new Error(`Not implemented on ${this.constructor.name}`)}clone(){throw new Error(`Not implemented on ${this.constructor.name}`)}delete(){throw new Error(`Not implemented on ${this.constructor.name}`)}clear(){throw new Error(`Not implemented on ${this.constructor.name}`)}}e.exports={Texture:r}},{}],114:[function(t,e,n){const r=t("acorn"),{Input:i}=t("./input"),{Texture:a}=t("./texture"),s=/function ([^(]*)/,o=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,u=/([^\s,]+)/g,l={systemEndianness:()=>f,getSystemEndianness(){const t=new ArrayBuffer(4),e=new Uint32Array(t),n=new Uint8Array(t);if(e[0]=3735928559,239===n[0])return"LE";if(222===n[0])return"BE";throw new Error("unknown endianness")},isFunction:t=>"function"===typeof t,isFunctionString:t=>"string"===typeof t&&"function"===t.slice(0,8).toLowerCase(),getFunctionNameFromString(t){const e=s.exec(t);return e&&0!==e.length?e[1].trim():null},getFunctionBodyFromString:t=>t.substring(t.indexOf("{")+1,t.lastIndexOf("}")),getArgumentNamesFromString(t){const e=t.replace(o,"");let n=e.slice(e.indexOf("(")+1,e.indexOf(")")).match(u);return null===n&&(n=[]),n},clone(t){if(null===t||"object"!==typeof t||t.hasOwnProperty("isActiveClone"))return t;const e=t.constructor();for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t.isActiveClone=null,e[n]=l.clone(t[n]),delete t.isActiveClone);return e},isArray:t=>!isNaN(t.length),getVariableType(t,e){if(l.isArray(t))return t.length>0&&"IMG"===t[0].nodeName?"HTMLImageArray":"Array";switch(t.constructor){case Boolean:return"Boolean";case Number:return e&&Number.isInteger(t)?"Integer":"Float";case a:return t.type;case i:return"Input"}if("nodeName"in t)switch(t.nodeName){case"IMG":case"CANVAS":return"HTMLImage";case"VIDEO":return"HTMLVideo"}else{if(t.hasOwnProperty("type"))return t.type;if("undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas)return"OffscreenCanvas";if("undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap)return"ImageBitmap";if("undefined"!==typeof ImageData&&t instanceof ImageData)return"ImageData"}return"Unknown"},getKernelTextureSize(t,e){let[n,r,i]=e,a=(n||1)*(r||1)*(i||1);return t.optimizeFloatMemory&&"single"===t.precision&&(n=a=Math.ceil(a/4)),r>1&&n*r===a?new Int32Array([n,r]):l.closestSquareDimensions(a)},closestSquareDimensions(t){const e=Math.sqrt(t);let n=Math.ceil(e),r=Math.floor(e);for(;n*r<t;)n--,r=Math.ceil(t/n);return new Int32Array([r,Math.ceil(t/r)])},getMemoryOptimizedFloatTextureSize(t,e){const n=l.roundTo((t[0]||1)*(t[1]||1)*(t[2]||1)*(t[3]||1),4)/e;return l.closestSquareDimensions(n)},getMemoryOptimizedPackedTextureSize(t,e){const[n,r,i]=t,a=l.roundTo((n||1)*(r||1)*(i||1),4)/(4/e);return l.closestSquareDimensions(a)},roundTo:(t,e)=>Math.floor((t+e-1)/e)*e,getDimensions(t,e){let n;if(l.isArray(t)){const e=[];let r=t;for(;l.isArray(r);)e.push(r.length),r=r[0];n=e.reverse()}else if(t instanceof a)n=t.output;else{if(!(t instanceof i))throw new Error(`Unknown dimensions of ${t}`);n=t.size}if(e)for(n=Array.from(n);n.length<3;)n.push(1);return new Int32Array(n)},flatten2dArrayTo(t,e){let n=0;for(let r=0;r<t.length;r++)e.set(t[r],n),n+=t[r].length},flatten3dArrayTo(t,e){let n=0;for(let r=0;r<t.length;r++)for(let i=0;i<t[r].length;i++)e.set(t[r][i],n),n+=t[r][i].length},flatten4dArrayTo(t,e){let n=0;for(let r=0;r<t.length;r++)for(let i=0;i<t[r].length;i++)for(let a=0;a<t[r][i].length;a++)e.set(t[r][i][a],n),n+=t[r][i][a].length},flattenTo(t,e){l.isArray(t[0])?l.isArray(t[0][0])?l.isArray(t[0][0][0])?l.flatten4dArrayTo(t,e):l.flatten3dArrayTo(t,e):l.flatten2dArrayTo(t,e):e.set(t)},splitArray(t,e){const n=[];for(let r=0;r<t.length;r+=e)n.push(new t.constructor(t.buffer,4*r+t.byteOffset,e));return n},getAstString(t,e){const n=Array.isArray(t)?t:t.split(/\r?\n/g),r=e.loc.start,i=e.loc.end,a=[];if(r.line===i.line)a.push(n[r.line-1].substring(r.column,i.column));else{a.push(n[r.line-1].slice(r.column));for(let t=r.line;t<i.line;t++)a.push(n[t]);a.push(n[i.line-1].slice(0,i.column))}return a.join("\n")},allPropertiesOf(t){const e=[];do{e.push.apply(e,Object.getOwnPropertyNames(t))}while(t=Object.getPrototypeOf(t));return e},linesToString:t=>t.length>0?t.join(";\n")+";\n":"\n",warnDeprecated(t,e,n){n?console.warn(`You are using a deprecated ${t} "${e}". It has been replaced with "${n}". Fixing, but please upgrade as it will soon be removed.`):console.warn(`You are using a deprecated ${t} "${e}". It has been removed. Fixing, but please upgrade as it will soon be removed.`)},flipPixels:(t,e,n)=>{const r=n/2|0,i=4*e,a=new Uint8ClampedArray(4*e),s=t.slice(0);for(let o=0;o<r;++o){const t=o*i,e=(n-o-1)*i;a.set(s.subarray(t,t+i)),s.copyWithin(t,e,e+i),s.set(a,e)}return s},erectPackedFloat:(t,e)=>t.subarray(0,e),erect2DPackedFloat:(t,e,n)=>{const r=new Array(n);for(let i=0;i<n;i++){const n=i*e,a=n+e;r[i]=t.subarray(n,a)}return r},erect3DPackedFloat:(t,e,n,r)=>{const i=new Array(r);for(let a=0;a<r;a++){const r=new Array(n);for(let i=0;i<n;i++){const s=a*n*e+i*e,o=s+e;r[i]=t.subarray(s,o)}i[a]=r}return i},erectMemoryOptimizedFloat:(t,e)=>t.subarray(0,e),erectMemoryOptimized2DFloat:(t,e,n)=>{const r=new Array(n);for(let i=0;i<n;i++){const n=i*e;r[i]=t.subarray(n,n+e)}return r},erectMemoryOptimized3DFloat:(t,e,n,r)=>{const i=new Array(r);for(let a=0;a<r;a++){const r=new Array(n);for(let i=0;i<n;i++){const s=a*n*e+i*e;r[i]=t.subarray(s,s+e)}i[a]=r}return i},erectFloat:(t,e)=>{const n=new Float32Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[r],r+=4;return n},erect2DFloat:(t,e,n)=>{const r=new Array(n);let i=0;for(let a=0;a<n;a++){const n=new Float32Array(e);for(let r=0;r<e;r++)n[r]=t[i],i+=4;r[a]=n}return r},erect3DFloat:(t,e,n,r)=>{const i=new Array(r);let a=0;for(let s=0;s<r;s++){const r=new Array(n);for(let i=0;i<n;i++){const n=new Float32Array(e);for(let r=0;r<e;r++)n[r]=t[a],a+=4;r[i]=n}i[s]=r}return i},erectArray2:(t,e)=>{const n=new Array(e),r=4*e;let i=0;for(let a=0;a<r;a+=4)n[i++]=t.subarray(a,a+2);return n},erect2DArray2:(t,e,n)=>{const r=new Array(n),i=4*e;for(let a=0;a<n;a++){const n=new Array(e),s=a*i;let o=0;for(let e=0;e<i;e+=4)n[o++]=t.subarray(e+s,e+s+2);r[a]=n}return r},erect3DArray2:(t,e,n,r)=>{const i=4*e,a=new Array(r);for(let s=0;s<r;s++){const r=new Array(n);for(let a=0;a<n;a++){const o=new Array(e),u=s*i*n+a*i;let l=0;for(let e=0;e<i;e+=4)o[l++]=t.subarray(e+u,e+u+2);r[a]=o}a[s]=r}return a},erectArray3:(t,e)=>{const n=new Array(e),r=4*e;let i=0;for(let a=0;a<r;a+=4)n[i++]=t.subarray(a,a+3);return n},erect2DArray3:(t,e,n)=>{const r=4*e,i=new Array(n);for(let a=0;a<n;a++){const n=new Array(e),s=a*r;let o=0;for(let e=0;e<r;e+=4)n[o++]=t.subarray(e+s,e+s+3);i[a]=n}return i},erect3DArray3:(t,e,n,r)=>{const i=4*e,a=new Array(r);for(let s=0;s<r;s++){const r=new Array(n);for(let a=0;a<n;a++){const o=new Array(e),u=s*i*n+a*i;let l=0;for(let e=0;e<i;e+=4)o[l++]=t.subarray(e+u,e+u+3);r[a]=o}a[s]=r}return a},erectArray4:(t,e)=>{const n=new Array(t),r=4*e;let i=0;for(let a=0;a<r;a+=4)n[i++]=t.subarray(a,a+4);return n},erect2DArray4:(t,e,n)=>{const r=4*e,i=new Array(n);for(let a=0;a<n;a++){const n=new Array(e),s=a*r;let o=0;for(let e=0;e<r;e+=4)n[o++]=t.subarray(e+s,e+s+4);i[a]=n}return i},erect3DArray4:(t,e,n,r)=>{const i=4*e,a=new Array(r);for(let s=0;s<r;s++){const r=new Array(n);for(let a=0;a<n;a++){const o=new Array(e),u=s*i*n+a*i;let l=0;for(let e=0;e<i;e+=4)o[l++]=t.subarray(e+u,e+u+4);r[a]=o}a[s]=r}return a},flattenFunctionToString:(t,e)=>{const{findDependency:n,thisLookup:i,doNotDefine:a}=e;let s=e.flattened;s||(s=e.flattened={});const o=r.parse(t),u=[];let c=0;function h(t){if(Array.isArray(t)){const e=[];for(let n=0;n<t.length;n++)e.push(h(t[n]));return e.join("")}switch(t.type){case"Program":return h(t.body)+("VariableDeclaration"===t.body[0].type?";":"");case"FunctionDeclaration":return`function ${t.id.name}(${t.params.map(h).join(", ")}) ${h(t.body)}`;case"BlockStatement":{const e=[];c+=2;for(let n=0;n<t.body.length;n++){const r=h(t.body[n]);r&&e.push(" ".repeat(c)+r,";\n")}return c-=2,`{\n${e.join("")}}`}case"VariableDeclaration":const e=l.normalizeDeclarations(t).map(h).filter((t=>null!==t));return e.length<1?"":`${t.kind} ${e.join(",")}`;case"VariableDeclarator":return t.init.object&&"ThisExpression"===t.init.object.type?i(t.init.property.name,!0)?`${t.id.name} = ${h(t.init)}`:null:`${t.id.name} = ${h(t.init)}`;case"CallExpression":if("subarray"===t.callee.property.name)return`${h(t.callee.object)}.${h(t.callee.property)}(${t.arguments.map((t=>h(t))).join(", ")})`;if("gl"===t.callee.object.name||"context"===t.callee.object.name)return`${h(t.callee.object)}.${h(t.callee.property)}(${t.arguments.map((t=>h(t))).join(", ")})`;if("ThisExpression"===t.callee.object.type)return u.push(n("this",t.callee.property.name)),`${t.callee.property.name}(${t.arguments.map((t=>h(t))).join(", ")})`;if(t.callee.object.name){const e=n(t.callee.object.name,t.callee.property.name);return null===e?`${t.callee.object.name}.${t.callee.property.name}(${t.arguments.map((t=>h(t))).join(", ")})`:(u.push(e),`${t.callee.property.name}(${t.arguments.map((t=>h(t))).join(", ")})`)}if("MemberExpression"===t.callee.object.type)return`${h(t.callee.object)}.${t.callee.property.name}(${t.arguments.map((t=>h(t))).join(", ")})`;throw new Error("unknown ast.callee");case"ReturnStatement":return`return ${h(t.argument)}`;case"BinaryExpression":return`(${h(t.left)}${t.operator}${h(t.right)})`;case"UnaryExpression":return t.prefix?`${t.operator} ${h(t.argument)}`:`${h(t.argument)} ${t.operator}`;case"ExpressionStatement":return`${h(t.expression)}`;case"SequenceExpression":return`(${h(t.expressions)})`;case"ArrowFunctionExpression":return`(${t.params.map(h).join(", ")}) => ${h(t.body)}`;case"Literal":return t.raw;case"Identifier":return t.name;case"MemberExpression":return"ThisExpression"===t.object.type?i(t.property.name):t.computed?`${h(t.object)}[${h(t.property)}]`:h(t.object)+"."+h(t.property);case"ThisExpression":return"this";case"NewExpression":return`new ${h(t.callee)}(${t.arguments.map((t=>h(t))).join(", ")})`;case"ForStatement":return`for (${h(t.init)};${h(t.test)};${h(t.update)}) ${h(t.body)}`;case"AssignmentExpression":return`${h(t.left)}${t.operator}${h(t.right)}`;case"UpdateExpression":return`${h(t.argument)}${t.operator}`;case"IfStatement":return`if (${h(t.test)}) ${h(t.consequent)}`;case"ThrowStatement":return`throw ${h(t.argument)}`;case"ObjectPattern":return t.properties.map(h).join(", ");case"ArrayPattern":return t.elements.map(h).join(", ");case"DebuggerStatement":return"debugger;";case"ConditionalExpression":return`${h(t.test)}?${h(t.consequent)}:${h(t.alternate)}`;case"Property":if("init"===t.kind)return h(t.key)}throw new Error(`unhandled ast.type of ${t.type}`)}const p=h(o);if(u.length>0){const t=[];for(let n=0;n<u.length;n++){const r=u[n];s[r]||(s[r]=!0),r&&t.push(l.flattenFunctionToString(r,e)+"\n")}return t.join("")+p}return p},normalizeDeclarations:t=>{if("VariableDeclaration"!==t.type)throw new Error('Ast is not of type "VariableDeclaration"');const e=[];for(let n=0;n<t.declarations.length;n++){const r=t.declarations[n];if(r.id&&"ObjectPattern"===r.id.type&&r.id.properties){const{properties:t}=r.id;for(let n=0;n<t.length;n++){const i=t[n];if("ObjectPattern"===i.value.type&&i.value.properties)for(let t=0;t<i.value.properties.length;t++){const n=i.value.properties[t];if("Property"!==n.type)throw new Error("unexpected state");e.push({type:"VariableDeclarator",id:{type:"Identifier",name:n.key.name},init:{type:"MemberExpression",object:{type:"MemberExpression",object:r.init,property:{type:"Identifier",name:i.key.name},computed:!1},property:{type:"Identifier",name:n.key.name},computed:!1}})}else{if("Identifier"!==i.value.type)throw new Error("unexpected state");e.push({type:"VariableDeclarator",id:{type:"Identifier",name:i.value&&i.value.name?i.value.name:i.key.name},init:{type:"MemberExpression",object:r.init,property:{type:"Identifier",name:i.key.name},computed:!1}})}}}else if(r.id&&"ArrayPattern"===r.id.type&&r.id.elements){const{elements:t}=r.id;for(let n=0;n<t.length;n++){const i=t[n];if("Identifier"!==i.type)throw new Error("unexpected state");e.push({type:"VariableDeclarator",id:{type:"Identifier",name:i.name},init:{type:"MemberExpression",object:r.init,property:{type:"Literal",value:n,raw:n.toString(),start:i.start,end:i.end},computed:!0}})}}else e.push(r)}return e},splitHTMLImageToRGB:(t,e)=>{const n=t.createKernel((function(t){return 255*t[this.thread.y][this.thread.x].r}),{output:[e.width,e.height],precision:"unsigned",argumentTypes:{a:"HTMLImage"}}),r=t.createKernel((function(t){return 255*t[this.thread.y][this.thread.x].g}),{output:[e.width,e.height],precision:"unsigned",argumentTypes:{a:"HTMLImage"}}),i=t.createKernel((function(t){return 255*t[this.thread.y][this.thread.x].b}),{output:[e.width,e.height],precision:"unsigned",argumentTypes:{a:"HTMLImage"}}),a=t.createKernel((function(t){return 255*t[this.thread.y][this.thread.x].a}),{output:[e.width,e.height],precision:"unsigned",argumentTypes:{a:"HTMLImage"}}),s=[n(e),r(e),i(e),a(e)];return s.rKernel=n,s.gKernel=r,s.bKernel=i,s.aKernel=a,s.gpu=t,s},splitRGBAToCanvases:(t,e,n,r)=>{const i=t.createKernel((function(t){const e=t[this.thread.y][this.thread.x];this.color(e.r/255,0,0,255)}),{output:[n,r],graphical:!0,argumentTypes:{v:"Array2D(4)"}});i(e);const a=t.createKernel((function(t){const e=t[this.thread.y][this.thread.x];this.color(0,e.g/255,0,255)}),{output:[n,r],graphical:!0,argumentTypes:{v:"Array2D(4)"}});a(e);const s=t.createKernel((function(t){const e=t[this.thread.y][this.thread.x];this.color(0,0,e.b/255,255)}),{output:[n,r],graphical:!0,argumentTypes:{v:"Array2D(4)"}});s(e);const o=t.createKernel((function(t){const e=t[this.thread.y][this.thread.x];this.color(255,255,255,e.a/255)}),{output:[n,r],graphical:!0,argumentTypes:{v:"Array2D(4)"}});return o(e),[i.canvas,a.canvas,s.canvas,o.canvas]},getMinifySafeName:t=>{try{const e=r.parse(`const value = ${t.toString()}`),{init:n}=e.body[0].declarations[0];return n.body.name||n.body.body[0].argument.name}catch(e){throw new Error("Unrecognized function type.  Please use `() => yourFunctionVariableHere` or function() { return yourFunctionVariableHere; }")}},sanitizeName:function(t){return c.test(t)&&(t=t.replace(c,"S_S")),h.test(t)?t=t.replace(h,"U_U"):p.test(t)&&(t=t.replace(p,"u_u")),t}},c=/\$/,h=/__/,p=/_/,f=l.getSystemEndianness();e.exports={utils:l}},{"./input":110,"./texture":113,acorn:1}]},{},[107])(107)},t.exports=n()}));const b={toTable(t){const e=t.reduce(((t,e)=>Object.assign(t,e)),{});return b.toHash(e)},toTable2D(t){const e={};let n=0;for(let r=0;r<t.length;r++){const i=t[r];for(let t=0;t<i.length;t++){const r=i[t];for(const t in r)r.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n++)}}return e},toInputTable2D(t){const e={};let n=0;for(let r=0;r<t.length;r++){const i=t[r].input;for(let t=0;t<i.length;t++){const r=i[t];for(const t in r)r.hasOwnProperty(t)&&(e.hasOwnProperty(t)||(e[t]=n++))}}return e},toOutputTable2D(t){const e={};let n=0;for(let r=0;r<t.length;r++){const i=t[r].output;for(let t=0;t<i.length;t++){const r=i[t];for(const t in r)r.hasOwnProperty(t)&&(e.hasOwnProperty(t)||(e[t]=n++))}}return e},toHash(t){const e={};let n=0;const r=Object.keys(t);for(let i=0;i<r.length;i++)e[r[i]]=n++;return e},toArray(t,e,n){const r=new Float32Array(n);for(const i in t)t.hasOwnProperty(i)&&(r[t[i]]=e.hasOwnProperty(i)?e[i]:0);return r},toArrayShort(t,e){const n=[];for(const r in t)if(t.hasOwnProperty(r)){if(!e.hasOwnProperty(r))break;n[t[r]]=e[r]}return Float32Array.from(n)},toArrays(t,e,n){const r=[];for(let i=0;i<e.length;i++)r.push(this.toArray(t,e[i],n));return r},toObject(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e[t[r]]);return n},toObjectPartial(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i={};let a=0;for(const s in t)t.hasOwnProperty(s)&&(n>0&&a++<n||r>0&&a++>=r||(i[s]=e[t[s]-n]));return i},dataShape(t){const e=[];let n,r;for(t.hasOwnProperty("input")?(e.push("datum"),n=t.input):Array.isArray(t)?t[0]&&t[0].input?(e.push("array","datum"),n=t[0].input):Array.isArray(t[0])?(e.push("array"),n=t[0]):n=t:n=t;n;)if(r=Object.keys(n)[0],Array.isArray(n)||"object"===typeof n.buffer){e.push("array");const t=n[parseInt(r)];if("number"===typeof t){e.push("number");break}n=t}else{if("object"!==typeof n||"object"===typeof n.buffer)throw new Error("unhandled signature");{e.push("object");const t=n[r];if("number"===typeof t){e.push("number");break}n=t}}return e},addKeys(t,e){if(Array.isArray(t))return e;let n=Object.keys(e).length;for(const r in t)t.hasOwnProperty(r)&&(e.hasOwnProperty(r)||(e[r]=n++));return e}};var x=g((function(t,e){var n=m&&m.__assign||function(){return n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.thaw=e.Block=e.Thaw=void 0;var r=function(){function t(e,r){var i=this;void 0===r&&(r={});var a=n(n({},t.defaultSettings),r),s=a.each,o=a.done;this.i=0,this.isStopped=!1,this.items=e,this.options=r,this.tick=function(){if(!i.isStopped&&(i.timeout=setTimeout(i.tick,0),!t.thawing)){var e=i.items[i.i];if(i.i>=i.items.length)return null!==o&&(t.thawing=!0,o(),t.thawing=!1),i.isStopped=!0,void clearTimeout(i.timeout);null!==s?(t.thawing=!0,s(e,i.i),t.thawing=!1):void 0!==e&&e(),i.i++}},t.thaws.push(this),r.delay||this.tick()}return Object.defineProperty(t,"isThawing",{get:function(){return t.thawing},enumerable:!1,configurable:!0}),t.stopAll=function(){for(var e=0;e<t.thaws.length;e++)t.thaws[e].stop()},t.prototype.makeReady=function(){return!!this.isStopped&&(this.isStopped=!1,!0)},t.prototype.add=function(t){return this.items.push(t),this.makeReady()&&this.tick(),this},t.prototype.insert=function(t){return this.items.splice(this.i,0,t),this.makeReady()&&this.tick(),this},t.prototype.addArray=function(t){return this.items=this.items.concat(t),this.makeReady()&&this.tick(),this},t.prototype.insertArray=function(t){var e=this.items.splice(0,this.i),n=this.items;return this.items=e.concat(t,n),this.makeReady()&&this.tick(),this},t.prototype.stop=function(){return this.isStopped=!0,clearTimeout(this.timeout),this.options.done&&this.options.done(),this},t.thawing=!1,t.thaws=[],t.defaultSettings={each:null,done:null},t}();function i(t,e){return new r(t,e)}e.Thaw=r,e.thaw=i;var a=function(){function t(t,e){void 0===e&&(e=200),this.index=0,this.thaws=[],this.count=e,this.options=t}return t.prototype.add=function(t){return this.next().add(t),this},t.prototype.addArray=function(t){return this.next().addArray(t),this},t.prototype.insert=function(t){return this.next().insert(t),this},t.prototype.insertArray=function(t){return this.next().insertArray(t),this},t.prototype.stop=function(){for(var t=0;t<this.thaws.length;t++)this.thaws[t].stop();return this},t.prototype.next=function(){var t,e=this.thaws;return e.length<this.count?(t=new r([],this.options),e.push(t)):t=e[this.index]||null,this.index++,this.index>=this.count&&(this.index=0),t},t}();e.Block=a,"undefined"!==typeof window&&(window.Thaw=r,window.thaw=i,window.Thaw.Block=a)}));function w(t){const e=[];for(let n=0;n<t.length;n++)e.push(Float32Array.from(t[n]));return e}function S(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(Float32Array.from(t[r]));for(let r=0;r<e.length;r++)n.push(Float32Array.from(e[r]));return n}function T(t){const e=[];for(let n=0;n<t.length;n++)e.push(Float32Array.from([t[n]]));return e}function k(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(Float32Array.from([t[r]]));for(let r=0;r<e.length;r++)n.push(Float32Array.from([e[r]]));return n}function A(t){return Float32Array.from(t)}function E(t,e,n,r,i,a){const s=[];for(let o=0;o<t.length;o++){const e=t[o],r=new Float32Array(i);for(const t in e)e.hasOwnProperty(t)&&(r[n[t]]=e[t]);s.push(r)}for(let o=0;o<e.length;o++){const t=e[o],n=new Float32Array(a);for(const e in t)t.hasOwnProperty(e)&&(n[r[e]]=t[e]);s.push(n)}return s}function _(t){const e=[];for(const n in t)t.hasOwnProperty(n)&&e.push(Float32Array.from([t[n]]));return e}function O(t,e){const n=[];for(const r in t)t.hasOwnProperty(r)&&n.push(Float32Array.from([t[r]]));for(const r in e)e.hasOwnProperty(r)&&n.push(Float32Array.from([e[r]]));return n}function I(t,e,n){const r=new Float32Array(n);for(const i in t)t.hasOwnProperty(i)&&(r[e[i]]=t[i]);return r}class L{constructor(t,e){this.prop=null,this.table={},this.length=0;const n=this.table;if(e){this.prop=e;for(let r=0;r<t.length;r++){const i=t[r][e];for(const t in i)i.hasOwnProperty(t)&&(n.hasOwnProperty(t)||(n[t]=this.length++))}}else if(Array.isArray(t)&&Array.isArray(t[0]))for(let r=0;r<t.length;r++){const e=t[r];for(let t=0;t<e.length;t++){const r=e[t];for(const t in r)r.hasOwnProperty(t)&&(n.hasOwnProperty(t)||(n[t]=this.length++))}}else for(let r=0;r<t.length;r++){const e=t[r];for(const t in e)e.hasOwnProperty(t)&&(n.hasOwnProperty(t)||(n[t]=this.length++))}}}function P(t){return Array.isArray(t)||t instanceof Float32Array?Math.max(...t):Math.max(...Object.values(t))}function C(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n]**2;return e/t.length}function D(){return.4*Math.random()-.2}function M(t,e){return Math.random()*(e-t)+t}function N(){if(N.returnV)return N.returnV=!1,N.vVal;const t=2*Math.random()-1,e=2*Math.random()-1,n=t*t+e*e;if(0===n||n>1)return N();const r=Math.sqrt(-2*Math.log(n)/n);return N.vVal=e*r,N.returnV=!0,t*r}function j(t,e){return Math.floor(Math.random()*(e-t)+t)}function $(t,e){return t+N()*e}N.returnV=!1,N.vVal=0;var R=Object.freeze({__proto__:null,randomFloat:M,gaussRandom:N,randomInteger:j,randomN:$});function z(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=new Float32Array(t);if(null===e)for(let r=0;r<t;r++)n[r]=D();else for(let r=0;r<t;r++)n[r]=M(-e,e);return n}function F(t,e,n){const r=new Array(e);for(let i=0;i<e;i++)r[i]=z(t,n);return r}function V(t,e,n,r){const i=new Array(n);for(let a=0;a<n;a++)i[a]=F(t,e,r);return i}function B(t){return new Float32Array(t)}function U(t,e){if(t.buffer instanceof ArrayBuffer)return null;if(Array.isArray(t))return A;if(!e)throw new Error("table is not Object");const{length:n}=Object.keys(e);return t=>{const r=new Float32Array(n);for(const n in e)e.hasOwnProperty(n)&&"number"===typeof t[n]&&(r[e[n]]=t[n]||0);return r}}function K(){return{inputSize:0,outputSize:0,binaryThresh:.5}}function G(){return{activation:"sigmoid",iterations:2e4,errorThresh:.005,log:!1,logPeriod:10,leakyReluAlpha:.01,learningRate:.3,momentum:.1,callbackPeriod:10,timeout:1/0,beta1:.9,beta2:.999,epsilon:1e-8}}class W{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=K(),this.trainOpts=G(),this.sizes=[],this.outputLayer=-1,this.biases=[],this.weights=[],this.outputs=[],this.deltas=[],this.changes=[],this.errors=[],this.errorCheckInterval=1,this.inputLookup=null,this.inputLookupLength=0,this.outputLookup=null,this.outputLookupLength=0,this._formatInput=null,this._formatOutput=null,this.runInput=t=>(this.setActivation(),this.runInput(t)),this.calculateDeltas=t=>(this.setActivation(),this.calculateDeltas(t)),this.biasChangesLow=[],this.biasChangesHigh=[],this.changesLow=[],this.changesHigh=[],this.iterations=0,this.options={...this.options,...t},this.updateTrainingOptions(t);const{inputSize:e,hiddenLayers:n,outputSize:r}=this.options;e&&r&&(this.sizes=[e].concat(null!==n&&void 0!==n?n:[]).concat([r]))}initialize(){if(!this.sizes.length)throw new Error("Sizes must be set before initializing");this.outputLayer=this.sizes.length-1,this.biases=new Array(this.outputLayer),this.weights=new Array(this.outputLayer),this.outputs=new Array(this.outputLayer),this.deltas=new Array(this.outputLayer),this.changes=new Array(this.outputLayer),this.errors=new Array(this.outputLayer);for(let t=0;t<=this.outputLayer;t++){const e=this.sizes[t];if(this.deltas[t]=B(e),this.errors[t]=B(e),this.outputs[t]=B(e),t>0){this.biases[t]=z(e),this.weights[t]=new Array(e),this.changes[t]=new Array(e);for(let n=0;n<e;n++){const e=this.sizes[t-1];this.weights[t][n]=z(e),this.changes[t][n]=B(e)}}}this.setActivation(),"adam"===this.trainOpts.praxis&&this._setupAdam()}setActivation(t){const e=null!==t&&void 0!==t?t:this.trainOpts.activation;switch(e){case"sigmoid":this.runInput=this._runInputSigmoid,this.calculateDeltas=this._calculateDeltasSigmoid;break;case"relu":this.runInput=this._runInputRelu,this.calculateDeltas=this._calculateDeltasRelu;break;case"leaky-relu":this.runInput=this._runInputLeakyRelu,this.calculateDeltas=this._calculateDeltasLeakyRelu;break;case"tanh":this.runInput=this._runInputTanh,this.calculateDeltas=this._calculateDeltasTanh;break;default:throw new Error(`Unknown activation ${e}. Available activations are: 'sigmoid', 'relu', 'leaky-relu', 'tanh'`)}}get isRunnable(){return this.sizes.length>0}run(t){if(!this.isRunnable)throw new Error("network not runnable");let e;e=this.inputLookup?b.toArray(this.inputLookup,t,this.inputLookupLength):t,this.validateInput(e);const n=this.runInput(e).slice(0);return this.outputLookup?b.toObject(this.outputLookup,n):n}_runInputSigmoid(t){this.outputs[0]=t;let e=null;for(let n=1;n<=this.outputLayer;n++){const r=this.sizes[n],i=this.weights[n],a=this.biases[n],s=this.outputs[n];for(let e=0;e<r;e++){const n=i[e];let r=a[e];for(let e=0;e<n.length;e++)r+=n[e]*t[e];s[e]=1/(1+Math.exp(-r))}e=t=s}if(!e)throw new Error("output was empty");return e}_runInputRelu(t){this.outputs[0]=t;let e=null;for(let n=1;n<=this.outputLayer;n++){const r=this.sizes[n],i=this.weights[n],a=this.biases[n],s=this.outputs[n];for(let e=0;e<r;e++){const n=i[e];let r=a[e];for(let e=0;e<n.length;e++)r+=n[e]*t[e];s[e]=r<0?0:r}e=t=s}if(!e)throw new Error("output was empty");return e}_runInputLeakyRelu(t){this.outputs[0]=t;const{leakyReluAlpha:e}=this.trainOpts;let n=null;for(let r=1;r<=this.outputLayer;r++){const i=this.sizes[r],a=this.weights[r],s=this.biases[r],o=this.outputs[r];for(let n=0;n<i;n++){const r=a[n];let i=s[n];for(let e=0;e<r.length;e++)i+=r[e]*t[e];o[n]=Math.max(i,e*i)}n=t=o}if(!n)throw new Error("output was empty");return n}_runInputTanh(t){this.outputs[0]=t;let e=null;for(let n=1;n<=this.outputLayer;n++){const r=this.sizes[n],i=this.weights[n],a=this.biases[n],s=this.outputs[n];for(let e=0;e<r;e++){const n=i[e];let r=a[e];for(let e=0;e<n.length;e++)r+=n[e]*t[e];s[e]=Math.tanh(r)}e=t=s}if(!e)throw new Error("output was empty");return e}verifyIsInitialized(t){this.sizes.length&&this.outputLayer>0||(this.sizes=[],this.sizes.push(t[0].input.length),this.options.hiddenLayers?this.options.hiddenLayers.forEach((t=>{this.sizes.push(t)})):this.sizes.push(Math.max(3,Math.floor(t[0].input.length/2))),this.sizes.push(t[0].output.length),this.initialize())}updateTrainingOptions(t){const e={...this.trainOpts,...t};this.validateTrainingOptions(e),this.trainOpts=e,this.setLogMethod(this.trainOpts.log)}validateTrainingOptions(t){const e={activation:()=>["sigmoid","relu","leaky-relu","tanh"].includes(t.activation),iterations:()=>{const e=t.iterations;return"number"===typeof e&&e>0},errorThresh:()=>{const e=t.errorThresh;return"number"===typeof e&&e>0&&e<1},log:()=>{const e=t.log;return"function"===typeof e||"boolean"===typeof e},logPeriod:()=>{const e=t.logPeriod;return"number"===typeof e&&e>0},leakyReluAlpha:()=>{const e=t.leakyReluAlpha;return"number"===typeof e&&e>0&&e<1},learningRate:()=>{const e=t.learningRate;return"number"===typeof e&&e>0&&e<1},momentum:()=>{const e=t.momentum;return"number"===typeof e&&e>0&&e<1},callback:()=>{const e=t.callback;return"function"===typeof e||void 0===e},callbackPeriod:()=>{const e=t.callbackPeriod;return"number"===typeof e&&e>0},timeout:()=>{const e=t.timeout;return"number"===typeof e&&e>0},praxis:()=>{const e=t.praxis;return!e||"adam"===e},beta1:()=>{const e=t.beta1;return e>0&&e<1},beta2:()=>{const e=t.beta2;return e>0&&e<1},epsilon:()=>{const e=t.epsilon;return e>0&&e<1}};for(const n in e){const r=t;if(!e[n]())throw new Error(`[${n}, ${r[n]}] is out of normal training range, your network will probably not train.`)}}getTrainOptsJSON(){const{activation:t,iterations:e,errorThresh:n,log:r,logPeriod:i,leakyReluAlpha:a,learningRate:s,momentum:o,callbackPeriod:u,timeout:l,praxis:c,beta1:h,beta2:p,epsilon:f}=this.trainOpts;return{activation:t,iterations:e,errorThresh:n,log:"function"===typeof r||"boolean"===typeof r&&r,logPeriod:i,leakyReluAlpha:a,learningRate:s,momentum:o,callbackPeriod:u,timeout:l===1/0?"Infinity":l,praxis:c,beta1:h,beta2:p,epsilon:f}}setLogMethod(t){this.trainOpts.log="function"===typeof t?t:!!t&&this.logTrainingStatus}logTrainingStatus(t){console.log(`iterations: ${t.iterations}, training error: ${t.error}`)}calculateTrainingError(t){let e=0;for(let n=0;n<t.length;++n)e+=this.trainPattern(t[n],!0);return e/t.length}trainPatterns(t){for(let e=0;e<t.length;++e)this.trainPattern(t[e])}trainingTick(t,e,n){const{callback:r,callbackPeriod:i,errorThresh:a,iterations:s,log:o,logPeriod:u}=this.trainOpts;return!(e.iterations>=s||e.error<=a||Date.now()>=n)&&(e.iterations++,o&&e.iterations%u===0?(e.error=this.calculateTrainingError(t),o(e)):e.iterations%this.errorCheckInterval===0?e.error=this.calculateTrainingError(t):this.trainPatterns(t),r&&e.iterations%i===0&&r({iterations:e.iterations,error:e.error}),!0)}prepTraining(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.updateTrainingOptions(e);const n=this.formatData(t),r=Date.now()+this.trainOpts.timeout,i={error:1,iterations:0};return this.verifyIsInitialized(n),this.validateData(n),{preparedData:n,status:i,endTime:r}}train(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{preparedData:n,status:r,endTime:i}=this.prepTraining(t,e);for(;this.trainingTick(n,r,i););return r}async trainAsync(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{preparedData:n,status:r,endTime:i}=this.prepTraining(t,e);return await new Promise(((t,e)=>{try{const e=new x.Thaw(new Array(this.trainOpts.iterations),{delay:!0,each:()=>this.trainingTick(n,r,i)||e.stop(),done:()=>t(r)});e.tick()}catch(a){e(a)}}))}trainPattern(t,e){return this.runInput(t.input),this.calculateDeltas(t.output),this.adjustWeights(),e?C(this.errors[this.outputLayer]):null}_calculateDeltasSigmoid(t){for(let e=this.outputLayer;e>=0;e--){const n=this.sizes[e],r=this.outputs[e],i=this.errors[e],a=this.deltas[e],s=this.weights[e+1];for(let o=0;o<n;o++){const n=r[o];let u=0;if(e===this.outputLayer)u=t[o]-n;else{const t=this.deltas[e+1];for(let e=0;e<t.length;e++)u+=t[e]*s[e][o]}i[o]=u,a[o]=u*n*(1-n)}}}_calculateDeltasRelu(t){for(let e=this.outputLayer;e>=0;e--){const n=this.sizes[e],r=this.outputs[e],i=this.weights[e+1],a=this.deltas[e+1],s=this.errors[e],o=this.deltas[e];for(let u=0;u<n;u++){const n=r[u];let l=0;if(e===this.outputLayer)l=t[u]-n;else for(let t=0;t<a.length;t++)l+=a[t]*i[t][u];s[u]=l,o[u]=n>0?l:0}}}_calculateDeltasLeakyRelu(t){const e=this.trainOpts.leakyReluAlpha;for(let n=this.outputLayer;n>=0;n--){const r=this.sizes[n],i=this.outputs[n],a=this.deltas[n+1],s=this.weights[n+1],o=this.errors[n],u=this.deltas[n];for(let l=0;l<r;l++){const r=i[l];let c=0;if(n===this.outputLayer)c=t[l]-r;else for(let t=0;t<a.length;t++)c+=a[t]*s[t][l];o[l]=c,u[l]=r>0?c:e*c}}}_calculateDeltasTanh(t){for(let e=this.outputLayer;e>=0;e--){const n=this.sizes[e],r=this.outputs[e],i=this.deltas[e+1],a=this.weights[e+1],s=this.errors[e],o=this.deltas[e];for(let u=0;u<n;u++){const n=r[u];let l=0;if(e===this.outputLayer)l=t[u]-n;else for(let t=0;t<i.length;t++)l+=i[t]*a[t][u];s[u]=l,o[u]=(1-n*n)*l}}}adjustWeights(){const{learningRate:t,momentum:e}=this.trainOpts;for(let n=1;n<=this.outputLayer;n++){const r=this.outputs[n-1],i=this.sizes[n],a=this.deltas[n],s=this.changes[n],o=this.weights[n],u=this.biases[n];for(let n=0;n<i;n++){const i=a[n];for(let a=0;a<r.length;a++){let u=s[n][a];u=t*i*r[a]+e*u,s[n][a]=u,o[n][a]+=u}u[n]+=t*i}}}_setupAdam(){this.biasChangesLow=[],this.biasChangesHigh=[],this.changesLow=[],this.changesHigh=[],this.iterations=0;for(let t=0;t<=this.outputLayer;t++){const e=this.sizes[t];if(t>0){this.biasChangesLow[t]=B(e),this.biasChangesHigh[t]=B(e),this.changesLow[t]=new Array(e),this.changesHigh[t]=new Array(e);for(let n=0;n<e;n++){const e=this.sizes[t-1];this.changesLow[t][n]=B(e),this.changesHigh[t][n]=B(e)}}}this.adjustWeights=this._adjustWeightsAdam}_adjustWeightsAdam(){this.iterations++;const{iterations:t}=this,{beta1:e,beta2:n,epsilon:r,learningRate:i}=this.trainOpts;for(let a=1;a<=this.outputLayer;a++){const s=this.outputs[a-1],o=this.sizes[a],u=this.deltas[a],l=this.changesLow[a],c=this.changesHigh[a],h=this.weights[a],p=this.biases[a],f=this.biasChangesLow[a],d=this.biasChangesHigh[a];for(let a=0;a<o;a++){const o=u[a];for(let u=0;u<s.length;u++){const p=o*s[u],f=l[a][u]*e+(1-e)*p,d=c[a][u]*n+(1-n)*p*p,m=f/(1-Math.pow(e,t)),g=d/(1-Math.pow(n,t));l[a][u]=f,c[a][u]=d,h[a][u]+=i*m/(Math.sqrt(g)+r)}const m=u[a],g=f[a]*e+(1-e)*m,y=d[a]*n+(1-n)*m*m,v=f[a]/(1-Math.pow(e,t)),b=d[a]/(1-Math.pow(n,t));f[a]=g,d[a]=y,p[a]+=i*v/(Math.sqrt(b)+r)}}}validateData(t){const e=this.sizes[0],n=this.sizes[this.sizes.length-1],{length:r}=t;for(let i=0;i<r;i++){const{input:r,output:a}=t[i];if(r.length!==e)throw new Error(`input at index ${i} length ${r.length} must be ${e}`);if(t[i].output.length!==n)throw new Error(`output at index ${i} length ${a.length} must be ${n}`)}}validateInput(t){const e=this.sizes[0];if(t.length!==e)throw new Error(`input length ${t.length} must match options.inputSize of ${e}`)}formatData(t){if(!Array.isArray(t[0].input))if(this.inputLookup)this.inputLookupLength=Object.keys(this.inputLookup).length;else{const e=new L(t,"input");this.inputLookup=e.table,this.inputLookupLength=e.length}if(!Array.isArray(t[0].output))if(this.outputLookup)this.outputLookupLength=Object.keys(this.outputLookup).length;else{const e=new L(t,"output");this.outputLookup=e.table,this.outputLookupLength=e.length}if(this._formatInput||(this._formatInput=U(t[0].input,this.inputLookup)),this._formatOutput||(this._formatOutput=U(t[0].output,this.outputLookup)),this._formatInput&&this._formatOutput){const e=[];for(let n=0;n<t.length;n++)e.push({input:this._formatInput(t[n].input),output:this._formatOutput(t[n].output)});return e}if(this._formatInput){const e=[];for(let n=0;n<t.length;n++)e.push({input:this._formatInput(t[n].input),output:t[n].output});return e}if(this._formatOutput){const e=[];for(let n=0;n<t.length;n++)e.push({input:t[n].input,output:this._formatOutput(t[n].output)});return e}return t}addFormat(t){var e,n;Array.isArray(t.input)&&"number"===typeof t.input[0]||(this.inputLookup=b.addKeys(t.input,null!==(e=this.inputLookup)&&void 0!==e?e:{}),this.inputLookup&&(this.inputLookupLength=Object.keys(this.inputLookup).length)),Array.isArray(t.output)&&"number"===typeof t.output[0]||(this.outputLookup=b.addKeys(t.output,null!==(n=this.outputLookup)&&void 0!==n?n:{}),this.outputLookup&&(this.outputLookupLength=Object.keys(this.outputLookup).length))}test(t){const{preparedData:e}=this.prepTraining(t),n=[];let r=0;if(1===e[0].output.length){let t=0,i=0,a=0,s=0;for(let o=0;o<e.length;o++){const u=this.runInput(e[o].input),l=e[o].output,c=u[0]>this.options.binaryThresh?1:0,h=l[0];if(c!==h){const t=e[o];n.push({input:t.input,output:t.output,actual:c,expected:h})}0===c&&0===h?s++:1===c&&1===h?a++:0===c&&1===h?i++:1===c&&0===h&&t++,r+=C(u.map(((t,e)=>l[e]-t)))}return{error:r/e.length,misclasses:n,total:e.length,trueNeg:s,truePos:a,falseNeg:i,falsePos:t,precision:a>0?a/(a+t):0,recall:a>0?a/(a+i):0,accuracy:(s+a)/e.length}}for(let i=0;i<e.length;i++){const t=this.runInput(e[i].input),a=e[i].output,s=t.indexOf(P(t)),o=a.indexOf(P(a));if(s!==o){const t=e[i];n.push({input:t.input,output:t.output,actual:s,expected:o})}r+=C(t.map(((t,e)=>a[e]-t)))}return{error:r/e.length,misclasses:n,total:e.length}}toJSON(){var t,e;this.isRunnable||this.initialize();const n=this.weights.map((t=>t.map((t=>Array.from(t))))),r=this.biases.map((t=>Array.from(t))),i=[],a=this.sizes.length-1;for(let s=0;s<=a;s++)i.push({weights:null!==(t=n[s])&&void 0!==t?t:[],biases:null!==(e=r[s])&&void 0!==e?e:[]});return{type:"NeuralNetwork",sizes:[...this.sizes],layers:i,inputLookup:this.inputLookup?{...this.inputLookup}:null,inputLookupLength:this.inputLookupLength,outputLookup:this.outputLookup?{...this.outputLookup}:null,outputLookupLength:this.outputLookupLength,options:{...this.options},trainOpts:this.getTrainOptsJSON()}}fromJSON(t){if(this.options={...K(),...t.options},t.hasOwnProperty("trainOpts")){const e={...t.trainOpts,timeout:"Infinity"===t.trainOpts.timeout?1/0:t.trainOpts.timeout};this.updateTrainingOptions(e)}this.sizes=t.sizes,this.initialize(),this.inputLookup=t.inputLookup?{...t.inputLookup}:null,this.inputLookupLength=t.inputLookupLength,this.outputLookup=t.outputLookup?{...t.outputLookup}:null,this.outputLookupLength=t.outputLookupLength;const e=t.layers,n=this.weights.map(((t,n)=>e[n].weights.map((t=>Float32Array.from(t))))),r=this.biases.map(((t,n)=>Float32Array.from(e[n].biases)));for(let i=0;i<=this.outputLayer;i++)this.weights[i]=n[i]||[],this.biases[i]=r[i]||[];return this}toFunction(t){const{activation:e,leakyReluAlpha:n}=this.trainOpts;let r=!1;const i=(t,a)=>{if(0===t)return`(input[${a}]||0)`;const s=this.weights[t][a],o=this.biases[t][a];if(!s)throw new Error(`weights at layerIndex ${t} & nodeIndex ${a} not found`);if(!o)throw new Error(`bias as layerIndex ${t} & nodeIndex ${a} not found`);const u=[];s.forEach(((e,n)=>{e<0?u.push(`${e}*${i(t-1,n)}`):u.push(`+${e}*${i(t-1,n)}`)}));const l=`(${o.toString()}${u.join("")})`;switch(e){case"sigmoid":return`1/(1+1/Math.exp(${l}))`;case"relu":return r=!0,`((v=${l})<0?0:v)`;case"leaky-relu":return r=!0,`Math.max((v=${l}),${n}*v)`;case"tanh":return`Math.tanh(${l})`;default:throw new Error(`Unknown activation ${e}. Available activations are: 'sigmoid', 'relu', 'leaky-relu', 'tanh'`)}};function a(t){if(t.find((t=>t.includes('"'))))throw new Error("key contains '\"', which is not compatible")}const s=[];let o,u="";if(this.inputLookup&&(a(Object.keys(this.inputLookup)),u=`input = new Float32Array([${Object.keys(this.inputLookup).map((t=>`input["${t}"]`)).join(",")}]);`),this.sizes.length<1)throw new Error("No layers");for(let c=0;c<this.sizes[this.outputLayer];c++)s.push(i(this.outputLayer,c));if(this.outputLookup){const t=Object.keys(this.outputLookup);a(t),o=`{${t.map(((t,e)=>`"${t}":${s[e]}`)).join(",")}}`}else o=`[${s.join(",")}]`;const l=`${u}${r?"var v;":""}return ${o};`;return new Function("input",t?t(l):l)}}let H=null;function X(t){H=t}function q(t,e){let n=H;return null===n&&(n=new v.GPU({mode:"gpu"}),X(n)),n.createKernel(t,e).setPipeline(!0)}function Y(t,e,n){let r=H;return null===r&&(r=new v.GPU({mode:"gpu"}),X(r)),r.createKernelMap(t,e,n).setPipeline(!0)}function J(t,e){return new v.Input(t,e)}function Q(t){t instanceof v.Texture&&t.delete()}function Z(t){if(t instanceof v.Texture)t.clear();else{if(Array.isArray(t))if("number"===typeof t[0])t.fill(0);else{if("number"===typeof t[0][0]){for(let e=0;e<t.length;e++)t[e].fill(0);return}if("number"===typeof t[0][0][0]){for(let e=0;e<t.length;e++){const n=t[e];for(let t=0;t<n.length;t++)n[t].fill(0)}return}}if(!(t instanceof Float32Array))throw new Error("unhandled value");t.fill(0)}}function tt(t){if(t instanceof v.Texture)return t.clone();if(t instanceof Float32Array)return t.slice(0);if(Array.isArray(t)){if("number"===typeof t[0])return t.slice(0);if("number"===typeof t[0][0]){const e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=t[n].slice(0);return e}if("number"===typeof t[0][0][0]){const e=new Array(t.length);for(let n=0;n<t.length;n++){const e=t[n],r=new Array(e.length);for(let t=0;t<e.length;t++)r[t]=e[t].slice(0)}return e}}throw new Error("unhandled value")}function et(t,e,n){let r=e[this.thread.x];for(let i=0;i<this.constants.size;i++)r+=t[this.thread.x][i]*n[i];return 1/(1+Math.exp(-r))}function nt(t,e,n){let r=e[this.thread.x];for(let i=0;i<this.constants.size;i++)r+=t[this.thread.x][i]*n[i];return r<0?0:r}function rt(t,e,n){let r=e[this.thread.x];for(let i=0;i<this.constants.size;i++)r+=t[this.thread.x][i]*n[i];return r<0?0:.01*r}function it(t,e,n){let r=e[this.thread.x];for(let i=0;i<this.constants.size;i++)r+=t[this.thread.x][i]*n[i];return Math.tanh(r)}function at(t,e){return e-t}function st(t,e){return t*e*(1-e)}function ot(t,e){return e>0?t:0}function ut(t,e){return e>0?t:.01*t}function lt(t,e){return(1-e*e)*t}function ct(t,e,n,r){let i=0;for(let a=0;a<e;a++)i+=r[a]*n[a][t];return i}function ht(t,e,n,r,i){return t*r*i+e*n}function pt(t,e){return t+e}function ft(t,e){return t[this.thread.x]+e[this.thread.x]*this.constants.learningRate}function dt(t){let e=0;for(let n=0;n<this.constants.size;n++)e+=t[n]**2;return e/this.constants.size}class mt extends W{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.texturizeInputData=()=>{throw new Error("not yet setup")},this.forwardPropagate=[],this.backwardPropagate=[],this.changesPropagate=[],this.biasesPropagate=[],this.getMSE=()=>{throw new Error("not yet setup")},this._addMSE=()=>{throw new Error("not yet setup")},this._divideMSESum=()=>{throw new Error("not yet setup")},this.outputs=[],this.deltas=[],this.errors=[],this.weights=[],this.changes=[],this.biases=[],this.runInput=t=>{let e;this.outputs[0]=t;for(let n=1;n<=this.outputLayer;n++)Q(this.outputs[n]),this.outputs[n]=this.forwardPropagate[n](this.weights[n],this.biases[n],t),e=t=this.outputs[n];return e},this.calculateDeltas=t=>{for(let e=this.outputLayer;e>0;e--){let n;Q(this.deltas[e]),Q(this.errors[e]),n=e===this.outputLayer?this.backwardPropagate[e](this.outputs[e],t):this.backwardPropagate[e](this.weights[e+1],this.outputs[e],this.deltas[e+1]),this.deltas[e]=n.result,this.errors[e]=n.error}},this.errorCheckInterval=100,this.gpu=new v.GPU({mode:t.mode})}initialize(){super.initialize(),this.buildRunInput(),this.buildCalculateDeltas(),this.buildGetChanges(),this.buildChangeBiases(),this.buildGetMSE()}setActivation(){}trainPattern(t,e){return this.runInput(t.input),this.calculateDeltas(t.output),this.adjustWeights(),e?this.getMSE(this.errors[this.outputLayer]):null}calculateTrainingError(t){let e=new Float32Array([0]);for(let r=0;r<t.length;++r){const n=e,i=this.trainPattern(t[r],!0);e=this._addMSE(e,i),Q(i),Q(n)}const n=this._divideMSESum(t.length,e);return Q(e),(n instanceof v.Texture?n.toArray():n)[0]}adjustWeights(){this.getChanges(),this.changeBiases()}buildRunInput(){let t=null;switch(this.trainOpts.activation){case"sigmoid":t=et;break;case"relu":t=nt;break;case"leaky-relu":t=rt;break;case"tanh":t=it;break;default:throw new Error(`Unknown activation ${this.trainOpts.activation}. Available activations are: 'sigmoid', 'relu', 'leaky-relu', 'tanh'`)}for(let e=1;e<=this.outputLayer;e++)this.forwardPropagate[e]=this.gpu.createKernel(t,{output:[this.sizes[e]],pipeline:!0,constants:{size:this.sizes[e-1]},immutable:!0});this.texturizeInputData=this.gpu.createKernel((function(t){return t[this.thread.x]}),{output:[this.sizes[1]],pipeline:!0,immutable:!0})}buildCalculateDeltas(){let t;switch(this.trainOpts.activation){case"sigmoid":t=st;break;case"relu":t=ot;break;case"leaky-relu":t=ut;break;case"tanh":t=lt;break;default:throw new Error(`Unknown activation ${this.trainOpts.activation}. Available activations are: 'sigmoid', 'relu', 'leaky-relu', 'tanh'`)}t=v.alias(v.utils.getMinifySafeName((()=>t)),t),this.gpu.addFunction(t);for(let e=this.outputLayer;e>0;e--)e===this.outputLayer?this.backwardPropagate[this.outputLayer]=this.gpu.createKernelMap({error:at},(function(e,n){const r=e[this.thread.x],i=n[this.thread.x];return t(at(r,i),r)}),{output:[this.sizes[this.outputLayer]],pipeline:!0,immutable:!0}):this.backwardPropagate[e]=this.gpu.createKernelMap({error:ct},(function(e,n,r){const i=n[this.thread.x];return t(ct(this.thread.x,this.constants.size,e,r),i)}),{output:[this.sizes[e]],pipeline:!0,constants:{size:this.sizes[e+1]},immutable:!0})}buildGetChanges(){for(let t=1;t<=this.outputLayer;t++)this.changesPropagate[t]=this.gpu.createKernelMap({weights:pt,changes:ht},(function(t,e,n,r){return pt(ht(this.constants.learningRate,this.constants.momentum,r[this.thread.y][this.thread.x],e[this.thread.y],t[this.thread.x]),n[this.thread.y][this.thread.x])}),{output:[this.sizes[t-1],this.sizes[t]],pipeline:!0,constants:{size:this.sizes[t-1],learningRate:this.trainOpts.learningRate,momentum:this.trainOpts.momentum},immutable:!0})}getChanges(){for(let t=1;t<=this.outputLayer;t++){const e=this.weights[t],n=this.changes[t],r=this.changesPropagate[t](this.outputs[t-1],this.deltas[t],e,n);Q(e),Q(n),this.weights[t]=r.weights,this.changes[t]=r.changes,Q(r.result)}}buildChangeBiases(){for(let t=1;t<=this.outputLayer;t++)this.biasesPropagate[t]=this.gpu.createKernel(ft,{output:[this.sizes[t]],pipeline:!0,constants:{learningRate:this.trainOpts.learningRate},immutable:!0})}changeBiases(){for(let t=1;t<=this.outputLayer;t++){const e=this.biases[t];this.biases[t]=this.biasesPropagate[t](e,this.deltas[t]),Q(e)}}buildGetMSE(){this.getMSE=this.gpu.createKernel(dt,{output:[1],constants:{size:this.sizes[this.outputLayer]},pipeline:!0,immutable:!0}),this._addMSE=this.gpu.createKernel((function(t,e){return t[0]+e[0]}),{output:[1],pipeline:!0,immutable:!0}),this._divideMSESum=this.gpu.createKernel((function(t,e){const n=e[0];return n>0?n/t:0}),{output:[1]})}run(t){if(!this.isRunnable)throw new Error("network not runnable");let e;e=this.inputLookup?b.toArray(this.inputLookup,t,this.inputLookupLength):t,this.validateInput(e);const n=this.runInput(e),r=n instanceof v.Texture?n.toArray():n;return this.outputLookup?b.toObject(this.outputLookup,r):r}prepTraining(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.updateTrainingOptions(e);const n=this.formatData(t),r=Date.now()+this.trainOpts.timeout,i={error:1,iterations:0};this.verifyIsInitialized(n);const a=this.gpu.createKernel((function(t){return t[this.thread.x]}),{output:[n[0].output.length],pipeline:!0,immutable:!0});return{preparedData:n.map((t=>({input:this.texturizeInputData(t.input),output:a(t.output)}))),status:i,endTime:r}}toFunction(){throw new Error(`${this.constructor.name}-toFunction is not yet implemented`)}toJSON(){var t,e;null===this.sizes&&this.initialize();const n=this.weights.map((t=>(t instanceof v.Texture?t.toArray():t).map((t=>Array.from(t))))),r=this.biases.map((t=>Array.from(t instanceof v.Texture?t.toArray():t))),i=[];for(let a=0;a<=this.outputLayer;a++)i.push({weights:null!==(t=n[a])&&void 0!==t?t:[],biases:null!==(e=r[a])&&void 0!==e?e:[]});return{type:"NeuralNetworkGPU",sizes:[...this.sizes],layers:i,inputLookup:this.inputLookup?{...this.inputLookup}:null,inputLookupLength:this.inputLookupLength,outputLookup:this.outputLookup?{...this.outputLookup}:null,outputLookupLength:this.outputLookupLength,options:{...this.options},trainOpts:this.getTrainOptsJSON()}}}class gt extends Error{constructor(t){super(`Cannot run a ${t.constructor.name} before it is trained.`)}}class yt{constructor(t){null!==t&&void 0!==t||(t={}),t.binaryThresh,t.hiddenLayers,t.decodedSize&&t.decodedSize,this.denoiser=new mt(t)}denoise(t){return this.denoiser.run(t)}decode(t){if(!this.decoder)throw new gt(this);return this.decoder.run(t)}encode(t){if(!this.denoiser)throw new gt(this);this.denoiser.run(t);let e=this.encodedLayer;return e=e instanceof v.Texture?e.toArray():e.slice(0),e}likelyIncludesAnomalies(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;var n;const r=[],i=this.denoise(t);for(let a=0;a<(null!==(n=t.length)&&void 0!==n?n:0);a++)r[a]=Math.abs(t[a]-i[a]);return r.reduce(((t,e)=>t+e))/t.length>e}train(t,e){const n=[];for(const i of t)n.push({input:i,output:i});const r=this.denoiser.train(n,e);return this.decoder=this.createDecoder(),r}createDecoder(){const t=this.denoiser.toJSON(),e=[],n=[];for(let r=this.encodedLayerIndex;r<this.denoiser.sizes.length;r++)e.push(t.layers[r]),n.push(t.sizes[r]);return t.layers=e,t.sizes=n,t.options.inputSize=t.sizes[0],(new mt).fromJSON(t)}get encodedLayer(){return this.denoiser.outputs[this.encodedLayerIndex]}get encodedLayerIndex(){return Math.round(.5*this.denoiser.outputs.length)-1}}class vt{constructor(t){this.json={avgs:{error:0,iterations:0,testTime:0,trainTime:0},stats:{total:0,testSize:0,trainSize:0},sets:[]},this.initClassifier=t}testPartition(t,e,n){const r=this.initClassifier(),i=Date.now(),a=r.train(e,t),s=Date.now(),o=r.test(n),u=Date.now();return{...o,trainTime:s-i,testTime:u-s,iterations:a.iterations,error:a.error,total:o.total,network:r.toJSON()}}shuffleArray(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1)),r=t[e];t[e]=t[n],t[n]=r}return t}train(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;if(t.length<n)throw new Error(`Training set size is too small for ${t.length} k folds of ${n}`);this.shuffleArray(t);const r=t.length/n,i={trainTime:0,testTime:0,iterations:0,error:0},a={total:0,testSize:0,trainSize:0},s={total:0,testSize:0,trainSize:0,truePos:0,trueNeg:0,falsePos:0,falseNeg:0,precision:0,recall:0,accuracy:0},o=[];let u=null;for(let l=0;l<n;l++){const n=t.slice(0),c=n.splice(l*r,r),h=n,p=this.testPartition(e,h,c);null===u&&(u=p.hasOwnProperty("falseNeg")&&p.hasOwnProperty("falsePos")&&p.hasOwnProperty("trueNeg")&&p.hasOwnProperty("truePos"),u&&Object.assign(a,s)),i.iterations+=p.iterations,i.testTime+=p.testTime,i.trainTime+=p.trainTime,i.error+=p.error,a.total+=p.total,vt.isBinaryStats(a)&&vt.isBinaryPartitionResults(p)&&(a.accuracy+=p.accuracy,a.falseNeg+=p.falseNeg,a.falsePos+=p.falsePos,a.precision+=p.precision,a.recall+=p.recall,a.trueNeg+=p.trueNeg,a.truePos+=p.truePos),o.push(p)}return i.error/=n,i.iterations/=n,i.testTime/=n,i.trainTime/=n,vt.isBinaryStats(a)&&(a.precision=a.truePos/(a.truePos+a.falsePos),a.recall=a.truePos/(a.truePos+a.falseNeg),a.accuracy=(a.trueNeg+a.truePos)/a.total),a.testSize=r,a.trainSize=t.length-r,this.json={avgs:i,stats:a,sets:o},this.json}toNeuralNetwork(){return this.fromJSON(this.json)}toJSON(){return this.json}fromJSON(t){const e=t.sets.reduce(((t,e)=>t.error<e.error?t:e));return this.initClassifier().fromJSON(e.network)}}function bt(t){let e=0;for(let n=0;n<this.constants.height;n++)for(let r=0;r<this.constants.width;r++)e+=t[n][r]**2;return e/this.constants.length}vt.isBinaryStats=t=>void 0!==t.accuracy,vt.isBinaryResults=t=>void 0!==t.stats.accuracy,vt.isBinaryPartitionResults=t=>void 0!==t.accuracy;class xt{constructor(t){let{width:e,height:n}=t;this.calculate=q(bt,{output:[1],constants:{width:e,height:n,length:e*n},immutable:!0}),this.addAbsolute=q((function(t,e){return t[0]+Math.abs(e[0][0])}),{output:[1],immutable:!0}),this.add=q((function(t,e){return t[0]+e[0]}),{output:[1],immutable:!0}),this.divide=q((function(t,e){const n=e[0];return n>0?n/t:0}),{output:[1],immutable:!0})}}const wt={width:1,height:1,depth:null,weights:null,deltas:null,praxis:null,praxisOpts:null,cleanupDeltas:!0};class St{constructor(t){this.praxis=null,this.predictKernel=null,this.compareKernel=null,this.settings=t?{...wt,...t}:{...wt},this.setupPraxis()}get width(){var t;return null!==(t=this.settings.width)&&void 0!==t?t:0}get height(){var t;return null!==(t=this.settings.height)&&void 0!==t?t:0}get depth(){var t;return null!==(t=this.settings.depth)&&void 0!==t?t:0}get weights(){return this.settings.weights}set weights(t){this.settings.weights=t,this.settings.cleanupDeltas&&this.deltas&&Z(this.deltas)}get deltas(){return this.settings.deltas}set deltas(t){this.settings.deltas=t}get id(){var t;return null!==(t=this.settings.id)&&void 0!==t?t:""}set id(t){this.settings.id=t}setupPraxis(){const{initPraxis:t,praxis:e,praxisOpts:n}=this.settings;this.praxis||(t?this.praxis=n?t(this,n):t(this):e&&(this.praxis=e))}validate(){if(Number.isNaN(this.height))throw new Error(`${this.constructor.name} layer height is not a number`);if(Number.isNaN(this.width))throw new Error(`${this.constructor.name} layer width is not a number`);if(this.height<1)throw new Error(`${this.constructor.name} layer height is less than 1`);if(this.width<1)throw new Error(`${this.constructor.name} layer width is less than 1`)}setupKernels(t){}reuseKernels(t){if(t.width!==this.width)throw new Error(`${this.constructor.name} kernel width mismatch ${t.width} is not ${this.width}`);if(t.height!==this.height)throw new Error(`${this.constructor.name} kernel width mismatch ${t.height} is not ${this.height}`);if(t.hasOwnProperty("predictKernel")&&null!==t.predictKernel){if(!t.predictKernel.immutable)throw new Error(`${t.constructor.name}.predictKernel is not reusable, set kernel.immutable = true`);this.predictKernel=t.predictKernel}if(t.hasOwnProperty("compareKernel")&&null!==t.compareKernel){if(!t.compareKernel.immutable)throw new Error(`${t.constructor.name}.compareKernel is not reusable, set kernel.immutable = true`);this.compareKernel=t.compareKernel}this.praxis=t.praxis}predict(t){}compare(t){}learn(t){}toArray(){return Array.isArray(this.weights)?this.weights:this.weights.toArray()}toJSON(){return St.toJSON(this)}static toJSON(t){const{weights:e}=t;return{width:t.width,height:t.height,depth:t.depth,weights:Tt(e&&e instanceof v.Texture?e.toArray():e),type:t.constructor.name,praxisOpts:t.praxis?t.praxis.toJSON():null}}}function Tt(t){if(null===t)return null;if(Array.isArray(t)){if("number"===typeof t[0])return t;if(Array.isArray(t[0])&&"number"===typeof t[0][0])return t;if(Array.isArray(t[0][0])&&"number"===typeof t[0][0][0])return t;if(t[0]instanceof Float32Array)return t.map((t=>Array.from(t)));if(t[0][0]instanceof Float32Array)return t.map((t=>t.map((t=>Array.from(t)))))}else if(t)return Array.from(t);throw new Error("unexpected value")}function kt(t,e){const n=new Array(e);for(let r=0;r<e;r++)n[r]=B(t);return n}function At(t,e,n){const r=new Array(n);for(let i=0;i<n;i++)r[i]=kt(t,e);return r}class Et extends St{constructor(t,e){super(e),this.inputLayer=t;const{width:n,height:r,depth:i}=this;this.predictKernel=null,this.compareKernel=null,this.validate(),i>0?(this.weights=At(n,r,i),this.deltas=At(n,r,i)):r>0&&(this.weights=kt(n,r),this.deltas=kt(n,r)),this.setupPraxis()}get width(){return this.inputLayer.width}get height(){return this.inputLayer.height}get depth(){return this.inputLayer.depth}}class _t extends St{constructor(t,e){super(),this.settings=t,this.inputLayer=e}get width(){return this.inputLayer.width}get height(){return this.inputLayer.height}get depth(){return this.inputLayer.depth}get filterCount(){return this.settings.filterCount}get filterWidth(){return this.settings.filterWidth}get filterHeight(){return this.settings.filterHeight}get filters(){return this.settings.filters}set filters(t){this.settings.filters=t}get filterDeltas(){return this.settings.filterDeltas}set filterDeltas(t){this.settings.filterDeltas=t}}class Ot{constructor(){this.predictKernel=null,this.compareKernel=null,this.praxis=null}get width(){return this.settings.width}get height(){return this.settings.height}get depth(){return this.settings.depth}get weights(){return this.settings.weights}set weights(t){this.settings.weights=t}get deltas(){return this.settings.deltas}set deltas(t){this.settings.deltas=t}toJSON(){return St.toJSON(this)}}class It extends St{constructor(t,e){super({...e,width:t.width,height:t.height,depth:t.depth}),this.inputLayer=t}validate(){var t;if(super.validate(),this.width!==this.inputLayer.width)throw new Error(`width of ${this.width} does not match inputLayer.width of ${this.inputLayer.width}`);if(this.height!==this.inputLayer.height)throw new Error(`height of ${this.height} does not match inputLayer.height of ${this.inputLayer.height}`);if(this.depth!==(null!==(t=this.inputLayer.depth)&&void 0!==t?t:0))throw new Error(`depth of ${this.depth} does not match inputLayer.depth of ${this.inputLayer.depth}`)}}class Lt extends St{constructor(t,e,n){super(n),this.inputLayer1=t,this.inputLayer2=e,this.validate(),this.weights=kt(this.width,this.height),this.deltas=kt(this.width,this.height),this.setupPraxis()}}function Pt(t,e){return t[this.thread.y][this.thread.x]-e[this.thread.x]}function Ct(t,e){return t[this.thread.y][this.thread.x]-e[this.thread.y][this.thread.x]}class Dt extends St{constructor(t,e){if(super(t),this.inputLayer=e,this.validate(),this.depth)throw new Error("Target layer not implemented for depth");this.height?(this.weights=kt(this.width,this.height),this.deltas=kt(this.width,this.height),this.errors=kt(this.width,this.height)):(this.weights=B(this.width),this.deltas=B(this.width),this.errors=B(this.width))}setupKernels(){1===this.width?this.compareKernel=q(Pt,{output:[this.width,this.height],immutable:!0}):this.compareKernel=q(Ct,{output:[this.width,this.height],immutable:!0})}predict(){Q(this.weights),this.weights=tt(this.inputLayer.weights)}compare(t){Q(this.deltas),Q(this.errors),Q(this.inputLayer.deltas),this.deltas=this.compareKernel(this.weights,t),this.inputLayer.deltas=tt(this.deltas),this.errors=tt(this.deltas)}setupPraxis(){}}function Mt(t,e){return new Dt(t,e)}class Nt{}class jt extends St{}class $t extends St{learn(t){const{weights:e}=this;if(!this.praxis)throw new Error("this.praxis not defined");this.weights=this.praxis.run(this,t),Q(e)}}class Rt{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.layerTemplate=t,this.settings={...e},this.kernel=null}get width(){return this.layerTemplate.width}get height(){return this.layerTemplate.height}get depth(){return this.layerTemplate.depth}setupKernels(){}reuseKernels(t){if(t.width!==this.width)throw new Error(`${this.constructor.name} kernel width mismatch ${t.width} is not ${this.width}`);if(t.height!==this.height)throw new Error(`${this.constructor.name} kernel width mismatch ${t.height} is not ${this.height}`);t.hasOwnProperty("kernel")&&(this.kernel=t.kernel)}toJSON(){return{...this.settings}}}function zt(t,e){return t[this.thread.y][this.thread.x]+this.constants.learningRate*e[this.thread.y][this.thread.x]}const Ft={learningRate:.3};class Vt extends Rt{constructor(t,e){super(t),this.settings={...Ft,...e},this.kernel=null}run(t){return this.kernel(t.weights,t.deltas)}setupKernels(){var t;this.kernel=q(zt,{output:[this.width,this.height],constants:{learningRate:null!==(t=this.settings.learningRate)&&void 0!==t?t:.01}})}}function Bt(t,e){return new Vt(t,e)}function Ut(t){return t}function Kt(t,e,n,r){const i=t[this.thread.y][this.thread.x],a=r[this.thread.y][0],s=e[this.thread.y][this.thread.x],o=n[this.thread.x][0];return s+(this.constants.learningRate*a*o+this.constants.momentum*i)}const Gt={learningRate:.3,momentum:.1,weightsLayer:null,incomingLayer:null,deltaLayer:null};class Wt extends Rt{constructor(t,e){super(t),this.kernelMap=null,this.settings={...Gt,...e},this.changes=kt(t.width,t.height)}get learningRate(){return this.settings.learningRate}get momentum(){return this.settings.momentum}get weightsLayer(){return this.settings.weightsLayer}set weightsLayer(t){this.settings.weightsLayer=t}get deltaLayer(){return this.settings.deltaLayer}set deltaLayer(t){this.settings.deltaLayer=t}get incomingLayer(){return this.settings.incomingLayer}set incomingLayer(t){this.settings.incomingLayer=t}run(){const t=this.kernelMap(this.changes,this.weightsLayer.weights,this.incomingLayer.weights,this.deltaLayer.deltas);return this.changes=t.changes,t.result}setupKernels(){this.kernelMap=Y({changes:Ut},Kt,{output:[this.width,this.height],constants:{learningRate:this.learningRate,momentum:this.momentum}})}}function Ht(t,e){return new Wt(t,e)}function Xt(t,e,n){return n*e+(1-e)*t*t}function qt(t,e,n){return t>e?e:t<n?n:t}function Yt(t,e,n){const r=e[this.thread.y][this.thread.x],i=qt(r,this.constants.clipValue,-this.constants.clipValue),a=t[this.thread.y][this.thread.x],s=n[this.thread.y][this.thread.x],o=Xt(r,this.constants.decayRate,s);return a+-this.constants.learningRate*i/Math.sqrt(o+this.constants.smoothEps)-this.constants.regularizationStrength*a}const Jt={decayRate:.999,regularizationStrength:1e-6,learningRate:.01,smoothEps:1e-8,clipValue:5};class Qt extends Rt{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t),this.kernelMap=null,this.settings={...Jt,...e},this.momenta=kt(t.width,t.height)}get clipValue(){return this.settings.clipValue}get decayRate(){return this.settings.decayRate}get learningRate(){return this.settings.learningRate}get regularizationStrength(){return this.settings.regularizationStrength}get smoothEps(){return this.settings.smoothEps}run(t){const{momenta:e,result:n}=this.kernelMap(t.weights,t.deltas,this.momenta);return Q(this.momenta),this.momenta=e,n}setupKernels(){this.kernelMap=Y({momenta:Xt},Yt,{output:[this.width,this.height],constants:{clipValue:this.clipValue,decayRate:this.decayRate,learningRate:this.learningRate,regularizationStrength:this.regularizationStrength,smoothEps:this.smoothEps},functions:[qt],immutable:!0})}}function Zt(t,e){return new Qt(t,e)}const te=Qt,ee=Zt;var ne=Object.freeze({__proto__:null,ArthurDeviationBiases:Vt,arthurDeviationBiases:Bt,ArthurDeviationWeights:Wt,arthurDeviationWeights:Ht,MomentumRootMeanSquaredPropagation:Qt,momentumRootMeanSquaredPropagation:Zt,MRmsProp:te,mRmsProp:ee});function re(t,e){t.hasOwnProperty("inputLayer")?re(t.inputLayer,e):(t.hasOwnProperty("inputLayer1")&&re(t.inputLayer1,e),t.hasOwnProperty("inputLayer2")&&re(t.inputLayer2,e)),e(t)}function ie(t){const e=t.slice(0);for(let n=0;n<e.length;n++){let t=0;re(e[n],(r=>{e.includes(r)||(e.splice(n+t,0,r),t++)}))}return e}function ae(t,e){if(t.width!==e.width)throw new Error(`Layer width mismatch of ${t.width} and ${e.width}`);if(t.height!==e.height)throw new Error(`Layer height mismatch of ${t.height} and ${e.height}`)}function se(t,e){return t[this.thread.y][this.thread.x]+e[this.thread.y][this.thread.x]}class oe extends Lt{get width(){return this.inputLayer1.width}get height(){return this.inputLayer1.height}get depth(){return this.inputLayer1.depth}validate(){super.validate(),ae(this.inputLayer1,this.inputLayer2)}setupKernels(){this.predictKernel=q(se,{output:[this.width,this.height],immutable:!0})}predict(){Q(this.weights),this.weights=this.predictKernel(this.inputLayer1.weights,this.inputLayer2.weights)}compare(){Q(this.inputLayer1.deltas),Q(this.inputLayer2.deltas),this.inputLayer1.deltas=tt(this.deltas),this.inputLayer2.deltas=tt(this.deltas)}}function ue(t,e,n){return new oe(t,e,n)}const le={...wt,std:null};class ce extends $t{constructor(t){super(),this.settings={...le,...t},this.setupPraxis(),this.validate(),this.weights||(this.weights=F(this.width,this.height,t.std)),this.deltas||(this.deltas=kt(this.width,this.height))}predict(){}compare(){}}function he(t){return new ce(t)}function pe(t,e){let n=0;for(let r=0;r<this.constants.size;r++)n+=t[this.thread.y][r]*e[r][this.thread.x];return n}function fe(t,e,n){let r=e[this.thread.y][this.thread.x];for(let i=0;i<this.constants.size;i++)r+=t[this.thread.y][i]*n[this.thread.x][i];return r}function de(t,e,n){let r=e[this.thread.y][this.thread.x];for(let i=0;i<this.constants.size;i++)r+=t[i][this.thread.x]*n[i][this.thread.y];return r}class me extends Lt{constructor(){super(...arguments),this.compareKernel1=null,this.compareKernel2=null}get width(){return this.inputLayer2.width}set width(t){throw new Error("Cannot set width on Multiply")}get height(){return this.inputLayer1.height}set height(t){throw new Error("Cannot set height on Multiply")}get depth(){return this.inputLayer1.depth}set depth(t){throw new Error("Cannot set depth on Multiply")}validate(){if(super.validate(),this.inputLayer1.width!==this.inputLayer2.height)throw new Error(`Layer width mismatch of ${this.inputLayer1.width} and ${this.inputLayer2.height}`)}setupKernels(){this.predictKernel=q(pe,{output:[this.width,this.height],constants:{size:this.inputLayer2.height},immutable:!0}),this.compareKernel1=q(fe,{output:[this.inputLayer1.width,this.inputLayer1.height],constants:{size:this.inputLayer2.width},immutable:!0}),this.compareKernel2=q(de,{output:[this.inputLayer2.width,this.inputLayer2.height],constants:{size:this.inputLayer1.height},immutable:!0})}reuseKernels(t){super.reuseKernels(t),this.compareKernel1=t.compareKernel1,this.compareKernel2=t.compareKernel2}predict(){if(Q(this.weights),!this.predictKernel)throw new Error("this.predictKernel is not set");this.weights=this.predictKernel(this.inputLayer1.weights,this.inputLayer2.weights)}compare(){if(!this.compareKernel1)throw new Error("this.compareKernel1 not set");if(!this.compareKernel2)throw new Error("this.compareKernel2 not set");const t=this.inputLayer1.deltas,e=this.inputLayer2.deltas,n=this.compareKernel1(this.deltas,this.inputLayer1.deltas,this.inputLayer2.weights),r=this.compareKernel2(this.deltas,this.inputLayer2.deltas,this.inputLayer1.weights);this.inputLayer2.deltas=r,this.inputLayer1.deltas=n,Q(t),Q(e)}setupPraxis(){}toJSON(){return{...super.toJSON(),width:this.width,height:this.height}}}function ge(t,e,n){return new me(t,e,n)}function ye(t){return 1/(1+Math.exp(-t[this.thread.y][this.thread.x]))}function ve(t){return 1/(1+Math.exp(-t[this.thread.z][this.thread.y][this.thread.x]))}function be(t,e){const n=t[this.thread.y][this.thread.x];return n*(1-n)*e[this.thread.y][this.thread.x]}function xe(t,e){const n=t[this.thread.z][this.thread.y][this.thread.x];return n*(1-n)*e[this.thread.z][this.thread.y][this.thread.x]}class we extends Et{setupKernels(){this.depth>0?(this.predictKernel=q(ve,{output:[this.width,this.height,this.depth],functions:[a],immutable:!0}),this.compareKernel=q(xe,{output:[this.width,this.height,this.depth],functions:[s],immutable:!0})):(this.predictKernel=q(ye,{output:[this.width,this.height],functions:[a],immutable:!0}),this.compareKernel=q(be,{output:[this.width,this.height],functions:[s],immutable:!0}))}predict(){Q(this.weights),this.weights=this.predictKernel(this.inputLayer.weights)}compare(){Q(this.inputLayer.deltas),this.inputLayer.deltas=this.compareKernel(this.weights,this.deltas)}learn(t){}}function Se(t,e){return new we(t,e)}function Te(t,e){const{height:n}=t;function r(t,e){const n=Ht(t,e);return n.setupKernels(),n}function i(t,e){const n=Bt(t,e);return n.setupKernels(),n}const a=he({id:"weights",height:n,width:e.height,initPraxis:r}),s=he({id:"biases",height:n,initPraxis:i}),o=Se(ue(ge(a,e),s)),u=a.praxis;return u.weightsLayer=a,u.incomingLayer=e,u.deltaLayer=o,o}function ke(t,e){if("number"===typeof t.stride)return{strideX:t.stride,strideY:t.stride};{let n=e.stride,r=e.stride;return"number"===typeof t.strideX&&(n=t.strideX),"number"===typeof t.strideY&&(r=t.strideY),{strideX:n,strideY:r}}}function Ae(t,e){if("number"===typeof t.padding)return{paddingX:t.padding,paddingY:t.padding};{let n=e.padding,r=e.padding;return"number"===typeof t.paddingX&&(n=t.paddingX),"number"===typeof t.paddingY&&(r=t.paddingY),{paddingX:n,paddingY:r}}}function Ee(t,e){return new Float32Array(t).fill(e)}function _e(t,e,n){const r=this.constants.paddingX-this.thread.x*this.constants.strideX,i=this.thread.x*this.constants.strideX-this.constants.paddingX,a=Math.min(this.constants.filterWidth,r+this.constants.inputWidth),s=this.constants.paddingY-this.thread.y*this.constants.strideY,o=this.thread.y*this.constants.strideY-this.constants.paddingY,u=Math.min(this.constants.filterHeight,s+this.constants.inputHeight);let l=0;for(let c=0;c<this.constants.inputDepth;c++)for(let n=Math.max(0,s),h=Math.max(0,o);n<u;n++,h++)for(let s=Math.max(0,r),o=Math.max(0,i);s<a;s++,o++)l+=e[c][n][s]*t[c][h][o];return l+n[this.thread.z]}function Oe(t,e,n){const r=Math.max(0,Math.ceil((this.constants.paddingX-this.thread.x)/this.constants.strideX)),i=r*this.constants.strideX+this.thread.x-this.constants.paddingX,a=Math.min(this.constants.deltaWidth,Math.floor((this.constants.inputWidth-1-this.thread.x+this.constants.paddingX)/this.constants.strideX)+1),s=Math.max(0,Math.ceil((this.constants.paddingY-this.thread.y)/this.constants.strideY)),o=s*this.constants.strideY+this.thread.y-this.constants.paddingY,u=Math.min(this.constants.deltaHeight,Math.floor((this.constants.inputHeight-1-this.thread.y+this.constants.paddingY)/this.constants.strideY)+1);let l=t[this.thread.z][this.thread.y][this.thread.x];for(let c=s,h=o;c<u;c++,h+=this.constants.strideY)for(let t=r,s=i;t<a;t++,s+=this.constants.strideX)l+=e[this.thread.z][h][s]*n[this.constants.deltaZ][c][t];return l}function Ie(t,e,n){const r=this.thread.x+this.constants.paddingX,i=r<this.constants.filterWidth?0:Math.floor((r-this.constants.filterWidth+this.constants.strideX)/this.constants.strideX),a=r-i*this.constants.strideX,s=Math.min(i+Math.floor(a/this.constants.strideX)+1,this.constants.deltaWidth),o=this.thread.y+this.constants.paddingY,u=o<this.constants.filterHeight?0:Math.floor((o-this.constants.filterHeight+this.constants.strideY)/this.constants.strideY),l=o-u*this.constants.strideY,c=Math.min(u+Math.floor(l/this.constants.strideY)+1,this.constants.deltaHeight);let h=t[this.thread.z][this.thread.y][this.thread.x],p=u;for(let f=l;p<c;f-=this.constants.strideY,p++){let t=i;for(let r=a;t<s;r-=this.constants.strideX,t++)h+=e[this.thread.z][f][r]*n[this.constants.deltaZ][p][t]}return h}function Le(t,e){let n=0;for(let r=0;r<this.constants.deltaHeight;r++)for(let t=0;t<this.constants.deltaWidth;t++)n+=e[this.thread.z][r][t];return t[this.thread.z][this.thread.y][this.thread.x]+n}const Pe={stride:0,padding:0,bias:.1,filterCount:1,filterWidth:0,filterHeight:0};class Ce extends _t{constructor(t,e){var n,r,i;super(t,e),this.compareFilterDeltasKernel=null,this.compareInputDeltasKernel=null,this.compareBiasesKernel=null,this.settings={...Pe,...t,...Ae(t,Pe),...ke(t,Pe)},this.weights=null!==(n=t.weights)&&void 0!==n?n:V(this.width,this.height,this.depth),this.deltas=At(this.width,this.height,this.depth),this.biases=Ee(this.depth,this.bias),this.biasDeltas=null!==(r=t.biasDeltas)&&void 0!==r?r:z(this.depth),this.filters=null!==(i=t.filters)&&void 0!==i?i:V(this.filterWidth,this.filterHeight,this.filterCount),this.filterDeltas=At(this.filterWidth,this.filterHeight,this.filterCount),this.validate()}get strideX(){return this.settings.strideX}get strideY(){return this.settings.strideY}get paddingX(){return this.settings.paddingX}get paddingY(){return this.settings.paddingX}get width(){return Math.floor((this.inputLayer.width+2*this.paddingX-this.filterWidth)/this.strideX+1)}get height(){return Math.floor((this.inputLayer.height+2*this.paddingY-this.filterHeight)/this.strideY+1)}get bias(){return this.settings.bias}get depth(){return this.filterCount}get biases(){return this.settings.biases}set biases(t){this.settings.biases=t}get biasDeltas(){return this.settings.biasDeltas}set biasDeltas(t){this.settings.biasDeltas=t}get filters(){return this.settings.filters}set filters(t){this.settings.filters=t}get filterDeltas(){return this.settings.filterDeltas}set filterDeltas(t){this.settings.filterDeltas=t}setupKernels(){this.predictKernel=q(_e,{constants:{inputWidth:this.inputLayer.width,inputHeight:this.inputLayer.height,inputDepth:this.inputLayer.depth,strideX:this.strideX,strideY:this.strideY,paddingX:this.paddingX,paddingY:this.paddingY,filterWidth:this.filterWidth,filterHeight:this.filterHeight},output:[this.width,this.height,this.depth],immutable:!0}),this.compareFilterDeltasKernel=q(Oe,{constants:{deltaWidth:this.width,deltaHeight:this.height,deltaZ:this.depth,inputWidth:this.inputLayer.width,inputHeight:this.inputLayer.height,inputDepth:this.inputLayer.depth,strideX:this.strideX,strideY:this.strideY,paddingX:this.paddingX,paddingY:this.paddingY,filterWidth:this.filterWidth,filterHeight:this.filterHeight},output:[this.width,this.height,this.depth],immutable:!0}),this.compareInputDeltasKernel=q(Ie,{constants:{deltaWidth:this.width,deltaHeight:this.height,deltaZ:this.depth,strideX:this.strideX,strideY:this.strideY,paddingX:this.paddingX,paddingY:this.paddingY,filterWidth:this.filterWidth,filterHeight:this.filterHeight,filterCount:this.filterCount},output:[this.inputLayer.width,this.inputLayer.height,this.inputLayer.depth],immutable:!0}),this.compareBiasesKernel=q(Le,{output:[1,1,this.depth],constants:{deltaWidth:this.width,deltaHeight:this.height},immutable:!0})}predict(){this.weights=this.predictKernel(this.inputLayer.weights,this.filters,this.biases)}compare(){const{filterDeltas:t,biasDeltas:e}=this;this.filterDeltas=this.compareFilterDeltasKernel(t,this.inputLayer.weights,this.deltas),Q(t),this.biasDeltas=this.compareBiasesKernel(e,this.deltas),Q(e),Q(this.deltas),this.deltas=this.compareInputDeltasKernel(this.filters,this.inputLayer.deltas),Q(this.inputLayer.deltas),this.inputLayer.deltas=tt(this.deltas)}learn(t){const{weights:e}=this;this.weights=this.praxis.run(this,t),Q(e)}}function De(t,e){return new Ce(t,e)}function Me(t){return t}function Ne(t){return Me(Math.random())<this.constants.probability?0:t[this.thread.y][this.thread.x]}function je(t){return t[this.thread.y][this.thread.x]*this.constants.probability}function $e(t,e){return 0===t[this.thread.y][this.thread.x]?0:e[this.thread.y][this.thread.x]}const Re={...wt,probability:.5};class ze extends _t{constructor(t,e){super(e,t),this.predictKernelMap=null,this.settings={...Re,...e},this.dropouts=null,this.validate()}setupKernels(t){const e=[this.width,this.height];t?(this.predictKernelMap=Y({dropouts:Me},Ne,{output:e,immutable:!0}),this.compareKernel=q($e,{output:e,immutable:!0})):this.predictKernelMap=Y({},je,{output:e,immutable:!0})}predict(){Q(this.weights),this.dropouts&&Q(this.dropouts);const{result:t,dropouts:e}=this.predictKernelMap(this.inputLayer.weights);this.weights=t,this.dropouts=e}compare(){Q(this.deltas),this.deltas=this.compareKernel(this.dropouts,this.inputLayer.deltas)}}function Fe(t,e){return new ze(t,e)}function Ve(t,e){const{height:n,praxisOpts:r=null}=t,i=he({id:"weights",height:n,width:e.height,praxisOpts:r}),a=he({id:"biases",height:n,praxisOpts:r});return Se(ue(ge(i,e,{praxisOpts:r}),a,{praxisOpts:r}),{praxisOpts:r})}function Be(t,e,n){let r=0,i=0;for(let a=0;a<this.constants.inputHeight;a++)for(let n=0;n<this.constants.inputWidth;n++)r+=t[a][n]*e[this.thread.x][i],i++;return r+n[this.thread.x]}function Ue(t,e,n){let r=0,i=0;for(let a=0;a<this.constants.inputDepth;a++)for(let n=0;n<this.constants.inputHeight;n++)for(let s=0;s<this.constants.inputWidth;s++)r+=t[a][n][s]*e[this.thread.x][i],i++;return r+n[this.thread.x]}function Ke(t,e,n){let r=0;const i=this.thread.x+this.thread.y*this.output.x;for(let a=0;a<this.constants.filterCount;a++)r+=n[a][i]*e[0][a];return r+t[this.thread.y][this.thread.x]}function Ge(t,e,n){let r=0;const i=this.thread.x+this.thread.y*this.output.x;for(let a=0;a<this.constants.filterCount;a++)r+=n[a][i]*e[0][a];return r+t[this.thread.z][this.thread.y][this.thread.x]}function We(t,e){return t[this.thread.x]+e[this.thread.y][this.thread.x]}function He(t,e,n){return t[this.thread.y][this.thread.x]+e[this.thread.y][this.thread.x]*n[this.constants.deltaY][this.constants.deltaX]}function Xe(t,e,n){const r=Math.floor(this.thread.x/(this.constants.inputWidth*this.constants.inputHeight)),i=Math.floor((this.thread.x-r*this.constants.inputWidth*this.constants.inputHeight)/this.constants.inputWidth),a=this.thread.x-this.constants.inputWidth*(i+this.constants.inputHeight*r);return t[this.thread.y][this.thread.x]+e[r][i][a]*n[0][this.thread.y]}class qe extends _t{constructor(t,e){super(t,e),this.compareFilterDeltasKernel=null,this.compareInputDeltasKernel=null,this.compareBiasesKernel=null,this.settings={...t},this.validate();const n=e.width*e.height*e.depth;this.biases=Ee(this.height,this.bias),this.biasDeltas=B(this.height),this.filters=F(n,this.height),this.filterDeltas=kt(n,this.height),this.depth>0?(this.weights=V(this.width,this.height,this.depth),this.deltas=At(this.width,this.height,this.depth)):this.height>0&&(this.weights=F(this.width,this.height),this.deltas=kt(this.width,this.height))}get bias(){return this.settings.bias}get biases(){return this.settings.biases}set biases(t){this.settings.biases=t}get biasDeltas(){return this.settings.biases}set biasDeltas(t){this.settings.biasDeltas=t}validate(){if(super.validate(),this.depth>0)throw new Error("depth not supported")}setupKernels(){const{inputLayer:t}=this,e=t.width*t.height*t.depth;t.depth>0?(this.predictKernel=q(Ue,{output:[this.width,this.height],constants:{inputHeight:t.height,inputWidth:t.width,inputDepth:t.depth}}),this.compareFilterDeltasKernel=q(Xe,{output:[e,this.height],constants:{deltaX:0,deltaY:0,inputWidth:t.width,inputHeight:t.height},immutable:!0}),this.compareInputDeltasKernel=q(Ge,{output:[t.width,t.height,t.depth],constants:{filterCount:this.height},immutable:!0})):(this.predictKernel=q(Be,{output:[this.width,this.height],constants:{inputHeight:t.height,inputWidth:t.width}}),this.compareFilterDeltasKernel=q(He,{output:[e,this.height],constants:{deltaX:0,deltaY:0,inputWidth:t.width,inputHeight:t.height}}),this.compareInputDeltasKernel=q(Ke,{output:[t.width,t.height],constants:{filterCount:this.height}})),this.compareBiasesKernel=q(We,{output:[this.width,this.height]})}predict(){this.weights=this.predictKernel(this.inputLayer.weights,this.filters,this.biases)}compare(){const t=this.inputLayer.deltas;this.inputLayer.deltas=this.compareInputDeltasKernel(t,this.deltas,this.filters),Q(t);const{biasDeltas:e,filterDeltas:n}=this;this.biasDeltas=this.compareBiasesKernel(this.biases,this.deltas),this.filterDeltas=this.compareFilterDeltasKernel(n,this.inputLayer.weights,this.deltas),Q(e),Q(n)}}function Ye(t,e){return new qe(t,e)}function Je(t){return-t[this.thread.y][this.thread.x]}class Qe extends It{constructor(t,e){super(t,e),this.validate()}setupKernels(){this.predictKernel=q(Je,{output:[this.width,this.height]})}predict(){this.weights=this.predictKernel(this.inputLayer.weights)}}function Ze(t,e){return new Qe(t,e)}function tn(t,e){return t[this.thread.y][this.thread.x]*e[this.thread.y][this.thread.x]}function en(t,e){return t[this.thread.y][this.thread.x]*e[this.thread.y][this.thread.x]}class nn extends Lt{get width(){return this.inputLayer1.width}get height(){return this.inputLayer1.height}get depth(){return this.inputLayer1.depth}validate(){super.validate(),ae(this.inputLayer1,this.inputLayer2)}setupKernels(){this.predictKernel=q(tn,{output:[this.width,this.height],immutable:!0}),this.compareKernel=q(en,{output:[this.width,this.height],immutable:!0})}predict(){Q(this.weights),this.weights=this.predictKernel(this.inputLayer1.weights,this.inputLayer2.weights)}compare(){Q(this.inputLayer1.deltas),Q(this.inputLayer2.deltas),this.inputLayer1.deltas=this.compareKernel(this.inputLayer2.weights,this.deltas),this.inputLayer2.deltas=this.compareKernel(this.inputLayer1.weights,this.deltas)}}function rn(t,e,n){return new nn(t,e,n)}function an(t){return new Float32Array(t).fill(1)}function sn(t,e){const n=new Array(e);for(let r=0;r<e;r++)n[r]=an(t);return n}class on extends $t{constructor(t){super(t),this.validate(),this.weights=sn(this.width,this.height),this.deltas=kt(this.width,this.height)}}function un(t){return new on(t)}function ln(t){return u(t[this.thread.y][this.thread.x])}function cn(t){return u(t[this.thread.z][this.thread.y][this.thread.x])}function hn(t,e){return l(t[this.thread.y][this.thread.x],e[this.thread.y][this.thread.x])}function pn(t,e){return l(t[this.thread.z][this.thread.y][this.thread.x],e[this.thread.z][this.thread.y][this.thread.x])}class fn extends Et{setupKernels(){this.depth>0?(this.predictKernel=q(cn,{output:[this.width,this.height,this.depth],functions:[u],immutable:!0}),this.compareKernel=q(pn,{output:[this.width,this.height,this.depth],functions:[l],immutable:!0})):(this.predictKernel=q(ln,{output:[this.width,this.height],functions:[u],immutable:!0}),this.compareKernel=q(hn,{output:[this.width,this.height],functions:[l],immutable:!0}))}predict(){Q(this.weights),this.weights=this.predictKernel(this.inputLayer.weights)}compare(){Q(this.inputLayer.deltas),this.inputLayer.deltas=this.compareKernel(this.weights,this.deltas)}}function dn(t,e){return new fn(t,e)}class mn extends $t{constructor(t){super(t),this.validate(),this.weights=kt(this.width,this.height),this.deltas=kt(this.width,this.height)}predict(){}compare(){}}function gn(t){return new mn(t)}function yn(t,e,n){const{height:r}=t,i=he({height:r,width:n.height}),a=he({width:r,height:r}),s=gn({height:r}),o=Se(ue(ue(ge(i,n),ge(a,e)),s)),u=he({height:r,width:n.height}),l=he({width:r,height:r}),c=gn({height:r}),h=Se(ue(ue(ge(u,n),ge(l,e)),c)),p=he({height:r,width:n.height}),f=he({width:r,height:r}),d=gn({height:r}),m=dn(ue(ue(ge(p,n),ge(f,rn(h,e))),d));return ue(rn(ue(un({width:o.width,height:o.height}),Ze(o)),m),rn(e,o))}const vn={weights:null};class bn extends jt{constructor(t){super({...vn,...t}),this.reshapeInput=null,this.validate(),this.reshapeInput=null,this.deltas=kt(this.width,this.height)}setupKernels(){1===this.width&&(this.predict=this.predict1D,this.reshapeInput=q((function(t){return t[this.thread.y]}),{output:[1,this.height],immutable:!0}))}reuseKernels(t){this.reshapeInput=t.reshapeInput}predict(t){if((Array.isArray(t)||t instanceof Float32Array)&&"number"===typeof t[0]&&t.length===this.height*this.width)Q(this.weights),this.weights=J(t,[this.width,this.height]);else{if(!Array.isArray(t)||t.length!==this.height||!(Array.isArray(t[0])||t[0]instanceof Float32Array)||t[0].length!==this.width)throw new Error("Inputs are not of sized correctly");this.weights=tt(t)}}predict1D(t){this.weights&&Q(this.weights),this.reshapeInput?this.weights=this.reshapeInput(t):this.weights=t}compare(){}learn(){}}function xn(t){return new bn(t)}function wn(t){return h(t[this.thread.y][this.thread.x])}function Sn(t){return h(t[this.thread.z][this.thread.y][this.thread.x])}function Tn(t,e){return p(t[this.thread.y][this.thread.x],e[this.thread.y][this.thread.x])}function kn(t,e){return p(t[this.thread.z][this.thread.y][this.thread.x],e[this.thread.z][this.thread.y][this.thread.x])}class An extends Et{setupKernels(){const{width:t,height:e,depth:n}=this.inputLayer;this.depth>0?(this.predictKernel=q(Sn,{output:[t,e,n],functions:[h],immutable:!0}),this.compareKernel=q(kn,{output:[t,e,n],functions:[p],immutable:!0})):(this.predictKernel=q(wn,{output:[t,e],functions:[h],immutable:!0}),this.compareKernel=q(Tn,{output:[t,e],functions:[p],immutable:!0}))}predict(){Q(this.weights),this.weights=this.predictKernel(this.inputLayer.weights)}compare(){const{deltas:t}=this;this.deltas=this.compareKernel(this.weights,t),Q(t)}}function En(t,e){return new An(t,e)}function _n(t,e,n){const{height:r}=t;if("number"!==typeof r)throw new Error("no settings.height given");n.setDimensions&&n.setDimensions(1,r);const i=he({width:e.height,height:r,std:.08,id:"inputGateWeights"}),a=he({width:r,height:r,std:.08,id:"inputGatePeepholes"}),s=gn({width:1,height:r,id:"inputGateBias"}),o=Se(ue(ue(ge(i,e),ge(a,n)),s),{id:"inputGate"}),u=he({width:e.height,height:r,std:.08,id:"forgetGateWeights"}),l=he({width:r,height:r,std:.08,id:"forgetGatePeepholes"}),c=gn({width:1,height:r,id:"forgetGateBias"}),h=Se(ue(ue(ge(u,e),ge(l,n)),c),{id:"forgetGate"}),p=he({width:e.height,height:r,std:.08,id:"outputGateWeights"}),f=he({width:r,height:r,std:.08,id:"outputGatePeepholes"}),d=gn({width:1,height:r,id:"outputGateBias"}),m=Se(ue(ue(ge(p,e),ge(f,n)),d),{id:"outputGate"}),g=he({width:e.height,height:r,std:.08,id:"memoryWeights"}),y=he({width:r,height:r,std:.08,id:"memoryPeepholes"}),v=gn({width:1,height:r,id:"memoryBias"}),b=dn(ue(ue(ge(g,e),ge(y,n)),v),{id:"memory"}),x=rn(h,n,{id:"retainCell"}),w=rn(o,b,{id:"writeCell"});return rn(m,dn(ue(x,w,{id:"cell"})),{id:"activations"})}function On(t,e){const{height:n}=t,r=he({height:n,width:e.height,id:"outputGate",std:.08}),i=he({height:n,id:"output",std:.08}),a=ge(r,e,{id:"outputGateConnected"});return Mt({id:"target",...t},ue(a,i))}function In(t){return t}function Ln(t){return t}function Pn(t){const e=this.thread.x*this.constants.strideX-this.constants.paddingX,n=this.thread.y*this.constants.strideY-this.constants.paddingY,r=e+this.constants.filterWidth,i=n+this.constants.filterHeight,a=Math.max(e,0),s=Math.max(n,0),o=Math.min(r,this.constants.inputWidth),u=Math.min(i,this.constants.inputHeight);let l=t[this.thread.z][s][a];for(let c=s;c<u;c++)for(let e=a;e<o;e++){const n=t[this.thread.z][c][e];n>l&&(l=n)}return l}function Cn(t,e,n){const r=this.thread.x+.5,i=this.thread.y+.5,a=1/this.constants.strideX,s=1/this.constants.strideY,o=Math.max(0,Math.ceil((r-this.constants.filterWidth+this.constants.paddingX)*a)),u=Math.max(0,Math.ceil((i-this.constants.filterHeight+this.constants.paddingY)*s)),l=Math.min(Math.ceil((r+this.constants.paddingX)*a),this.constants.outputWidth),c=Math.min(Math.ceil((i+this.constants.paddingY)*s),this.constants.outputHeight);let h=0;for(let p=u;p<c;p++)for(let r=o;r<l;r++){const i=e[p][r],a=n[p][r];Math.abs(i-this.thread.x)<.1&&Math.abs(a-this.thread.y)<.1&&(h+=t[p][r])}return h}const Dn={padding:0,stride:0,filterWidth:0,filterHeight:0,filterCount:0};class Mn extends _t{constructor(t,e){super(t,e),this.predictKernelMap=null,this.settings={...t,...ke(t,Dn),...Ae(t,Dn)},this.weights=V(this.width,this.height,this.depth),this.deltas=At(this.width,this.height,this.depth),this.validate()}get strideX(){return this.settings.strideX}get strideY(){return this.settings.strideY}get paddingX(){return this.settings.paddingX}get paddingY(){return this.settings.paddingY}get width(){return Math.ceil((this.inputLayer.width+2*this.paddingX-this.filterWidth)/this.strideX+1)}get height(){return Math.floor((this.inputLayer.height+2*this.paddingY-this.filterHeight)/this.strideY+1)}get depth(){return this.settings.filterCount}get filterCount(){return this.settings.filterCount}get switchX(){return this.settings.switchX}set switchX(t){this.settings.switchX=t}get switchY(){return this.settings.switchY}set switchY(t){this.settings.switchY=t}setupKernels(){this.predictKernelMap=Y({switchX:Ln,switchY:In},Pn,{output:[this.width,this.height,this.depth],constants:{inputWidth:this.inputLayer.width,inputHeight:this.inputLayer.height,paddingX:this.paddingX,paddingY:this.paddingY,filterHeight:this.filterHeight,filterWidth:this.filterWidth,strideX:this.strideX,strideY:this.strideY}}),this.compareKernel=q(Cn,{output:[this.inputLayer.width,this.inputLayer.height,this.inputLayer.depth],constants:{inputWidth:this.inputLayer.width,inputHeight:this.inputLayer.height,outputWidth:this.width,outputHeight:this.height,filterWidth:this.filterWidth,filterHeight:this.filterHeight,paddingX:this.paddingX,paddingY:this.paddingY,strideX:this.strideX,strideY:this.strideY}})}predict(){const{result:t,switchX:e,switchY:n}=this.predictKernelMap(this.inputLayer.weights);this.switchX=e,this.switchY=n,this.weights=t}compare(){const t=this.inputLayer.deltas;this.inputLayer.deltas=this.compareKernel(this.deltas,this.switchX,this.switchY),Q(t)}}function Nn(t,e){return new Mn(t,e)}class jn extends Ot{constructor(t){super(),this.praxis=null,this.predictKernel=null,this.compareKernel=null,this.settings={},this.recurrentInput=t,this.validate()}get width(){return this.recurrentInput.width}get height(){return this.recurrentInput.height}get depth(){return this.recurrentInput.depth}get deltas(){return this.recurrentInput.deltas}set deltas(t){const e=this.recurrentInput.deltas;this.recurrentInput.deltas=t,Q(e)}get weights(){return this.recurrentInput.weights}set weights(t){const e=this.recurrentInput.weights;this.recurrentInput.weights=t,Q(e)}validate(){if(St.prototype.validate.call(this),this.width!==this.recurrentInput.width)throw new Error(`${this.constructor.name} layer width ${this.width} and ${this.recurrentInput.constructor.name} width (${this.recurrentInput.width}) are not same`);if(this.height!==this.recurrentInput.height)throw new Error(`${this.constructor.name} layer height ${this.height} and ${this.recurrentInput.constructor.name} width (${this.recurrentInput.height}) are not same`)}setDimensions(t,e){this.recurrentInput.width=t,this.recurrentInput.height=e}predict(){}compare(){}learn(){}setupKernels(){}reuseKernels(){}}class $n extends Ot{constructor(t){super(),this.praxis=null,this.settings={},this.predictKernel=null,this.compareKernel=null,t&&(this.settings={...t})}setDimensions(t,e){this.praxis=null,this.settings={...this.settings,width:t,height:e,weights:kt(t,e),deltas:kt(t,e)}}setupKernels(){}reuseKernels(){}predict(){}compare(){}learn(t){const{weights:e}=this;this.weights=this.praxis.run(this,t),Q(e)}}function Rn(){return new $n}function zn(t){return e(t[this.thread.y][this.thread.x])}function Fn(t,e){return r(t[this.thread.y][this.thread.x],e[this.thread.y][this.thread.x])}function Vn(t){return e(t[this.thread.z][this.thread.y][this.thread.x])}function Bn(t,e){return r(t[this.thread.z][this.thread.y][this.thread.x],e[this.thread.z][this.thread.y][this.thread.x])}class Un extends Et{setupKernels(){const{width:t,height:n,depth:i}=this.inputLayer;i>0?(this.predictKernel=q(Vn,{output:[t,n,i],functions:[e],immutable:!0}),this.compareKernel=q(Bn,{output:[t,n,i],functions:[r],immutable:!0})):(this.predictKernel=q(zn,{output:[t,n],functions:[e],immutable:!0}),this.compareKernel=q(Fn,{output:[t,n],functions:[r],immutable:!0}))}predict(){Q(this.weights),this.weights=this.predictKernel(this.inputLayer.weights)}compare(){Q(this.inputLayer.deltas),this.inputLayer.deltas=this.compareKernel(this.weights,this.deltas)}}function Kn(t,e){return new Un(t,e)}function Gn(t,e,n){const{height:r}=t;if("number"!==typeof r)throw new Error("height not set");n.setDimensions&&n.setDimensions(1,r);const i=he({id:"weight",height:r,width:e.height,std:.08}),a=he({id:"transition",height:r,width:r,std:.08}),s=gn({id:"bias",height:r});return Kn(ue(ue(ge(i,e),ge(a,n)),s))}class Wn extends St{constructor(t,e){super(t),this.inputLayer=e,this.validate()}predict(){Q(this.weights),this.weights=tt(this.inputLayer.weights)}learn(){}}function Hn(t,e){return new Wn(t,e)}function Xn(t){let e=-1/0;for(let n=0;n<this.constants.inputHeight;n++)for(let r=0;r<this.constants.inputWidth;r++){const i=t[n][r];i>e&&(e=i)}return e}function qn(t){let e=-1/0;for(let n=0;n<this.constants.inputDepth;n++)for(let r=0;r<this.constants.inputHeight;r++)for(let i=0;i<this.constants.inputWidth;i++){const a=t[n][r][i];a>e&&(e=a)}return e}function Yn(t){let e=0;for(let n=0;n<this.constants.inputHeight;n++)for(let r=0;r<this.constants.inputWidth;r++)e+=t[n][r];return e}function Jn(t){let e=0;for(let n=0;n<this.constants.inputDepth;n++)for(let r=0;r<this.constants.inputHeight;r++)for(let i=0;i<this.constants.inputWidth;i++)e+=t[n][r][i];return e}function Qn(t,e){return Math.exp(t[this.thread.x]-e[0])}function Zn(t,e){return Math.exp(t[this.thread.z][this.thread.y][this.thread.x]-e[0])}function tr(t,e){return t[this.thread.y][this.thread.x]/e[0]}function er(t,e){return t[this.thread.z][this.thread.y][this.thread.x]/e[0]}function nr(t,e){let n=0;return this.thread.x+this.thread.y*this.output.x===t&&(n=1),-(n-e[this.thread.y][this.thread.x])}function rr(t,e){let n=0;return this.thread.x+this.thread.y*this.output.x+this.thread.z*this.output.x*this.output.y===t&&(n=1),-(n-e[this.thread.z][this.thread.y][this.thread.x])}class ir extends It{constructor(t,e){super(t,e),this.errors=null,this.getExponentialsKernel=null,this.getMaxValueKernel=null,this.getSumKernel=null,this.validate(),this.depth>0?(this.weights=V(this.width,this.height,this.depth),this.deltas=At(this.width,this.height,this.depth)):this.height>0?(this.weights=F(this.width,this.height),this.deltas=kt(this.width,this.height)):(this.weights=z(this.width),this.deltas=B(this.width))}setupKernels(){const{width:t,height:e,depth:n}=this;n>0?(this.getExponentialsKernel=q(Zn,{output:[t,e,n]}),this.getMaxValueKernel=q(qn,{output:[1,1,1],constants:{inputWidth:t,inputHeight:e,inputDepth:n}}),this.getSumKernel=q(Jn,{output:[1,1,1],constants:{inputWidth:t,inputHeight:e,inputDepth:n}}),this.predictKernel=q(er,{output:[t,e,n]}),this.compareKernel=q(rr,{output:[t,e,n],immutable:!0})):(this.getExponentialsKernel=q(Qn,{output:[t,e]}),this.getMaxValueKernel=q(Xn,{output:[1,1],constants:{inputWidth:t,inputHeight:e}}),this.getSumKernel=q(Yn,{output:[1,1],constants:{inputWidth:t,inputHeight:e}}),this.predictKernel=q(tr,{output:[t,e]}),this.compareKernel=q(nr,{output:[t,e],immutable:!0}))}predict(){const t=this.getMaxValueKernel(this.inputLayer.weights),e=this.getExponentialsKernel(this.inputLayer.weights,t),n=this.getSumKernel(e);this.weights=this.predictKernel(e,n)}compare(t){const{deltas:e,errors:n}=this;this.errors=this.compareKernel(t[0],e),this.deltas=tt(this.errors),Q(e),Q(n);const r=this.inputLayer.deltas;this.inputLayer.deltas=tt(this.deltas),Q(r)}}function ar(t,e){return new ir(t,e)}class sr extends St{constructor(t,e){super(e),this.inputLayer=t}predict(){Q(this.weights),this.weights=tt(this.inputLayer.weights),this.validate()}learn(){}}function or(t,e){return new sr(t,e)}function ur(t){return t[this.thread.x][this.thread.y]}const lr=ur;class cr extends It{get width(){return this.inputLayer.height}get height(){return this.inputLayer.width}constructor(t){super(t),this.validate()}setupKernels(){this.predictKernel=q(ur,{output:[this.height,this.width]}),this.compareKernel=q(lr,{output:[this.width,this.height]})}predict(){this.weights=this.predictKernel(this.inputLayer.weights)}compare(){this.inputLayer.deltas=this.compareKernel(this.deltas)}}function hr(t){return new cr(t)}const pr={Activation:Et,Internal:Ot,InternalModel:Nt,EntryPoint:jt,Filter:_t,Model:$t,Modifier:It,Operator:Lt,Target:Dt};var fr=Object.freeze({__proto__:null,layerTypes:pr,Add:oe,add:ue,arthurFeedForward:Te,BaseLayer:St,baseLayerDefaultSettings:wt,Convolution:Ce,convolution:De,Dropout:ze,dropout:Fe,feedForward:Ve,FullyConnected:qe,fullyConnected:Ye,gru:yn,Input:bn,input:xn,LeakyRelu:An,leakyRelu:En,lstmCell:_n,Multiply:me,multiply:ge,MultiplyElement:nn,multiplyElement:rn,Negative:Qe,negative:Ze,Ones:on,ones:un,output:On,Pool:Mn,pool:Nn,Random:ce,random:he,RecurrentInput:jn,RecurrentZeros:$n,rnnCell:Gn,Regression:Wn,regression:Hn,Relu:Un,relu:Kn,Sigmoid:we,sigmoid:Se,SoftMax:ir,softMax:ar,SVM:sr,svm:or,Tanh:fn,tanh:dn,Target:Dt,target:Mt,Transpose:cr,transpose:hr,Zeros:mn,zeros:gn});const dr=Object.keys(fr);function mr(t,e,n){if(!dr.find((e=>e===t.type)))return null;const r=fr[t.type];if(r.prototype instanceof pr.Filter){if(!e)throw new Error("inputLayer missing");return new r(t,e)}if(r.prototype instanceof pr.Activation||r.prototype instanceof pr.Modifier){if(!e)throw new Error("inputLayer missing");return new r(e,t)}if(r.prototype instanceof pr.Internal)return new r(t);if(r.prototype instanceof pr.Operator){if(!e)throw new Error("inputLayer1 missing");if(!n)throw new Error("inputLayer2 missing");return new r(e,n,t)}if(r.prototype instanceof pr.InternalModel||r.prototype instanceof pr.EntryPoint||r.prototype instanceof pr.Model)return new r(t);if(r===Dt){if(!e)throw new Error("inputLayer missing");return new r(t,e)}return null}const gr={learningRate:.3,binaryThresh:.5,initPraxis:(t,e)=>{var n;return Zt(t,null!==(n=t.settings.praxisOpts)&&void 0!==n?n:e)}},yr={iterations:2e4,errorThresh:.005,log:!1,logPeriod:10,learningRate:.3,callbackPeriod:10,errorCheckInterval:100,timeout:1/0};class vr{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.trainOpts={},this.layers=null,this._inputLayer=null,this._hiddenLayers=null,this._outputLayer=null,this._model=null,this.meanSquaredError=null,this.inputLookup=null,this.inputLookupLength=null,this.outputLookup=null,this.outputLookupLength=null,this.options={...gr,...t},this._updateTrainingOptions({...yr,...t})}static _validateTrainingOptions(t){const{iterations:e,errorThresh:n,log:r,logPeriod:i,learningRate:a,callback:s,callbackPeriod:o,timeout:u}=t,l={iterations:()=>"number"===typeof e&&e>0,errorThresh:()=>"number"===typeof n&&n>0&&n<1,log:()=>"function"===typeof r||"boolean"===typeof r,logPeriod:()=>"number"===typeof i&&i>0,learningRate:()=>"number"===typeof a&&a>0&&a<1,callback:()=>"function"===typeof s||null===s,callbackPeriod:()=>"number"===typeof o&&o>0,timeout:()=>"number"===typeof u&&u>0};Object.keys(yr).forEach((e=>{if(l.hasOwnProperty(e)&&!l[e]()){const n=t[e];throw new Error(`[${e}, ${(null!==n&&void 0!==n?n:"undefined").toString()}] is out of normal training range, your network will probably not train.`)}}))}_setLogMethod(t){this.trainOpts.log="function"===typeof t?t:!!t&&console.log}_updateTrainingOptions(t){var e;this.trainOpts={...yr,...this.trainOpts,...t},vr._validateTrainingOptions(this.trainOpts),this._setLogMethod(null!==(e=t.log)&&void 0!==e?e:this.trainOpts.log);const{callback:n,callbackPeriod:r,errorCheckInterval:i}=this.trainOpts;n&&r!==i&&console.warn(`options.callbackPeriod with value of ${(null!==r&&void 0!==r?r:"undefined").toString()} does not match options.errorCheckInterval with value of ${(null!==i&&void 0!==i?i:"undefined").toString()}, if logging error, it will repeat.  These values may need to match`)}_connectOptionsLayers(){const{inputLayerIndex:t,outputLayerIndex:e,layers:n}=this.options;if(!n)throw new Error("this.options.layers in unexpected state");if("number"!==typeof t)throw new Error("inputLayerIndex not a number");if("number"!==typeof e)throw new Error("inputLayerIndex not a number");const r=n[t];if(!r)throw new Error("inputLayer not found in this.options.layers");const i=n[e];if(!i)throw new Error("outputLayer not found in this.options.layers");return this._inputLayer=r,this._hiddenLayers=n.slice(t,e-t),this._outputLayer=i,n}_connectNewLayers(){const{inputLayer:t,outputLayer:e}=this.options;if(!t)throw new Error("inputLayer not defined");const n=[];this._inputLayer=t();const r=this._connectHiddenLayers(this._inputLayer);if(!e)throw new Error("outputLayer not defined");return this._outputLayer=e(r[r.length-1],r.length),n.push(this._inputLayer),n.push(...r),n.push(this._outputLayer),ie(n)}_connectHiddenLayers(t){this._hiddenLayers=[];const e=[],{hiddenLayers:n}=this.options;if(!n)throw new Error("hiddenLayers not defined");for(let r=0;r<n.length;r++){const i=n[r](t,r);e.push(i),this._hiddenLayers.push(i),t=i}return e}initialize(){this.layers=this.options.layers?this._connectOptionsLayers():this._connectNewLayers(),this.initializeLayers(this.layers),this._model=this.layers.filter((t=>t instanceof $t))}initializeLayers(t){var e,n;for(let i=0;i<t.length;i++){const r=t[i];r.setupKernels(!0),r instanceof $t&&null===r.praxis&&"function"===typeof this.options.initPraxis&&(r.praxis=this.options.initPraxis(r,null!==(n=null!==(e=r.settings.praxisOpts)&&void 0!==e?e:this.options.praxisOpts)&&void 0!==n?n:{}),r.praxis.setupKernels())}const r=t[t.length-1];this.meanSquaredError=new xt({width:r.width,height:r.height})}run(t){let e;if(Array.isArray(t)||t.buffer)e=t;else{if(!this.inputLookup)throw new Error("input is incompatible with net");e=b.toArray(this.inputLookup,t,this.inputLookupLength)}let n=this.runInput(e);return n instanceof v.Texture&&(n=n.toArray()),this.outputLookup?b.toObject(this.outputLookup,n):n}runInput(t){if(!this.layers)throw new Error("not initialized");this.layers[0].predict(t);for(let e=1;e<this.layers.length;e++)this.layers[e].predict();return this.layers[this.layers.length-1].weights}train(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{preparedData:n,status:r,endTime:i}=this._prepTraining(t,e);let a=!0;const s=()=>this._calculateTrainingError(n),o=()=>this._trainPatterns(n);for(;a;)a=this._trainingTick(r,i,s,o);return r}async trainAsync(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{preparedData:n,status:r,endTime:i}=this._prepTraining(t,e);return await new Promise(((t,e)=>{try{const e=()=>this._calculateTrainingError(n),a=()=>this._trainPatterns(n),s=new x.Thaw(new Array(this.trainOpts.iterations),{delay:!0,each:()=>this._trainingTick(r,i,e,a)||s.stop(),done:()=>t(r)});s.tick()}catch(a){e(a)}}))}_trainingTick(t,e,n,r){const{trainOpts:i}=this;return!(t.iterations>=i.iterations||t.error<=i.errorThresh||Date.now()>=e)&&("function"===typeof i.log&&t.iterations%i.logPeriod===0?(t.error=n(),i.log(`iterations: ${t.iterations}, training error: ${t.error}`)):t.iterations%i.errorCheckInterval===0?t.error=n():r(),i.callback&&t.iterations%i.callbackPeriod===0&&i.callback(Object.assign(t)),t.iterations++,!0)}_prepTraining(t,e){this._updateTrainingOptions(e);const n=this.formatData(t),r=this.trainOpts.timeout?Date.now()+this.trainOpts.timeout:0,i={error:1,iterations:0};return this.verifyIsInitialized(),{preparedData:this.transferData(n),status:i,endTime:r}}verifyIsInitialized(){this._model||this.initialize()}_calculateTrainingError(t){let e=new Float32Array([0]);const n=this.meanSquaredError;for(let i=0;i<t.length;++i){const r=e,a=this._trainPattern(t[i].input,t[i].output,!0);e=n.add(e,a),Q(a),Q(r)}const r=n.divide(t.length,e);if(Q(e),r instanceof v.Texture){const t=r.toArray();return Q(r),t[0]}return r[0]}_trainPatterns(t){for(let e=0;e<t.length;++e)this._trainPattern(t[e].input,t[e].output,!1)}_trainPattern(t,e,n){var r;if(this.runInput(t),this._calculateDeltas(e),this.adjustWeights(),n){if(!(null===(r=this._outputLayer)||void 0===r?void 0:r.errors))throw new Error("outputLayer.errors not defined");return this.meanSquaredError.calculate(this._outputLayer.errors)}return null}_calculateDeltas(t){const e=this.layers;for(let n=e.length-1;n>-1;n--)e[n].compare(t)}adjustWeights(){const t=this._model;for(let e=0;e<t.length;e++)t[e].learn(this.trainOpts.learningRate)}formatData(t){if(!Array.isArray(t)){const e=[];e.push(t),t=e}const e=t[0].input;let n;if(!Array.isArray(t)||Array.isArray(e)||e instanceof Float32Array)n=t;else{if(!this.inputLookup){const e=new L(t,"input");this.inputLookup=e.table,this.inputLookupLength=e.length}n=t.map((t=>({input:b.toArray(this.inputLookup,t.input,this.inputLookupLength)})),this)}const r=t[0].output;if(!Array.isArray(r)&&!(r instanceof Float32Array)){if(!this.outputLookup){const e=new L(t,"output");this.outputLookup=e.table,this.outputLookupLength=e.length}n=t.map(((t,e)=>{const r=b.toArray(this.outputLookup,t.output,this.inputLookupLength);return{input:n[e].input,output:r}}),this)}return n}transferData(t){const e=new Array(t.length),n=q((function(t){return t[this.thread.x]}),{output:[t[0].input.length],immutable:!0}),r=q((function(t){return t[this.thread.x]}),{output:[t[0].output.length],immutable:!0});for(let i=0;i<t.length;i++){const a=t[i];e[i]={input:n(a.input),output:r(a.output)}}return e}test(){throw new Error(`${this.constructor.name}-test is not yet implemented`)}toJSON(){var t;if(this.layers||this.initialize(),!this._model||!this.layers||!this._inputLayer||!this._hiddenLayers||!this._outputLayer)throw new Error("network is not initialized");const e=[];for(let n=0;n<this.layers.length;n++){const t=this.layers[n],r=t.toJSON();t.hasOwnProperty("inputLayer")?r.inputLayerIndex=this.layers.indexOf(t.inputLayer):t.hasOwnProperty("inputLayer1")&&t.hasOwnProperty("inputLayer2")&&(r.inputLayer1Index=this.layers.indexOf(t.inputLayer1),r.inputLayer2Index=this.layers.indexOf(t.inputLayer2)),e.push(r)}return{type:this.constructor.name,sizes:null!==(t=this.options.sizes)&&void 0!==t?t:[this._inputLayer.height].concat(this._hiddenLayers.map((t=>t.height))).concat([this._outputLayer.height]),outputLayerIndex:this.layers.indexOf(this._outputLayer),layers:e,inputLayerIndex:this.layers.indexOf(this._inputLayer)}}static fromJSON(t,e){var n,r,i,a;const s=t.layers,o=[],u=e?null!==(n=mr(s[0]))&&void 0!==n?n:e(s[0]):mr(s[0]);if(!u)throw new Error("unable to find layer");o.push(u);for(let l=1;l<s.length;l++){const t=s[l];if("undefined"===typeof t.inputLayerIndex&&"undefined"===typeof t.inputLayer1Index&&"undefined"===typeof t.inputLayer2Index){const n=e?null!==(r=mr(t))&&void 0!==r?r:e(t):mr(t);if(!n)throw new Error("unable to find layer");o.push(n)}else if("number"===typeof t.inputLayerIndex){const n=o[t.inputLayerIndex];if(!n)throw new Error("inputLayer1 not found");const r=e?null!==(i=mr(t,n))&&void 0!==i?i:e(t,n):mr(t,n);if(!r)throw new Error("unable to find layer");o.push(r)}else{if("number"!==typeof t.inputLayer1Index)throw new Error("Cannot create network from provided JSON. inputLayer1Index not defined.");if("number"!==typeof t.inputLayer2Index)throw new Error("Cannot create network from provided JSON. inputLayer2Index not defined.");const n=o[t.inputLayer1Index],r=o[t.inputLayer2Index];if(void 0===n)throw new Error(`Cannot create network from provided JSON. layer of index ${t.inputLayer1Index} not found.`);if(void 0===r)throw new Error(`Cannot create network from provided JSON. layer of index ${t.inputLayer2Index} not found.`);const i=e?null!==(a=mr(t,n,r))&&void 0!==a?a:e(t,n,r):mr(t,n,r);if(!i)throw new Error("unable to find layer");o.push(i)}}return new this({...t,layers:o})}toFunction(){throw new Error(`${this.constructor.name}-toFunction is not yet implemented`)}}function br(t,e){if(!e)throw new TypeError(`Required parameter 'net' is of type ${typeof e}. Must be of type 'brain.NeuralNetwork'`);const n=e.run(t);let r=null,i=-1;return Object.entries(n).forEach((t=>{let[e,n]=t;"undefined"!==typeof n&&"number"===typeof n&&n>i&&(r=e,i=n)})),r}class xr extends Ot{constructor(){super(...arguments),this.settings={},this.layer=null}setLayer(t){this.layer=t}get width(){if(!this.layer)throw new Error("layer not set");return this.layer.width}set width(t){throw new Error(`${this.constructor.name}-width is not yet implemented`)}get height(){if(!this.layer)throw new Error("layer not set");return this.layer.height}set height(t){throw new Error(`${this.constructor.name}-height is not yet implemented`)}get deltas(){if(!this.layer)throw new Error("layer not set");return this.layer.deltas}set deltas(t){if(!this.layer)throw new Error("layer not set");Q(this.layer.deltas),this.layer.deltas=t}get weights(){if(!this.layer)throw new Error("layer not set");return this.layer.weights}set weights(t){if(!this.layer)throw new Error("layer not set");Q(this.layer.weights),this.layer.weights=t}predict(){}compare(){}learn(){throw new Error("no longer using")}setupKernels(){}reuseKernels(){}}class wr extends vr{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.trainOpts={},this._outputConnection=null,this._layerSets=[],this._hiddenLayerOutputIndices=[],this._model=null}_connectLayers(){if(!this.options.inputLayer)throw new Error("inputLayer not found");if(!this.options.outputLayer)throw new Error("outputLayer not found");const t=this.options.inputLayer(),e=this._connectHiddenLayers(t);return{inputLayer:t,hiddenLayers:e,outputLayer:this.options.outputLayer(e[e.length-1],-1)}}_connectLayersDeep(){const t=[],e=this._layerSets[this._layerSets.length-1];let n=0;function r(n){const r=e.indexOf(n);if(r<0)throw new Error("unable to find layer");return t[r]}function i(t){return{...t.settings,weights:null,deltas:null,praxis:null}}for(let a=0;a<e.length;a++){const s=e[a];let o;if(s instanceof Et)o=new s.constructor(r(s.inputLayer),i(s));else if(s instanceof jt)o=new s.constructor(i(s));else if(s instanceof _t)o=new s.constructor(i(s.inputLayer),r(s.inputLayer));else if(s instanceof Ot){const t=e[this._hiddenLayerOutputIndices[n++]];if(s instanceof xr)throw new Error("unfinished");if(s instanceof jn)o=new jn(t);else{if(!(s instanceof $n))throw new Error(`hidden layer ${s.constructor.name} extends unknown hidden layer`);o=new jn(t)}}else if(s instanceof Nt||s instanceof $t)o=s;else if(s instanceof It)o=new s.constructor(r(s.inputLayer),i(s.inputLayer));else if(s instanceof Lt)o=new s.constructor(r(s.inputLayer1),r(s.inputLayer2),i(s));else{if(!(s instanceof Dt))throw new Error(`hidden layer ${s.constructor.name} extends unknown hidden layer`);o=new s.constructor(i(s),r(s.inputLayer))}t.push(o)}return t}_connectHiddenLayers(t){const e=[];if(!this.options.hiddenLayers)throw new Error("hiddenLayers not defined");for(let n=0;n<this.options.hiddenLayers.length;n++){const r=new $n,i=this.options.hiddenLayers[n](t,r,n);t=i,e.push(i)}return e}initialize(){let t;if(this._outputConnection=new xr,this.options.layers)t=this._connectOptionsLayers();else{const{inputLayer:e,hiddenLayers:n,outputLayer:r}=this._connectLayers();t=ie([e,...n,r]),this._hiddenLayerOutputIndices=n.map((e=>t.indexOf(e))),this._inputLayer=e,this._hiddenLayers=n,this._outputLayer=r}this.layers=t,this._layerSets=[t],this._model=t.filter((t=>t instanceof $t||t instanceof Nt)),this.initializeLayers(t)}initializeDeep(){const t=this._connectLayersDeep();for(let e=0;e<t.length;e++){const n=t[e];n.setupKernels(!0),n.reuseKernels(this._layerSets[0][e])}this._layerSets.push(t)}run(t){for(;this._layerSets.length<=t.length;)this.initializeDeep();const e=this.runInputs(t);return e instanceof v.Texture?e.toArray():e}runInput(t){throw new Error("use .runInputs()")}runInputs(t){for(;this._layerSets.length<t.length;)this.initializeDeep();const e=t.length-1;for(let i=0;i<=e;i++){const e=this._layerSets[i];e[0].predict(t[i]);for(let t=1;t<e.length;t++)e[t].predict()}const n=this._layerSets[e],r=n[n.length-1].weights;return this.end(),r}train(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{preparedData:n,status:r,endTime:i}=this._prepTraining(t,e);let a=!0;const s=()=>this._calculateTrainingError(n),o=()=>this._trainPatterns(n);for(;a;)a=this._trainingTick(r,i,s,o);return r}end(){const t=this._layerSets.length-1,e=this._layerSets[t];e[0].predict([new Float32Array([0])]);for(let n=1;n<e.length;n++)e[n].predict()}transferData(t){return t}_prepTraining(t,e){this._updateTrainingOptions(e);const n=this.trainOpts.timeout?Date.now()+this.trainOpts.timeout:0,r={error:1,iterations:0};return this.verifyIsInitialized(),{preparedData:this.transferData(t),status:r,endTime:n}}_calculateTrainingError(t){if(!this.meanSquaredError)throw new Error("this.meanSquaredError not setup");let e=new Float32Array(1);for(let r=0;r<t.length;++r){const n=e,i=this._trainPattern(t[r],!0);e=this.meanSquaredError.add(e,i),Q(i),Q(n)}const n=this.meanSquaredError.divide(t.length,e);return Q(e),n instanceof v.Texture?n.toArray()[0]:n[0]}formatData(t){return t}_calculateDeltas(t){const e=this._layerSets[this._layerSets.length-1];for(let n=e.length-2;n>=0;n--)e[n].compare();for(let n=t.length-2;n>=0;n--){const e=this._layerSets[n];e[e.length-1].compare(t[n+1]);for(let t=e.length-2;t>=0;t--)e[t].compare()}}adjustWeights(){var t;const e=this._model;for(let n=0;n<e.length;n++)e[n].learn(null!==(t=this.options.learningRate)&&void 0!==t?t:0)}_trainPatterns(t){for(let e=0;e<t.length;++e)this._trainPattern(t[e],!1)}_trainPattern(t,e){if(this.runInputs(t),this._calculateDeltas(t),this.adjustWeights(),e){if(!this.meanSquaredError)throw new Error("this.meanSquaredError not setup");let e=new Float32Array(1);for(let n=0,r=t.length-2;n<=r;n++){const t=this._layerSets[n],r=t[t.length-1],i=e;e=this.meanSquaredError.addAbsolute(i,r.errors),Q(i)}return tt(this.meanSquaredError.divide(t.length,e))}return null}}class Sr{constructor(t,e){this.rows=0,this.columns=0,t&&(this.rows=t),e&&(this.columns=e),this.weights=B(this.rows*this.columns),this.deltas=B(this.rows*this.columns)}getWeight(t,e){const n=this.columns*t+e;if(n<0||n>=this.weights.length)throw new Error("get accessor is skewed");return this.weights[n]}setWeight(t,e,n){const r=this.columns*t+e;if(r<0||r>=this.weights.length)throw new Error("set accessor is skewed");return this.weights[r]=n,this}getDelta(t,e){const n=this.columns*t+e;if(n<0||n>=this.deltas.length)throw new Error("get accessor is skewed");return this.deltas[n]}setDelta(t,e,n){const r=this.columns*t+e;if(r<0||r>=this.weights.length)throw new Error("set accessor is skewed");return this.deltas[r]=n,this}toJSON(){return{rows:this.rows,columns:this.columns,weights:Array.from(this.weights.slice(0))}}static fromJSON(t){const e=new Sr(t.rows,t.columns);for(let n=0,r=t.rows*t.columns;n<r;n++)e.weights[n]=t.weights[n];return e}static fromArray(t){const e=new Sr(t.length,t[0].length);return e.fromArray(t),e}deltasToArray(){return this.toArray("deltas")}weightsToArray(){return this.toArray("weights")}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"weights";const e=new Array(this.rows);return this.iterate({row:t=>{e[t]=new Array(this.columns)},column:(n,r)=>{"weights"===t?e[n][r]=this.getWeight(n,r):"deltas"===t&&(e[n][r]=this.getDelta(n,r))}}),e}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"weights";if(t.length!==this.rows)throw new Error("rows do not match");if(t[0].length!==this.columns)throw new Error("columns do not match");return this.iterate({column:(n,r)=>{const i=t[n][r];if("number"!==typeof i)throw new Error("value not number");"weights"===e?this.setWeight(n,r,i):"deltas"===e&&this.setDelta(n,r,i)}}),this}iterate(t){const e=this.rows,n=this.columns;for(let r=0;r<e;r++){t.row&&t.row(r);for(let e=0;e<n;e++)t.column&&t.column(r,e)}return this}}class Tr extends Sr{constructor(t,e,n){super(t,e),this.std=n;for(let r=0,i=this.weights.length;r<i;r++)this.weights[r]=M(-n,n)}}class kr{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.values=t,this.indexTable={},this.characterTable={},this.characters=[],this.specialIndexes=[],this.isSetup=!1,void 0!==t&&this.setup(t,e)}setup(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.isSetup)throw new Error("DataFormatter is already setup");this.values=t,this.buildCharactersFromIterable(t),this.buildTables(e),t[0].input&&this.addInputOutput(),this.addUnrecognized(),this.isSetup=!0}buildCharactersFromIterable(t){const e={};for(let n=0,r=t.length;n<r;n++){const r=t[n];if(r.hasOwnProperty("length")){const t=r;for(let n=0,r=t.length;n<r;n++){const r=t[n];e.hasOwnProperty(r)||(e[r]=!0,this.characters.push(r))}}else if("number"===typeof r){if(e.hasOwnProperty(r))continue;e[r]=!0,this.characters.push(r)}else if("boolean"===typeof r){const t=r.toString();if(e.hasOwnProperty(t))continue;e[t]=!0,this.characters.push(t)}else if(Array.isArray(r)&&"string"===typeof r[0])for(let t=0;t<r.length;t++){const n=r[t];e.hasOwnProperty(n)||(e[n]=!0,this.characters.push(n))}else if(!Array.isArray(r)||"number"!==typeof r[0]&&"boolean"!==typeof r[0]){if(!r.hasOwnProperty("input")||!r.hasOwnProperty("output"))throw new Error("Unhandled value");{const{input:t,output:n}=r;Array.isArray(t)?this.addCharacters(t,e):this.addCharacters(t.toString(),e),Array.isArray(n)?this.addCharacters(n,e):this.addCharacters(n.toString(),e)}}else for(let t=0;t<r.length;t++){const i=r[t].toString();e.hasOwnProperty(n)||(e[i]=!0,this.characters.push(i))}}}addCharacters(t,e){for(let n=0;n<t.length;n++){const r=t[n].toString();e.hasOwnProperty(r)||(e[r]=!0,this.characters.push(r))}}buildTables(t){const e=this.characters.length;for(let n=0;n<e;n++){const e=this.characters[n];n>=t&&(this.indexTable[e]=n,this.characterTable[n]=e)}}toIndexes(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=[],{indexTable:r}=this;switch(typeof t){case"number":case"boolean":t=t.toString()}for(let i=0,a=t.length;i<a;i++){const a=t[i].toString();let s=r[a];if(void 0===s){if(!r.unrecognized)throw new Error(`unrecognized character "${a}"`);s=r.unrecognized}s<e||n.push(s)}return n}toIndexesInputOutput(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.toIndexesValue(t,n,!0);return"undefined"===typeof e?r:r.concat(this.toIndexesValue(e,n,!1))}toIndexesValue(t,e,n){if("string"===typeof t)t=t.split("");else if("number"===typeof t||"boolean"===typeof t)t=t.toString().split("");else{if(!Array.isArray(t)||"number"!==typeof t[0]&&"boolean"!==typeof t[0]&&"string"!==typeof t[0])throw new Error("unrecognized value");t=t.map((t=>t.toString()))}return n&&(t=t.concat(["stop-input","start-output"])),this.toIndexes(t,e)}toCharacters(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=[],{indexTable:r,characterTable:i}=this;for(let a=0,s=t.length;a<s;a++){const s=t[a];if(s<e)continue;let o=i[s];if(void 0===o){if(!r.unrecognized)throw new Error(`unrecognized index "${s}"`);o=i[r.unrecognized]}else null!==o&&n.push(o.toString())}return n}toString(t,e){return this.toCharacters(t,e).join("")}addInputOutput(){this.addSpecial("stop-input"),this.addSpecial("start-output")}addUnrecognized(){this.addSpecial("unrecognized")}static fromAllPrintable(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["\n"];for(let n=32;n<=126;n++)e.push(String.fromCharCode(n));return new kr(e,t)}static fromAllPrintableInputOutput(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["\n"];const n=kr.fromAllPrintable(t,e);return n.addInputOutput(),n.addUnrecognized(),n}static fromStringInputOutput(t,e){const n=Array.from(new Set(t)).join(""),r=new kr(n.split(""),e);return r.addInputOutput(),r.addUnrecognized(),r.isSetup=!0,r}static fromArrayInputOutput(t,e){const n=[];for(let a=0;a<t.length;a++){const e=t[a];n.push(Ar(e.input),Ar(e.output))}const r=Array.isArray(n)?n.flat():n,i=new kr(Array.from(new Set(r)),e);return i.addInputOutput(),i.addUnrecognized(),i.isSetup=!0,i}static fromString(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Array.from(new Set(t)).join("");return new kr(n.split(""),e)}toJSON(){return{indexTable:this.indexTable,characterTable:this.characterTable,values:this.values,characters:this.characters,specialIndexes:this.specialIndexes}}static fromJSON(t){const e=new kr;return e.indexTable=t.indexTable,e.characterTable=t.characterTable,e.values=t.values,e.characters=t.characters,e.specialIndexes=t.specialIndexes,e.isSetup=!0,e}addSpecial(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.indexTable[t]=this.characters.length;this.characterTable[n]=e,this.specialIndexes.push(this.characters.length),this.characters.push(t)}toFunctionString(){return`\nvar characterTable = ${JSON.stringify(this.characterTable)};\nvar indexTable = ${JSON.stringify(this.indexTable)};\nvar characters = ${JSON.stringify(this.characters)};\nvar dataFormatter = {\n  toIndexes: function ${this.toIndexes.toString()},\n  toIndexesInputOutput: function ${this.toIndexesInputOutput.toString()},\n  toCharacters: function ${this.toCharacters.toString()},\n  toIndexesValue: function ${this.toIndexesValue.toString()},\n};`}formatDataIn(t,e){var n;return void 0===t?[]:Array.isArray(t)&&"number"===typeof t[0]?t:(null===(n=this.indexTable)||void 0===n?void 0:n.hasOwnProperty("stop-input"))?this.toIndexesInputOutput(t,e):this.toIndexes(t)}formatDataOut(t,e){return this.toCharacters(e).join("")}format(t){if("number"===typeof t[0]&&!Array.isArray(t[0])&&(!t[0].hasOwnProperty("input")||!t[0].hasOwnProperty("output")))return t;const e=[];if("string"===typeof t[0]||"number"===typeof t[0]||Array.isArray(t[0]))if(this.isSetup)for(let n=0,r=t.length;n<r;n++)e.push(this.formatDataIn(t[n]));else{this.setup(t);for(let n=0;n<t.length;n++)e.push(this.formatDataIn(Ar(t[n])))}else{if(!t[0].input||!t[0].output)throw new Error("unrecognized data");this.isSetup||this.setup(t);for(let n=0,r=t.length;n<r;n++)e.push(this.formatDataIn(Ar(t[n].input),Ar(t[n].output)))}return e}}function Ar(t){if("string"===typeof t)return t;if("number"===typeof t)return t.toString();if("boolean"===typeof t)return t.toString();if(Array.isArray(t)&&"string"===typeof t[0])return t;if("boolean"===typeof t[0])return t.map((t=>t.toString()));if("number"===typeof t[0])return t.map((t=>t.toString()));throw new Error("unrecognized value, expected string[], string, number[], number, boolean[], or boolean")}function Er(t,e){t.rows=e.rows,t.columns=e.columns,t.weights=e.weights.slice(0),t.deltas=e.deltas.slice(0)}function _r(t,e,n){for(let r=0;r<e.weights.length;r++)t.weights[r]=e.weights[r]+n.weights[r],t.deltas[r]=0}function Or(t,e,n){for(let r=0;r<t.deltas.length;r++)e.deltas[r]=t.deltas[r],n.deltas[r]=t.deltas[r]}function Ir(t){for(let e=0;e<t.weights.length;e++)t.weights[e]=1,t.deltas[e]=0}function Lr(t,e){t.rows=e.rows,t.columns=e.columns,t.weights=e.weights.slice(0),t.deltas=e.deltas.slice(0);for(let n=0;n<e.weights.length;n++)t.weights[n]=-e.weights[n],t.deltas[n]=0}function Pr(t,e,n){const r=e.rows,i=e.columns,a=n.columns;for(let s=0;s<r;s++){const r=i*s,o=a*s;for(let s=0;s<a;s++){let u=0;for(let t=0;t<i;t++){const i=r+t,o=a*t+s;u+=e.weights[i]*n.weights[o],e.deltas[i]=0,n.deltas[o]=0}t.weights[o+s]=u}}}function Cr(t,e,n){const r=e.rows,i=e.columns,a=n.columns;for(let s=0;s<r;s++){const r=i*s,o=a*s;for(let s=0;s<a;s++)for(let u=0;u<i;u++){const i=r+u,l=a*u+s,c=t.deltas[o+s];e.deltas[i]+=n.weights[l]*c,n.deltas[l]+=e.weights[i]*c}}}function Dr(t,e,n){const{weights:r}=e;for(let i=0;i<r.length;i++)t.weights[i]=e.weights[i]*n.weights[i],t.deltas[i]=0}function Mr(t,e,n){for(let r=0;r<e.weights.length;r++)e.deltas[r]=n.weights[r]*t.deltas[r],n.deltas[r]=e.weights[r]*t.deltas[r]}function Nr(t,e){for(let n=0;n<e.weights.length;n++)t.weights[n]=Math.max(0,e.weights[n]),t.deltas[n]=0}function jr(t,e){for(let n=0;n<t.deltas.length;n++)e.deltas[n]=e.weights[n]>0?t.deltas[n]:0}function $r(t,e,n){const{columns:r}=e,i=r*n;for(let a=0;a<r;a++)t.weights[a]=e.weights[i+a],t.deltas[a]=0}function Rr(t,e,n){const{columns:r}=e,i=r*n;for(let a=0;a<r;a++)e.deltas[i+a]=t.deltas[a]}function zr(t,e){for(let n=0;n<e.weights.length;n++)t.weights[n]=1/(1+Math.exp(-e.weights[n])),t.deltas[n]=0}function Fr(t,e){for(let n=0;n<t.deltas.length;n++){const r=t.weights[n];e.deltas[n]=r*(1-r)*t.deltas[n]}}function Vr(t){const e=new Sr(t.rows,t.columns);let n=-999999;for(let i=0;i<t.weights.length;i++)t.weights[i]>n&&(n=t.weights[i]);let r=0;for(let i=0;i<t.weights.length;i++)e.weights[i]=Math.exp(t.weights[i]-n),r+=e.weights[i];for(let i=0;i<t.weights.length;i++)e.weights[i]/=r;return e}function Br(t,e){for(let n=0;n<e.weights.length;n++)t.weights[n]=Math.tanh(e.weights[n]),t.deltas[n]=0}function Ur(t,e){for(let n=0;n<t.deltas.length;n++){const r=t.weights[n];e.deltas[n]=(1-r*r)*t.deltas[n]}}class Kr{constructor(){this.states=[],this.inputRow=0}add(t,e){if(t.weights.length!==e.weights.length)throw new Error("misaligned matrices");const n=new Sr(t.rows,t.columns);return this.states.push({name:"add",product:n,left:t,right:e,forwardFn:_r,backpropagationFn:Or}),n}allOnes(t,e){const n=new Sr(t,e);return this.states.push({name:"allOnes",product:n,left:n,forwardFn:Ir,backpropagationFn:()=>{}}),n}cloneNegative(t){const e=new Sr(t.rows,t.columns);return this.states.push({name:"cloneNegative",product:e,left:t,forwardFn:Lr,backpropagationFn:()=>{}}),e}subtract(t,e){if(t.weights.length!==e.weights.length)throw new Error("misaligned matrices");return this.add(this.add(this.allOnes(t.rows,t.columns),this.cloneNegative(t)),e)}multiply(t,e){if(t.columns!==e.rows)throw new Error("misaligned matrices");const n=new Sr(t.rows,e.columns);return this.states.push({name:"multiply",product:n,left:t,right:e,forwardFn:Pr,backpropagationFn:Cr}),n}multiplyElement(t,e){if(t.weights.length!==e.weights.length)throw new Error("misaligned matrices");const n=new Sr(t.rows,t.columns);return this.states.push({name:"multiplyElement",product:n,left:t,right:e,forwardFn:Dr,backpropagationFn:Mr}),n}relu(t){const e=new Sr(t.rows,t.columns);return this.states.push({name:"relu",product:e,left:t,forwardFn:Nr,backpropagationFn:jr}),e}input(t){return this.states.push({name:"input",product:t,forwardFn:e=>{if(this.inputValue){if(this.inputValue.length!==e.weights.length)throw new Error("this.inputValue is of wrong dimensions");e.weights=t.weights=this.inputValue}},backpropagationFn:()=>{}}),t}inputMatrixToRow(t){const e=this,n=new Sr(t.columns,1);return this.states.push({name:"inputMatrixToRow",product:n,left:t,get right(){return e.inputRow},forwardFn:$r,backpropagationFn:Rr}),n}sigmoid(t){const e=new Sr(t.rows,t.columns);return this.states.push({name:"sigmoid",product:e,left:t,forwardFn:zr,backpropagationFn:Fr}),e}tanh(t){const e=new Sr(t.rows,t.columns);return this.states.push({name:"tanh",product:e,left:t,forwardFn:Br,backpropagationFn:Ur}),e}observe(t){return this.states.push({name:"observe",product:new Sr,forwardFn:()=>{},backpropagationFn:()=>{}}),t}runIndex(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.inputRow=t;let e=this.states[0];for(let n=0,r=this.states.length;n<r;n++)e=this.states[n],e.hasOwnProperty("forwardFn")&&e.forwardFn(e.product,e.left,e.right);return e.product}runInput(t){this.inputValue=t;let e=this.states[0];for(let n=0,r=this.states.length;n<r;n++)e=this.states[n],e.hasOwnProperty("forwardFn")&&e.forwardFn(e.product,e.left,e.right);return e.product}backpropagate(){let t=this.states.length,e=this.states[0];for(;t-- >0;)e=this.states[t],e.hasOwnProperty("backpropagationFn")&&e.backpropagationFn(e.product,e.left,e.right);return e.product}backpropagateIndex(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.inputRow=t;let e=this.states.length,n=this.states[0];for(;e-- >0;)n=this.states[e],n.hasOwnProperty("backpropagationFn")&&n.backpropagationFn(n.product,n.left,n.right);return n.product}predictTarget(t,e){let n=0;const r=this.runInput(t);for(let i=0;i<r.weights.length;i++){const t=r.weights[i]-e[i];n+=Math.abs(t),r.deltas[i]=t}return n}predictTargetIndex(t,e){const n=this.runIndex(t),r=n,i=Vr(n);return r.deltas=i.weights.slice(0),r.deltas[e]-=1,-Math.log2(i.weights[e])}}function Gr(t){const{weights:e}=t;let n=e[0],r=0;for(let i=1;i<e.length;i++){const t=e[i];t<n||(r=i,n=t)}return r}function Wr(t){const e=M(0,1),n=t.weights;let r=0,i=0;for(;;){if(r+=n[i],r>e)return i;i++}}const Hr={iterations:2e4,errorThresh:.005,log:!1,logPeriod:10,learningRate:.01,callbackPeriod:10,timeout:1/0},Xr=()=>({inputSize:20,inputRange:20,hiddenLayers:[20,20],outputSize:20,decayRate:.999,smoothEps:1e-8,regc:1e-6,clipval:5,maxPredictionLength:100,dataFormatter:new kr});class qr{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options={...Xr()},this.trainOpts={...Hr},this.stepCache={},this.runs=0,this.ratioClipped=0,this.model=Object.seal({isInitialized:!1,input:new Sr(0,0),hiddenLayers:[],output:new Sr(0,0),equations:[],allMatrices:[],equationConnections:[],outputConnector:new Tr(0,0,.08)}),this.initialLayerInputs=[],this.options={...this.options,...t},this.updateTrainingOptions({...Hr}),t.json&&this.fromJSON(t.json)}initialize(){const{dataFormatter:t}=this.options;(null===t||void 0===t?void 0:t.characters.length)&&(this.options.inputSize=this.options.inputRange=this.options.outputSize=t.characters.length),this.model=this.mapModel()}createHiddenLayers(){const{hiddenLayers:t,inputSize:e}=this.options,n=[];n.push(this.getHiddenLayer(t[0],e));let r=t[0];for(let i=1;i<t.length;i++){const e=t[i];n.push(this.getHiddenLayer(e,r)),r=e}return n}getHiddenLayer(t,e){return{weight:new Tr(t,e,.08),transition:new Tr(t,t,.08),bias:new Sr(t,1)}}getEquation(t,e,n,r){if(!r.weight||!r.transition||!r.bias)throw new Error("hiddenLayer does not have expected properties");const i=t.relu.bind(t),a=t.add.bind(t),s=t.multiply.bind(t);return i(a(a(s(r.weight,e),s(r.transition,n)),r.bias))}createInputMatrix(){const{inputRange:t,inputSize:e}=this.options;if(t<1)throw new Error("this.options.inputRange not an expected number");if(e<1)throw new Error("this.options.inputSize not an expected number");return new Tr(t+1,e,.08)}createOutputMatrices(){const{outputSize:t,hiddenLayers:e}=this.options,n=Yr(e);return{outputConnector:new Tr(t+1,n,.08),output:new Sr(t+1,1)}}bindEquation(){const{model:t}=this,{hiddenLayers:e}=this.options,n=new Kr,r=[],i=t.equationConnections.length>0?Yr(t.equationConnections):this.initialLayerInputs;let a=this.getEquation(n,n.inputMatrixToRow(t.input),i[0],t.hiddenLayers[0]);r.push(a);for(let s=1,o=e.length;s<o;s++){if(!i[s])throw new Error(`Cannot find equation at index ${s}`);a=this.getEquation(n,a,i[s],t.hiddenLayers[s]),r.push(a)}t.equationConnections.push(r),n.add(n.multiply(t.outputConnector,a),t.output),t.equations.push(n)}mapModel(){const t=[];this.initialLayerInputs=this.options.hiddenLayers.map((t=>new Sr(t,1)));const e=this.createInputMatrix();t.push(e);const n=this.createHiddenLayers();if(!n.length)throw new Error("net.hiddenLayers not set");for(let a=0,s=n.length;a<s;a++){const e=n[a];for(const n in e)e.hasOwnProperty(n)&&t.push(e[n])}const{output:r,outputConnector:i}=this.createOutputMatrices();return t.push(i),t.push(r),Object.seal({isInitialized:!0,input:e,hiddenLayers:n,output:r,equations:[],allMatrices:t,equationConnections:[],outputConnector:i})}trainInput(t){this.runs++;const{model:e}=this,n=t.length;let r,i=0;for(;e.equations.length<=t.length+1;)this.bindEquation();for(let a=-1,s=t.length;a<s;a++){const s=a+1;r=e.equations[s];const o=-1===a?0:t[a]+1,u=a===n-1?0:t[a+1]+1;i+=r.predictTargetIndex(o,u)}return Math.pow(2,i/(n-1))/100}backpropagate(t){let e=t.length;const{model:n}=this,{equations:r}=n;for(;e>0;)r[e].backpropagateIndex(t[e-1]+1),e--;r[0].backpropagateIndex(0)}adjustWeights(){const{regc:t,clipval:e,decayRate:n,smoothEps:r}=this.options,{trainOpts:i,model:a,stepCache:s}=this,{learningRate:o}=i,{allMatrices:u}=a;let l=0,c=0;for(let h=0;h<u.length;h++){const i=u[h],{weights:a,deltas:p}=i;h in s||(s[h]=B(i.rows*i.columns));const f=s[h];for(let s=0;s<a.length;s++){let i=p[s];const u=a[s];f[s]=f[s]*n+(1-n)*i*i,i>e?(i=e,l++):i<-e&&(i=-e,l++),c++,a[s]=u+-o*i/Math.sqrt(f[s]+r)-t*u}}this.ratioClipped=l/c}get isRunnable(){return!this.model||0!==this.model.equations.length||(console.error("No equations bound, did you run train()?"),!1)}checkRunnable(){if(!this.isRunnable)throw new Error("Network not runnable")}run(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=this.options.maxPredictionLength+(null!==t?t.length:0)+(this.options.dataFormatter?this.options.dataFormatter.specialIndexes.length:0);this.checkRunnable();const i=this.options.dataFormatter&&t.length>0?this.options.dataFormatter.formatDataIn(t):t,{model:a}=this,s=[];let o=0;for(;;){const t=0===o?0:o<i.length?i[o-1]+1:s[o-1];for(;a.equations.length<=o;)this.bindEquation();const u=a.equations[o].runIndex(t),l=new Sr(a.output.rows,a.output.columns);if(Er(l,u),1!==n&&e)for(let e=0,r=l.weights.length;e<r;e++)l.weights[e]/=n;const c=Vr(l),h=e?Wr(c):Gr(c);if(o++,0===h)break;if(o>=r)break;s.push(h)}return this.options.dataFormatter.formatDataOut(i,s.slice(i.length).map((t=>t-1)))}verifyIsInitialized(){this.model.isInitialized||this.initialize()}updateTrainingOptions(t){var e;this.trainOpts={...Hr,...t},this.validateTrainingOptions(this.trainOpts),this.setLogMethod(null!==(e=t.log)&&void 0!==e?e:this.trainOpts.log)}validateTrainingOptions(t){const e={iterations:()=>{const e=t.iterations;return"number"===typeof e&&e>0},errorThresh:()=>{const e=t.errorThresh;return"number"===typeof e&&e>0&&e<1},log:()=>{const e=t.log;return"function"===typeof e||"boolean"===typeof e},logPeriod:()=>{const e=t.logPeriod;return"number"===typeof e&&e>0},learningRate:()=>{const e=t.learningRate;return"number"===typeof e&&e>0&&e<1},callback:()=>{const e=t.callback;return"function"===typeof e||void 0===e},callbackPeriod:()=>{const e=t.callbackPeriod;return"number"===typeof e&&e>0},timeout:()=>{const e=t.timeout;return"number"===typeof e&&e>0}};for(const n in e){const r=t;if(!e[n]())throw new Error(`[${n}, ${r[n]}] is out of normal training range, your network will probably not train.`)}}setLogMethod(t){this.trainOpts.log="function"===typeof t?t:!!t&&console.log}prepTraining(t,e){var n;this.updateTrainingOptions(e);const r=this.options.dataFormatter.format(t),i=Date.now()+(null!==(n=this.trainOpts.timeout)&&void 0!==n?n:0),a={error:1,iterations:0};return this.verifyIsInitialized(),{preparedData:r,status:a,endTime:i}}train(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;this.trainOpts=e={...Hr,...e};const{iterations:r,errorThresh:i,logPeriod:a,callback:s,callbackPeriod:o}=this.trainOpts,u=!0===e.log?console.log:e.log;let l,c,h=1/0;if(null===(n=this.options)||void 0===n?void 0:n.dataFormatter)c=this.options.dataFormatter.format(t);else{if(!Array.isArray(t)||!Array.isArray(t[0])||"number"!==typeof t[0][0])throw new Error("training not in expected format of number[][]");c=t}for(this.verifyIsInitialized(),l=0;l<r&&h>i;l++){let e=0;for(let t=0;t<c.length;t++)e+=this.trainPattern(c[t],!0);if(h=e/t.length,isNaN(h))throw new Error("Network error rate is unexpected NaN, check network configurations and try again. Most probably input format is not correct or training data is not enough. ");u&&l%a===0&&u(`iterations: ${l}, training error: ${h}`),s&&l%o===0&&s({error:h,iterations:l})}return{error:h,iterations:l}}addFormat(t){}formatData(t){const e=[];for(let n=0;n<t.length;n++)e.push(this.options.dataFormatter.formatDataIn(t[n]));return e}toJSON(){this.model.isInitialized||this.initialize();const{model:t,options:e}=this;return{type:this.constructor.name,options:{...e,dataFormatter:e.dataFormatter.toJSON()},trainOpts:{...this.trainOpts,timeout:this.trainOpts.timeout===1/0?"Infinity":this.trainOpts.timeout},input:t.input.toJSON(),hiddenLayers:t.hiddenLayers.map((t=>{const e={};for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n].toJSON());return e})),outputConnector:this.model.outputConnector.toJSON(),output:this.model.output.toJSON()}}fromJSON(t){const{options:e}=t,n=[],r=Sr.fromJSON(t.input);n.push(r);const i=[];t.hiddenLayers.forEach((t=>{const e={};for(const r in t)e[r]=Sr.fromJSON(t[r]),n.push(e[r]);i.push(e)}));const a=Sr.fromJSON(t.outputConnector);n.push(a);const s=Sr.fromJSON(t.output);return n.push(s),e.dataFormatter?this.options={...Xr(),...e,dataFormatter:kr.fromJSON(e.dataFormatter)}:this.options={...Xr(),...e,dataFormatter:new kr},this.model=Object.seal({isInitialized:!0,input:r,hiddenLayers:i,output:s,allMatrices:n,outputConnector:a,equations:[],equationConnections:[]}),this.initialLayerInputs=this.options.hiddenLayers.map((t=>new Sr(t,1))),this.bindEquation(),this}toFunction(t){const{model:e}=this,{equations:n}=this.model,r=n[1],{states:i}=r,a=JSON.stringify(this.toJSON());function s(t){const r=e.equationConnections[0],{states:i}=n[0];for(let e=0,n=i.length;e<n;e++)if(i[e].product===t)return e;return r.indexOf(t)}function o(t,e){for(let n=0,r=i.length;n<r;n++){const r=i[n];if(n===e){const e=s(t);return e>-1&&(t===r.left||t===r.right)?`typeof prevStates[${e}] === 'object' ? prevStates[${e}].product : new Matrix(${t.rows}, ${t.columns})`:`new Matrix(${t.rows}, ${t.columns})`}if(t===r.product)return`states[${n}].product`;if(t===r.right)return`states[${n}].right`;if(t===r.left)return`states[${n}].left`}return""}function u(t,n){if(!t||!t.rows||!t.columns)return"null";if(t===e.input)return"json.input";if(t===e.outputConnector)return"json.outputConnector";if(t===e.output)return"json.output";for(let r=0,i=e.hiddenLayers.length;r<i;r++){const n=e.hiddenLayers[r];for(const e in n)if(n.hasOwnProperty(e)&&n[e]===t)return`json.hiddenLayers[${r}].${e}`}return o(t,n)}function l(t){const e=t.toString().split("{");e.shift();const n=e.join("{").split("}");return n.pop(),n.join("}").split("\n").join("\n        ").replace("product.deltas[i] = 0;","").replace("product.deltas[column] = 0;","").replace("left.deltas[leftIndex] = 0;","").replace("right.deltas[rightIndex] = 0;","").replace("product.deltas = left.deltas.slice(0);","")}function c(t){return`src/recurrent/matrix/${t.replace(/[A-Z]/g,(function(t){return`-${t.toLowerCase()}`}))}.js`}const h=[],p={},f=[];for(let m=0,g=i.length;m<g;m++){const t=i[m];h.push(`states[${m}] = {\n      name: '${t.forwardFn.name}',\n      left: ${t.left?u(t.left,m):"undefined"},\n      right: ${t.right?u(t.right,m):"undefined"},\n      product: ${u(t.product,m)}\n    }`);const e=t.forwardFn.name;p[e]||(p[e]=!0,f.push(`        case '${e}': //compiled from ${c(e)}\n          ${l(t.forwardFn.toString())}\n          break;`))}const d=`\n  if (typeof rawInput === 'undefined') rawInput = [];\n  if (typeof isSampleI === 'undefined') isSampleI = false;\n  if (typeof temperature === 'undefined') temperature = 1;\n  var json = ${a};\n  ${this.options.dataFormatter?`${this.options.dataFormatter.toFunctionString()};\n  Object.assign(dataFormatter, json.options.dataFormatter);`:""}\n  ${this.options.dataFormatter&&"function"===typeof this.options.dataFormatter.formatDataIn?`const formatDataIn = function (input, output) { ${l(this.options.dataFormatter.formatDataIn.toString())} }.bind(dataFormatter);`:""}\n  ${null!==this.options.dataFormatter&&"function"===typeof this.options.dataFormatter.formatDataOut?`const formatDataOut = function formatDataOut(input, output) { ${l(this.options.dataFormatter.formatDataOut.toString())} }.bind(dataFormatter);`:""}\n  var maxPredictionLength =\n    ${this.options.maxPredictionLength} +\n    rawInput.length +\n    ${this.options.dataFormatter?this.options.dataFormatter.specialIndexes.length:0};\n  var input = ${this.options.dataFormatter&&"function"===typeof this.options.dataFormatter.formatDataIn?"formatDataIn(rawInput)":"rawInput"};\n  var _i = 0;\n  var output = [];\n  var states = [];\n  var prevStates;\n  while (true) {\n    var previousIndex = (_i === 0\n        ? 0\n        : _i < input.length\n          ? input[_i - 1] + 1\n          : output[_i - 1])\n          ;\n    var rowPluckIndex = previousIndex;\n    prevStates = states;\n    states = [];\n    ${h.join(";\n    ")};\n    for (var stateIndex = 0, stateMax = ${h.length}; stateIndex < stateMax; stateIndex++) {\n      var state = states[stateIndex];\n      var product = state.product;\n      var left = state.left;\n      var right = state.right;\n      switch (state.name) {\n${f.join("\n")}\n      }\n    }\n\n    var logProbabilities = state.product;\n    if (temperature !== 1 && isSampleI) {\n      for (var q = 0, nq = logProbabilities.weights.length; q < nq; q++) {\n        logProbabilities.weights[q] /= temperature;\n      }\n    }\n\n    var probs = softmax(logProbabilities);\n    var nextIndex = isSampleI ? sampleI(probs) : maxI(probs);\n\n    _i++;\n    if (nextIndex === 0) {\n      break;\n    }\n    if (_i >= maxPredictionLength) {\n      break;\n    }\n\n    output.push(nextIndex);\n  }\n  ${this.options.dataFormatter&&"function"===typeof this.options.dataFormatter.formatDataOut?"return formatDataOut(input, output.slice(input.length).map(function(value) { return value - 1; }))":"return output.slice(input.length).map(function(value) { return value - 1; })"};\n  function Matrix(rows, columns) {\n    this.rows = rows;\n    this.columns = columns;\n    this.weights = zeros(rows * columns);\n  }\n  ${B.toString()}\n  ${Vr.toString().replace("_1.Matrix","Matrix")}\n  ${M.toString()}\n  ${Wr.toString()}\n  ${Gr.toString()}`;return new Function("rawInput","isSampleI","temperature",t?t(d):d)}trainPattern(t,e){const n=this.trainInput(t);return this.backpropagate(t),this.adjustWeights(),e?n:0}}function Yr(t){return t[t.length-1]}class Jr extends qr{getHiddenLayer(t,e){return Qr(t,e)}getEquation(t,e,n,r){return Zr(t,e,n,r)}}function Qr(t,e){return{updateGateInputMatrix:new Tr(t,e,.08),updateGateHiddenMatrix:new Tr(t,t,.08),updateGateBias:new Sr(t,1),resetGateInputMatrix:new Tr(t,e,.08),resetGateHiddenMatrix:new Tr(t,t,.08),resetGateBias:new Sr(t,1),cellWriteInputMatrix:new Tr(t,e,.08),cellWriteHiddenMatrix:new Tr(t,t,.08),cellWriteBias:new Sr(t,1)}}function Zr(t,e,n,r){if(!r.updateGateInputMatrix||!r.updateGateHiddenMatrix||!r.updateGateBias||!r.resetGateInputMatrix||!r.resetGateHiddenMatrix||!r.resetGateBias||!r.cellWriteInputMatrix||!r.cellWriteHiddenMatrix||!r.cellWriteBias)throw new Error("hiddenLayer does not have expected properties");const i=t.sigmoid.bind(t),a=t.add.bind(t),s=t.multiply.bind(t),o=t.multiplyElement.bind(t),u=t.tanh.bind(t),l=t.allOnes.bind(t),c=t.cloneNegative.bind(t),h=i(a(a(s(r.updateGateInputMatrix,e),s(r.updateGateHiddenMatrix,n)),r.updateGateBias)),p=i(a(a(s(r.resetGateInputMatrix,e),s(r.resetGateHiddenMatrix,n)),r.resetGateBias)),f=u(a(a(s(r.cellWriteInputMatrix,e),s(r.cellWriteHiddenMatrix,o(p,n))),r.cellWriteBias));return a(o(a(l(h.rows,h.columns),c(h)),f),o(n,h))}class ti{constructor(t,e){this.prop=e,this.length=0,this.table={};for(let n=0;n<t.length;n++){const r=t[n][e];for(let t=0;t<r.length;t++){const e=r[t];for(const t in e)e.hasOwnProperty(t)&&(this.table.hasOwnProperty(t)||(this.table[t]=this.length++))}}}}const ei=()=>({...Xr(),inputSize:1,hiddenLayers:[20],outputSize:1,inputRange:0});class ni extends qr{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.inputLookupLength=0,this.inputLookup=null,this.outputLookup=null,this.outputLookupLength=0,this.model=Object.seal({isInitialized:!1,hiddenLayers:[],output:new Sr(0,0),equations:[],allMatrices:[],equationConnections:[],outputConnector:new Tr(0,0,.08)}),this.options=ei(),this.options={...this.options,...t},this.updateTrainingOptions({...ri,...t}),t.json&&this.fromJSON(t.json)}createInputMatrix(){throw new Error("Input Matrices do not exist on RNNTimeStep")}createOutputMatrices(){const{outputSize:t}=this.options,e=Yr(this.options.hiddenLayers),n=new Tr(t,e,.08);return{output:new Tr(t,1,.08),outputConnector:n}}bindEquation(){const{model:t,options:e}=this,{hiddenLayers:n,inputSize:r}=e,i=t.hiddenLayers,a=new Kr,s=[],o=t.equationConnections.length>0?t.equationConnections[t.equationConnections.length-1]:this.initialLayerInputs;let u=this.getEquation(a,a.input(new Sr(r,1)),o[0],i[0]);s.push(u);for(let l=1,c=n.length;l<c;l++)u=this.getEquation(a,u,o[l],i[l]),s.push(u);t.equationConnections.push(s),a.add(a.multiply(t.outputConnector,u),t.output),t.equations.push(a)}initialize(){this.model=this.mapModel()}mapModel(){const t=[];this.initialLayerInputs=this.options.hiddenLayers.map((t=>new Sr(t,1)));const e=this.createHiddenLayers();for(let i=0,a=e.length;i<a;i++){const n=e[i];for(const e in n)n.hasOwnProperty(e)&&t.push(n[e])}const{outputConnector:n,output:r}=this.createOutputMatrices();return t.push(n),t.push(r),Object.seal({isInitialized:!0,hiddenLayers:e,output:r,equations:[],allMatrices:t,equationConnections:[],outputConnector:n})}backpropagate(){for(let t=this.model.equations.length-1;t>-1;t--)this.model.equations[t].backpropagate()}run(t){const e=b.dataShape(t).join(",");switch(e){case"array,number":return this.runArray(t);case"array,array,number":return this.runArrayOfArray(t);case"object,number":return this.runObject(t);case"array,object,number":return this.runArrayOfObject(t);default:throw new Error(`Unrecognized data shape ${e}`)}}forecast(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=b.dataShape(t).join(",");switch(n){case"array,number":return this.forecastArray(t,e);case"array,array,number":return this.forecastArrayOfArray(t,e);case"object,number":return this.runObject(t);case"array,object,number":return this.forecastArrayOfObject(t,e);default:throw new Error(`Unrecognized data shape ${n}`)}}forecastArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.checkRunnable();const{model:n}=this,{equations:r}=n,i=t.length+e;for(;r.length<=i;)this.bindEquation();let a,s=0;if(1===this.options.inputSize)for(let u=0;u<t.length;u++)a=r[s++].runInput(Float32Array.from([t[u]]));else for(let u=0;u<t.length;u++)a=r[s++].runInput(Float32Array.from([]));if(!a)throw new Error("lastOutput not set");const o=[a.weights[0]];for(let u=0,l=e-1;u<l;u++)a=r[s++].runInput(a.weights),o.push(a.weights[0]);return this.end(),Float32Array.from(o)}forecastArrayOfArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.checkRunnable();const{model:n}=this,{equations:r}=n,i=t.length+e;for(;r.length<=i;)this.bindEquation();let a,s=0;for(let u=0;u<t.length;u++)a=r[s++].runInput(t[u]);if(!a)throw new Error("lastOutput not set");const o=[Float32Array.from(a.weights)];for(let u=0,l=e-1;u<l;u++)a=r[s++].runInput(a.weights),o.push(Float32Array.from(a.weights.slice(0)));return this.end(),o}forecastArrayOfObject(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!this.inputLookup)throw new Error("this.inputLookup not set");if(!this.outputLookup)throw new Error("this.outputLookup not set");const n=t.map((t=>b.toArray(this.inputLookup,t,this.inputLookupLength)));return this.forecastArrayOfArray(n,e).map((t=>b.toObject(this.outputLookup,t)))}train(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.trainOpts=e={...Hr,...e},1===this.options.inputSize&&1===this.options.outputSize&&this.setSize(t),this.verifySize();const n=this.formatData(t);let r,i=1/0;this.verifyIsInitialized();const{iterations:a,errorThresh:s,logPeriod:o,callback:u,callbackPeriod:l}=this.trainOpts,c=!0===e.log?console.log:e.log;for(r=0;r<a&&i>s;r++){let t=0;for(let e=0;e<n.length;e++)t+=this.trainPattern(n[e],!0);if(i=t/n.length,isNaN(i))throw new Error("Network error rate is unexpected NaN, check network configurations and try again. Most probably input format is not correct or training data is not enough. ");c&&r%o===0&&c(`iterations: ${r}, training error: ${i}`),u&&r%l===0&&u({error:i,iterations:r})}return{error:i,iterations:r}}trainArrayOfArray(t){if(t.length<2)throw new Error("input must be an array of 2 or more");const{equations:e}=this.model;for(;e.length<t.length;)this.bindEquation();let n=0;for(let r=0,i=t.length-1;r<i;r++)n+=e[r].predictTarget(t[r],t[r+1]);return this.end(),n/t.length}trainPattern(t,e){const n=this.trainArrayOfArray(t);return this.backpropagate(),this.adjustWeights(),e?n:0}setSize(t){let e=0;switch(b.dataShape(t).join(",")){case"array,array,number":case"array,object,number":case"array,datum,array,number":case"array,datum,object,number":e=1;break;case"array,array,array,number":e=t[0][0].length;break;case"array,array,object,number":e=Object.keys(b.toTable2D(t)).length;break;case"array,datum,array,array,number":e=t[0].input[0].length;break;case"array,datum,array,object,number":e=Object.keys(b.toInputTable2D(t)).length;break;default:throw new Error("unknown data shape or configuration")}this.options=Object.seal({...this.options,inputSize:e,outputSize:e})}verifySize(){if((this.options.inputSize||this.options.outputSize)&&this.options.inputSize!==this.options.outputSize)throw new Error("manually set inputSize and outputSize mismatch")}runArray(t){this.checkRunnable();const{equations:e}=this.model;for(;e.length<=t.length;)this.bindEquation();let n;for(let r=0;r<t.length;r++)n=e[r].runInput(new Float32Array([t[r]]));return this.end(),n.weights[0]}runArrayOfArray(t){this.checkRunnable();const{model:e}=this,{equations:n}=e;for(;n.length<=t.length;)this.bindEquation();let r;for(let i=0;i<t.length;i++)r=n[i].runInput(t[i]).weights;return this.end(),null!==r&&void 0!==r?r:Float32Array.from([])}runObject(t){if(!this.inputLookup)throw new Error("this.inputLookup not set");if(!this.outputLookup)throw new Error("this.outputLookup not set");if(!this.outputLookupLength)throw new Error("this.outputLookupLength not set");if(this.inputLookup===this.outputLookup){const e=b.toArrayShort(this.inputLookup,t);return b.toObjectPartial(this.outputLookup,this.forecastArray(e,this.outputLookupLength-e.length),e.length)}return b.toObject(this.outputLookup,this.forecastArray(b.toArray(this.inputLookup,t,this.inputLookupLength),this.outputLookupLength))}runArrayOfObject(t){if(null===this.inputLookup)throw new Error("this.inputLookup not set");if(null===this.outputLookup)throw new Error("this.outputLookup not set");const e=t.map((t=>b.toArray(this.inputLookup,t,this.inputLookupLength)));return this.forecastArrayOfArray(e,1).map((t=>b.toObject(this.outputLookup,t)))[0]}runArrayOfObjectOfArray(t){if(!this.inputLookup)throw new Error("this.inputLookup not set");if(!this.outputLookup)throw new Error("this.outputLookup not set");return b.toObject(this.outputLookup,this.runArrayOfArray(b.toArrays(this.inputLookup,t,this.inputLookupLength)))}end(){this.model.equations[this.model.equations.length-1].runInput(new Float32Array(this.options.outputSize))}requireInputOutputOfOne(){if(1!==this.options.inputSize)throw new Error("inputSize must be 1 for this data size");if(1!==this.options.outputSize)throw new Error("outputSize must be 1 for this data size")}formatArray(t){const e=[];this.requireInputOutputOfOne();for(let n=0;n<t.length;n++)e.push(Float32Array.from([t[n]]));return[e]}formatArrayOfArray(t){const e=[],{inputSize:n,outputSize:r}=this.options;if(1===n&&1===r){for(let n=0;n<t.length;n++)e.push(T(t[n]));return e}if(n!==t[0].length)throw new Error("inputSize must match data input size");if(r!==t[0].length)throw new Error("outputSize must match data output size");for(let i=0;i<t.length;i++)e.push(Float32Array.from(t[i]));return[e]}formatArrayOfObject(t){if(this.requireInputOutputOfOne(),!this.inputLookup){const e=new L(t);this.inputLookup=this.outputLookup=e.table,this.inputLookupLength=this.outputLookupLength=e.length}const e=[];for(let n=0;n<t.length;n++)e.push(_(t[n]));return e}formatArrayOfObjectMulti(t){if(!this.inputLookup){const e=new L(t);this.inputLookup=this.outputLookup=e.table,this.inputLookupLength=this.outputLookupLength=e.length}const e=[];for(let n=0;n<t.length;n++)e.push([I(t[n],this.inputLookup,this.inputLookupLength)]);return e}formatArrayOfDatumOfArray(t){const e=[];this.requireInputOutputOfOne();for(let n=0;n<t.length;n++){const r=t[n];e.push(k(r.input,r.output))}return e}formatArrayOfDatumOfObject(t){if(this.requireInputOutputOfOne(),!this.inputLookup){const e=new L(t,"input");this.inputLookup=e.table,this.inputLookupLength=e.length}if(!this.outputLookup){const e=new L(t,"output");this.outputLookup=e.table,this.outputLookupLength=e.length}const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(O(r.input,r.output))}return e}formatArrayOfArrayOfArray(t){const e=[];for(let n=0;n<t.length;n++)e.push(w(t[n]));return e}formatArrayOfArrayOfObject(t){if(!this.inputLookup){const e=new L(t);this.inputLookup=this.outputLookup=e.table,this.inputLookupLength=this.outputLookupLength=e.length}const e=[];for(let n=0;n<t.length;n++){const r=[];for(let e=0;e<t[n].length;e++)r.push(I(t[n][e],this.inputLookup,this.inputLookupLength));e.push(r)}return e}formatArrayOfDatumOfArrayOfArray(t){const e=[],{inputSize:n,outputSize:r}=this.options;if(n!==t[0].input[0].length)throw new Error("inputSize must match data input size");if(r!==t[0].output[0].length)throw new Error("outputSize must match data output size");for(let i=0;i<t.length;i++){const n=t[i];e.push(S(n.input,n.output))}return e}formatArrayOfDatumOfArrayOfObject(t){if(!this.inputLookup){const e=new ti(t,"input");this.inputLookup=e.table,this.inputLookupLength=e.length}if(!this.outputLookup){const e=new ti(t,"output");this.outputLookup=e.table,this.outputLookupLength=e.length}if(!this.outputLookupLength)throw new Error("this.outputLookupLength not set to usable number");const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(E(r.input,r.output,this.inputLookup,this.outputLookup,this.inputLookupLength,this.outputLookupLength))}return e}formatData(t){switch(b.dataShape(t).join(",")){case"array,number":return this.formatArray(t);case"array,array,number":return this.formatArrayOfArray(t);case"array,object,number":return 1===this.options.inputSize?this.formatArrayOfObject(t):this.formatArrayOfObjectMulti(t);case"array,datum,array,number":return this.formatArrayOfDatumOfArray(t);case"array,datum,object,number":return this.formatArrayOfDatumOfObject(t);case"array,array,array,number":return this.formatArrayOfArrayOfArray(t);case"array,array,object,number":return this.formatArrayOfArrayOfObject(t);case"array,datum,array,array,number":return this.formatArrayOfDatumOfArrayOfArray(t);case"array,datum,array,object,number":return this.formatArrayOfDatumOfArrayOfObject(t);default:throw new Error("unknown data shape or configuration")}}test(t){const e=[];let n=0;const r=this.formatData(t);for(let i=0;i<r.length;i++){const a=r[i],s=this.run(a.splice(0,a.length-1)),o=a[a.length-1];let u=0,l=0;for(let t=0;t<s.length;t++){l++;const e=o[t]-s[t];u+=e*e}if(n+=u/l,Math.abs(u)>this.trainOpts.errorThresh){const n=t[i];e.push({value:n,actual:s})}}return{error:n/r.length,misclasses:e,total:r.length}}addFormat(t){var e,n,r,i,a,s;switch(b.dataShape(t).join(",")){case"array,array,number":case"datum,array,array,number":case"array,number":case"datum,array,number":return;case"datum,object,number":this.inputLookup=b.addKeys(t.input,null!==(e=this.inputLookup)&&void 0!==e?e:{}),this.inputLookup&&(this.inputLookupLength=Object.keys(this.inputLookup).length),this.outputLookup=b.addKeys(t.output,null!==(n=this.outputLookup)&&void 0!==n?n:{}),this.outputLookup&&(this.outputLookupLength=Object.keys(this.outputLookup).length);break;case"object,number":this.inputLookup=this.outputLookup=b.addKeys(t,null!==(r=this.inputLookup)&&void 0!==r?r:{}),this.inputLookup&&(this.inputLookupLength=this.outputLookupLength=Object.keys(this.inputLookup).length);break;case"array,object,number":{const e=t;for(let t=0;t<e.length;t++)this.inputLookup=this.outputLookup=b.addKeys(e[t],null!==(i=this.inputLookup)&&void 0!==i?i:{}),this.inputLookup&&(this.inputLookupLength=this.outputLookupLength=Object.keys(this.inputLookup).length);break}case"datum,array,object,number":{const e=t,n=e.input;for(let t=0;t<n.length;t++)this.inputLookup=b.addKeys(n[t],null!==(a=this.inputLookup)&&void 0!==a?a:{}),this.inputLookup&&(this.inputLookupLength=Object.keys(this.inputLookup).length);const r=e.output;for(let t=0;t<r.length;t++)this.outputLookup=b.addKeys(r[t],null!==(s=this.outputLookup)&&void 0!==s?s:{}),this.outputLookup&&(this.outputLookupLength=Object.keys(this.outputLookup).length);break}default:throw new Error("unknown data shape or configuration")}}toJSON(){this.model||this.initialize();const{model:t}=this,e={...this.options,...Xr};return{type:this.constructor.name,options:e,hiddenLayers:t.hiddenLayers.map((t=>{const e={};for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n].toJSON());return e})),outputConnector:t.outputConnector.toJSON(),output:t.output.toJSON(),inputLookup:this.inputLookup,inputLookupLength:this.inputLookupLength,outputLookup:this.outputLookup,outputLookupLength:this.outputLookupLength}}fromJSON(t){const{options:e}=t,n=[],r=[];t.hiddenLayers.forEach((t=>{const e={};for(const r in t)e[r]=Sr.fromJSON(t[r]),n.push(e[r]);r.push(e)}));const i=Sr.fromJSON(t.outputConnector);n.push(i);const a=Sr.fromJSON(t.output);return n.push(a),this.options={...ei(),...e},this.inputLookup=t.inputLookup,this.inputLookupLength=t.inputLookupLength,this.outputLookup=t.outputLookup,this.outputLookupLength=t.outputLookupLength,this.model=Object.seal({isInitialized:!0,hiddenLayers:r,output:a,allMatrices:n,outputConnector:i,equations:[],equationConnections:[]}),this.initialLayerInputs=e.hiddenLayers.map((t=>new Sr(t,1))),this.bindEquation(),this}toFunction(t){const{model:e,inputLookup:n,inputLookupLength:r,outputLookup:i,outputLookupLength:a}=this,{inputSize:s}=this.options,{equations:o}=e,u=o[1],{states:l}=u,c=JSON.stringify(this.toJSON());function h(t){const n=e.equationConnections[0],{states:r}=o[0];for(let e=0,i=r.length;e<i;e++)if(r[e].product===t)return e;return n.indexOf(t)}function p(t,e){for(let n=0,r=l.length;n<r;n++){const r=l[n];if(n===e){const e=h(t);switch(t){case r.left:if(e>-1)return`typeof prevStates[${e}] === 'object' ? prevStates[${e}].product : new Matrix(${t.rows}, ${t.columns})`;case r.right:if(e>-1)return`typeof prevStates[${e}] === 'object' ? prevStates[${e}].product : new Matrix(${t.rows}, ${t.columns})`;case r.product:return`new Matrix(${t.rows}, ${t.columns})`;default:throw Error("unknown state")}}if(t===r.product)return`states[${n}].product`;if(t===r.right)return`states[${n}].right`;if(t===r.left)return`states[${n}].left`}return""}function f(t,n){if(!t||!t.rows||!t.columns)return"null";if(t===e.outputConnector)return"json.outputConnector";if(t===e.output)return"json.output";for(let r=0,i=e.hiddenLayers.length;r<i;r++){const n=e.hiddenLayers[r];for(const e in n)if(n.hasOwnProperty(e)&&n[e]===t)return`json.hiddenLayers[${r}].${e}`}return p(t,n)}function d(){return n?1===s?n===i?`function lookupInput(input) {\n            var table = ${JSON.stringify(n)};\n            var result = [];\n            for (var p in table) {\n              if (!input.hasOwnProperty(p)) break;\n              result.push(Float32Array.from([input[p]]));\n            }\n            return result;\n          }`:`function lookupInput(input) {\n          var table = ${JSON.stringify(n)};\n          var result = [];\n          for (var p in table) {\n            result.push(Float32Array.from([input[p]]));\n          }\n          return result;\n        }`:`function lookupInput(rawInputs) {\n        var table = ${JSON.stringify(n)};\n        var result = [];\n        for (var i = 0; i < rawInputs.length; i++) {\n          var rawInput = rawInputs[i];\n          var input = new Float32Array(${r});\n          for (var p in table) {\n            input[table[p]] = rawInput.hasOwnProperty(p) ? rawInput[p] : 0;\n          }\n          result.push(input);\n        }\n        return result;\n      }`:""}function m(){return i?1===s?n===i?`function lookupOutputPartial(output, input) {\n            var table = ${JSON.stringify(i)};\n            var offset = input.length;\n            var result = {};\n            var i = 0;\n            for (var p in table) {\n              if (i++ < offset) continue;\n              result[p] = output[table[p] - offset][0];\n            }\n            return result;\n          }`:`function lookupOutput(output) {\n          var table = ${JSON.stringify(i)};\n          var result = {};\n          for (var p in table) {\n            result[p] = output[table[p]][0];\n          }\n          return result;\n        }`:`function lookupOutput(output) {\n        var table = ${JSON.stringify(i)};\n        var result = {};\n        for (var p in table) {\n          result[p] = output[table[p]];\n        }\n        return result;\n      }`:""}function g(t){const e=t.toString().split("{");e.shift();const n=e.join("{").split("}");return n.pop(),n.join("}").split("\n").join("\n        ").replace("product.deltas[i] = 0;","").replace("product.deltas[column] = 0;","").replace("left.deltas[leftIndex] = 0;","").replace("right.deltas[rightIndex] = 0;","").replace("product.deltas = left.deltas.slice(0);","")}function y(t){return`src/recurrent/matrix/${t.replace(/[A-Z]/g,(function(t){return`-${t.toLowerCase()}`}))}.js`}const v=[],b={},x=[];for(let T=0,k=l.length;T<k;T++){const t=l[T];v.push(`states[${T}] = {\n      name: '${t.forwardFn.name}',\n      left: ${t.left?f(t.left,T):"undefined"},\n      right: ${t.right?f(t.right,T):"undefined"},\n      product: ${f(t.product,T)}\n    }`);const e=t.forwardFn.name;b[e]||(b[e]=!0,"input"===t.name?(x.push(`case '${e}':`),x.push(n&&1===s?"product.weights = _i < input.length ? input[_i]: prevStates[prevStates.length - 1].product.weights;":1===s?"product.weights = [input[_i]];":"product.weights = input[_i];"),x.push("break;")):x.push(`        case '${e}':${"forwardFn"!==e?` //compiled from ${y(e)}`:""}\n          ${g(t.forwardFn.toString())}\n          break;`))}const w=1===s&&this.outputLookup,S=`\n  var input = ${this.inputLookup?"lookupInput(rawInput)":"rawInput"};\n  var json = ${c};\n  var output = [];\n  var states = [];\n  var prevStates;\n  var state;\n  var max = ${w?n===i?r:"input.length + "+(a-1):"input.length"};\n  for (var _i = 0; _i < max; _i++) {\n    prevStates = states;\n    states = [];\n    ${v.join(";\n    ")};\n    for (var stateIndex = 0, stateMax = ${v.length}; stateIndex < stateMax; stateIndex++) {\n      state = states[stateIndex];\n      var product = state.product;\n      var left = state.left;\n      var right = state.right;\n\n      switch (state.name) {\n${x.join("\n")}\n      }\n    }\n    ${1===s&&n?"if (_i >= input.length - 1) { output.push(state.product.weights); }":"output = state.product.weights;"}\n  }\n  ${i?i===n?"return lookupOutputPartial(output, input)":"return lookupOutput(output)":1===s?"return output[0]":"return output"};\n  ${d()}\n  ${m()}\n\n  function Matrix(rows, columns) {\n    this.rows = rows;\n    this.columns = columns;\n    this.weights = new Float32Array(rows * columns);\n  }\n  ${Vr.toString().replace("_2.default","Matrix")}\n  ${M.toString()}\n  ${Wr.toString()}\n  ${Gr.toString()}`;return new Function("rawInput",t?t(S):S)}}const ri={...Hr};class ii extends ni{getHiddenLayer(t,e){return Qr(t,e)}getEquation(t,e,n,r){return Zr(t,e,n,r)}}class ai extends qr{getHiddenLayer(t,e){return si(t,e)}getEquation(t,e,n,r){return oi(t,e,n,r)}}function si(t,e){return{inputMatrix:new Tr(t,e,.08),inputHidden:new Tr(t,t,.08),inputBias:new Sr(t,1),forgetMatrix:new Tr(t,e,.08),forgetHidden:new Tr(t,t,.08),forgetBias:new Sr(t,1),outputMatrix:new Tr(t,e,.08),outputHidden:new Tr(t,t,.08),outputBias:new Sr(t,1),cellActivationMatrix:new Tr(t,e,.08),cellActivationHidden:new Tr(t,t,.08),cellActivationBias:new Sr(t,1)}}function oi(t,e,n,r){if(!r.inputMatrix||!r.inputHidden||!r.inputBias||!r.forgetMatrix||!r.forgetHidden||!r.forgetBias||!r.outputMatrix||!r.outputHidden||!r.outputBias||!r.cellActivationMatrix||!r.cellActivationHidden||!r.cellActivationBias)throw new Error("hiddenLayer does not have expected properties");const i=t.sigmoid.bind(t),a=t.add.bind(t),s=t.multiply.bind(t),o=t.multiplyElement.bind(t),u=t.tanh.bind(t),l=i(a(a(s(r.inputMatrix,e),s(r.inputHidden,n)),r.inputBias)),c=i(a(a(s(r.forgetMatrix,e),s(r.forgetHidden,n)),r.forgetBias)),h=i(a(a(s(r.outputMatrix,e),s(r.outputHidden,n)),r.outputBias)),p=u(a(a(s(r.cellActivationMatrix,e),s(r.cellActivationHidden,n)),r.cellActivationBias)),f=o(c,n),d=o(l,p);return o(h,u(a(f,d)))}class ui extends ni{getHiddenLayer(t,e){return si(t,e)}getEquation(t,e,n,r){return oi(t,e,n,r)}}function li(t,e){const n=[];for(;t<e;t++)n.push(t);return n}function ci(t){return Array.isArray(t)?Float32Array.from(t):Float32Array.from(Object.values(t))}function hi(t){let{pixelX:e,pixelY:n,radius:r,inputs:i,row:a,line:s,fontSize:o,fontClassName:u}=t,l=`<rect\n              x="${e/2-r}"\n              y="${n/2+a*n-r}"\n              width="${2*r}"\n              height="${2*r}"\n              stroke="black"\n              stroke-width="1"\n              fill="${i.color}"\n              class="${i.className}" />\n            <line\n              x1="${e/4}"\n              y1="${n/2+a*n}"\n              x2="${e/2-r}"\n              y2="${n/2+a*n}"\n              style="stroke:${s.color};stroke-width:${s.width}"\n              class="${s.className}" />`;return i.labels&&(l+=`<text\n              x="${e/8}"\n              y="${n/2+a*n-5}"\n              fill="black"\n              font-size="${o}"\n              class="${u}">${i.labels[a]}</text>`),l}function pi(t){let{pixelX:e,pixelY:n,row:r,column:i,radius:a,hidden:s}=t;return`<circle\n            cx="${e/2+i*e}"\n            cy="${n/2+r*n}"\n            r="${a}"\n            stroke="black"\n            stroke-width="1"\n            fill="${s.color}"\n            class="${s.className}" />`}function fi(t){let{pixelX:e,pixelY:n,row:r,column:i,line:a,outputs:s,radius:o}=t;return`<circle\n            cx="${e/2+i*e}"\n            cy="${n/2+r*n}"\n            r="${o}"\n            stroke="black"\n            stroke-width="1"\n            fill="${s.color}"\n            class="${s.className}" />\n          <line\n            x1="${e/2+i*e+o}"\n            y1="${n/2+r*n}"\n            x2="${e/2+i*e+e/4}"\n            y2="${n/2+r*n}"\n            style="stroke:${a.color};stroke-width:${a.width}"\n            class="${a.className}" />`}function di(t){let{pixelX:e,pixelY:n,row:r,column:i,radius:a,lineY:s,line:o,previousConnectionIndex:u}=t;return`<line\n            x1="${e/2+(i-1)*e+a}"\n            y1="${s/2+u*s}"\n            x2="${e/2+i*e-a}"\n            y2="${n/2+r*n}"\n            style="stroke:${o.color};stroke-width:${o.width}"\n            class="${o.className}" />`}function mi(t){const{sizes:e,height:n,width:r}=t;let i="";const a=r/e.length;for(let s=0;s<e.length;s++){const r=e[s],o=n/r;for(let u=0;u<r;u++)if(0===s)i+=hi({pixelX:a,pixelY:o,row:u,column:s,...t});else{s===e.length-1?i+=fi({pixelX:a,pixelY:o,row:u,column:s,...t}):i+=pi({pixelX:a,pixelY:o,row:u,column:s,...t});const r=e[s-1],l=n/r;for(let e=0;e<r;e++)i+=di({pixelX:a,pixelY:o,row:u,column:s,lineY:l,previousConnectionIndex:e,...t})}}return i}function gi(t){let{pixelX:e,pixelY:n,row:r,column:i,radius:a,recurrentLine:s}=t;const o=e/2+i*e+a+1,u=n/2+r*n,l=o-2*a-2;return`<path\n              d="M ${o} ${u} C ${l+100} ${u+50}, ${o-100} ${u+50}, ${l} ${u}"\n              stroke="${s.color}"\n              stroke-width="${s.width}"\n              fill="transparent"\n              stroke-linecap="round"\n              marker-end="url(#arrow)"\n              class="${s.className}" />`}function yi(t){const{width:e,height:n,recurrentLine:r,sizes:i,radius:a}=t,s=e/i.length;let o=`<defs>\n              <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">\n                <path d="M0,0 L0,6 L9,3 z" fill="${r.color}" />\n              </marker>\n            </defs>`;o+=mi(t);for(let u=1;u<i.length;u++){const t=i[u],e=n/t;for(let n=0;n<t;n++)o+=gi({pixelX:s,pixelY:e,row:n,column:u,radius:a,recurrentLine:r})}return o}function vi(t){const{options:e}=t;if(!e)throw new Error("options not defined");if(!e.inputLayer)throw new Error("options.inputLater not defined");if(!e.hiddenLayers)throw new Error("options.hiddenLayers not defined");if(e.hiddenLayers.length<1)throw new Error("options.hiddenLayers is empty");if(!e.outputLayer)throw new Error("options.outputLayer not defined");const n=e.inputLayer(),r=[];r.push(e.hiddenLayers[0](n,0));for(let a=1;a<e.hiddenLayers.length;a++)r.push(e.hiddenLayers[a](r[a-1],a));const i=e.outputLayer(r[r.length-1],r.length);return{inputSize:n.height,hiddenLayers:r.map((t=>t.height)),outputSize:i.height}}function bi(t){const e=[],{options:n}=t;if(!n.inputLayer)throw new Error("inputLayer not defined");if(!n.outputLayer)throw new Error("outputLayer not defined");const r=n.inputLayer();e.push(n.hiddenLayers[0](r,Rn(),0));for(let a=1;a<n.hiddenLayers.length;a++)e.push(n.hiddenLayers[a](e[a-1],Rn(),a));const i=n.outputLayer(e[e.length-1],-1);return{inputSize:r.height,hiddenLayers:e.map((t=>t.height)),outputSize:i.height}}function xi(t,e,n){return`<svg\n            xmlns="http://www.w3.org/2000/svg"\n            xmlns:xlink="http://www.w3.org/1999/xlink"\n            version="1.1"\n            width="${e}"\n            height="${n}">${t}</svg>`}function wi(t){return t.sizes}function Si(t){const{options:e,sizes:n}=t,{inputSize:r,outputSize:i,hiddenLayers:a}=e;if(!n){if("number"===typeof r&&r<1)throw new Error("inputSize not set");if("number"===typeof i&&i<1)throw new Error("outputSize not set");if(null===a||void 0===a?void 0:a.some((t=>t<1)))throw new Error("hiddenLayers not set")}return"number"===typeof r&&Array.isArray(a)&&"number"===typeof i?[r].concat(a).concat([i]):n}function Ti(t){const{options:e}=t,{inputSize:n,outputSize:r,hiddenLayers:i}=e;return[n].concat(i).concat([r])}function ki(){return{line:{width:.5,color:"black",className:"connection"},recurrentLine:{width:1,color:"red",className:"recurrence"},inputs:{color:"rgba(0, 128, 0, 0.5)",labels:null,className:"input"},outputs:{color:"rgba(100, 149, 237, 0.5)",className:"output"},hidden:{color:"rgba(255, 127, 80, 0.5)",className:"hidden-neuron"},fontSize:"14px",fontClassName:"label",radius:8,width:400,height:250,sizes:[]}}function Ai(t,e){const n={...ki(),...e},{width:r,height:i,inputs:a}=n;let s=[];if(t instanceof W||t instanceof mt)s=Si(t);else if(t instanceof wr){const{inputSize:e,hiddenLayers:n,outputSize:r}=bi(t);s=[e].concat(n).concat([r])}else if(t instanceof vr){const{inputSize:e,hiddenLayers:n,outputSize:r}=vi(t);s=[e].concat(n).concat([r])}else{if(t instanceof qr||t instanceof ai||t instanceof Jr||t instanceof ni||t instanceof ui||t instanceof ii)return xi(yi({...n,sizes:Ei(Ti(t),a.labels)}),r,i);if(t.hasOwnProperty("type"))switch(t.type){case"NeuralNetwork":case"NeuralNetworkGPU":return xi(mi({...n,sizes:Ei(wi(t),a.labels)}),r,i);case"RNN":case"GRU":case"LSTM":case"RNNTimeStep":case"GRUTimeStep":case"LSTMTimeStep":return xi(yi({...n,sizes:Ei(Ti(t),a.labels)}),r,i);default:throw new Error("unrecognized network")}else if(t.hasOwnProperty("inputSize")&&t.hasOwnProperty("hiddenLayers")&&t.hasOwnProperty("outputSize")){const{inputSize:e,hiddenLayers:n,outputSize:r}=t;s=[e,...n,r]}else{if(!t.hasOwnProperty("sizes"))throw new Error("unrecognized network");s=t.sizes}}return xi(mi({...n,sizes:Ei(s,a.labels)}),r,i)}function Ei(t,e){if(!t)throw new Error("sizes not set");if(t.some((t=>t<1)))throw new Error("sizes not set correctly");if(e&&e.length!==t[0])throw new Error("not enough labels for inputs");return t}const _i={RNNTimeStep:ni,LSTMTimeStep:ui,GRUTimeStep:ii,RNN:qr,LSTM:ai,GRU:Jr},Oi={max:P,mse:C,ones:an,ones2D:sn,random:R,randomWeight:D,randos:z,range:li,toArray:ci,DataFormatter:kr,zeros:B,toSVG:Ai};t.AE=yt,t.CrossValidate=vt,t.FeedForward=vr,t.NeuralNetwork=W,t.NeuralNetworkGPU=mt,t.Recurrent=wr,t.activation=d,t.layer=fr,t.layerTypes=pr,t.likely=br,t.lookup=b,t.praxis=ne,t.recurrent=_i,t.utilities=Oi,Object.defineProperty(t,"__esModule",{value:!0})}(e)},2866:(t,e,n)=>{var r=n(2969);t.exports=function(t){return function(e){return r(e,t)}}},2929:(t,e,n)=>{var r=n(6552).Uint8Array;t.exports=r},2969:(t,e,n)=>{var r=n(5324),i=n(914);t.exports=function(t,e){for(var n=0,a=(e=r(e,t)).length;null!=t&&n<a;)t=t[i(e[n++])];return n&&n==a?t:void 0}},3028:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},3097:(t,e,n)=>{var r=n(2969);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},3204:(t,e,n)=>{var r=n(3343),i=n(2777),a=n(4052),s=n(4543),o=n(9194),u=n(1268),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=a(t),c=!n&&i(t),h=!n&&!c&&s(t),p=!n&&!c&&!h&&u(t),f=n||c||h||p,d=f?r(t.length,String):[],m=d.length;for(var g in t)!e&&!l.call(t,g)||f&&("length"==g||h&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||o(g,m))||d.push(g);return d}},3211:t=>{t.exports=function(t,e){return t===e||t!==t&&e!==e}},3218:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3279:t=>{t.exports=function(t){return t}},3331:(t,e,n)=>{var r=n(9676),i=n(929),a=n(7303);t.exports=function(t){return function(e,n,s){return s&&"number"!=typeof s&&i(e,n,s)&&(n=s=void 0),e=a(e),void 0===n?(n=e,e=0):n=a(n),s=void 0===s?e<n?1:-1:a(s),r(e,n,s,t)}}},3343:t=>{t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},3366:(t,e,n)=>{var r=n(7894),i=n(9057);t.exports=function(t,e){return null!=t&&i(t,e,r)}},3411:(t,e,n)=>{var r=n(149),i=n(9096),a=n(8883),s=n(4052);t.exports=function(t,e){return(s(t)?r:a)(t,i(e,3))}},3440:(t,e,n)=>{var r=n(6552)["__core-js_shared__"];t.exports=r},3538:(t,e,n)=>{var r=n(755),i=n(3411);t.exports=function(t,e){return r(i(t,e),1)}},3668:(t,e,n)=>{var r=n(8902),i=n(2587),a=n(8114);t.exports=function(t,e,n,s,o,u){var l=1&n,c=t.length,h=e.length;if(c!=h&&!(l&&h>c))return!1;var p=u.get(t),f=u.get(e);if(p&&f)return p==e&&f==t;var d=-1,m=!0,g=2&n?new r:void 0;for(u.set(t,e),u.set(e,t);++d<c;){var y=t[d],v=e[d];if(s)var b=l?s(v,y,d,e,t,u):s(y,v,d,t,e,u);if(void 0!==b){if(b)continue;m=!1;break}if(g){if(!i(e,(function(t,e){if(!a(g,e)&&(y===t||o(y,t,n,s,u)))return g.push(e)}))){m=!1;break}}else if(y!==v&&!o(y,v,n,s,u)){m=!1;break}}return u.delete(t),u.delete(e),m}},3713:(t,e,n)=>{var r=n(6140),i=n(1143),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}},3781:(t,e,n)=>{var r=n(9417),i=n(8673);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var a=e[n],s=t[a];e[n]=[a,s,r(s)]}return e}},3871:t=>{t.exports=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(i);++r<i;)a[r]=t[r+e];return a}},3892:t=>{t.exports=function(t){return this.__data__.has(t)}},3932:(t,e,n)=>{var r=n(396),i=n(2866),a=n(2597),s=n(914);t.exports=function(t){return a(t)?r(s(t)):i(t)}},3950:(t,e,n)=>{var r=n(6686),i=n(4757),a=n(801),s=Math.max,o=Math.min;t.exports=function(t,e,n){var u,l,c,h,p,f,d=0,m=!1,g=!1,y=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function v(e){var n=u,r=l;return u=l=void 0,d=e,h=t.apply(r,n)}function b(t){var n=t-f;return void 0===f||n>=e||n<0||g&&t-d>=c}function x(){var t=i();if(b(t))return w(t);p=setTimeout(x,function(t){var n=e-(t-f);return g?o(n,c-(t-d)):n}(t))}function w(t){return p=void 0,y&&u?v(t):(u=l=void 0,h)}function S(){var t=i(),n=b(t);if(u=arguments,l=this,f=t,n){if(void 0===p)return function(t){return d=t,p=setTimeout(x,e),m?v(t):h}(f);if(g)return clearTimeout(p),p=setTimeout(x,e),v(f)}return void 0===p&&(p=setTimeout(x,e)),h}return e=a(e)||0,r(n)&&(m=!!n.leading,c=(g="maxWait"in n)?s(a(n.maxWait)||0,e):c,y="trailing"in n?!!n.trailing:y),S.cancel=function(){void 0!==p&&clearTimeout(p),d=0,u=f=l=p=void 0},S.flush=function(){return void 0===p?h:w(i())},S}},4020:t=>{t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},4052:t=>{var e=Array.isArray;t.exports=e},4065:t=>{t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},4079:(t,e,n)=>{var r=n(8259),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,s=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(a,"$1"):n||t)})),e}));t.exports=s},4160:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},4190:(t,e,n)=>{var r=n(1340);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},4202:(t,e)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator;var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||d}function v(){}function b(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||d}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,m(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,T={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function A(t,e,r){var i,a={},s=null,o=null;if(null!=e)for(i in void 0!==e.ref&&(o=e.ref),void 0!==e.key&&(s=""+e.key),e)S.call(e,i)&&!k.hasOwnProperty(i)&&(a[i]=e[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}if(t&&t.defaultProps)for(i in u=t.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:t,key:s,ref:o,props:a,_owner:T.current}}function E(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var _=/\/+/g;function O(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function I(t,e,i,a,s){var o=typeof t;"undefined"!==o&&"boolean"!==o||(t=null);var u=!1;if(null===t)u=!0;else switch(o){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case n:case r:u=!0}}if(u)return s=s(u=t),t=""===a?"."+O(u,0):a,w(s)?(i="",null!=t&&(i=t.replace(_,"$&/")+"/"),I(s,e,i,"",(function(t){return t}))):null!=s&&(E(s)&&(s=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(s,i+(!s.key||u&&u.key===s.key?"":(""+s.key).replace(_,"$&/")+"/")+t)),e.push(s)),1;if(u=0,a=""===a?".":a+":",w(t))for(var l=0;l<t.length;l++){var c=a+O(o=t[l],l);u+=I(o,e,i,c,s)}else if(c=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"===typeof c)for(t=c.call(t),l=0;!(o=t.next()).done;)u+=I(o=o.value,e,i,c=a+O(o,l++),s);else if("object"===o)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return u}function L(t,e,n){if(null==t)return t;var r=[],i=0;return I(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function P(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var C={current:null},D={transition:null},M={ReactCurrentDispatcher:C,ReactCurrentBatchConfig:D,ReactCurrentOwner:T};function N(){throw Error("act(...) is not supported in production builds of React.")}e.Children={map:L,forEach:function(t,e,n){L(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return L(t,(function(){e++})),e},toArray:function(t){return L(t,(function(t){return t}))||[]},only:function(t){if(!E(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=y,e.Fragment=i,e.Profiler=s,e.PureComponent=b,e.StrictMode=a,e.Suspense=c,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,e.act=N,e.cloneElement=function(t,e,r){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=m({},t.props),a=t.key,s=t.ref,o=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,o=T.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(l in e)S.call(e,l)&&!k.hasOwnProperty(l)&&(i[l]=void 0===e[l]&&void 0!==u?u[l]:e[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:t.type,key:a,ref:s,props:i,_owner:o}},e.createContext=function(t){return(t={$$typeof:u,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:t},t.Consumer=t},e.createElement=A,e.createFactory=function(t){var e=A.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:l,render:t}},e.isValidElement=E,e.lazy=function(t){return{$$typeof:p,_payload:{_status:-1,_result:t},_init:P}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=D.transition;D.transition={};try{t()}finally{D.transition=e}},e.unstable_act=N,e.useCallback=function(t,e){return C.current.useCallback(t,e)},e.useContext=function(t){return C.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return C.current.useDeferredValue(t)},e.useEffect=function(t,e){return C.current.useEffect(t,e)},e.useId=function(){return C.current.useId()},e.useImperativeHandle=function(t,e,n){return C.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return C.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return C.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return C.current.useMemo(t,e)},e.useReducer=function(t,e,n){return C.current.useReducer(t,e,n)},e.useRef=function(t){return C.current.useRef(t)},e.useState=function(t){return C.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return C.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return C.current.useTransition()},e.version="18.3.1"},4258:(t,e,n)=>{var r=n(5906)();t.exports=r},4262:(t,e,n)=>{var r=n(8895),i=n(4052);t.exports=function(t,e,n){var a=e(t);return i(t)?a:r(a,n(t))}},4391:(t,e,n)=>{"use strict";var r=n(7950);e.createRoot=r.createRoot,e.hydrateRoot=r.hydrateRoot},4416:(t,e,n)=>{var r=n(8902),i=n(5866),a=n(1558),s=n(8114),o=n(8182),u=n(2074);t.exports=function(t,e,n){var l=-1,c=i,h=t.length,p=!0,f=[],d=f;if(n)p=!1,c=a;else if(h>=200){var m=e?null:o(t);if(m)return u(m);p=!1,c=s,d=new r}else d=e?[]:f;t:for(;++l<h;){var g=t[l],y=e?e(g):g;if(g=n||0!==g?g:0,p&&y===y){for(var v=d.length;v--;)if(d[v]===y)continue t;e&&d.push(y),f.push(g)}else c(d,y,n)||(d!==f&&d.push(y),f.push(g))}return f}},4543:(t,e,n)=>{t=n.nmd(t);var r=n(6552),i=n(14),a=e&&!e.nodeType&&e,s=a&&t&&!t.nodeType&&t,o=s&&s.exports===a?r.Buffer:void 0,u=(o?o.isBuffer:void 0)||i;t.exports=u},4545:(t,e,n)=>{var r=n(7160);t.exports=function(){this.__data__=new r,this.size=0}},4552:(t,e,n)=>{var r=n(9812),i=Object.prototype,a=i.hasOwnProperty,s=i.toString,o=r?r.toStringTag:void 0;t.exports=function(t){var e=a.call(t,o),n=t[o];try{t[o]=void 0;var r=!0}catch(u){}var i=s.call(t);return r&&(e?t[o]=n:delete t[o]),i}},4597:(t,e,n)=>{var r=n(2587),i=n(9096),a=n(2165),s=n(4052),o=n(929);t.exports=function(t,e,n){var u=s(t)?r:a;return n&&o(t,e,n)&&(e=void 0),u(t,i(e,3))}},4657:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},4664:(t,e,n)=>{var r=n(4258),i=n(8673);t.exports=function(t,e){return t&&r(t,e,i)}},4746:(t,e,n)=>{var r=n(5652);t.exports=function(t,e){var n=!0;return r(t,(function(t,r,i){return n=!!e(t,r,i)})),n}},4757:(t,e,n)=>{var r=n(6552);t.exports=function(){return r.Date.now()}},4816:(t,e,n)=>{var r=n(7251),i=n(7159),a=n(438),s=n(9394),o=n(6874);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=s,u.prototype.set=o,t.exports=u},5029:(t,e,n)=>{var r=n(6989),i=n(3097),a=n(3366),s=n(2597),o=n(9417),u=n(1310),l=n(914);t.exports=function(t,e){return s(t)&&o(e)?u(l(t),e):function(n){var s=i(n,t);return void 0===s&&s===e?a(n,t):r(e,s,3)}}},5043:(t,e,n)=>{"use strict";t.exports=n(4202)},5051:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},5173:(t,e,n)=>{t.exports=n(1497)()},5193:(t,e,n)=>{var r=n(6913),i=n(2761);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},5204:(t,e,n)=>{var r=n(7937)(n(6552),"Map");t.exports=r},5268:(t,e,n)=>{var r=n(9160);t.exports=function(t){return r(t)&&t!=+t}},5295:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}},5324:(t,e,n)=>{var r=n(4052),i=n(2597),a=n(4079),s=n(1069);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:a(s(t))}},5387:(t,e,n)=>{var r=n(7937)(n(6552),"Promise");t.exports=r},5428:(t,e,n)=>{var r=n(6913),i=n(6173),a=n(2761),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return a(t)&&i(t.length)&&!!s[r(t)]}},5538:(t,e,n)=>{var r=n(7160),i=n(4545),a=n(793),s=n(7760),o=n(3892),u=n(6788);function l(t){var e=this.__data__=new r(t);this.size=e.size}l.prototype.clear=i,l.prototype.delete=a,l.prototype.get=s,l.prototype.has=o,l.prototype.set=u,t.exports=l},5575:(t,e,n)=>{var r=n(7937)(Object,"create");t.exports=r},5636:(t,e,n)=>{var r=n(1170),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var a=arguments,s=-1,o=i(a.length-e,0),u=Array(o);++s<o;)u[s]=a[e+s];s=-1;for(var l=Array(e+1);++s<e;)l[s]=a[s];return l[e]=n(u),r(t,this,l)}}},5647:(t,e,n)=>{var r=n(3279),i=n(5636),a=n(6350);t.exports=function(t,e){return a(i(t,e,r),t+"")}},5652:(t,e,n)=>{var r=n(4664),i=n(6516)(r);t.exports=i},5654:(t,e,n)=>{var r=n(7937),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},5713:t=>{t.exports=function(){}},5752:(t,e,n)=>{var r=n(9395),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,a,s,o){var u=1&n,l=r(t),c=l.length;if(c!=r(e).length&&!u)return!1;for(var h=c;h--;){var p=l[h];if(!(u?p in e:i.call(e,p)))return!1}var f=o.get(t),d=o.get(e);if(f&&d)return f==e&&d==t;var m=!0;o.set(t,e),o.set(e,t);for(var g=u;++h<c;){var y=t[p=l[h]],v=e[p];if(a)var b=u?a(v,y,p,e,t,o):a(y,v,p,t,e,o);if(!(void 0===b?y===v||s(y,v,n,a,o):b)){m=!1;break}g||(g="constructor"==p)}if(m&&!g){var x=t.constructor,w=e.constructor;x==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(m=!1)}return o.delete(t),o.delete(e),m}},5797:(t,e,n)=>{var r=n(4816);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var s=t.apply(this,r);return n.cache=a.set(i,s)||a,s};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},5816:t=>{t.exports=function(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}},5866:(t,e,n)=>{var r=n(8468);t.exports=function(t,e){return!!(null==t?0:t.length)&&r(t,e,0)>-1}},5893:(t,e,n)=>{var r=n(6599);t.exports=function(t,e,n){for(var i=-1,a=t.criteria,s=e.criteria,o=a.length,u=n.length;++i<o;){var l=r(a[i],s[i]);if(l)return i>=u?l:l*("desc"==n[i]?-1:1)}return t.index-e.index}},5906:t=>{t.exports=function(t){return function(e,n,r){for(var i=-1,a=Object(e),s=r(e),o=s.length;o--;){var u=s[t?o:++i];if(!1===n(a[u],u,a))break}return e}}},5967:t=>{t.exports=function(t){return t.split("")}},5990:(t,e,n)=>{var r=n(3028)(Object.getPrototypeOf,Object);t.exports=r},6095:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},6140:t=>{var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},6173:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},6179:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},6311:t=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},6350:(t,e,n)=>{var r=n(8325),i=n(6578)(r);t.exports=i},6361:(t,e,n)=>{var r=n(6913),i=n(2761);t.exports=function(t){return!0===t||!1===t||i(t)&&"[object Boolean]"==r(t)}},6378:(t,e)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case a:case o:case s:case p:case f:return t;default:switch(t=t&&t.$$typeof){case c:case l:case h:case m:case d:case u:return t;default:return e}}case i:return e}}}n=Symbol.for("react.module.reference"),e.isFragment=function(t){return y(t)===a}},6399:(t,e,n)=>{var r=n(5538),i=n(3668),a=n(9987),s=n(5752),o=n(6924),u=n(4052),l=n(4543),c=n(1268),h="[object Arguments]",p="[object Array]",f="[object Object]",d=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,m,g,y){var v=u(t),b=u(e),x=v?p:o(t),w=b?p:o(e),S=(x=x==h?f:x)==f,T=(w=w==h?f:w)==f,k=x==w;if(k&&l(t)){if(!l(e))return!1;v=!0,S=!1}if(k&&!S)return y||(y=new r),v||c(t)?i(t,e,n,m,g,y):a(t,e,x,n,m,g,y);if(!(1&n)){var A=S&&d.call(t,"__wrapped__"),E=T&&d.call(e,"__wrapped__");if(A||E){var _=A?t.value():t,O=E?e.value():e;return y||(y=new r),g(_,O,n,m,y)}}return!!k&&(y||(y=new r),s(t,e,n,m,g,y))}},6516:(t,e,n)=>{var r=n(6571);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var a=n.length,s=e?a:-1,o=Object(n);(e?s--:++s<a)&&!1!==i(o[s],s,o););return n}}},6532:(t,e,n)=>{var r=n(5538),i=n(6989);t.exports=function(t,e,n,a){var s=n.length,o=s,u=!a;if(null==t)return!o;for(t=Object(t);s--;){var l=n[s];if(u&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++s<o;){var c=(l=n[s])[0],h=t[c],p=l[1];if(u&&l[2]){if(void 0===h&&!(c in t))return!1}else{var f=new r;if(a)var d=a(h,p,c,t,e,f);if(!(void 0===d?i(p,h,3,a,f):d))return!1}}return!0}},6552:(t,e,n)=>{var r=n(7105),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();t.exports=a},6571:(t,e,n)=>{var r=n(1629),i=n(6173);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},6578:t=>{var e=Date.now;t.exports=function(t){var n=0,r=0;return function(){var i=e(),a=16-(i-r);if(r=i,a>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}},6599:(t,e,n)=>{var r=n(9841);t.exports=function(t,e){if(t!==e){var n=void 0!==t,i=null===t,a=t===t,s=r(t),o=void 0!==e,u=null===e,l=e===e,c=r(e);if(!u&&!c&&!s&&t>e||s&&o&&l&&!u&&!c||i&&o&&l||!n&&l||!a)return 1;if(!i&&!s&&!c&&t<e||c&&n&&a&&!i&&!s||u&&n&&a||!o&&a||!l)return-1}return 0}},6600:(t,e,n)=>{var r=n(7937)(n(6552),"WeakMap");t.exports=r},6604:(t,e,n)=>{var r=n(3331)();t.exports=r},6686:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},6704:t=>{t.exports=function(t){return this.__data__.has(t)}},6745:(t,e,n)=>{var r=n(9742),i=n(61),a=n(3279);t.exports=function(t){return t&&t.length?r(t,a,i):void 0}},6788:(t,e,n)=>{var r=n(7160),i=n(5204),a=n(4816);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<199)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(s)}return n.set(t,e),this.size=n.size,this}},6832:(t,e,n)=>{t=n.nmd(t);var r=n(7105),i=e&&!e.nodeType&&e,a=i&&t&&!t.nodeType&&t,s=a&&a.exports===i&&r.process,o=function(){try{var t=a&&a.require&&a.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(e){}}();t.exports=o},6874:(t,e,n)=>{var r=n(2622);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},6913:(t,e,n)=>{var r=n(9812),i=n(4552),a=n(6095),s=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?i(t):a(t)}},6924:(t,e,n)=>{var r=n(7685),i=n(5204),a=n(5387),s=n(2070),o=n(6600),u=n(6913),l=n(6996),c="[object Map]",h="[object Promise]",p="[object Set]",f="[object WeakMap]",d="[object DataView]",m=l(r),g=l(i),y=l(a),v=l(s),b=l(o),x=u;(r&&x(new r(new ArrayBuffer(1)))!=d||i&&x(new i)!=c||a&&x(a.resolve())!=h||s&&x(new s)!=p||o&&x(new o)!=f)&&(x=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?l(n):"";if(r)switch(r){case m:return d;case g:return c;case y:return h;case v:return p;case b:return f}return e}),t.exports=x},6954:(t,e,n)=>{var r=n(1629),i=n(7857),a=n(6686),s=n(6996),o=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,c=u.toString,h=l.hasOwnProperty,p=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!a(t)||i(t))&&(r(t)?p:o).test(s(t))}},6989:(t,e,n)=>{var r=n(6399),i=n(2761);t.exports=function t(e,n,a,s,o){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!==e&&n!==n:r(e,n,a,s,t,o))}},6996:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(n){}try{return t+""}catch(n){}}return""}},7002:(t,e,n)=>{var r=n(5295),i=n(4746),a=n(9096),s=n(4052),o=n(929);t.exports=function(t,e,n){var u=s(t)?r:i;return n&&o(t,e,n)&&(e=void 0),u(t,a(e,3))}},7105:(t,e,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},7116:(t,e,n)=>{var r=n(9812),i=n(2777),a=n(4052),s=r?r.isConcatSpreadable:void 0;t.exports=function(t){return a(t)||i(t)||!!(s&&t&&t[s])}},7159:(t,e,n)=>{var r=n(2622);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},7160:(t,e,n)=>{var r=n(7563),i=n(9935),a=n(4190),s=n(1946),o=n(1714);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=s,u.prototype.set=o,t.exports=u},7234:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<a(i,e)))break t;t[r]=e,t[n]=i,n=r}}function r(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,s=i>>>1;r<s;){var o=2*(r+1)-1,u=t[o],l=o+1,c=t[l];if(0>a(u,n))l<i&&0>a(c,u)?(t[r]=c,t[l]=n,r=l):(t[r]=u,t[o]=n,r=o);else{if(!(l<i&&0>a(c,n)))break t;t[r]=c,t[l]=n,r=l}}}return e}function a(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,u=o.now();e.unstable_now=function(){return o.now()-u}}var l=[],c=[],h=1,p=null,f=3,d=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(t){for(var e=r(c);null!==e;){if(null===e.callback)i(c);else{if(!(e.startTime<=t))break;i(c),e.sortIndex=e.expirationTime,n(l,e)}e=r(c)}}function w(t){if(g=!1,x(t),!m)if(null!==r(l))m=!0,D(S);else{var e=r(c);null!==e&&M(w,e.startTime-t)}}function S(t,n){m=!1,g&&(g=!1,v(E),E=-1),d=!0;var a=f;try{for(x(n),p=r(l);null!==p&&(!(p.expirationTime>n)||t&&!I());){var s=p.callback;if("function"===typeof s){p.callback=null,f=p.priorityLevel;var o=s(p.expirationTime<=n);n=e.unstable_now(),"function"===typeof o?p.callback=o:p===r(l)&&i(l),x(n)}else i(l);p=r(l)}if(null!==p)var u=!0;else{var h=r(c);null!==h&&M(w,h.startTime-n),u=!1}return u}finally{p=null,f=a,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var T,k=!1,A=null,E=-1,_=5,O=-1;function I(){return!(e.unstable_now()-O<_)}function L(){if(null!==A){var t=e.unstable_now();O=t;var n=!0;try{n=A(!0,t)}finally{n?T():(k=!1,A=null)}}else k=!1}if("function"===typeof b)T=function(){b(L)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,C=P.port2;P.port1.onmessage=L,T=function(){C.postMessage(null)}}else T=function(){y(L,0)};function D(t){A=t,k||(k=!0,T())}function M(t,n){E=y((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||d||(m=!0,D(S))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,i,a){var s=e.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,t){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return t={id:h++,callback:i,priorityLevel:t,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(t.sortIndex=a,n(c,t),null===r(l)&&t===r(c)&&(g?(v(E),E=-1):g=!0,M(w,a-s))):(t.sortIndex=o,n(l,t),m||d||(m=!0,D(S))),t},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},7251:(t,e,n)=>{var r=n(8724),i=n(7160),a=n(5204);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},7283:t=>{"use strict";var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function a(t,e,r,a,s){if("function"!==typeof r)throw new TypeError("The listener must be a function");var o=new i(r,a||t,s),u=n?n+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],o]:t._events[u].push(o):(t._events[u]=o,t._eventsCount++),t}function s(t,e){0===--t._eventsCount?t._events=new r:delete t._events[e]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},o.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,s=new Array(a);i<a;i++)s[i]=r[i].fn;return s},o.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},o.prototype.emit=function(t,e,r,i,a,s){var o=n?n+t:t;if(!this._events[o])return!1;var u,l,c=this._events[o],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,r),!0;case 4:return c.fn.call(c.context,e,r,i),!0;case 5:return c.fn.call(c.context,e,r,i,a),!0;case 6:return c.fn.call(c.context,e,r,i,a,s),!0}for(l=1,u=new Array(h-1);l<h;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var p,f=c.length;for(l=0;l<f;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),h){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,r);break;case 4:c[l].fn.call(c[l].context,e,r,i);break;default:if(!u)for(p=1,u=new Array(h-1);p<h;p++)u[p-1]=arguments[p];c[l].fn.apply(c[l].context,u)}}return!0},o.prototype.on=function(t,e,n){return a(this,t,e,n,!1)},o.prototype.once=function(t,e,n){return a(this,t,e,n,!0)},o.prototype.removeListener=function(t,e,r,i){var a=n?n+t:t;if(!this._events[a])return this;if(!e)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==e||i&&!o.once||r&&o.context!==r||s(this,a);else{for(var u=0,l=[],c=o.length;u<c;u++)(o[u].fn!==e||i&&!o[u].once||r&&o[u].context!==r)&&l.push(o[u]);l.length?this._events[a]=1===l.length?l[0]:l:s(this,a)}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&s(this,e)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o},7303:(t,e,n)=>{var r=n(801),i=1/0;t.exports=function(t){return t?(t=r(t))===i||t===-1/0?17976931348623157e292*(t<0?-1:1):t===t?t:0:0===t?t:0}},7424:(t,e,n)=>{var r=n(755),i=n(2536),a=n(5647),s=n(929),o=a((function(t,e){if(null==t)return[];var n=e.length;return n>1&&s(t,e[0],e[1])?e=[]:n>2&&s(e[0],e[1],e[2])&&(e=[e[0]]),i(t,r(e,1),[])}));t.exports=o},7498:t=>{t.exports=function(t,e){return t>e}},7529:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var s=t[n];e(s,n,t)&&(a[i++]=s)}return a}},7563:t=>{t.exports=function(){this.__data__=[],this.size=0}},7574:t=>{t.exports=function(t){return function(e){return t(e)}}},7615:(t,e,n)=>{var r=n(5575);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},7676:(t,e,n)=>{var r=n(8189),i=n(6311),a=n(9115),s=n(1069);t.exports=function(t){return function(e){e=s(e);var n=i(e)?a(e):void 0,o=n?n[0]:e.charAt(0),u=n?r(n,1).join(""):e.slice(1);return o[t]()+u}}},7685:(t,e,n)=>{var r=n(7937)(n(6552),"DataView");t.exports=r},7760:t=>{t.exports=function(t){return this.__data__.get(t)}},7828:t=>{t.exports=function(){return[]}},7857:(t,e,n)=>{var r=n(3440),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!i&&i in t}},7894:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},7937:(t,e,n)=>{var r=n(6954),i=n(4657);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},7950:(t,e,n)=>{"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(2730)},8114:t=>{t.exports=function(t,e){return t.has(e)}},8182:(t,e,n)=>{var r=n(2070),i=n(5713),a=n(2074),s=r&&1/a(new r([,-0]))[1]==1/0?function(t){return new r(t)}:i;t.exports=s},8189:(t,e,n)=>{var r=n(3871);t.exports=function(t,e,n){var i=t.length;return n=void 0===n?i:n,!e&&n>=i?t:r(t,e,n)}},8210:function(t,e,n){var r;!function(){"use strict";var i,a=1e9,s={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},o=!0,u="[DecimalError] ",l=u+"Invalid argument: ",c=u+"Exponent out of range: ",h=Math.floor,p=Math.pow,f=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,d=1e7,m=9007199254740991,g=h(1286742750677284.5),y={};function v(t,e){var n,r,i,a,s,u,l,c,h=t.constructor,p=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),o?O(e,p):e;if(l=t.d,c=e.d,s=t.e,i=e.e,l=l.slice(),a=s-i){for(a<0?(r=l,a=-a,u=c.length):(r=c,i=s,u=l.length),a>(u=(s=Math.ceil(p/7))>u?s+1:u+1)&&(a=u,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for((u=l.length)-(a=c.length)<0&&(a=u,r=c,c=l,l=r),n=0;a;)n=(l[--a]=l[a]+c[a]+n)/d|0,l[a]%=d;for(n&&(l.unshift(n),++i),u=l.length;0==l[--u];)l.pop();return e.d=l,e.e=i,o?O(e,p):e}function b(t,e,n){if(t!==~~t||t<e||t>n)throw Error(l+t)}function x(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)(n=7-(r=t[e]+"").length)&&(a+=A(n)),a+=r;(n=7-(r=(s=t[e])+"").length)&&(a+=A(n))}else if(0===s)return"0";for(;s%10===0;)s/=10;return a+s}y.absoluteValue=y.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t},y.comparedTo=y.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(e=0,n=(r=a.d.length)<(i=t.d.length)?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1},y.decimalPlaces=y.dp=function(){var t=this,e=t.d.length-1,n=7*(e-t.e);if(e=t.d[e])for(;e%10==0;e/=10)n--;return n<0?0:n},y.dividedBy=y.div=function(t){return w(this,new this.constructor(t))},y.dividedToIntegerBy=y.idiv=function(t){var e=this.constructor;return O(w(this,new e(t),0,1),e.precision)},y.equals=y.eq=function(t){return!this.cmp(t)},y.exponent=function(){return T(this)},y.greaterThan=y.gt=function(t){return this.cmp(t)>0},y.greaterThanOrEqualTo=y.gte=function(t){return this.cmp(t)>=0},y.isInteger=y.isint=function(){return this.e>this.d.length-2},y.isNegative=y.isneg=function(){return this.s<0},y.isPositive=y.ispos=function(){return this.s>0},y.isZero=function(){return 0===this.s},y.lessThan=y.lt=function(t){return this.cmp(t)<0},y.lessThanOrEqualTo=y.lte=function(t){return this.cmp(t)<1},y.logarithm=y.log=function(t){var e,n=this,r=n.constructor,a=r.precision,s=a+5;if(void 0===t)t=new r(10);else if((t=new r(t)).s<1||t.eq(i))throw Error(u+"NaN");if(n.s<1)throw Error(u+(n.s?"NaN":"-Infinity"));return n.eq(i)?new r(0):(o=!1,e=w(E(n,s),E(t,s),s),o=!0,O(e,a))},y.minus=y.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?I(e,t):v(e,(t.s=-t.s,t))},y.modulo=y.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(!(t=new r(t)).s)throw Error(u+"NaN");return n.s?(o=!1,e=w(n,t,0,1).times(t),o=!0,n.minus(e)):O(new r(n),i)},y.naturalExponential=y.exp=function(){return S(this)},y.naturalLogarithm=y.ln=function(){return E(this)},y.negated=y.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t},y.plus=y.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?v(e,t):I(e,(t.s=-t.s,t))},y.precision=y.sd=function(t){var e,n,r,i=this;if(void 0!==t&&t!==!!t&&1!==t&&0!==t)throw Error(l+t);if(e=T(i)+1,n=7*(r=i.d.length-1)+1,r=i.d[r]){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n},y.squareRoot=y.sqrt=function(){var t,e,n,r,i,a,s,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(u+"NaN")}for(t=T(l),o=!1,0==(i=Math.sqrt(+l))||i==1/0?(((e=x(l.d)).length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=h((t+1)/2)-(t<0||t%2),r=new c(e=i==1/0?"5e"+t:(e=i.toExponential()).slice(0,e.indexOf("e")+1)+t)):r=new c(i.toString()),i=s=(n=c.precision)+3;;)if(r=(a=r).plus(w(l,a,s+2)).times(.5),x(a.d).slice(0,s)===(e=x(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&"4999"==e){if(O(a,n+1,0),a.times(a).eq(l)){r=a;break}}else if("9999"!=e)break;s+=4}return o=!0,O(r,n)},y.times=y.mul=function(t){var e,n,r,i,a,s,u,l,c,h=this,p=h.constructor,f=h.d,m=(t=new p(t)).d;if(!h.s||!t.s)return new p(0);for(t.s*=h.s,n=h.e+t.e,(l=f.length)<(c=m.length)&&(a=f,f=m,m=a,s=l,l=c,c=s),a=[],r=s=l+c;r--;)a.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)u=a[i]+m[r]*f[i-r-1]+e,a[i--]=u%d|0,e=u/d|0;a[i]=(a[i]+e)%d|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,o?O(t,p.precision):t},y.toDecimalPlaces=y.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),void 0===t?n:(b(t,0,a),void 0===e?e=r.rounding:b(e,0,8),O(n,t+T(n)+1,e))},y.toExponential=function(t,e){var n,r=this,i=r.constructor;return void 0===t?n=L(r,!0):(b(t,0,a),void 0===e?e=i.rounding:b(e,0,8),n=L(r=O(new i(r),t+1,e),!0,t+1)),n},y.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return void 0===t?L(i):(b(t,0,a),void 0===e?e=s.rounding:b(e,0,8),n=L((r=O(new s(i),t+T(i)+1,e)).abs(),!1,t+T(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)},y.toInteger=y.toint=function(){var t=this,e=t.constructor;return O(new e(t),T(t)+1,e.rounding)},y.toNumber=function(){return+this},y.toPower=y.pow=function(t){var e,n,r,a,s,l,c=this,p=c.constructor,f=+(t=new p(t));if(!t.s)return new p(i);if(!(c=new p(c)).s){if(t.s<1)throw Error(u+"Infinity");return c}if(c.eq(i))return c;if(r=p.precision,t.eq(i))return O(c,r);if(l=(e=t.e)>=(n=t.d.length-1),s=c.s,l){if((n=f<0?-f:f)<=m){for(a=new p(i),e=Math.ceil(r/7+4),o=!1;n%2&&P((a=a.times(c)).d,e),0!==(n=h(n/2));)P((c=c.times(c)).d,e);return o=!0,t.s<0?new p(i).div(a):O(a,r)}}else if(s<0)throw Error(u+"NaN");return s=s<0&&1&t.d[Math.max(e,n)]?-1:1,c.s=1,o=!1,a=t.times(E(c,r+12)),o=!0,(a=S(a)).s=s,a},y.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return void 0===t?r=L(i,(n=T(i))<=s.toExpNeg||n>=s.toExpPos):(b(t,1,a),void 0===e?e=s.rounding:b(e,0,8),r=L(i=O(new s(i),t,e),t<=(n=T(i))||n<=s.toExpNeg,t)),r},y.toSignificantDigits=y.tosd=function(t,e){var n=this.constructor;return void 0===t?(t=n.precision,e=n.rounding):(b(t,1,a),void 0===e?e=n.rounding:b(e,0,8)),O(new n(this),t,e)},y.toString=y.valueOf=y.val=y.toJSON=function(){var t=this,e=T(t),n=t.constructor;return L(t,e<=n.toExpNeg||e>=n.toExpPos)};var w=function(){function t(t,e){var n,r=0,i=t.length;for(t=t.slice();i--;)n=t[i]*e+r,t[i]=n%d|0,r=n/d|0;return r&&t.unshift(r),t}function e(t,e,n,r){var i,a;if(n!=r)a=n>r?1:-1;else for(i=a=0;i<n;i++)if(t[i]!=e[i]){a=t[i]>e[i]?1:-1;break}return a}function n(t,e,n){for(var r=0;n--;)t[n]-=r,r=t[n]<e[n]?1:0,t[n]=r*d+t[n]-e[n];for(;!t[0]&&t.length>1;)t.shift()}return function(r,i,a,s){var o,l,c,h,p,f,m,g,y,v,b,x,w,S,k,A,E,_,I=r.constructor,L=r.s==i.s?1:-1,P=r.d,C=i.d;if(!r.s)return new I(r);if(!i.s)throw Error(u+"Division by zero");for(l=r.e-i.e,E=C.length,k=P.length,g=(m=new I(L)).d=[],c=0;C[c]==(P[c]||0);)++c;if(C[c]>(P[c]||0)&&--l,(x=null==a?a=I.precision:s?a+(T(r)-T(i))+1:a)<0)return new I(0);if(x=x/7+2|0,c=0,1==E)for(h=0,C=C[0],x++;(c<k||h)&&x--;c++)w=h*d+(P[c]||0),g[c]=w/C|0,h=w%C|0;else{for((h=d/(C[0]+1)|0)>1&&(C=t(C,h),P=t(P,h),E=C.length,k=P.length),S=E,v=(y=P.slice(0,E)).length;v<E;)y[v++]=0;(_=C.slice()).unshift(0),A=C[0],C[1]>=d/2&&++A;do{h=0,(o=e(C,y,E,v))<0?(b=y[0],E!=v&&(b=b*d+(y[1]||0)),(h=b/A|0)>1?(h>=d&&(h=d-1),1==(o=e(p=t(C,h),y,f=p.length,v=y.length))&&(h--,n(p,E<f?_:C,f))):(0==h&&(o=h=1),p=C.slice()),(f=p.length)<v&&p.unshift(0),n(y,p,v),-1==o&&(o=e(C,y,E,v=y.length))<1&&(h++,n(y,E<v?_:C,v)),v=y.length):0===o&&(h++,y=[0]),g[c++]=h,o&&y[0]?y[v++]=P[S]||0:(y=[P[S]],v=1)}while((S++<k||void 0!==y[0])&&x--)}return g[0]||g.shift(),m.e=l,O(m,s?a+T(m)+1:a)}}();function S(t,e){var n,r,a,s,u,l=0,h=0,f=t.constructor,d=f.precision;if(T(t)>16)throw Error(c+T(t));if(!t.s)return new f(i);for(null==e?(o=!1,u=d):u=e,s=new f(.03125);t.abs().gte(.1);)t=t.times(s),h+=5;for(u+=Math.log(p(2,h))/Math.LN10*2+5|0,n=r=a=new f(i),f.precision=u;;){if(r=O(r.times(t),u),n=n.times(++l),x((s=a.plus(w(r,n,u))).d).slice(0,u)===x(a.d).slice(0,u)){for(;h--;)a=O(a.times(a),u);return f.precision=d,null==e?(o=!0,O(a,d)):a}a=s}}function T(t){for(var e=7*t.e,n=t.d[0];n>=10;n/=10)e++;return e}function k(t,e,n){if(e>t.LN10.sd())throw o=!0,n&&(t.precision=n),Error(u+"LN10 precision limit exceeded");return O(new t(t.LN10),e)}function A(t){for(var e="";t--;)e+="0";return e}function E(t,e){var n,r,a,s,l,c,h,p,f,d=1,m=t,g=m.d,y=m.constructor,v=y.precision;if(m.s<1)throw Error(u+(m.s?"NaN":"-Infinity"));if(m.eq(i))return new y(0);if(null==e?(o=!1,p=v):p=e,m.eq(10))return null==e&&(o=!0),k(y,p);if(p+=10,y.precision=p,r=(n=x(g)).charAt(0),s=T(m),!(Math.abs(s)<15e14))return h=k(y,p+2,v).times(s+""),m=E(new y(r+"."+n.slice(1)),p-10).plus(h),y.precision=v,null==e?(o=!0,O(m,v)):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=x((m=m.times(t)).d)).charAt(0),d++;for(s=T(m),r>1?(m=new y("0."+n),s++):m=new y(r+"."+n.slice(1)),c=l=m=w(m.minus(i),m.plus(i),p),f=O(m.times(m),p),a=3;;){if(l=O(l.times(f),p),x((h=c.plus(w(l,new y(a),p))).d).slice(0,p)===x(c.d).slice(0,p))return c=c.times(2),0!==s&&(c=c.plus(k(y,p+2,v).times(s+""))),c=w(c,new y(d),p),y.precision=v,null==e?(o=!0,O(c,v)):c;c=h,a+=2}}function _(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;48===e.charCodeAt(r);)++r;for(i=e.length;48===e.charCodeAt(i-1);)--i;if(e=e.slice(r,i)){if(i-=r,n=n-r-1,t.e=h(n/7),t.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=7;r<i;)t.d.push(+e.slice(r,r+=7));r=7-(e=e.slice(r)).length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),o&&(t.e>g||t.e<-g))throw Error(c+n)}else t.s=0,t.e=0,t.d=[0];return t}function O(t,e,n){var r,i,a,s,u,l,f,m,y=t.d;for(s=1,a=y[0];a>=10;a/=10)s++;if((r=e-s)<0)r+=7,i=e,f=y[m=0];else{if((m=Math.ceil((r+1)/7))>=(a=y.length))return t;for(f=a=y[m],s=1;a>=10;a/=10)s++;i=(r%=7)-7+s}if(void 0!==n&&(u=f/(a=p(10,s-i-1))%10|0,l=e<0||void 0!==y[m+1]||f%a,l=n<4?(u||l)&&(0==n||n==(t.s<0?3:2)):u>5||5==u&&(4==n||l||6==n&&(r>0?i>0?f/p(10,s-i):0:y[m-1])%10&1||n==(t.s<0?8:7))),e<1||!y[0])return l?(a=T(t),y.length=1,e=e-a-1,y[0]=p(10,(7-e%7)%7),t.e=h(-e/7)||0):(y.length=1,y[0]=t.e=t.s=0),t;if(0==r?(y.length=m,a=1,m--):(y.length=m+1,a=p(10,7-r),y[m]=i>0?(f/p(10,s-i)%p(10,i)|0)*a:0),l)for(;;){if(0==m){(y[0]+=a)==d&&(y[0]=1,++t.e);break}if(y[m]+=a,y[m]!=d)break;y[m--]=0,a=1}for(r=y.length;0===y[--r];)y.pop();if(o&&(t.e>g||t.e<-g))throw Error(c+T(t));return t}function I(t,e){var n,r,i,a,s,u,l,c,h,p,f=t.constructor,m=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),o?O(e,m):e;if(l=t.d,p=e.d,r=e.e,c=t.e,l=l.slice(),s=c-r){for((h=s<0)?(n=l,s=-s,u=p.length):(n=p,r=c,u=l.length),s>(i=Math.max(Math.ceil(m/7),u)+2)&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for((h=(i=l.length)<(u=p.length))&&(u=i),i=0;i<u;i++)if(l[i]!=p[i]){h=l[i]<p[i];break}s=0}for(h&&(n=l,l=p,p=n,e.s=-e.s),u=l.length,i=p.length-u;i>0;--i)l[u++]=0;for(i=p.length;i>s;){if(l[--i]<p[i]){for(a=i;a&&0===l[--a];)l[a]=d-1;--l[a],l[i]+=d}l[i]-=p[i]}for(;0===l[--u];)l.pop();for(;0===l[0];l.shift())--r;return l[0]?(e.d=l,e.e=r,o?O(e,m):e):new f(0)}function L(t,e,n){var r,i=T(t),a=x(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+A(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+A(-i-1)+a,n&&(r=n-s)>0&&(a+=A(r))):i>=s?(a+=A(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+A(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=A(r))),t.s<0?"-"+a:a}function P(t,e){if(t.length>e)return t.length=e,!0}function C(t){if(!t||"object"!==typeof t)throw Error(u+"Object expected");var e,n,r,i=["precision",1,a,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if(void 0!==(r=t[n=i[e]])){if(!(h(r)===r&&r>=i[e+1]&&r<=i[e+2]))throw Error(l+n+": "+r);this[n]=r}if(void 0!==(r=t[n="LN10"])){if(r!=Math.LN10)throw Error(l+n+": "+r);this[n]=new this(r)}return this}s=function t(e){var n,r,i;function a(t){var e=this;if(!(e instanceof a))return new a(t);if(e.constructor=a,t instanceof a)return e.s=t.s,e.e=t.e,void(e.d=(t=t.d)?t.slice():t);if("number"===typeof t){if(0*t!==0)throw Error(l+t);if(t>0)e.s=1;else{if(!(t<0))return e.s=0,e.e=0,void(e.d=[0]);t=-t,e.s=-1}return t===~~t&&t<1e7?(e.e=0,void(e.d=[t])):_(e,t.toString())}if("string"!==typeof t)throw Error(l+t);if(45===t.charCodeAt(0)?(t=t.slice(1),e.s=-1):e.s=1,!f.test(t))throw Error(l+t);_(e,t)}if(a.prototype=y,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=t,a.config=a.set=C,void 0===e&&(e={}),e)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<i.length;)e.hasOwnProperty(r=i[n++])||(e[r]=this[r]);return a.config(e),a}(s),s.default=s.Decimal=s,i=new s(1),void 0===(r=function(){return s}.call(e,n,e,t))||(t.exports=r)}()},8259:(t,e,n)=>{var r=n(5797);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},8325:(t,e,n)=>{var r=n(2541),i=n(5654),a=n(3279),s=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:a;t.exports=s},8468:(t,e,n)=>{var r=n(5816),i=n(644),a=n(4020);t.exports=function(t,e,n){return e===e?a(t,e,n):r(t,i,n)}},8541:(t,e,n)=>{var r=n(9812),i=n(149),a=n(4052),s=n(9841),o=r?r.prototype:void 0,u=o?o.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(a(e))return i(e,t)+"";if(s(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},8673:(t,e,n)=>{var r=n(3204),i=n(3713),a=n(6571);t.exports=function(t){return a(t)?r(t):i(t)}},8724:(t,e,n)=>{var r=n(7615),i=n(5051),a=n(2154),s=n(8734),o=n(2662);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=s,u.prototype.set=o,t.exports=u},8734:(t,e,n)=>{var r=n(5575),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},8853:(t,e,n)=>{"use strict";t.exports=n(7234)},8883:(t,e,n)=>{var r=n(5652),i=n(6571);t.exports=function(t,e){var n=-1,a=i(t)?Array(t.length):[];return r(t,(function(t,r,i){a[++n]=e(t,r,i)})),a}},8895:t=>{t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},8902:(t,e,n)=>{var r=n(4816),i=n(6179),a=n(6704);function s(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}s.prototype.add=s.prototype.push=i,s.prototype.has=a,t.exports=s},8990:(t,e,n)=>{var r=n(9995)(n(2520));t.exports=r},9057:(t,e,n)=>{var r=n(5324),i=n(2777),a=n(4052),s=n(9194),o=n(6173),u=n(914);t.exports=function(t,e,n){for(var l=-1,c=(e=r(e,t)).length,h=!1;++l<c;){var p=u(e[l]);if(!(h=null!=t&&n(t,p)))break;t=t[p]}return h||++l!=c?h:!!(c=null==t?0:t.length)&&o(c)&&s(p,c)&&(a(t)||i(t))}},9062:(t,e,n)=>{"use strict";t.exports=n(6378)},9096:(t,e,n)=>{var r=n(9256),i=n(5029),a=n(3279),s=n(4052),o=n(3932);t.exports=function(t){return"function"==typeof t?t:null==t?a:"object"==typeof t?s(t)?i(t[0],t[1]):r(t):o(t)}},9115:(t,e,n)=>{var r=n(5967),i=n(6311),a=n(715);t.exports=function(t){return i(t)?a(t):r(t)}},9140:(t,e,n)=>{var r=n(7303);t.exports=function(t){var e=r(t),n=e%1;return e===e?n?e-n:e:0}},9160:(t,e,n)=>{var r=n(6913),i=n(2761);t.exports=function(t){return"number"==typeof t||i(t)&&"[object Number]"==r(t)}},9194:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}},9256:(t,e,n)=>{var r=n(6532),i=n(3781),a=n(1310);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?a(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},9394:(t,e,n)=>{var r=n(2622);t.exports=function(t){return r(this,t).has(t)}},9395:(t,e,n)=>{var r=n(4262),i=n(9621),a=n(8673);t.exports=function(t){return r(t,a,i)}},9417:(t,e,n)=>{var r=n(6686);t.exports=function(t){return t===t&&!r(t)}},9621:(t,e,n)=>{var r=n(7529),i=n(7828),a=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,o=s?function(t){return null==t?[]:(t=Object(t),r(s(t),(function(e){return a.call(t,e)})))}:i;t.exports=o},9676:t=>{var e=Math.ceil,n=Math.max;t.exports=function(t,r,i,a){for(var s=-1,o=n(e((r-t)/(i||1)),0),u=Array(o);o--;)u[a?o:++s]=t,t+=i;return u}},9686:t=>{t.exports=function(t){return null==t}},9742:(t,e,n)=>{var r=n(9841);t.exports=function(t,e,n){for(var i=-1,a=t.length;++i<a;){var s=t[i],o=e(s);if(null!=o&&(void 0===u?o===o&&!r(o):n(o,u)))var u=o,l=s}return l}},9812:(t,e,n)=>{var r=n(6552).Symbol;t.exports=r},9841:(t,e,n)=>{var r=n(6913),i=n(2761);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},9853:(t,e,n)=>{var r=n(6989);t.exports=function(t,e){return r(t,e)}},9889:(t,e,n)=>{var r=n(3950),i=n(6686);t.exports=function(t,e,n){var a=!0,s=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return i(n)&&(a="leading"in n?!!n.leading:a,s="trailing"in n?!!n.trailing:s),r(t,e,{leading:a,maxWait:e,trailing:s})}},9935:(t,e,n)=>{var r=n(1340),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},9987:(t,e,n)=>{var r=n(9812),i=n(2929),a=n(3211),s=n(3668),o=n(4160),u=n(2074),l=r?r.prototype:void 0,c=l?l.valueOf:void 0;t.exports=function(t,e,n,r,l,h,p){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var f=o;case"[object Set]":var d=1&r;if(f||(f=u),t.size!=e.size&&!d)return!1;var m=p.get(t);if(m)return m==e;r|=2,p.set(t,e);var g=s(f(t),f(e),r,l,h,p);return p.delete(t),g;case"[object Symbol]":if(c)return c.call(t)==c.call(e)}return!1}},9995:(t,e,n)=>{var r=n(9096),i=n(6571),a=n(8673);t.exports=function(t){return function(e,n,s){var o=Object(e);if(!i(e)){var u=r(n,3);e=a(e),n=function(t){return u(o[t],t,o)}}var l=t(e,n,s);return l>-1?o[u?e[l]:l]:void 0}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var a=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},(()=>{var t,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var s={};t=t||[null,e({}),e([]),e(e)];for(var o=2&i&&r;"object"==typeof o&&!~t.indexOf(o);o=e(o))Object.getOwnPropertyNames(o).forEach((t=>s[t]=()=>r[t]));return s.default=()=>r,n.d(a,s),a}})(),n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,r)=>(n.f[r](t,e),e)),[])),n.u=t=>"static/js/"+t+".93fb3b65.chunk.js",n.miniCssF=t=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={},e="price_predicter:";n.l=(r,i,a,s)=>{if(t[r])t[r].push(i);else{var o,u;if(void 0!==a)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var h=l[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==e+a){o=h;break}}o||(u=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",e+a),o.src=r),t[r]=[i];var p=(e,n)=>{o.onerror=o.onload=null,clearTimeout(f);var i=t[r];if(delete t[r],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((t=>t(n))),e)return e(n)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=p.bind(null,o.onerror),o.onload=p.bind(null,o.onload),u&&document.head.appendChild(o)}}})(),n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),n.p="/price_prediction/",(()=>{var t={792:0};n.f.j=(e,r)=>{var i=n.o(t,e)?t[e]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise(((n,r)=>i=t[e]=[n,r]));r.push(i[2]=a);var s=n.p+n.u(e),o=new Error;n.l(s,(r=>{if(n.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;o.message="Loading chunk "+e+" failed.\n("+a+": "+s+")",o.name="ChunkLoadError",o.type=a,o.request=s,i[1](o)}}),"chunk-"+e,e)}};var e=(e,r)=>{var i,a,s=r[0],o=r[1],u=r[2],l=0;if(s.some((e=>0!==t[e]))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(u)u(n)}for(e&&e(r);l<s.length;l++)a=s[l],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0},r=self.webpackChunkprice_predicter=self.webpackChunkprice_predicter||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})(),(()=>{"use strict";var t={};n.r(t),n.d(t,{scaleBand:()=>Pi,scaleDiverging:()=>lc,scaleDivergingLog:()=>cc,scaleDivergingPow:()=>pc,scaleDivergingSqrt:()=>fc,scaleDivergingSymlog:()=>hc,scaleIdentity:()=>no,scaleImplicit:()=>Ii,scaleLinear:()=>eo,scaleLog:()=>ho,scaleOrdinal:()=>Li,scalePoint:()=>Di,scalePow:()=>wo,scaleQuantile:()=>Do,scaleQuantize:()=>Mo,scaleRadial:()=>ko,scaleSequential:()=>nc,scaleSequentialLog:()=>rc,scaleSequentialPow:()=>ac,scaleSequentialQuantile:()=>oc,scaleSequentialSqrt:()=>sc,scaleSequentialSymlog:()=>ic,scaleSqrt:()=>So,scaleSymlog:()=>go,scaleThreshold:()=>No,scaleTime:()=>Ql,scaleUtc:()=>Zl,tickFormat:()=>Zs});var e=n(5043),r=n.t(e,2),i=n(4391),a=n(579);const s=["Downtown","Suburban","Rural"],o=t=>{let{onSubmit:n,disabled:r}=t;const[i,o]=(0,e.useState)({area:"",bedrooms:"",bathrooms:"",location:"",age:""}),[u,l]=(0,e.useState)({}),c=t=>{const{name:e,value:n}=t.target;o((t=>({...t,[e]:"location"===e?n:""===n?"":Number(n)}))),u[e]&&l((t=>({...t,[e]:null})))};return(0,a.jsxs)("div",{className:"input-form-container",children:[(0,a.jsx)("h2",{children:"Property Details"}),(0,a.jsx)("p",{children:"Enter the details of the property to get a price prediction"}),(0,a.jsxs)("form",{onSubmit:t=>{t.preventDefault(),(()=>{let t={},e=!0;return i.area?i.area<450?(t.area="Area must be at least 450 sq ft",e=!1):i.area>5800&&(t.area="Area cannot exceed 5800 sq ft",e=!1):(t.area="Area is required",e=!1),i.bedrooms?i.bedrooms<=0?(t.bedrooms="Bedrooms must be greater than 0",e=!1):i.bedrooms>5&&(t.bedrooms="Bedrooms cannot exceed 5",e=!1):(t.bedrooms="Number of bedrooms is required",e=!1),i.bathrooms?i.bathrooms<1?(t.bathrooms="Bathrooms must be at least 1",e=!1):i.bathrooms>5&&(t.bathrooms="Bathrooms cannot exceed 5",e=!1):(t.bathrooms="Number of bathrooms is required",e=!1),i.location||(t.location="Location is required",e=!1),i.age||0===i.age?i.age<0?(t.age="Age cannot be negative",e=!1):i.age>100&&(t.age="Age cannot exceed 100 years",e=!1):(t.age="Property age is required",e=!1),l(t),e})()&&n(i)},children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsxs)("label",{htmlFor:"area",children:[(0,a.jsx)("i",{className:"fas fa-vector-square"})," Area (sq ft)"]}),(0,a.jsx)("input",{type:"number",id:"area",name:"area",value:i.area,onChange:c,className:u.area?"is-invalid":"",disabled:r,min:"450",max:"5800",placeholder:"Enter property area"}),u.area&&(0,a.jsx)("div",{className:"invalid-feedback",children:u.area})]}),(0,a.jsxs)("div",{className:"form-row",children:[(0,a.jsxs)("div",{className:"form-group half",children:[(0,a.jsxs)("label",{htmlFor:"bedrooms",children:[(0,a.jsx)("i",{className:"fas fa-bed"})," Bedrooms"]}),(0,a.jsx)("input",{type:"number",id:"bedrooms",name:"bedrooms",value:i.bedrooms,onChange:c,className:u.bedrooms?"is-invalid":"",disabled:r,min:"1",max:"5",placeholder:"Number of bedrooms"}),u.bedrooms&&(0,a.jsx)("div",{className:"invalid-feedback",children:u.bedrooms})]}),(0,a.jsxs)("div",{className:"form-group half",children:[(0,a.jsxs)("label",{htmlFor:"bathrooms",children:[(0,a.jsx)("i",{className:"fas fa-bath"})," Bathrooms"]}),(0,a.jsx)("input",{type:"number",id:"bathrooms",name:"bathrooms",value:i.bathrooms,onChange:c,className:u.bathrooms?"is-invalid":"",disabled:r,step:"0.5",min:"1",max:"5",placeholder:"Number of bathrooms"}),u.bathrooms&&(0,a.jsx)("div",{className:"invalid-feedback",children:u.bathrooms})]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsxs)("label",{htmlFor:"location",children:[(0,a.jsx)("i",{className:"fas fa-map-marker-alt"})," Location"]}),(0,a.jsxs)("select",{id:"location",name:"location",value:i.location,onChange:c,disabled:r,className:u.location?"is-invalid":"",children:[(0,a.jsx)("option",{value:"",children:"Select location"}),s.map((t=>(0,a.jsx)("option",{value:t,children:t},t)))]}),u.location&&(0,a.jsx)("div",{className:"invalid-feedback",children:u.location})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsxs)("label",{htmlFor:"age",children:[(0,a.jsx)("i",{className:"fas fa-calendar-alt"})," Property Age (years)"]}),(0,a.jsx)("input",{type:"number",id:"age",name:"age",value:i.age,onChange:c,className:u.age?"is-invalid":"",disabled:r,min:"0",max:"100",placeholder:"Enter property age"}),u.age&&(0,a.jsx)("div",{className:"invalid-feedback",children:u.age})]}),(0,a.jsx)("div",{className:"form-actions",children:(0,a.jsx)("button",{type:"submit",className:"predict-button",disabled:r,children:r?(0,a.jsxs)("span",{children:[(0,a.jsx)("i",{className:"fas fa-spinner fa-spin"})," Processing..."]}):(0,a.jsxs)("span",{children:[(0,a.jsx)("i",{className:"fas fa-calculator"})," Predict Price"]})})})]})]})},u=t=>{let{prediction:e,isLoading:n,isModelLoading:r,error:i,modelName:s}=t;return(0,a.jsxs)("div",{className:"prediction-result-container",children:[(0,a.jsxs)("h2",{children:["Property Valuation",s&&!r&&(0,a.jsxs)("span",{className:"model-name-badge",children:["Using: ",s]})]}),(()=>{return i&&!e?(0,a.jsxs)("div",{className:"error-state",children:[(0,a.jsx)("i",{className:"fas fa-exclamation-circle error-icon"}),(0,a.jsx)("h3",{children:"Prediction Error"}),(0,a.jsx)("p",{children:i}),(0,a.jsx)("p",{className:"error-help",children:"Please check your inputs and try again."})]}):r?(0,a.jsxs)("div",{className:"loading-state",children:[(0,a.jsx)("div",{className:"spinner"}),(0,a.jsx)("p",{children:"Initializing prediction model..."}),(0,a.jsx)("p",{className:"loading-subtitle",children:"This may take a few moments"})]}):n?(0,a.jsxs)("div",{className:"loading-state",children:[(0,a.jsx)("div",{className:"spinner"}),(0,a.jsx)("p",{children:"Calculating property value..."})]}):e?(0,a.jsxs)("div",{className:"prediction-content",children:[(0,a.jsxs)("div",{className:"price-highlight",children:[(0,a.jsx)("span",{className:"price-label",children:"Estimated Price"}),(0,a.jsx)("span",{className:"price-value",children:(t=e.price,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t))})]}),(0,a.jsxs)("div",{className:"prediction-details",children:[(0,a.jsxs)("div",{className:"detail-item",children:[(0,a.jsx)("i",{className:"fas fa-vector-square"}),(0,a.jsx)("span",{className:"detail-label",children:"Area:"}),(0,a.jsxs)("span",{className:"detail-value",children:[e.input.area," sq ft"]})]}),(0,a.jsxs)("div",{className:"detail-item",children:[(0,a.jsx)("i",{className:"fas fa-bed"}),(0,a.jsx)("span",{className:"detail-label",children:"Bedrooms:"}),(0,a.jsx)("span",{className:"detail-value",children:e.input.bedrooms})]}),(0,a.jsxs)("div",{className:"detail-item",children:[(0,a.jsx)("i",{className:"fas fa-bath"}),(0,a.jsx)("span",{className:"detail-label",children:"Bathrooms:"}),(0,a.jsx)("span",{className:"detail-value",children:e.input.bathrooms})]}),(0,a.jsxs)("div",{className:"detail-item",children:[(0,a.jsx)("i",{className:"fas fa-map-marker-alt"}),(0,a.jsx)("span",{className:"detail-label",children:"Location:"}),(0,a.jsx)("span",{className:"detail-value",children:e.input.location})]}),(0,a.jsxs)("div",{className:"detail-item",children:[(0,a.jsx)("i",{className:"fas fa-calendar-alt"}),(0,a.jsx)("span",{className:"detail-label",children:"Property Age:"}),(0,a.jsxs)("span",{className:"detail-value",children:[e.input.age," years"]})]})]}),(0,a.jsx)("div",{className:"prediction-disclaimer",children:(0,a.jsx)("p",{children:"This prediction is based on market data. Actual market value may vary."})})]}):(0,a.jsxs)("div",{className:"empty-state",children:[(0,a.jsx)("i",{className:"fas fa-home empty-icon"}),(0,a.jsx)("h3",{children:"Ready to Predict"}),(0,a.jsx)("p",{children:'Fill out the form and click "Predict Price" to get an estimated property value.'})]});var t})()]})};function l(t){var e,n,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=l(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}const c=function(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=l(t))&&(r&&(r+=" "),r+=e);return r};var h=n(9889),p=n.n(h),f=n(620),d=n.n(f),m=n(5268),g=n.n(m),y=n(3097),v=n.n(y),b=n(9160),x=n.n(b),w=function(t){return 0===t?0:t>0?1:-1},S=function(t){return d()(t)&&t.indexOf("%")===t.length-1},T=function(t){return x()(t)&&!g()(t)},k=function(t){return T(t)||d()(t)},A=0,E=function(t){var e=++A;return"".concat(t||"").concat(e)},_=function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!T(t)&&!d()(t))return r;if(S(t)){var a=t.indexOf("%");n=e*parseFloat(t.slice(0,a))/100}else n=+t;return g()(n)&&(n=r),i&&n>e&&(n=e),n},O=function(t){if(!t)return null;var e=Object.keys(t);return e&&e.length?t[e[0]]:null},I=function(t,e){return T(t)&&T(e)?function(n){return t+n*(e-t)}:function(){return e}};function L(t,e,n){return t&&t.length?t.find((function(t){return t&&("function"===typeof e?e(t):v()(t,e))===n})):null}var P=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]},C=n(9686),D=n.n(C),M=n(1629),N=n.n(M),j=n(6686),$=n.n(j),R=n(9062);function z(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}var V=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],B=["points","pathLength"],U={svg:["viewBox","children"],polygon:B,polyline:B},K=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],G=function(t,n){if(!t||"function"===typeof t||"boolean"===typeof t)return null;var r=t;if((0,e.isValidElement)(t)&&(r=t.props),!$()(r))return null;var i={};return Object.keys(r).forEach((function(t){K.includes(t)&&(i[t]=n||function(e){return r[t](r,e)})})),i},W=function(t,e,n){if(!$()(t)||"object"!==F(t))return null;var r=null;return Object.keys(t).forEach((function(i){var a=t[i];K.includes(i)&&"function"===typeof a&&(r||(r={}),r[i]=function(t,e,n){return function(r){return t(e,n,r),null}}(a,e,n))})),r},H=["children"],X=["children"];function q(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var Y={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},J=function(t){return"string"===typeof t?t:t?t.displayName||t.name||"Component":""},Q=null,Z=null,tt=function t(n){if(n===Q&&Array.isArray(Z))return Z;var r=[];return e.Children.forEach(n,(function(e){D()(e)||((0,R.isFragment)(e)?r=r.concat(t(e.props.children)):r.push(e))})),Z=r,Q=n,r};function et(t,e){var n=[],r=[];return r=Array.isArray(e)?e.map((function(t){return J(t)})):[J(e)],tt(t).forEach((function(t){var e=v()(t,"type.displayName")||v()(t,"type.name");-1!==r.indexOf(e)&&n.push(t)})),n}function nt(t,e){var n=et(t,e);return n&&n[0]}var rt=function(t){if(!t||!t.props)return!1;var e=t.props,n=e.width,r=e.height;return!(!T(n)||n<=0||!T(r)||r<=0)},it=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],at=function(t){return t&&t.type&&d()(t.type)&&it.indexOf(t.type)>=0},st=function(t,n,r){if(!t||"function"===typeof t||"boolean"===typeof t)return null;var i=t;if((0,e.isValidElement)(t)&&(i=t.props),!$()(i))return null;var a={};return Object.keys(i).forEach((function(t){var e;(function(t,e,n,r){var i,a=null!==(i=null===U||void 0===U?void 0:U[r])&&void 0!==i?i:[];return!N()(t)&&(r&&a.includes(e)||V.includes(e))||n&&K.includes(e)})(null===(e=i)||void 0===e?void 0:e[t],t,n,r)&&(a[t]=i[t])})),a},ot=function t(n,r){if(n===r)return!0;var i=e.Children.count(n);if(i!==e.Children.count(r))return!1;if(0===i)return!0;if(1===i)return ut(Array.isArray(n)?n[0]:n,Array.isArray(r)?r[0]:r);for(var a=0;a<i;a++){var s=n[a],o=r[a];if(Array.isArray(s)||Array.isArray(o)){if(!t(s,o))return!1}else if(!ut(s,o))return!1}return!0},ut=function(t,e){if(D()(t)&&D()(e))return!0;if(!D()(t)&&!D()(e)){var n=t.props||{},r=n.children,i=q(n,H),a=e.props||{},s=a.children,o=q(a,X);return r&&s?z(i,o)&&ot(r,s):!r&&!s&&z(i,o)}return!1},lt=function(t,e){var n=[],r={};return tt(t).forEach((function(t,i){if(at(t))n.push(t);else if(t){var a=J(t.type),s=e[a]||{},o=s.handler,u=s.once;if(o&&(!u||!r[a])){var l=o(t,a,i);n.push(l),r[a]=!0}}})),n};function ct(t){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}function ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function pt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(n),!0).forEach((function(e){ft(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ft(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=ct(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ct(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,s,o=[],u=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return mt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var gt=(0,e.forwardRef)((function(t,n){var r=t.aspect,i=t.initialDimension,a=void 0===i?{width:-1,height:-1}:i,s=t.width,o=void 0===s?"100%":s,u=t.height,l=void 0===u?"100%":u,h=t.minWidth,f=void 0===h?0:h,d=t.minHeight,m=t.maxHeight,g=t.children,y=t.debounce,v=void 0===y?0:y,b=t.id,x=t.className,w=t.onResize,T=t.style,k=void 0===T?{}:T,A=(0,e.useRef)(null),E=(0,e.useRef)();E.current=w,(0,e.useImperativeHandle)(n,(function(){return Object.defineProperty(A.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),A.current},configurable:!0})}));var _=dt((0,e.useState)({containerWidth:a.width,containerHeight:a.height}),2),O=_[0],I=_[1],L=(0,e.useCallback)((function(t,e){I((function(n){var r=Math.round(t),i=Math.round(e);return n.containerWidth===r&&n.containerHeight===i?n:{containerWidth:r,containerHeight:i}}))}),[]);(0,e.useEffect)((function(){var t=function(t){var e,n=t[0].contentRect,r=n.width,i=n.height;L(r,i),null===(e=E.current)||void 0===e||e.call(E,r,i)};v>0&&(t=p()(t,v,{trailing:!0,leading:!1}));var e=new ResizeObserver(t),n=A.current.getBoundingClientRect(),r=n.width,i=n.height;return L(r,i),e.observe(A.current),function(){e.disconnect()}}),[L,v]);var C=(0,e.useMemo)((function(){var t=O.containerWidth,n=O.containerHeight;if(t<0||n<0)return null;P(S(o)||S(l),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",o,l),P(!r||r>0,"The aspect(%s) must be greater than zero.",r);var i=S(o)?t:o,a=S(l)?n:l;r&&r>0&&(i?a=i/r:a&&(i=a*r),m&&a>m&&(a=m)),P(i>0||a>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",i,a,o,l,f,d,r);var s=!Array.isArray(g)&&J(g.type).endsWith("Chart");return e.Children.map(g,(function(t){return e.isValidElement(t)?(0,e.cloneElement)(t,pt({width:i,height:a},s?{style:pt({height:"100%",width:"100%",maxHeight:a,maxWidth:i},t.props.style)}:{})):t}))}),[r,g,l,m,d,f,O,o]);return e.createElement("div",{id:b?"".concat(b):void 0,className:c("recharts-responsive-container",x),style:pt(pt({},k),{},{width:o,height:l,minWidth:f,minHeight:d,maxHeight:m}),ref:A},C)})),yt=n(6604),vt=n.n(yt),bt=n(7424),xt=n.n(bt),wt="Invariant failed";function St(t,e){if(!t)throw new Error(wt)}var Tt=["children","width","height","viewBox","className","style","title","desc"];function kt(){return kt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kt.apply(this,arguments)}function At(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Et(t){var n=t.children,r=t.width,i=t.height,a=t.viewBox,s=t.className,o=t.style,u=t.title,l=t.desc,h=At(t,Tt),p=a||{width:r,height:i,x:0,y:0},f=c("recharts-surface",s);return e.createElement("svg",kt({},st(h,!0,"svg"),{className:f,width:r,height:i,style:o,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height)}),e.createElement("title",null,u),e.createElement("desc",null,l),n)}var _t=["children","className"];function Ot(){return Ot=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ot.apply(this,arguments)}function It(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var Lt=e.forwardRef((function(t,n){var r=t.children,i=t.className,a=It(t,_t),s=c("recharts-layer",i);return e.createElement("g",Ot({className:s},st(a,!0),{ref:n}),r)}));function Pt(t){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pt(t)}function Ct(){return Ct=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ct.apply(this,arguments)}function Dt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,s,o=[],u=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return Mt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Nt(Object(n),!0).forEach((function(e){$t(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $t(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=Pt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Pt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rt(t){return Array.isArray(t)&&k(t[0])&&k(t[1])?t.join(" ~ "):t}var zt=function(t){var n=t.separator,r=void 0===n?" : ":n,i=t.contentStyle,a=void 0===i?{}:i,s=t.itemStyle,o=void 0===s?{}:s,u=t.labelStyle,l=void 0===u?{}:u,h=t.payload,p=t.formatter,f=t.itemSorter,d=t.wrapperClassName,m=t.labelClassName,g=t.label,y=t.labelFormatter,v=t.accessibilityLayer,b=void 0!==v&&v,x=jt({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),w=jt({margin:0},l),S=!D()(g),T=S?g:"",A=c("recharts-default-tooltip",d),E=c("recharts-tooltip-label",m);S&&y&&void 0!==h&&null!==h&&(T=y(g,h));var _=b?{role:"status","aria-live":"assertive"}:{};return e.createElement("div",Ct({className:A,style:x},_),e.createElement("p",{className:E,style:w},e.isValidElement(T)?T:"".concat(T)),function(){if(h&&h.length){var t=(f?xt()(h,f):h).map((function(t,n){if("none"===t.type)return null;var i=jt({display:"block",paddingTop:4,paddingBottom:4,color:t.color||"#000"},o),a=t.formatter||p||Rt,s=t.value,u=t.name,l=s,c=u;if(a&&null!=l&&null!=c){var f=a(s,u,t,n,h);if(Array.isArray(f)){var d=Dt(f,2);l=d[0],c=d[1]}else l=f}return e.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(n),style:i},k(c)?e.createElement("span",{className:"recharts-tooltip-item-name"},c):null,k(c)?e.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,e.createElement("span",{className:"recharts-tooltip-item-value"},l),e.createElement("span",{className:"recharts-tooltip-item-unit"},t.unit||""))}));return e.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},t)}return null}())};function Ft(t){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ft(t)}function Vt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=Ft(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ft(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Bt="recharts-tooltip-wrapper",Ut={visibility:"hidden"};function Kt(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return c(Bt,Vt(Vt(Vt(Vt({},"".concat(Bt,"-right"),T(n)&&e&&T(e.x)&&n>=e.x),"".concat(Bt,"-left"),T(n)&&e&&T(e.x)&&n<e.x),"".concat(Bt,"-bottom"),T(r)&&e&&T(e.y)&&r>=e.y),"".concat(Bt,"-top"),T(r)&&e&&T(e.y)&&r<e.y))}function Gt(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,a=t.position,s=t.reverseDirection,o=t.tooltipDimension,u=t.viewBox,l=t.viewBoxDimension;if(a&&T(a[r]))return a[r];var c=n[r]-o-i,h=n[r]+i;return e[r]?s[r]?c:h:s[r]?c<u[r]?Math.max(h,u[r]):Math.max(c,u[r]):h+o>u[r]+l?Math.max(c,u[r]):Math.max(h,u[r])}function Wt(t){return Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wt(t)}function Ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Xt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ht(Object(n),!0).forEach((function(e){te(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ee(r.key),r)}}function Yt(t,e,n){return e=Qt(e),function(t,e){if(e&&("object"===Wt(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Jt()?Reflect.construct(e,n||[],Qt(t).constructor):e.apply(t,n))}function Jt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Jt=function(){return!!t})()}function Qt(t){return Qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qt(t)}function Zt(t,e){return Zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zt(t,e)}function te(t,e,n){return(e=ee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ee(t){var e=function(t,e){if("object"!=Wt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Wt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Wt(e)?e:e+""}var ne=function(t){function n(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return te(t=Yt(this,n,[].concat(r)),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),te(t,"handleKeyDown",(function(e){var n,r,i,a;"Escape"===e.key&&t.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(n=null===(r=t.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==n?n:0,y:null!==(i=null===(a=t.props.coordinate)||void 0===a?void 0:a.y)&&void 0!==i?i:0}})})),t}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zt(t,e)}(n,t),r=n,(i=[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var t=this.wrapperNode.getBoundingClientRect();(Math.abs(t.width-this.state.lastBoundingBox.width)>1||Math.abs(t.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:t.width,height:t.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var t,e;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(t=this.props.coordinate)||void 0===t?void 0:t.x)===this.state.dismissedAtCoordinate.x&&(null===(e=this.props.coordinate)||void 0===e?void 0:e.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var t=this,n=this.props,r=n.active,i=n.allowEscapeViewBox,a=n.animationDuration,s=n.animationEasing,o=n.children,u=n.coordinate,l=n.hasPayload,c=n.isAnimationActive,h=n.offset,p=n.position,f=n.reverseDirection,d=n.useTranslate3d,m=n.viewBox,g=n.wrapperStyle,y=function(t){var e,n,r=t.allowEscapeViewBox,i=t.coordinate,a=t.offsetTopLeft,s=t.position,o=t.reverseDirection,u=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox;return{cssProperties:u.height>0&&u.width>0&&i?function(t){var e=t.translateX,n=t.translateY;return{transform:t.useTranslate3d?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}({translateX:e=Gt({allowEscapeViewBox:r,coordinate:i,key:"x",offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:u.width,viewBox:c,viewBoxDimension:c.width}),translateY:n=Gt({allowEscapeViewBox:r,coordinate:i,key:"y",offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:u.height,viewBox:c,viewBoxDimension:c.height}),useTranslate3d:l}):Ut,cssClasses:Kt({translateX:e,translateY:n,coordinate:i})}}({allowEscapeViewBox:i,coordinate:u,offsetTopLeft:h,position:p,reverseDirection:f,tooltipBox:this.state.lastBoundingBox,useTranslate3d:d,viewBox:m}),v=y.cssClasses,b=y.cssProperties,x=Xt(Xt({transition:c&&r?"transform ".concat(a,"ms ").concat(s):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&r&&l?"visible":"hidden",position:"absolute",top:0,left:0},g);return e.createElement("div",{tabIndex:-1,className:v,style:x,ref:function(e){t.wrapperNode=e}},o)}}])&&qt(r.prototype,i),a&&qt(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(e.PureComponent),re={isSsr:!("undefined"!==typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(t){return re[t]},set:function(t,e){if("string"===typeof t)re[t]=e;else{var n=Object.keys(t);n&&n.length&&n.forEach((function(e){re[e]=t[e]}))}}},ie=n(977),ae=n.n(ie);function se(t,e,n){return!0===e?ae()(t,n):N()(e)?ae()(t,e):t}function oe(t){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe(t)}function ue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function le(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ue(Object(n),!0).forEach((function(e){me(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ge(r.key),r)}}function he(t,e,n){return e=fe(e),function(t,e){if(e&&("object"===oe(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,pe()?Reflect.construct(e,n||[],fe(t).constructor):e.apply(t,n))}function pe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pe=function(){return!!t})()}function fe(t){return fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fe(t)}function de(t,e){return de=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},de(t,e)}function me(t,e,n){return(e=ge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ge(t){var e=function(t,e){if("object"!=oe(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==oe(e)?e:e+""}function ye(t){return t.dataKey}var ve=function(t){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),he(this,n,arguments)}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&de(t,e)}(n,t),r=n,(i=[{key:"render",value:function(){var t=this,n=this.props,r=n.active,i=n.allowEscapeViewBox,a=n.animationDuration,s=n.animationEasing,o=n.content,u=n.coordinate,l=n.filterNull,c=n.isAnimationActive,h=n.offset,p=n.payload,f=n.payloadUniqBy,d=n.position,m=n.reverseDirection,g=n.useTranslate3d,y=n.viewBox,v=n.wrapperStyle,b=null!==p&&void 0!==p?p:[];l&&b.length&&(b=se(p.filter((function(e){return null!=e.value&&(!0!==e.hide||t.props.includeHidden)})),f,ye));var x=b.length>0;return e.createElement(ne,{allowEscapeViewBox:i,animationDuration:a,animationEasing:s,isAnimationActive:c,active:r,coordinate:u,hasPayload:x,offset:h,position:d,reverseDirection:m,useTranslate3d:g,viewBox:y,wrapperStyle:v},function(t,n){return e.isValidElement(t)?e.cloneElement(t,n):"function"===typeof t?e.createElement(t,n):e.createElement(zt,n)}(o,le(le({},this.props),{},{payload:b})))}}])&&ce(r.prototype,i),a&&ce(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(e.PureComponent);me(ve,"displayName","Tooltip"),me(ve,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!re.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var be=n(643),xe=n.n(be);Math.abs,Math.atan2;const we=Math.cos,Se=(Math.max,Math.min,Math.sin),Te=Math.sqrt,ke=Math.PI,Ae=2*ke;const Ee={draw(t,e){const n=Te(e/ke);t.moveTo(n,0),t.arc(0,0,n,0,Ae)}},_e={draw(t,e){const n=Te(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Oe=Te(1/3),Ie=2*Oe,Le={draw(t,e){const n=Te(e/Ie),r=n*Oe;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Pe={draw(t,e){const n=Te(e),r=-n/2;t.rect(r,r,n,n)}},Ce=Se(ke/10)/Se(7*ke/10),De=Se(Ae/10)*Ce,Me=-we(Ae/10)*Ce,Ne={draw(t,e){const n=Te(.8908130915292852*e),r=De*n,i=Me*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const e=Ae*a/5,s=we(e),o=Se(e);t.lineTo(o*n,-s*n),t.lineTo(s*r-o*i,o*r+s*i)}t.closePath()}},je=Te(3),$e={draw(t,e){const n=-Te(e/(3*je));t.moveTo(0,2*n),t.lineTo(-je*n,-n),t.lineTo(je*n,-n),t.closePath()}},Re=-.5,ze=Te(3)/2,Fe=1/Te(12),Ve=3*(Fe/2+1),Be={draw(t,e){const n=Te(e/Ve),r=n/2,i=n*Fe,a=r,s=n*Fe+n,o=-a,u=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,u),t.lineTo(Re*r-ze*i,ze*r+Re*i),t.lineTo(Re*a-ze*s,ze*a+Re*s),t.lineTo(Re*o-ze*u,ze*o+Re*u),t.lineTo(Re*r+ze*i,Re*i-ze*r),t.lineTo(Re*a+ze*s,Re*s-ze*a),t.lineTo(Re*o+ze*u,Re*u-ze*o),t.closePath()}};function Ue(t){return function(){return t}}const Ke=Math.PI,Ge=2*Ke,We=1e-6,He=Ge-We;function Xe(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class qe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?Xe:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Xe;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,r){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,e,n,r,i,a){this._append`C${+t},${+e},${+n},${+r},${this._x1=+i},${this._y1=+a}`}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let a=this._x1,s=this._y1,o=n-t,u=r-e,l=a-t,c=s-e,h=l*l+c*c;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(h>We)if(Math.abs(c*o-u*l)>We&&i){let p=n-a,f=r-s,d=o*o+u*u,m=p*p+f*f,g=Math.sqrt(d),y=Math.sqrt(h),v=i*Math.tan((Ke-Math.acos((d+h-m)/(2*g*y)))/2),b=v/y,x=v/g;Math.abs(b-1)>We&&this._append`L${t+b*l},${e+b*c}`,this._append`A${i},${i},0,0,${+(c*p>l*f)},${this._x1=t+x*o},${this._y1=e+x*u}`}else this._append`L${this._x1=t},${this._y1=e}`;else;}arc(t,e,n,r,i,a){if(t=+t,e=+e,a=!!a,(n=+n)<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(r),o=n*Math.sin(r),u=t+s,l=e+o,c=1^a,h=a?r-i:i-r;null===this._x1?this._append`M${u},${l}`:(Math.abs(this._x1-u)>We||Math.abs(this._y1-l)>We)&&this._append`L${u},${l}`,n&&(h<0&&(h=h%Ge+Ge),h>He?this._append`A${n},${n},0,1,${c},${t-s},${e-o}A${n},${n},0,1,${c},${this._x1=u},${this._y1=l}`:h>We&&this._append`A${n},${n},0,${+(h>=Ke)},${c},${this._x1=t+n*Math.cos(i)},${this._y1=e+n*Math.sin(i)}`)}rect(t,e,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function Ye(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new qe(e)}Te(3),Te(3);function Je(t){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Je(t)}var Qe=["type","size","sizeType"];function Ze(){return Ze=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ze.apply(this,arguments)}function tn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function en(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tn(Object(n),!0).forEach((function(e){nn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function nn(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=Je(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Je(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rn(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var an={symbolCircle:Ee,symbolCross:_e,symbolDiamond:Le,symbolSquare:Pe,symbolStar:Ne,symbolTriangle:$e,symbolWye:Be},sn=Math.PI/180,on=function(t){var n=t.type,r=void 0===n?"circle":n,i=t.size,a=void 0===i?64:i,s=t.sizeType,o=void 0===s?"area":s,u=en(en({},rn(t,Qe)),{},{type:r,size:a,sizeType:o}),l=u.className,h=u.cx,p=u.cy,f=st(u,!0);return h===+h&&p===+p&&a===+a?e.createElement("path",Ze({},f,{className:c("recharts-symbols",l),transform:"translate(".concat(h,", ").concat(p,")"),d:function(){var t=function(t){var e="symbol".concat(xe()(t));return an[e]||Ee}(r),e=function(t,e){let n=null,r=Ye(i);function i(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return t="function"===typeof t?t:Ue(t||Ee),e="function"===typeof e?e:Ue(void 0===e?64:+e),i.type=function(e){return arguments.length?(t="function"===typeof e?e:Ue(e),i):t},i.size=function(t){return arguments.length?(e="function"===typeof t?t:Ue(+t),i):e},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i}().type(t).size(function(t,e,n){if("area"===e)return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return.5*t*t/Math.sqrt(3);case"square":return t*t;case"star":var r=18*sn;return 1.25*t*t*(Math.tan(r)-Math.tan(2*r)*Math.pow(Math.tan(r),2));case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}}(a,o,r));return e()}()})):null};function un(t){return un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},un(t)}function ln(){return ln=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ln.apply(this,arguments)}function cn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function hn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yn(r.key),r)}}function pn(t,e,n){return e=dn(e),function(t,e){if(e&&("object"===un(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,fn()?Reflect.construct(e,n||[],dn(t).constructor):e.apply(t,n))}function fn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(fn=function(){return!!t})()}function dn(t){return dn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dn(t)}function mn(t,e){return mn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mn(t,e)}function gn(t,e,n){return(e=yn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yn(t){var e=function(t,e){if("object"!=un(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=un(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==un(e)?e:e+""}on.registerSymbol=function(t,e){an["symbol".concat(xe()(t))]=e};var vn=32,bn=function(t){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),pn(this,n,arguments)}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mn(t,e)}(n,t),r=n,i=[{key:"renderIcon",value:function(t){var n=this.props.inactiveColor,r=16,i=vn/6,a=vn/3,s=t.inactive?n:t.color;if("plainline"===t.type)return e.createElement("line",{strokeWidth:4,fill:"none",stroke:s,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:r,x2:vn,y2:r,className:"recharts-legend-icon"});if("line"===t.type)return e.createElement("path",{strokeWidth:4,fill:"none",stroke:s,d:"M0,".concat(r,"h").concat(a,"\n            A").concat(i,",").concat(i,",0,1,1,").concat(2*a,",").concat(r,"\n            H").concat(vn,"M").concat(2*a,",").concat(r,"\n            A").concat(i,",").concat(i,",0,1,1,").concat(a,",").concat(r),className:"recharts-legend-icon"});if("rect"===t.type)return e.createElement("path",{stroke:"none",fill:s,d:"M0,".concat(4,"h").concat(vn,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(e.isValidElement(t.legendIcon)){var o=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cn(Object(n),!0).forEach((function(e){gn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t);return delete o.legendIcon,e.cloneElement(t.legendIcon,o)}return e.createElement(on,{fill:s,cx:r,cy:r,size:vn,sizeType:"diameter",type:t.type})}},{key:"renderItems",value:function(){var t=this,n=this.props,r=n.payload,i=n.iconSize,a=n.layout,s=n.formatter,o=n.inactiveColor,u={x:0,y:0,width:vn,height:vn},l={display:"horizontal"===a?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map((function(n,r){var a=n.formatter||s,p=c(gn(gn({"recharts-legend-item":!0},"legend-item-".concat(r),!0),"inactive",n.inactive));if("none"===n.type)return null;var f=N()(n.value)?null:n.value;P(!N()(n.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var d=n.inactive?o:n.color;return e.createElement("li",ln({className:p,style:l,key:"legend-item-".concat(r)},W(t.props,n,r)),e.createElement(Et,{width:i,height:i,viewBox:u,style:h},t.renderIcon(n)),e.createElement("span",{className:"recharts-legend-item-text",style:{color:d}},a?a(f,n,r):f))}))}},{key:"render",value:function(){var t=this.props,n=t.payload,r=t.layout,i=t.align;if(!n||!n.length)return null;var a={padding:0,margin:0,textAlign:"horizontal"===r?i:"left"};return e.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}],i&&hn(r.prototype,i),a&&hn(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(e.PureComponent);function xn(t){return xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xn(t)}gn(bn,"displayName","Legend"),gn(bn,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var wn=["ref"];function Sn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Tn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Sn(Object(n),!0).forEach((function(e){In(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function kn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ln(r.key),r)}}function An(t,e,n){return e=_n(e),function(t,e){if(e&&("object"===xn(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,En()?Reflect.construct(e,n||[],_n(t).constructor):e.apply(t,n))}function En(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(En=function(){return!!t})()}function _n(t){return _n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_n(t)}function On(t,e){return On=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},On(t,e)}function In(t,e,n){return(e=Ln(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ln(t){var e=function(t,e){if("object"!=xn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=xn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xn(e)?e:e+""}function Pn(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Cn(t){return t.value}var Dn=function(t){function n(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return In(t=An(this,n,[].concat(r)),"lastBoundingBox",{width:-1,height:-1}),t}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&On(t,e)}(n,t),r=n,a=[{key:"getWithHeight",value:function(t,e){var n=Tn(Tn({},this.defaultProps),t.props).layout;return"vertical"===n&&T(t.props.height)?{height:t.props.height}:"horizontal"===n?{width:t.props.width||e}:null}}],(i=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var t=this.wrapperNode.getBoundingClientRect();return t.height=this.wrapperNode.offsetHeight,t.width=this.wrapperNode.offsetWidth,t}return null}},{key:"updateBBox",value:function(){var t=this.props.onBBoxUpdate,e=this.getBBox();e?(Math.abs(e.width-this.lastBoundingBox.width)>1||Math.abs(e.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=e.width,this.lastBoundingBox.height=e.height,t&&t(e)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,t&&t(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Tn({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(t){var e,n,r=this.props,i=r.layout,a=r.align,s=r.verticalAlign,o=r.margin,u=r.chartWidth,l=r.chartHeight;return t&&(void 0!==t.left&&null!==t.left||void 0!==t.right&&null!==t.right)||(e="center"===a&&"vertical"===i?{left:((u||0)-this.getBBoxSnapshot().width)/2}:"right"===a?{right:o&&o.right||0}:{left:o&&o.left||0}),t&&(void 0!==t.top&&null!==t.top||void 0!==t.bottom&&null!==t.bottom)||(n="middle"===s?{top:((l||0)-this.getBBoxSnapshot().height)/2}:"bottom"===s?{bottom:o&&o.bottom||0}:{top:o&&o.top||0}),Tn(Tn({},e),n)}},{key:"render",value:function(){var t=this,n=this.props,r=n.content,i=n.width,a=n.height,s=n.wrapperStyle,o=n.payloadUniqBy,u=n.payload,l=Tn(Tn({position:"absolute",width:i||"auto",height:a||"auto"},this.getDefaultPosition(s)),s);return e.createElement("div",{className:"recharts-legend-wrapper",style:l,ref:function(e){t.wrapperNode=e}},function(t,n){if(e.isValidElement(t))return e.cloneElement(t,n);if("function"===typeof t)return e.createElement(t,n);n.ref;var r=Pn(n,wn);return e.createElement(bn,r)}(r,Tn(Tn({},this.props),{},{payload:se(u,o,Cn)})))}}])&&kn(r.prototype,i),a&&kn(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(e.PureComponent);function Mn(){return Mn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mn.apply(this,arguments)}In(Dn,"displayName","Legend"),In(Dn,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Nn=function(t){var n=t.cx,r=t.cy,i=t.r,a=t.className,s=c("recharts-dot",a);return n===+n&&r===+r&&i===+i?e.createElement("circle",Mn({},st(t,!1),G(t),{className:s,cx:n,cy:r,r:i})):null},jn=n(5173),$n=n.n(jn),Rn=Object.getOwnPropertyNames,zn=Object.getOwnPropertySymbols,Fn=Object.prototype.hasOwnProperty;function Vn(t,e){return function(n,r,i){return t(n,r,i)&&e(n,r,i)}}function Bn(t){return function(e,n,r){if(!e||!n||"object"!==typeof e||"object"!==typeof n)return t(e,n,r);var i=r.cache,a=i.get(e),s=i.get(n);if(a&&s)return a===n&&s===e;i.set(e,n),i.set(n,e);var o=t(e,n,r);return i.delete(e),i.delete(n),o}}function Un(t){return Rn(t).concat(zn(t))}var Kn=Object.hasOwn||function(t,e){return Fn.call(t,e)};function Gn(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var Wn=Object.getOwnPropertyDescriptor,Hn=Object.keys;function Xn(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function qn(t,e){return Gn(t.getTime(),e.getTime())}function Yn(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Jn(t,e){return t===e}function Qn(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i,a,s=new Array(r),o=t.entries(),u=0;(i=o.next())&&!i.done;){for(var l=e.entries(),c=!1,h=0;(a=l.next())&&!a.done;)if(s[h])h++;else{var p=i.value,f=a.value;if(n.equals(p[0],f[0],u,h,t,e,n)&&n.equals(p[1],f[1],p[0],f[0],t,e,n)){c=s[h]=!0;break}h++}if(!c)return!1;u++}return!0}var Zn=Gn;function tr(t,e,n){var r=Hn(t),i=r.length;if(Hn(e).length!==i)return!1;for(;i-- >0;)if(!or(t,e,n,r[i]))return!1;return!0}function er(t,e,n){var r,i,a,s=Un(t),o=s.length;if(Un(e).length!==o)return!1;for(;o-- >0;){if(!or(t,e,n,r=s[o]))return!1;if(i=Wn(t,r),a=Wn(e,r),(i||a)&&(!i||!a||i.configurable!==a.configurable||i.enumerable!==a.enumerable||i.writable!==a.writable))return!1}return!0}function nr(t,e){return Gn(t.valueOf(),e.valueOf())}function rr(t,e){return t.source===e.source&&t.flags===e.flags}function ir(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i,a,s=new Array(r),o=t.values();(i=o.next())&&!i.done;){for(var u=e.values(),l=!1,c=0;(a=u.next())&&!a.done;){if(!s[c]&&n.equals(i.value,a.value,i.value,a.value,t,e,n)){l=s[c]=!0;break}c++}if(!l)return!1}return!0}function ar(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function sr(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function or(t,e,n,r){return!("_owner"!==r&&"__o"!==r&&"__v"!==r||!t.$$typeof&&!e.$$typeof)||Kn(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var ur=Array.isArray,lr="function"===typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,cr=Object.assign,hr=Object.prototype.toString.call.bind(Object.prototype.toString);var pr=fr();fr({strict:!0}),fr({circular:!0}),fr({circular:!0,strict:!0}),fr({createInternalComparator:function(){return Gn}}),fr({strict:!0,createInternalComparator:function(){return Gn}}),fr({circular:!0,createInternalComparator:function(){return Gn}}),fr({circular:!0,createInternalComparator:function(){return Gn},strict:!0});function fr(t){void 0===t&&(t={});var e,n=t.circular,r=void 0!==n&&n,i=t.createInternalComparator,a=t.createState,s=t.strict,o=void 0!==s&&s,u=function(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?er:Xn,areDatesEqual:qn,areErrorsEqual:Yn,areFunctionsEqual:Jn,areMapsEqual:r?Vn(Qn,er):Qn,areNumbersEqual:Zn,areObjectsEqual:r?er:tr,arePrimitiveWrappersEqual:nr,areRegExpsEqual:rr,areSetsEqual:r?Vn(ir,er):ir,areTypedArraysEqual:r?er:ar,areUrlsEqual:sr};if(n&&(i=cr({},i,n(i))),e){var a=Bn(i.areArraysEqual),s=Bn(i.areMapsEqual),o=Bn(i.areObjectsEqual),u=Bn(i.areSetsEqual);i=cr({},i,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:u})}return i}(t),l=function(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,a=t.areMapsEqual,s=t.areNumbersEqual,o=t.areObjectsEqual,u=t.arePrimitiveWrappersEqual,l=t.areRegExpsEqual,c=t.areSetsEqual,h=t.areTypedArraysEqual,p=t.areUrlsEqual;return function(t,f,d){if(t===f)return!0;if(null==t||null==f)return!1;var m=typeof t;if(m!==typeof f)return!1;if("object"!==m)return"number"===m?s(t,f,d):"function"===m&&i(t,f,d);var g=t.constructor;if(g!==f.constructor)return!1;if(g===Object)return o(t,f,d);if(ur(t))return e(t,f,d);if(null!=lr&&lr(t))return h(t,f,d);if(g===Date)return n(t,f,d);if(g===RegExp)return l(t,f,d);if(g===Map)return a(t,f,d);if(g===Set)return c(t,f,d);var y=hr(t);return"[object Date]"===y?n(t,f,d):"[object RegExp]"===y?l(t,f,d):"[object Map]"===y?a(t,f,d):"[object Set]"===y?c(t,f,d):"[object Object]"===y?"function"!==typeof t.then&&"function"!==typeof f.then&&o(t,f,d):"[object URL]"===y?p(t,f,d):"[object Error]"===y?r(t,f,d):"[object Arguments]"===y?o(t,f,d):("[object Boolean]"===y||"[object Number]"===y||"[object String]"===y)&&u(t,f,d)}}(u);return function(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,a=t.strict;if(r)return function(t,s){var o=r(),u=o.cache,l=void 0===u?e?new WeakMap:void 0:u,c=o.meta;return n(t,s,{cache:l,equals:i,meta:c,strict:a})};if(e)return function(t,e){return n(t,e,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var s={cache:void 0,equals:i,meta:void 0,strict:a};return function(t,e){return n(t,e,s)}}({circular:r,comparator:l,createState:a,equals:i?i(l):(e=l,function(t,n,r,i,a,s,o){return e(t,n,o)}),strict:o})}function dr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1;requestAnimationFrame((function r(i){n<0&&(n=i),i-n>e?(t(i),n=-1):function(t){"undefined"!==typeof requestAnimationFrame&&requestAnimationFrame(t)}(r)}))}function mr(t){return mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mr(t)}function gr(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return yr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vr(){var t=function(){return null},e=!1,n=function n(r){if(!e){if(Array.isArray(r)){if(!r.length)return;var i=gr(r),a=i[0],s=i.slice(1);return"number"===typeof a?void dr(n.bind(null,s),a):(n(a),void dr(n.bind(null,s)))}"object"===mr(r)&&t(r),"function"===typeof r&&r()}};return{stop:function(){e=!0},start:function(t){e=!1,n(t)},subscribe:function(e){return t=e,function(){t=function(){return null}}}}}function br(t){return br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},br(t)}function xr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function wr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xr(Object(n),!0).forEach((function(e){Sr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Sr(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==br(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==br(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===br(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Tr=function(t){return t},kr=function(t,e){return Object.keys(e).reduce((function(n,r){return wr(wr({},n),{},Sr({},r,t(r,e[r])))}),{})},Ar=function(t,e,n){return t.map((function(t){return"".concat(function(t){return t.replace(/([A-Z])/g,(function(t){return"-".concat(t.toLowerCase())}))}(t)," ").concat(e,"ms ").concat(n)})).join(",")};function Er(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,s,o=[],u=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}(t,e)||Or(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _r(t){return function(t){if(Array.isArray(t))return Ir(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Or(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Or(t,e){if(t){if("string"===typeof t)return Ir(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ir(t,e):void 0}}function Ir(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Lr=1e-4,Pr=function(t,e){return[0,3*t,3*e-6*t,3*t-3*e+1]},Cr=function(t,e){return t.map((function(t,n){return t*Math.pow(e,n)})).reduce((function(t,e){return t+e}))},Dr=function(t,e){return function(n){var r=Pr(t,e);return Cr(r,n)}},Mr=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],i=e[1],a=e[2],s=e[3];if(1===e.length)switch(e[0]){case"linear":r=0,i=0,a=1,s=1;break;case"ease":r=.25,i=.1,a=.25,s=1;break;case"ease-in":r=.42,i=0,a=1,s=1;break;case"ease-out":r=.42,i=0,a=.58,s=1;break;case"ease-in-out":r=0,i=0,a=.58,s=1;break;default:var o=e[0].split("(");if("cubic-bezier"===o[0]&&4===o[1].split(")")[0].split(",").length){var u=Er(o[1].split(")")[0].split(",").map((function(t){return parseFloat(t)})),4);r=u[0],i=u[1],a=u[2],s=u[3]}}[r,a,i,s].every((function(t){return"number"===typeof t&&t>=0&&t<=1}));var l,c,h=Dr(r,a),p=Dr(i,s),f=(l=r,c=a,function(t){var e=Pr(l,c),n=[].concat(_r(e.map((function(t,e){return t*e})).slice(1)),[0]);return Cr(n,t)}),d=function(t){return t>1?1:t<0?0:t},m=function(t){for(var e=t>1?1:t,n=e,r=0;r<8;++r){var i=h(n)-e,a=f(n);if(Math.abs(i-e)<Lr||a<Lr)return p(n);n=d(n-i/a)}return p(n)};return m.isStepper=!1,m},Nr=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0];if("string"===typeof r)switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Mr(r);case"spring":return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.stiff,n=void 0===e?100:e,r=t.damping,i=void 0===r?8:r,a=t.dt,s=void 0===a?17:a,o=function(t,e,r){var a=r+(-(t-e)*n-r*i)*s/1e3,o=r*s/1e3+t;return Math.abs(o-e)<Lr&&Math.abs(a)<Lr?[e,0]:[o,a]};return o.isStepper=!0,o.dt=s,o}();default:if("cubic-bezier"===r.split("(")[0])return Mr(r)}return"function"===typeof r?r:null};function jr(t){return jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jr(t)}function $r(t){return function(t){if(Array.isArray(t))return Ur(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Br(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function zr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Rr(Object(n),!0).forEach((function(e){Fr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Fr(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==jr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==jr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===jr(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,s,o=[],u=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}(t,e)||Br(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Br(t,e){if(t){if("string"===typeof t)return Ur(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ur(t,e):void 0}}function Ur(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Kr=function(t,e,n){return t+(e-t)*n},Gr=function(t){return t.from!==t.to},Wr=function t(e,n,r){var i=kr((function(t,n){if(Gr(n)){var r=Vr(e(n.from,n.to,n.velocity),2),i=r[0],a=r[1];return zr(zr({},n),{},{from:i,velocity:a})}return n}),n);return r<1?kr((function(t,e){return Gr(e)?zr(zr({},e),{},{velocity:Kr(e.velocity,i[t].velocity,r),from:Kr(e.from,i[t].from,r)}):e}),n):t(e,i,r-1)};const Hr=function(t,e,n,r,i){var a,s,o,u,l=(a=t,s=e,[Object.keys(a),Object.keys(s)].reduce((function(t,e){return t.filter((function(t){return e.includes(t)}))}))),c=l.reduce((function(n,r){return zr(zr({},n),{},Fr({},r,[t[r],e[r]]))}),{}),h=l.reduce((function(n,r){return zr(zr({},n),{},Fr({},r,{from:t[r],velocity:0,to:e[r]}))}),{}),p=-1,f=function(){return null};return f=n.isStepper?function(r){o||(o=r);var a=(r-o)/n.dt;h=Wr(n,h,a),i(zr(zr(zr({},t),e),kr((function(t,e){return e.from}),h))),o=r,Object.values(h).filter(Gr).length&&(p=requestAnimationFrame(f))}:function(a){u||(u=a);var s=(a-u)/r,o=kr((function(t,e){return Kr.apply(void 0,$r(e).concat([n(s)]))}),c);if(i(zr(zr(zr({},t),e),o)),s<1)p=requestAnimationFrame(f);else{var l=kr((function(t,e){return Kr.apply(void 0,$r(e).concat([n(1)]))}),c);i(zr(zr(zr({},t),e),l))}},function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(p)}}};function Xr(t){return Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xr(t)}var qr=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Yr(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Jr(t){return function(t){if(Array.isArray(t))return Qr(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return Qr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Zr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ti(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zr(Object(n),!0).forEach((function(e){ei(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ei(t,e,n){return(e=ri(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ni(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ri(r.key),r)}}function ri(t){var e=function(t,e){if("object"!==Xr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Xr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Xr(e)?e:String(e)}function ii(t,e){return ii=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ii(t,e)}function ai(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ui(t);if(e){var i=ui(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return si(this,n)}}function si(t,e){if(e&&("object"===Xr(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return oi(t)}function oi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ui(t){return ui=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ui(t)}var li=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ii(t,e)}(s,t);var n,r,i,a=ai(s);function s(t,e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);var r=(n=a.call(this,t,e)).props,i=r.isActive,o=r.attributeName,u=r.from,l=r.to,c=r.steps,h=r.children,p=r.duration;if(n.handleStyleChange=n.handleStyleChange.bind(oi(n)),n.changeStyle=n.changeStyle.bind(oi(n)),!i||p<=0)return n.state={style:{}},"function"===typeof h&&(n.state={style:l}),si(n);if(c&&c.length)n.state={style:c[0].style};else if(u){if("function"===typeof h)return n.state={style:u},si(n);n.state={style:o?ei({},o,u):u}}else n.state={style:{}};return n}return n=s,(r=[{key:"componentDidMount",value:function(){var t=this.props,e=t.isActive,n=t.canBegin;this.mounted=!0,e&&n&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.isActive,r=e.canBegin,i=e.attributeName,a=e.shouldReAnimate,s=e.to,o=e.from,u=this.state.style;if(r)if(n){if(!(pr(t.to,s)&&t.canBegin&&t.isActive)){var l=!t.canBegin||!t.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var c=l||a?o:t.to;if(this.state&&u){var h={style:i?ei({},i,c):c};(i&&u[i]!==c||!i&&u!==c)&&this.setState(h)}this.runAnimation(ti(ti({},this.props),{},{from:c,begin:0}))}}else{var p={style:i?ei({},i,s):s};this.state&&u&&(i&&u[i]!==s||!i&&u!==s)&&this.setState(p)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var t=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}},{key:"handleStyleChange",value:function(t){this.changeStyle(t)}},{key:"changeStyle",value:function(t){this.mounted&&this.setState({style:t})}},{key:"runJSAnimation",value:function(t){var e=this,n=t.from,r=t.to,i=t.duration,a=t.easing,s=t.begin,o=t.onAnimationEnd,u=t.onAnimationStart,l=Hr(n,r,Nr(a),i,this.changeStyle);this.manager.start([u,s,function(){e.stopJSAnimation=l()},i,o])}},{key:"runStepAnimation",value:function(t){var e=this,n=t.steps,r=t.begin,i=t.onAnimationStart,a=n[0],s=a.style,o=a.duration,u=void 0===o?0:o;return this.manager.start([i].concat(Jr(n.reduce((function(t,r,i){if(0===i)return t;var a=r.duration,s=r.easing,o=void 0===s?"ease":s,u=r.style,l=r.properties,c=r.onAnimationEnd,h=i>0?n[i-1]:r,p=l||Object.keys(u);if("function"===typeof o||"spring"===o)return[].concat(Jr(t),[e.runJSAnimation.bind(e,{from:h.style,to:u,duration:a,easing:o}),a]);var f=Ar(p,a,o),d=ti(ti(ti({},h.style),u),{},{transition:f});return[].concat(Jr(t),[d,a,c]).filter(Tr)}),[s,Math.max(u,r)])),[t.onAnimationEnd]))}},{key:"runAnimation",value:function(t){this.manager||(this.manager=vr());var e=t.begin,n=t.duration,r=t.attributeName,i=t.to,a=t.easing,s=t.onAnimationStart,o=t.onAnimationEnd,u=t.steps,l=t.children,c=this.manager;if(this.unSubscribe=c.subscribe(this.handleStyleChange),"function"!==typeof a&&"function"!==typeof l&&"spring"!==a)if(u.length>1)this.runStepAnimation(t);else{var h=r?ei({},r,i):i,p=Ar(Object.keys(h),n,a);c.start([s,e,ti(ti({},h),{},{transition:p}),n,o])}else this.runJSAnimation(t)}},{key:"render",value:function(){var t=this.props,n=t.children,r=(t.begin,t.duration),i=(t.attributeName,t.easing,t.isActive),a=(t.steps,t.from,t.to,t.canBegin,t.onAnimationEnd,t.shouldReAnimate,t.onAnimationReStart,Yr(t,qr)),s=e.Children.count(n),o=this.state.style;if("function"===typeof n)return n(o);if(!i||0===s||r<=0)return n;var u=function(t){var n=t.props,r=n.style,i=void 0===r?{}:r,s=n.className;return(0,e.cloneElement)(t,ti(ti({},a),{},{style:ti(ti({},i),o),className:s}))};return 1===s?u(e.Children.only(n)):e.createElement("div",null,e.Children.map(n,(function(t){return u(t)})))}}])&&ni(n.prototype,r),i&&ni(n,i),Object.defineProperty(n,"prototype",{writable:!1}),s}(e.PureComponent);li.displayName="Animate",li.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},li.propTypes={from:$n().oneOfType([$n().object,$n().string]),to:$n().oneOfType([$n().object,$n().string]),attributeName:$n().string,duration:$n().number,begin:$n().number,easing:$n().oneOfType([$n().string,$n().func]),steps:$n().arrayOf($n().shape({duration:$n().number.isRequired,style:$n().object.isRequired,easing:$n().oneOfType([$n().oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),$n().func]),properties:$n().arrayOf("string"),onAnimationEnd:$n().func})),children:$n().oneOfType([$n().node,$n().func]),isActive:$n().bool,canBegin:$n().bool,onAnimationEnd:$n().func,shouldReAnimate:$n().bool,onAnimationStart:$n().func,onAnimationReStart:$n().func};const ci=li;function hi(t){return hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hi(t)}function pi(){return pi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pi.apply(this,arguments)}function fi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,s,o=[],u=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return di(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return di(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function di(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function gi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mi(Object(n),!0).forEach((function(e){yi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function yi(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=hi(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=hi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hi(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var vi=function(t,e,n,r,i){var a,s=Math.min(Math.abs(n)/2,Math.abs(r)/2),o=r>=0?1:-1,u=n>=0?1:-1,l=r>=0&&n>=0||r<0&&n<0?1:0;if(s>0&&i instanceof Array){for(var c=[0,0,0,0],h=0;h<4;h++)c[h]=i[h]>s?s:i[h];a="M".concat(t,",").concat(e+o*c[0]),c[0]>0&&(a+="A ".concat(c[0],",").concat(c[0],",0,0,").concat(l,",").concat(t+u*c[0],",").concat(e)),a+="L ".concat(t+n-u*c[1],",").concat(e),c[1]>0&&(a+="A ".concat(c[1],",").concat(c[1],",0,0,").concat(l,",\n        ").concat(t+n,",").concat(e+o*c[1])),a+="L ".concat(t+n,",").concat(e+r-o*c[2]),c[2]>0&&(a+="A ".concat(c[2],",").concat(c[2],",0,0,").concat(l,",\n        ").concat(t+n-u*c[2],",").concat(e+r)),a+="L ".concat(t+u*c[3],",").concat(e+r),c[3]>0&&(a+="A ".concat(c[3],",").concat(c[3],",0,0,").concat(l,",\n        ").concat(t,",").concat(e+r-o*c[3])),a+="Z"}else if(s>0&&i===+i&&i>0){var p=Math.min(s,i);a="M ".concat(t,",").concat(e+o*p,"\n            A ").concat(p,",").concat(p,",0,0,").concat(l,",").concat(t+u*p,",").concat(e,"\n            L ").concat(t+n-u*p,",").concat(e,"\n            A ").concat(p,",").concat(p,",0,0,").concat(l,",").concat(t+n,",").concat(e+o*p,"\n            L ").concat(t+n,",").concat(e+r-o*p,"\n            A ").concat(p,",").concat(p,",0,0,").concat(l,",").concat(t+n-u*p,",").concat(e+r,"\n            L ").concat(t+u*p,",").concat(e+r,"\n            A ").concat(p,",").concat(p,",0,0,").concat(l,",").concat(t,",").concat(e+r-o*p," Z")}else a="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return a},bi=function(t,e){if(!t||!e)return!1;var n=t.x,r=t.y,i=e.x,a=e.y,s=e.width,o=e.height;if(Math.abs(s)>0&&Math.abs(o)>0){var u=Math.min(i,i+s),l=Math.max(i,i+s),c=Math.min(a,a+o),h=Math.max(a,a+o);return n>=u&&n<=l&&r>=c&&r<=h}return!1},xi={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},wi=function(t){var n=gi(gi({},xi),t),r=(0,e.useRef)(),i=fi((0,e.useState)(-1),2),a=i[0],s=i[1];(0,e.useEffect)((function(){if(r.current&&r.current.getTotalLength)try{var t=r.current.getTotalLength();t&&s(t)}catch(e){}}),[]);var o=n.x,u=n.y,l=n.width,h=n.height,p=n.radius,f=n.className,d=n.animationEasing,m=n.animationDuration,g=n.animationBegin,y=n.isAnimationActive,v=n.isUpdateAnimationActive;if(o!==+o||u!==+u||l!==+l||h!==+h||0===l||0===h)return null;var b=c("recharts-rectangle",f);return v?e.createElement(ci,{canBegin:a>0,from:{width:l,height:h,x:o,y:u},to:{width:l,height:h,x:o,y:u},duration:m,animationEasing:d,isActive:v},(function(t){var i=t.width,s=t.height,o=t.x,u=t.y;return e.createElement(ci,{canBegin:a>0,from:"0px ".concat(-1===a?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,isActive:y,easing:d},e.createElement("path",pi({},st(n,!0),{className:b,d:vi(o,u,i,s,p),ref:r})))})):e.createElement("path",pi({},st(n,!0),{className:b,d:vi(o,u,l,h,p)}))};function Si(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Ti(t,e){switch(arguments.length){case 0:break;case 1:"function"===typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"===typeof e?this.interpolator(e):this.range(e)}return this}class ki extends Map{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oi;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[n,r]of t)this.set(n,r)}get(t){return super.get(Ai(this,t))}has(t){return super.has(Ai(this,t))}set(t,e){return super.set(Ei(this,t),e)}delete(t){return super.delete(_i(this,t))}}Set;function Ai(t,e){let{_intern:n,_key:r}=t;const i=r(e);return n.has(i)?n.get(i):e}function Ei(t,e){let{_intern:n,_key:r}=t;const i=r(e);return n.has(i)?n.get(i):(n.set(i,e),e)}function _i(t,e){let{_intern:n,_key:r}=t;const i=r(e);return n.has(i)&&(e=n.get(i),n.delete(i)),e}function Oi(t){return null!==t&&"object"===typeof t?t.valueOf():t}const Ii=Symbol("implicit");function Li(){var t=new ki,e=[],n=[],r=Ii;function i(i){let a=t.get(i);if(void 0===a){if(r!==Ii)return r;t.set(i,a=e.push(i)-1)}return n[a%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new ki;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Li(e,n).unknown(r)},Si.apply(i,arguments),i}function Pi(){var t,e,n=Li().unknown(void 0),r=n.domain,i=n.range,a=0,s=1,o=!1,u=0,l=0,c=.5;function h(){var n=r().length,h=s<a,p=h?s:a,f=h?a:s;t=(f-p)/Math.max(1,n-u+2*l),o&&(t=Math.floor(t)),p+=(f-p-t*(n-u))*c,e=t*(1-u),o&&(p=Math.round(p),e=Math.round(e));var d=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}(n).map((function(e){return p+t*e}));return i(h?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),h()):r()},n.range=function(t){return arguments.length?([a,s]=t,a=+a,s=+s,h()):[a,s]},n.rangeRound=function(t){return[a,s]=t,a=+a,s=+s,o=!0,h()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(o=!!t,h()):o},n.padding=function(t){return arguments.length?(u=Math.min(1,l=+t),h()):u},n.paddingInner=function(t){return arguments.length?(u=Math.min(1,t),h()):u},n.paddingOuter=function(t){return arguments.length?(l=+t,h()):l},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),h()):c},n.copy=function(){return Pi(r(),[a,s]).round(o).paddingInner(u).paddingOuter(l).align(c)},Si.apply(h(),arguments)}function Ci(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Ci(e())},t}function Di(){return Ci(Pi.apply(null,arguments).paddingInner(1))}function Mi(t){return Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mi(t)}function Ni(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ji(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ni(Object(n),!0).forEach((function(e){$i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ni(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $i(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=Mi(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Mi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mi(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ri={widthCache:{},cacheCount:0},zi={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Fi="recharts_measurement_span";var Vi=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===t||null===t||re.isSsr)return{width:0,height:0};var n=function(t){var e=ji({},t);return Object.keys(e).forEach((function(t){e[t]||delete e[t]})),e}(e),r=JSON.stringify({text:t,copyStyle:n});if(Ri.widthCache[r])return Ri.widthCache[r];try{var i=document.getElementById(Fi);i||((i=document.createElement("span")).setAttribute("id",Fi),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var a=ji(ji({},zi),n);Object.assign(i.style,a),i.textContent="".concat(t);var s=i.getBoundingClientRect(),o={width:s.width,height:s.height};return Ri.widthCache[r]=o,++Ri.cacheCount>2e3&&(Ri.cacheCount=0,Ri.widthCache={}),o}catch(u){return{width:0,height:0}}};function Bi(t){return Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bi(t)}function Ui(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,s,o=[],u=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return Ki(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ki(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ki(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Gi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Wi(r.key),r)}}function Wi(t){var e=function(t,e){if("object"!=Bi(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Bi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Bi(e)?e:e+""}var Hi=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Xi=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qi=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Yi=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Ji={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},Qi=Object.keys(Ji),Zi="NaN";var ta=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),""===n||qi.test(n)||(this.num=NaN,this.unit=""),Qi.includes(n)&&(this.num=function(t,e){return t*Ji[e]}(e,n),this.unit="px")}return e=t,r=[{key:"parse",value:function(e){var n,r=Ui(null!==(n=Yi.exec(e))&&void 0!==n?n:[],3),i=r[1],a=r[2];return new t(parseFloat(i),null!==a&&void 0!==a?a:"")}}],(n=[{key:"add",value:function(e){return this.unit!==e.unit?new t(NaN,""):new t(this.num+e.num,this.unit)}},{key:"subtract",value:function(e){return this.unit!==e.unit?new t(NaN,""):new t(this.num-e.num,this.unit)}},{key:"multiply",value:function(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new t(NaN,""):new t(this.num*e.num,this.unit||e.unit)}},{key:"divide",value:function(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new t(NaN,""):new t(this.num/e.num,this.unit||e.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&Gi(e.prototype,n),r&&Gi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r}();function ea(t){if(t.includes(Zi))return Zi;for(var e=t;e.includes("*")||e.includes("/");){var n,r=Ui(null!==(n=Hi.exec(e))&&void 0!==n?n:[],4),i=r[1],a=r[2],s=r[3],o=ta.parse(null!==i&&void 0!==i?i:""),u=ta.parse(null!==s&&void 0!==s?s:""),l="*"===a?o.multiply(u):o.divide(u);if(l.isNaN())return Zi;e=e.replace(Hi,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,h=Ui(null!==(c=Xi.exec(e))&&void 0!==c?c:[],4),p=h[1],f=h[2],d=h[3],m=ta.parse(null!==p&&void 0!==p?p:""),g=ta.parse(null!==d&&void 0!==d?d:""),y="+"===f?m.add(g):m.subtract(g);if(y.isNaN())return Zi;e=e.replace(Xi,y.toString())}return e}var na=/\(([^()]*)\)/;function ra(t){var e=t.replace(/\s+/g,"");return e=function(t){for(var e=t;e.includes("(");){var n=Ui(na.exec(e),2)[1];e=e.replace(na,ea(n))}return e}(e),e=ea(e)}function ia(t){var e=function(t){try{return ra(t)}catch(e){return Zi}}(t.slice(5,-1));return e===Zi?"":e}var aa=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],sa=["dx","dy","angle","className","breakAll"];function oa(){return oa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oa.apply(this,arguments)}function ua(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function la(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,s,o=[],u=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return ca(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ca(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ca(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ha=/[ \f\n\r\t\v\u2028\u2029]+/,pa=function(t){var e=t.children,n=t.breakAll,r=t.style;try{var i=[];return D()(e)||(i=n?e.toString().split(""):e.toString().split(ha)),{wordsWithComputedWidth:i.map((function(t){return{word:t,width:Vi(t,r).width}})),spaceWidth:n?0:Vi("\xa0",r).width}}catch(a){return null}},fa=function(t){return[{words:D()(t)?[]:t.toString().split(ha)}]},da=function(t){var e=t.width,n=t.scaleToFit,r=t.children,i=t.style,a=t.breakAll,s=t.maxLines;if((e||n)&&!re.isSsr){var o=pa({breakAll:a,children:r,style:i});return o?function(t,e,n,r,i){var a=t.maxLines,s=t.children,o=t.style,u=t.breakAll,l=T(a),c=s,h=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(t,e){var a=e.word,s=e.width,o=t[t.length-1];if(o&&(null==r||i||o.width+s+n<Number(r)))o.words.push(a),o.width+=s+n;else{var u={words:[a],width:s};t.push(u)}return t}),[])},p=h(e);if(!l)return p;for(var f,d=function(t){var e=c.slice(0,t),n=pa({breakAll:u,style:o,children:e+"\u2026"}).wordsWithComputedWidth,i=h(n),s=i.length>a||function(t){return t.reduce((function(t,e){return t.width>e.width?t:e}))}(i).width>Number(r);return[s,i]},m=0,g=c.length-1,y=0;m<=g&&y<=c.length-1;){var v=Math.floor((m+g)/2),b=la(d(v-1),2),x=b[0],w=b[1],S=la(d(v),1)[0];if(x||S||(m=v+1),x&&S&&(g=v-1),!x&&S){f=w;break}y++}return f||p}({breakAll:a,children:r,maxLines:s,style:i},o.wordsWithComputedWidth,o.spaceWidth,e,n):fa(r)}return fa(r)},ma="#808080",ga=function(t){var n=t.x,r=void 0===n?0:n,i=t.y,a=void 0===i?0:i,s=t.lineHeight,o=void 0===s?"1em":s,u=t.capHeight,l=void 0===u?"0.71em":u,h=t.scaleToFit,p=void 0!==h&&h,f=t.textAnchor,d=void 0===f?"start":f,m=t.verticalAnchor,g=void 0===m?"end":m,y=t.fill,v=void 0===y?ma:y,b=ua(t,aa),x=(0,e.useMemo)((function(){return da({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:p,style:b.style,width:b.width})}),[b.breakAll,b.children,b.maxLines,p,b.style,b.width]),w=b.dx,S=b.dy,A=b.angle,E=b.className,_=b.breakAll,O=ua(b,sa);if(!k(r)||!k(a))return null;var I,L=r+(T(w)?w:0),P=a+(T(S)?S:0);switch(g){case"start":I=ia("calc(".concat(l,")"));break;case"middle":I=ia("calc(".concat((x.length-1)/2," * -").concat(o," + (").concat(l," / 2))"));break;default:I=ia("calc(".concat(x.length-1," * -").concat(o,")"))}var C=[];if(p){var D=x[0].width,M=b.width;C.push("scale(".concat((T(M)?M/D:1)/D,")"))}return A&&C.push("rotate(".concat(A,", ").concat(L,", ").concat(P,")")),C.length&&(O.transform=C.join(" ")),e.createElement("text",oa({},st(O,!0),{x:L,y:P,className:c("recharts-text",E),textAnchor:d,fill:v.includes("url")?ma:v}),x.map((function(t,n){var r=t.words.join(_?"":" ");return e.createElement("tspan",{x:L,dy:0===n?I:o,key:"".concat(r,"-").concat(n)},r)})))};const ya=Math.sqrt(50),va=Math.sqrt(10),ba=Math.sqrt(2);function xa(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=ya?10:a>=va?5:a>=ba?2:1;let o,u,l;return i<0?(l=Math.pow(10,-i)/s,o=Math.round(t*l),u=Math.round(e*l),o/l<t&&++o,u/l>e&&--u,l=-l):(l=Math.pow(10,i)*s,o=Math.round(t/l),u=Math.round(e/l),o*l<t&&++o,u*l>e&&--u),u<o&&.5<=n&&n<2?xa(t,e,2*n):[o,u,l]}function wa(t,e,n){if(!((n=+n)>0))return[];if((t=+t)===(e=+e))return[t];const r=e<t,[i,a,s]=r?xa(e,t,n):xa(t,e,n);if(!(a>=i))return[];const o=a-i+1,u=new Array(o);if(r)if(s<0)for(let l=0;l<o;++l)u[l]=(a-l)/-s;else for(let l=0;l<o;++l)u[l]=(a-l)*s;else if(s<0)for(let l=0;l<o;++l)u[l]=(i+l)/-s;else for(let l=0;l<o;++l)u[l]=(i+l)*s;return u}function Sa(t,e,n){return xa(t=+t,e=+e,n=+n)[2]}function Ta(t,e,n){n=+n;const r=(e=+e)<(t=+t),i=r?Sa(e,t,n):Sa(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function ka(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Aa(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ea(t){let e,n,r;function i(t,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(i<a){if(0!==e(r,r))return a;do{const e=i+a>>>1;n(t[e],r)<0?i=e+1:a=e}while(i<a)}return i}return 2!==t.length?(e=ka,n=(e,n)=>ka(t(e),n),r=(e,n)=>t(e)-n):(e=t===ka||t===Aa?t:_a,n=t,r=t),{left:i,center:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a=i(t,e,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length)-1);return a>n&&r(t[a-1],e)>-r(t[a],e)?a-1:a},right:function(t,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(i<a){if(0!==e(r,r))return a;do{const e=i+a>>>1;n(t[e],r)<=0?i=e+1:a=e}while(i<a)}return i}}}function _a(){return 0}function Oa(t){return null===t?NaN:+t}const Ia=Ea(ka),La=Ia.right,Pa=(Ia.left,Ea(Oa).center,La);function Ca(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Da(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ma(){}var Na=.7,ja=1/Na,$a="\\s*([+-]?\\d+)\\s*",Ra="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",za="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Fa=/^#([0-9a-f]{3,8})$/,Va=new RegExp(`^rgb\\(${$a},${$a},${$a}\\)$`),Ba=new RegExp(`^rgb\\(${za},${za},${za}\\)$`),Ua=new RegExp(`^rgba\\(${$a},${$a},${$a},${Ra}\\)$`),Ka=new RegExp(`^rgba\\(${za},${za},${za},${Ra}\\)$`),Ga=new RegExp(`^hsl\\(${Ra},${za},${za}\\)$`),Wa=new RegExp(`^hsla\\(${Ra},${za},${za},${Ra}\\)$`),Ha={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Xa(){return this.rgb().formatHex()}function qa(){return this.rgb().formatRgb()}function Ya(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Fa.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Ja(e):3===n?new ts(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Qa(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Qa(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Va.exec(t))?new ts(e[1],e[2],e[3],1):(e=Ba.exec(t))?new ts(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Ua.exec(t))?Qa(e[1],e[2],e[3],e[4]):(e=Ka.exec(t))?Qa(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ga.exec(t))?ss(e[1],e[2]/100,e[3]/100,1):(e=Wa.exec(t))?ss(e[1],e[2]/100,e[3]/100,e[4]):Ha.hasOwnProperty(t)?Ja(Ha[t]):"transparent"===t?new ts(NaN,NaN,NaN,0):null}function Ja(t){return new ts(t>>16&255,t>>8&255,255&t,1)}function Qa(t,e,n,r){return r<=0&&(t=e=n=NaN),new ts(t,e,n,r)}function Za(t,e,n,r){return 1===arguments.length?((i=t)instanceof Ma||(i=Ya(i)),i?new ts((i=i.rgb()).r,i.g,i.b,i.opacity):new ts):new ts(t,e,n,null==r?1:r);var i}function ts(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function es(){return`#${as(this.r)}${as(this.g)}${as(this.b)}`}function ns(){const t=rs(this.opacity);return`${1===t?"rgb(":"rgba("}${is(this.r)}, ${is(this.g)}, ${is(this.b)}${1===t?")":`, ${t})`}`}function rs(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function is(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function as(t){return((t=is(t))<16?"0":"")+t.toString(16)}function ss(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new us(t,e,n,r)}function os(t){if(t instanceof us)return new us(t.h,t.s,t.l,t.opacity);if(t instanceof Ma||(t=Ya(t)),!t)return new us;if(t instanceof us)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,u=(a+i)/2;return o?(s=e===a?(n-r)/o+6*(n<r):n===a?(r-e)/o+2:(e-n)/o+4,o/=u<.5?a+i:2-a-i,s*=60):o=u>0&&u<1?0:s,new us(s,o,u,t.opacity)}function us(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function ls(t){return(t=(t||0)%360)<0?t+360:t}function cs(t){return Math.max(0,Math.min(1,t||0))}function hs(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function ps(t,e,n,r,i){var a=t*t,s=a*t;return((1-3*t+3*a-s)*e+(4-6*a+3*s)*n+(1+3*t+3*a-3*s)*r+s*i)/6}Ca(Ma,Ya,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Xa,formatHex:Xa,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return os(this).formatHsl()},formatRgb:qa,toString:qa}),Ca(ts,Za,Da(Ma,{brighter(t){return t=null==t?ja:Math.pow(ja,t),new ts(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Na:Math.pow(Na,t),new ts(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ts(is(this.r),is(this.g),is(this.b),rs(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:es,formatHex:es,formatHex8:function(){return`#${as(this.r)}${as(this.g)}${as(this.b)}${as(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:ns,toString:ns})),Ca(us,(function(t,e,n,r){return 1===arguments.length?os(t):new us(t,e,n,null==r?1:r)}),Da(Ma,{brighter(t){return t=null==t?ja:Math.pow(ja,t),new us(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Na:Math.pow(Na,t),new us(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ts(hs(t>=240?t-240:t+120,i,r),hs(t,i,r),hs(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new us(ls(this.h),cs(this.s),cs(this.l),rs(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=rs(this.opacity);return`${1===t?"hsl(":"hsla("}${ls(this.h)}, ${100*cs(this.s)}%, ${100*cs(this.l)}%${1===t?")":`, ${t})`}`}}));const fs=t=>()=>t;function ds(t,e){return function(n){return t+n*e}}function ms(t){return 1===(t=+t)?gs:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):fs(isNaN(e)?n:e)}}function gs(t,e){var n=e-t;return n?ds(t,n):fs(isNaN(t)?e:t)}const ys=function t(e){var n=ms(e);function r(t,e){var r=n((t=Za(t)).r,(e=Za(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),s=gs(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=s(e),t+""}}return r.gamma=t,r}(1);function vs(t){return function(e){var n,r,i=e.length,a=new Array(i),s=new Array(i),o=new Array(i);for(n=0;n<i;++n)r=Za(e[n]),a[n]=r.r||0,s[n]=r.g||0,o[n]=r.b||0;return a=t(a),s=t(s),o=t(o),r.opacity=1,function(t){return r.r=a(t),r.g=s(t),r.b=o(t),r+""}}}vs((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],s=r>0?t[r-1]:2*i-a,o=r<e-1?t[r+2]:2*a-i;return ps((n-r/e)*e,s,i,a,o)}})),vs((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],s=t[(r+1)%e],o=t[(r+2)%e];return ps((n-r/e)*e,i,a,s,o)}}));function bs(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),s=new Array(r);for(n=0;n<i;++n)a[n]=_s(t[n],e[n]);for(;n<r;++n)s[n]=e[n];return function(t){for(n=0;n<i;++n)s[n]=a[n](t);return s}}function xs(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function ws(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ss(t,e){var n,r={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?r[n]=_s(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var Ts=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ks=new RegExp(Ts.source,"g");function As(t,e){var n,r,i,a=Ts.lastIndex=ks.lastIndex=0,s=-1,o=[],u=[];for(t+="",e+="";(n=Ts.exec(t))&&(r=ks.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),o[s]?o[s]+=i:o[++s]=i),(n=n[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,u.push({i:s,x:ws(n,r)})),a=ks.lastIndex;return a<e.length&&(i=e.slice(a),o[s]?o[s]+=i:o[++s]=i),o.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)o[(n=u[r]).i]=n.x(t);return o.join("")})}function Es(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}}function _s(t,e){var n,r,i=typeof e;return null==e||"boolean"===i?fs(e):("number"===i?ws:"string"===i?(n=Ya(e))?(e=n,ys):As:e instanceof Ya?ys:e instanceof Date?xs:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?bs:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?Ss:ws:Es))(t,e)}function Os(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Is(t){return+t}var Ls=[0,1];function Ps(t){return t}function Cs(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Ds(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=Cs(i,r),a=n(s,a)):(r=Cs(r,i),a=n(a,s)),function(t){return a(r(t))}}function Ms(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Cs(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(e){var n=Pa(t,e,1,r)-1;return a[n](i[n](e))}}function Ns(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function js(){var t,e,n,r,i,a,s=Ls,o=Ls,u=_s,l=Ps;function c(){var t=Math.min(s.length,o.length);return l!==Ps&&(l=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(s[0],s[t-1])),r=t>2?Ms:Ds,i=a=null,h}function h(e){return null==e||isNaN(e=+e)?n:(i||(i=r(s.map(t),o,u)))(t(l(e)))}return h.invert=function(n){return l(e((a||(a=r(o,s.map(t),ws)))(n)))},h.domain=function(t){return arguments.length?(s=Array.from(t,Is),c()):s.slice()},h.range=function(t){return arguments.length?(o=Array.from(t),c()):o.slice()},h.rangeRound=function(t){return o=Array.from(t),u=Os,c()},h.clamp=function(t){return arguments.length?(l=!!t||Ps,c()):l!==Ps},h.interpolate=function(t){return arguments.length?(u=t,c()):u},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,c()}}function $s(){return js()(Ps,Ps)}var Rs,zs=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fs(t){if(!(e=zs.exec(t)))throw new Error("invalid format: "+t);var e;return new Vs({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Vs(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Bs(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Us(t){return(t=Bs(Math.abs(t)))?t[1]:NaN}function Ks(t,e){var n=Bs(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Fs.prototype=Vs.prototype,Vs.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Gs={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ks(100*t,e),r:Ks,s:function(t,e){var n=Bs(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Rs=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Bs(t,Math.max(0,e+a-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ws(t){return t}var Hs,Xs,qs,Ys=Array.prototype.map,Js=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Qs(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Ws:(e=Ys.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,a=[],s=0,o=e[0],u=0;i>0&&o>0&&(u+o+1>r&&(o=Math.max(1,r-u)),a.push(t.substring(i-=o,i+o)),!((u+=o+1)>r));)o=e[s=(s+1)%e.length];return a.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?Ws:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Ys.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"\u2212":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=Fs(t)).fill,n=t.align,h=t.sign,p=t.symbol,f=t.zero,d=t.width,m=t.comma,g=t.precision,y=t.trim,v=t.type;"n"===v?(m=!0,v="g"):Gs[v]||(void 0===g&&(g=12),y=!0,v="g"),(f||"0"===e&&"="===n)&&(f=!0,e="0",n="=");var b="$"===p?i:"#"===p&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",x="$"===p?a:/[%p]/.test(v)?u:"",w=Gs[v],S=/[defgprs%]/.test(v);function T(t){var i,a,u,p=b,T=x;if("c"===v)T=w(t)+T,t="";else{var k=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:w(Math.abs(t),g),y&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),k&&0===+t&&"+"!==h&&(k=!1),p=(k?"("===h?h:l:"-"===h||"("===h?"":h)+p,T=("s"===v?Js[8+Rs/3]:"")+T+(k&&"("===h?")":""),S)for(i=-1,a=t.length;++i<a;)if(48>(u=t.charCodeAt(i))||u>57){T=(46===u?s+t.slice(i+1):t.slice(i))+T,t=t.slice(0,i);break}}m&&!f&&(t=r(t,1/0));var A=p.length+t.length+T.length,E=A<d?new Array(d-A+1).join(e):"";switch(m&&f&&(t=r(E+t,E.length?d-T.length:1/0),E=""),n){case"<":t=p+t+T+E;break;case"=":t=p+E+t+T;break;case"^":t=E.slice(0,A=E.length>>1)+p+t+T+E.slice(A);break;default:t=E+p+t+T}return o(t)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),T.toString=function(){return t+""},T}return{format:h,formatPrefix:function(t,e){var n=h(((t=Fs(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Us(e)/3))),i=Math.pow(10,-r),a=Js[8+r/3];return function(t){return n(i*t)+a}}}}function Zs(t,e,n,r){var i,a=Ta(t,e,n);switch((r=Fs(null==r?",f":r)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Us(e)/3)))-Us(Math.abs(t)))}(a,s))||(r.precision=i),qs(r,s);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Us(e)-Us(t))+1}(a,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Us(Math.abs(t)))}(a))||(r.precision=i-2*("%"===r.type))}return Xs(r)}function to(t){var e=t.domain;return t.ticks=function(t){var n=e();return wa(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Zs(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,a=e(),s=0,o=a.length-1,u=a[s],l=a[o],c=10;for(l<u&&(i=u,u=l,l=i,i=s,s=o,o=i);c-- >0;){if((i=Sa(u,l,n))===r)return a[s]=u,a[o]=l,e(a);if(i>0)u=Math.floor(u/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,l=Math.floor(l*i)/i}r=i}return t},t}function eo(){var t=$s();return t.copy=function(){return Ns(t,eo())},Si.apply(t,arguments),to(t)}function no(t){var e;function n(t){return null==t||isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,Is),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return no(t).unknown(e)},t=arguments.length?Array.from(t,Is):[0,1],to(n)}function ro(t,e){var n,r=0,i=(t=t.slice()).length-1,a=t[r],s=t[i];return s<a&&(n=r,r=i,i=n,n=a,a=s,s=n),t[r]=e.floor(a),t[i]=e.ceil(s),t}function io(t){return Math.log(t)}function ao(t){return Math.exp(t)}function so(t){return-Math.log(-t)}function oo(t){return-Math.exp(-t)}function uo(t){return isFinite(t)?+("1e"+t):t<0?0:t}function lo(t){return(e,n)=>-t(-e,n)}function co(t){const e=t(io,ao),n=e.domain;let r,i,a=10;function s(){return r=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}(a),i=function(t){return 10===t?uo:t===Math.E?Math.exp:e=>Math.pow(t,e)}(a),n()[0]<0?(r=lo(r),i=lo(i),t(so,oo)):t(io,ao),e}return e.base=function(t){return arguments.length?(a=+t,s()):a},e.domain=function(t){return arguments.length?(n(t),s()):n()},e.ticks=t=>{const e=n();let s=e[0],o=e[e.length-1];const u=o<s;u&&([s,o]=[o,s]);let l,c,h=r(s),p=r(o);const f=null==t?10:+t;let d=[];if(!(a%1)&&p-h<f){if(h=Math.floor(h),p=Math.ceil(p),s>0){for(;h<=p;++h)for(l=1;l<a;++l)if(c=h<0?l/i(-h):l*i(h),!(c<s)){if(c>o)break;d.push(c)}}else for(;h<=p;++h)for(l=a-1;l>=1;--l)if(c=h>0?l/i(-h):l*i(h),!(c<s)){if(c>o)break;d.push(c)}2*d.length<f&&(d=wa(s,o,f))}else d=wa(h,p,Math.min(p-h,f)).map(i);return u?d.reverse():d},e.tickFormat=(t,n)=>{if(null==t&&(t=10),null==n&&(n=10===a?"s":","),"function"!==typeof n&&(a%1||null!=(n=Fs(n)).precision||(n.trim=!0),n=Xs(n)),t===1/0)return n;const s=Math.max(1,a*t/e.ticks().length);return t=>{let e=t/i(Math.round(r(t)));return e*a<a-.5&&(e*=a),e<=s?n(t):""}},e.nice=()=>n(ro(n(),{floor:t=>i(Math.floor(r(t))),ceil:t=>i(Math.ceil(r(t)))})),e}function ho(){const t=co(js()).domain([1,10]);return t.copy=()=>Ns(t,ho()).base(t.base()),Si.apply(t,arguments),t}function po(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function fo(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function mo(t){var e=1,n=t(po(e),fo(e));return n.constant=function(n){return arguments.length?t(po(e=+n),fo(e)):e},to(n)}function go(){var t=mo(js());return t.copy=function(){return Ns(t,go()).constant(t.constant())},Si.apply(t,arguments)}function yo(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function vo(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function bo(t){return t<0?-t*t:t*t}function xo(t){var e=t(Ps,Ps),n=1;return e.exponent=function(e){return arguments.length?1===(n=+e)?t(Ps,Ps):.5===n?t(vo,bo):t(yo(n),yo(1/n)):n},to(e)}function wo(){var t=xo(js());return t.copy=function(){return Ns(t,wo()).exponent(t.exponent())},Si.apply(t,arguments),t}function So(){return wo.apply(null,arguments).exponent(.5)}function To(t){return Math.sign(t)*t*t}function ko(){var t,e=$s(),n=[0,1],r=!1;function i(n){var i=function(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}(e(n));return isNaN(i)?t:r?Math.round(i):i}return i.invert=function(t){return e.invert(To(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain()},i.range=function(t){return arguments.length?(e.range((n=Array.from(t,Is)).map(To)),i):n.slice()},i.rangeRound=function(t){return i.range(t).round(!0)},i.round=function(t){return arguments.length?(r=!!t,i):r},i.clamp=function(t){return arguments.length?(e.clamp(t),i):e.clamp()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return ko(e.domain(),n).round(r).clamp(e.clamp()).unknown(t)},Si.apply(i,arguments),to(i)}function Ao(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function Eo(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function _o(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka;if(t===ka)return Oo;if("function"!==typeof t)throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||0===r?r:(0===t(n,n))-(0===t(e,e))}}function Oo(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}function Io(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,i=arguments.length>4?arguments[4]:void 0;if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=void 0===i?Oo:_o(i);r>n;){if(r-n>600){const a=r-n+1,s=e-n+1,o=Math.log(a),u=.5*Math.exp(2*o/3),l=.5*Math.sqrt(o*u*(a-u)/a)*(s-a/2<0?-1:1);Io(t,e,Math.max(n,Math.floor(e-s*u/a+l)),Math.min(r,Math.floor(e+(a-s)*u/a+l)),i)}const a=t[e];let s=n,o=r;for(Lo(t,n,e),i(t[r],a)>0&&Lo(t,n,r);s<o;){for(Lo(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}0===i(t[n],a)?Lo(t,n,o):(++o,Lo(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Lo(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Po(t,e,n){if(t=Float64Array.from(function*(t,e){if(void 0===e)for(let n of t)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}(t,n)),(r=t.length)&&!isNaN(e=+e)){if(e<=0||r<2)return Eo(t);if(e>=1)return Ao(t);var r,i=(r-1)*e,a=Math.floor(i),s=Ao(Io(t,a).subarray(0,a+1));return s+(Eo(t.subarray(a+1))-s)*(i-a)}}function Co(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oa;if((r=t.length)&&!isNaN(e=+e)){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t);return s+(+n(t[a+1],a+1,t)-s)*(i-a)}}function Do(){var t,e=[],n=[],r=[];function i(){var t=0,i=Math.max(1,n.length);for(r=new Array(i-1);++t<i;)r[t-1]=Co(e,t/i);return a}function a(e){return null==e||isNaN(e=+e)?t:n[Pa(r,e)]}return a.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},a.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(ka),i()},a.range=function(t){return arguments.length?(n=Array.from(t),i()):n.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.quantiles=function(){return r.slice()},a.copy=function(){return Do().domain(e).range(n).unknown(t)},Si.apply(a,arguments)}function Mo(){var t,e=0,n=1,r=1,i=[.5],a=[0,1];function s(e){return null!=e&&e<=e?a[Pa(i,e,0,r)]:t}function o(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return s}return s.domain=function(t){return arguments.length?([e,n]=t,e=+e,n=+n,o()):[e,n]},s.range=function(t){return arguments.length?(r=(a=Array.from(t)).length-1,o()):a.slice()},s.invertExtent=function(t){var s=a.indexOf(t);return s<0?[NaN,NaN]:s<1?[e,i[0]]:s>=r?[i[r-1],n]:[i[s-1],i[s]]},s.unknown=function(e){return arguments.length?(t=e,s):s},s.thresholds=function(){return i.slice()},s.copy=function(){return Mo().domain([e,n]).range(a).unknown(t)},Si.apply(to(s),arguments)}function No(){var t,e=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[Pa(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Array.from(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Array.from(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return No().domain(e).range(n).unknown(t)},Si.apply(i,arguments)}Hs=Qs({thousands:",",grouping:[3],currency:["$",""]}),Xs=Hs.format,qs=Hs.formatPrefix;const jo=1e3,$o=6e4,Ro=36e5,zo=864e5,Fo=6048e5,Vo=2592e6,Bo=31536e6,Uo=new Date,Ko=new Date;function Go(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=e=>(t(e=new Date(+e)),e),i.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),i.round=t=>{const e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=(t,n)=>(e(t=new Date(+t),null==n?1:Math.floor(n)),t),i.range=(n,r,a)=>{const s=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r)||!(a>0))return s;let o;do{s.push(o=new Date(+n)),e(n,a),t(n)}while(o<n&&n<r);return s},i.filter=n=>Go((e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),((t,r)=>{if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})),n&&(i.count=(e,r)=>(Uo.setTime(+e),Ko.setTime(+r),t(Uo),t(Ko),Math.floor(n(Uo,Ko))),i.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?e=>r(e)%t===0:e=>i.count(0,e)%t===0):i:null)),i}const Wo=Go((()=>{}),((t,e)=>{t.setTime(+t+e)}),((t,e)=>e-t));Wo.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?Go((e=>{e.setTime(Math.floor(e/t)*t)}),((e,n)=>{e.setTime(+e+n*t)}),((e,n)=>(n-e)/t)):Wo:null);Wo.range;const Ho=Go((t=>{t.setTime(t-t.getMilliseconds())}),((t,e)=>{t.setTime(+t+e*jo)}),((t,e)=>(e-t)/jo),(t=>t.getUTCSeconds())),Xo=(Ho.range,Go((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*jo)}),((t,e)=>{t.setTime(+t+e*$o)}),((t,e)=>(e-t)/$o),(t=>t.getMinutes()))),qo=(Xo.range,Go((t=>{t.setUTCSeconds(0,0)}),((t,e)=>{t.setTime(+t+e*$o)}),((t,e)=>(e-t)/$o),(t=>t.getUTCMinutes()))),Yo=(qo.range,Go((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*jo-t.getMinutes()*$o)}),((t,e)=>{t.setTime(+t+e*Ro)}),((t,e)=>(e-t)/Ro),(t=>t.getHours()))),Jo=(Yo.range,Go((t=>{t.setUTCMinutes(0,0,0)}),((t,e)=>{t.setTime(+t+e*Ro)}),((t,e)=>(e-t)/Ro),(t=>t.getUTCHours()))),Qo=(Jo.range,Go((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*$o)/zo),(t=>t.getDate()-1))),Zo=(Qo.range,Go((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/zo),(t=>t.getUTCDate()-1))),tu=(Zo.range,Go((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/zo),(t=>Math.floor(t/zo))));tu.range;function eu(t){return Go((e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),((t,e)=>{t.setDate(t.getDate()+7*e)}),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*$o)/Fo))}const nu=eu(0),ru=eu(1),iu=eu(2),au=eu(3),su=eu(4),ou=eu(5),uu=eu(6);nu.range,ru.range,iu.range,au.range,su.range,ou.range,uu.range;function lu(t){return Go((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)}),((t,e)=>(e-t)/Fo))}const cu=lu(0),hu=lu(1),pu=lu(2),fu=lu(3),du=lu(4),mu=lu(5),gu=lu(6),yu=(cu.range,hu.range,pu.range,fu.range,du.range,mu.range,gu.range,Go((t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,e)=>{t.setMonth(t.getMonth()+e)}),((t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())),(t=>t.getMonth()))),vu=(yu.range,Go((t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)}),((t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())),(t=>t.getUTCMonth()))),bu=(vu.range,Go((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e)=>{t.setFullYear(t.getFullYear()+e)}),((t,e)=>e.getFullYear()-t.getFullYear()),(t=>t.getFullYear())));bu.every=t=>isFinite(t=Math.floor(t))&&t>0?Go((e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,n)=>{e.setFullYear(e.getFullYear()+n*t)})):null;bu.range;const xu=Go((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)}),((t,e)=>e.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()));xu.every=t=>isFinite(t=Math.floor(t))&&t>0?Go((e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null;xu.range;function wu(t,e,n,r,i,a){const s=[[Ho,1,jo],[Ho,5,5e3],[Ho,15,15e3],[Ho,30,3e4],[a,1,$o],[a,5,3e5],[a,15,9e5],[a,30,18e5],[i,1,Ro],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,zo],[r,2,1728e5],[n,1,Fo],[e,1,Vo],[e,3,7776e6],[t,1,Bo]];function o(e,n,r){const i=Math.abs(n-e)/r,a=Ea((t=>{let[,,e]=t;return e})).right(s,i);if(a===s.length)return t.every(Ta(e/Bo,n/Bo,r));if(0===a)return Wo.every(Math.max(Ta(e,n,r),1));const[o,u]=s[i/s[a-1][2]<s[a][2]/i?a-1:a];return o.every(u)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"===typeof n.range?n:o(t,e,n),a=i?i.range(t,+e+1):[];return r?a.reverse():a},o]}const[Su,Tu]=wu(xu,vu,cu,tu,Jo,qo),[ku,Au]=wu(bu,yu,nu,Qo,Yo,Xo);function Eu(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function _u(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ou(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var Iu,Lu,Pu,Cu={"-":"",_:" ",0:"0"},Du=/^\s*\d+/,Mu=/^%/,Nu=/[\\^$*+?|[\]().{}]/g;function ju(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function $u(t){return t.replace(Nu,"\\$&")}function Ru(t){return new RegExp("^(?:"+t.map($u).join("|")+")","i")}function zu(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function Fu(t,e,n){var r=Du.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Vu(t,e,n){var r=Du.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Bu(t,e,n){var r=Du.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Uu(t,e,n){var r=Du.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Ku(t,e,n){var r=Du.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Gu(t,e,n){var r=Du.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Wu(t,e,n){var r=Du.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Hu(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Xu(t,e,n){var r=Du.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function qu(t,e,n){var r=Du.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Yu(t,e,n){var r=Du.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Ju(t,e,n){var r=Du.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Qu(t,e,n){var r=Du.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Zu(t,e,n){var r=Du.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function tl(t,e,n){var r=Du.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function el(t,e,n){var r=Du.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function nl(t,e,n){var r=Du.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function rl(t,e,n){var r=Mu.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function il(t,e,n){var r=Du.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function al(t,e,n){var r=Du.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function sl(t,e){return ju(t.getDate(),e,2)}function ol(t,e){return ju(t.getHours(),e,2)}function ul(t,e){return ju(t.getHours()%12||12,e,2)}function ll(t,e){return ju(1+Qo.count(bu(t),t),e,3)}function cl(t,e){return ju(t.getMilliseconds(),e,3)}function hl(t,e){return cl(t,e)+"000"}function pl(t,e){return ju(t.getMonth()+1,e,2)}function fl(t,e){return ju(t.getMinutes(),e,2)}function dl(t,e){return ju(t.getSeconds(),e,2)}function ml(t){var e=t.getDay();return 0===e?7:e}function gl(t,e){return ju(nu.count(bu(t)-1,t),e,2)}function yl(t){var e=t.getDay();return e>=4||0===e?su(t):su.ceil(t)}function vl(t,e){return t=yl(t),ju(su.count(bu(t),t)+(4===bu(t).getDay()),e,2)}function bl(t){return t.getDay()}function xl(t,e){return ju(ru.count(bu(t)-1,t),e,2)}function wl(t,e){return ju(t.getFullYear()%100,e,2)}function Sl(t,e){return ju((t=yl(t)).getFullYear()%100,e,2)}function Tl(t,e){return ju(t.getFullYear()%1e4,e,4)}function kl(t,e){var n=t.getDay();return ju((t=n>=4||0===n?su(t):su.ceil(t)).getFullYear()%1e4,e,4)}function Al(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ju(e/60|0,"0",2)+ju(e%60,"0",2)}function El(t,e){return ju(t.getUTCDate(),e,2)}function _l(t,e){return ju(t.getUTCHours(),e,2)}function Ol(t,e){return ju(t.getUTCHours()%12||12,e,2)}function Il(t,e){return ju(1+Zo.count(xu(t),t),e,3)}function Ll(t,e){return ju(t.getUTCMilliseconds(),e,3)}function Pl(t,e){return Ll(t,e)+"000"}function Cl(t,e){return ju(t.getUTCMonth()+1,e,2)}function Dl(t,e){return ju(t.getUTCMinutes(),e,2)}function Ml(t,e){return ju(t.getUTCSeconds(),e,2)}function Nl(t){var e=t.getUTCDay();return 0===e?7:e}function jl(t,e){return ju(cu.count(xu(t)-1,t),e,2)}function $l(t){var e=t.getUTCDay();return e>=4||0===e?du(t):du.ceil(t)}function Rl(t,e){return t=$l(t),ju(du.count(xu(t),t)+(4===xu(t).getUTCDay()),e,2)}function zl(t){return t.getUTCDay()}function Fl(t,e){return ju(hu.count(xu(t)-1,t),e,2)}function Vl(t,e){return ju(t.getUTCFullYear()%100,e,2)}function Bl(t,e){return ju((t=$l(t)).getUTCFullYear()%100,e,2)}function Ul(t,e){return ju(t.getUTCFullYear()%1e4,e,4)}function Kl(t,e){var n=t.getUTCDay();return ju((t=n>=4||0===n?du(t):du.ceil(t)).getUTCFullYear()%1e4,e,4)}function Gl(){return"+0000"}function Wl(){return"%"}function Hl(t){return+t}function Xl(t){return Math.floor(+t/1e3)}function ql(t){return new Date(t)}function Yl(t){return t instanceof Date?+t:+new Date(+t)}function Jl(t,e,n,r,i,a,s,o,u,l){var c=$s(),h=c.invert,p=c.domain,f=l(".%L"),d=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),x=l("%Y");function w(t){return(u(t)<t?f:o(t)<t?d:s(t)<t?m:a(t)<t?g:r(t)<t?i(t)<t?y:v:n(t)<t?b:x)(t)}return c.invert=function(t){return new Date(h(t))},c.domain=function(t){return arguments.length?p(Array.from(t,Yl)):p().map(ql)},c.ticks=function(e){var n=p();return t(n[0],n[n.length-1],null==e?10:e)},c.tickFormat=function(t,e){return null==e?w:l(e)},c.nice=function(t){var n=p();return t&&"function"===typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?p(ro(n,t)):c},c.copy=function(){return Ns(c,Jl(t,e,n,r,i,a,s,o,u,l))},c}function Ql(){return Si.apply(Jl(ku,Au,bu,yu,nu,Qo,Yo,Xo,Ho,Lu).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Zl(){return Si.apply(Jl(Su,Tu,xu,vu,cu,Zo,Jo,qo,Ho,Pu).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function tc(){var t,e,n,r,i,a=0,s=1,o=Ps,u=!1;function l(e){return null==e||isNaN(e=+e)?i:o(0===n?.5:(e=(r(e)-t)*n,u?Math.max(0,Math.min(1,e)):e))}function c(t){return function(e){var n,r;return arguments.length?([n,r]=e,o=t(n,r),l):[o(0),o(1)]}}return l.domain=function(i){return arguments.length?([a,s]=i,t=r(a=+a),e=r(s=+s),n=t===e?0:1/(e-t),l):[a,s]},l.clamp=function(t){return arguments.length?(u=!!t,l):u},l.interpolator=function(t){return arguments.length?(o=t,l):o},l.range=c(_s),l.rangeRound=c(Os),l.unknown=function(t){return arguments.length?(i=t,l):i},function(i){return r=i,t=i(a),e=i(s),n=t===e?0:1/(e-t),l}}function ec(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function nc(){var t=to(tc()(Ps));return t.copy=function(){return ec(t,nc())},Ti.apply(t,arguments)}function rc(){var t=co(tc()).domain([1,10]);return t.copy=function(){return ec(t,rc()).base(t.base())},Ti.apply(t,arguments)}function ic(){var t=mo(tc());return t.copy=function(){return ec(t,ic()).constant(t.constant())},Ti.apply(t,arguments)}function ac(){var t=xo(tc());return t.copy=function(){return ec(t,ac()).exponent(t.exponent())},Ti.apply(t,arguments)}function sc(){return ac.apply(null,arguments).exponent(.5)}function oc(){var t=[],e=Ps;function n(n){if(null!=n&&!isNaN(n=+n))return e((Pa(t,n,1)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(ka),n},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.range=function(){return t.map(((n,r)=>e(r/(t.length-1))))},n.quantiles=function(e){return Array.from({length:e+1},((n,r)=>Po(t,r/e)))},n.copy=function(){return oc(e).domain(t)},Ti.apply(n,arguments)}function uc(){var t,e,n,r,i,a,s,o=0,u=.5,l=1,c=1,h=Ps,p=!1;function f(t){return isNaN(t=+t)?s:(t=.5+((t=+a(t))-e)*(c*t<c*e?r:i),h(p?Math.max(0,Math.min(1,t)):t))}function d(t){return function(e){var n,r,i;return arguments.length?([n,r,i]=e,h=function(t,e){void 0===e&&(e=t,t=_s);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return a[e](t-e)}}(t,[n,r,i]),f):[h(0),h(.5),h(1)]}}return f.domain=function(s){return arguments.length?([o,u,l]=s,t=a(o=+o),e=a(u=+u),n=a(l=+l),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),c=e<t?-1:1,f):[o,u,l]},f.clamp=function(t){return arguments.length?(p=!!t,f):p},f.interpolator=function(t){return arguments.length?(h=t,f):h},f.range=d(_s),f.rangeRound=d(Os),f.unknown=function(t){return arguments.length?(s=t,f):s},function(s){return a=s,t=s(o),e=s(u),n=s(l),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),c=e<t?-1:1,f}}function lc(){var t=to(uc()(Ps));return t.copy=function(){return ec(t,lc())},Ti.apply(t,arguments)}function cc(){var t=co(uc()).domain([.1,1,10]);return t.copy=function(){return ec(t,cc()).base(t.base())},Ti.apply(t,arguments)}function hc(){var t=mo(uc());return t.copy=function(){return ec(t,hc()).constant(t.constant())},Ti.apply(t,arguments)}function pc(){var t=xo(uc());return t.copy=function(){return ec(t,pc()).exponent(t.exponent())},Ti.apply(t,arguments)}function fc(){return pc.apply(null,arguments).exponent(.5)}function dc(t,e){if((i=t.length)>1)for(var n,r,i,a=1,s=t[e[0]],o=s.length;a<i;++a)for(r=s,s=t[e[a]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}!function(t){Iu=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,u=t.shortMonths,l=Ru(i),c=zu(i),h=Ru(a),p=zu(a),f=Ru(s),d=zu(s),m=Ru(o),g=zu(o),y=Ru(u),v=zu(u),b={a:function(t){return s[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return o[t.getMonth()]},c:null,d:sl,e:sl,f:hl,g:Sl,G:kl,H:ol,I:ul,j:ll,L:cl,m:pl,M:fl,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Hl,s:Xl,S:dl,u:ml,U:gl,V:vl,w:bl,W:xl,x:null,X:null,y:wl,Y:Tl,Z:Al,"%":Wl},x={a:function(t){return s[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return o[t.getUTCMonth()]},c:null,d:El,e:El,f:Pl,g:Bl,G:Kl,H:_l,I:Ol,j:Il,L:Ll,m:Cl,M:Dl,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Hl,s:Xl,S:Ml,u:Nl,U:jl,V:Rl,w:zl,W:Fl,x:null,X:null,y:Vl,Y:Ul,Z:Gl,"%":Wl},w={a:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=y.exec(e.slice(n));return r?(t.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return k(t,e,n,r)},d:Yu,e:Yu,f:nl,g:Wu,G:Gu,H:Qu,I:Qu,j:Ju,L:el,m:qu,M:Zu,p:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:Xu,Q:il,s:al,S:tl,u:Vu,U:Bu,V:Uu,w:Fu,W:Ku,x:function(t,e,r){return k(t,n,e,r)},X:function(t,e,n){return k(t,r,e,n)},y:Wu,Y:Gu,Z:Hu,"%":rl};function S(t,e){return function(n){var r,i,a,s=[],o=-1,u=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++o<l;)37===t.charCodeAt(o)&&(s.push(t.slice(u,o)),null!=(i=Cu[r=t.charAt(++o)])?r=t.charAt(++o):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),s.push(r),u=o+1);return s.push(t.slice(u,o)),s.join("")}}function T(t,e){return function(n){var r,i,a=Ou(1900,void 0,1);if(k(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=_u(Ou(a.y,0,1))).getUTCDay(),r=i>4||0===i?hu.ceil(r):hu(r),r=Zo.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=Eu(Ou(a.y,0,1))).getDay(),r=i>4||0===i?ru.ceil(r):ru(r),r=Qo.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?_u(Ou(a.y,0,1)).getUTCDay():Eu(Ou(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,_u(a)):Eu(a)}}function k(t,e,n,r){for(var i,a,s=0,o=e.length,u=n.length;s<o;){if(r>=u)return-1;if(37===(i=e.charCodeAt(s++))){if(i=e.charAt(s++),!(a=w[i in Cu?e.charAt(s++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=S(n,b),b.X=S(r,b),b.c=S(e,b),x.x=S(n,x),x.X=S(r,x),x.c=S(e,x),{format:function(t){var e=S(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=T(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=S(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=T(t+="",!0);return e.toString=function(){return t},e}}}(t),Lu=Iu.format,Iu.parse,Pu=Iu.utcFormat,Iu.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Array.prototype.slice;function mc(t){return"object"===typeof t&&"length"in t?t:Array.from(t)}function gc(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function yc(t,e){return t[e]}function vc(t){const e=[];return e.key=t,e}var bc=n(539),xc=n.n(bc),wc=n(6745),Sc=n.n(wc),Tc=n(3538),kc=n.n(Tc),Ac=n(9853),Ec=n.n(Ac),_c=n(8210),Oc=n.n(_c);function Ic(t){return function(t){if(Array.isArray(t))return Lc(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return Lc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lc(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Pc=function(t){return t},Cc={"@@functional/placeholder":!0},Dc=function(t){return t===Cc},Mc=function(t){return function e(){return 0===arguments.length||1===arguments.length&&Dc(arguments.length<=0?void 0:arguments[0])?e:t.apply(void 0,arguments)}},Nc=function t(e,n){return 1===e?n:Mc((function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=i.filter((function(t){return t!==Cc})).length;return s>=e?n.apply(void 0,i):t(e-s,Mc((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var a=i.map((function(t){return Dc(t)?e.shift():t}));return n.apply(void 0,Ic(a).concat(e))})))}))},jc=function(t){return Nc(t.length,t)},$c=function(t,e){for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},Rc=jc((function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map((function(t){return e[t]})).map(t)})),zc=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!e.length)return Pc;var r=e.reverse(),i=r[0],a=r.slice(1);return function(){return a.reduce((function(t,e){return e(t)}),i.apply(void 0,arguments))}},Fc=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},Vc=function(t){var e=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e&&i.every((function(t,n){return t===e[n]}))?n:(e=i,n=t.apply(void 0,i))}};const Bc={rangeStep:function(t,e,n){for(var r=new(Oc())(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a},getDigitCount:function(t){return 0===t?1:Math.floor(new(Oc())(t).abs().log(10).toNumber())+1},interpolateNumber:jc((function(t,e,n){var r=+t;return r+n*(+e-r)})),uninterpolateNumber:jc((function(t,e,n){var r=e-+t;return(n-t)/(r=r||1/0)})),uninterpolateTruncation:jc((function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))}))};function Uc(t){return function(t){if(Array.isArray(t))return Wc(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Gc(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kc(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}(t,e)||Gc(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gc(t,e){if(t){if("string"===typeof t)return Wc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wc(t,e):void 0}}function Wc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hc(t){var e=Kc(t,2),n=e[0],r=e[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function Xc(t,e,n){if(t.lte(0))return new(Oc())(0);var r=Bc.getDigitCount(t.toNumber()),i=new(Oc())(10).pow(r),a=t.div(i),s=1!==r?.05:.1,o=new(Oc())(Math.ceil(a.div(s).toNumber())).add(n).mul(s).mul(i);return e?o:new(Oc())(Math.ceil(o))}function qc(t,e,n){var r=1,i=new(Oc())(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new(Oc())(10).pow(Bc.getDigitCount(t)-1),i=new(Oc())(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new(Oc())(Math.floor(t)))}else 0===t?i=new(Oc())(Math.floor((e-1)/2)):n||(i=new(Oc())(Math.floor(t)));var s=Math.floor((e-1)/2);return zc(Rc((function(t){return i.add(new(Oc())(t-s).mul(r)).toNumber()})),$c)(0,e)}function Yc(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new(Oc())(0),tickMin:new(Oc())(0),tickMax:new(Oc())(0)};var a,s=Xc(new(Oc())(e).sub(t).div(n-1),r,i);a=t<=0&&e>=0?new(Oc())(0):(a=new(Oc())(t).add(e).div(2)).sub(new(Oc())(a).mod(s));var o=Math.ceil(a.sub(t).div(s).toNumber()),u=Math.ceil(new(Oc())(e).sub(a).div(s).toNumber()),l=o+u+1;return l>n?Yc(t,e,n,r,i+1):(l<n&&(u=e>0?u+(n-l):u,o=e>0?o:o+(n-l)),{step:s,tickMin:a.sub(new(Oc())(o).mul(s)),tickMax:a.add(new(Oc())(u).mul(s))})}var Jc=Vc((function(t){var e=Kc(t,2),n=e[0],r=e[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Math.max(i,2),o=Kc(Hc([n,r]),2),u=o[0],l=o[1];if(u===-1/0||l===1/0){var c=l===1/0?[u].concat(Uc($c(0,i-1).map((function(){return 1/0})))):[].concat(Uc($c(0,i-1).map((function(){return-1/0}))),[l]);return n>r?Fc(c):c}if(u===l)return qc(u,i,a);var h=Yc(u,l,s,a),p=h.step,f=h.tickMin,d=h.tickMax,m=Bc.rangeStep(f,d.add(new(Oc())(.1).mul(p)),p);return n>r?Fc(m):m})),Qc=(Vc((function(t){var e=Kc(t,2),n=e[0],r=e[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Math.max(i,2),o=Kc(Hc([n,r]),2),u=o[0],l=o[1];if(u===-1/0||l===1/0)return[n,r];if(u===l)return qc(u,i,a);var c=Xc(new(Oc())(l).sub(u).div(s-1),a,0),h=zc(Rc((function(t){return new(Oc())(u).add(new(Oc())(t).mul(c)).toNumber()})),$c)(0,s).filter((function(t){return t>=u&&t<=l}));return n>r?Fc(h):h})),Vc((function(t,e){var n=Kc(t,2),r=n[0],i=n[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Kc(Hc([r,i]),2),o=s[0],u=s[1];if(o===-1/0||u===1/0)return[r,i];if(o===u)return[o];var l=Math.max(e,2),c=Xc(new(Oc())(u).sub(o).div(l-1),a,0),h=[].concat(Uc(Bc.rangeStep(new(Oc())(o),new(Oc())(u).sub(new(Oc())(.99).mul(c)),c)),[u]);return r>i?Fc(h):h}))),Zc=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function th(t){return th="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},th(t)}function eh(){return eh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eh.apply(this,arguments)}function nh(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,s,o=[],u=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return rh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rh(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ih(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ah(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hh(r.key),r)}}function sh(t,e,n){return e=uh(e),function(t,e){if(e&&("object"===th(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,oh()?Reflect.construct(e,n||[],uh(t).constructor):e.apply(t,n))}function oh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(oh=function(){return!!t})()}function uh(t){return uh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},uh(t)}function lh(t,e){return lh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lh(t,e)}function ch(t,e,n){return(e=hh(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hh(t){var e=function(t,e){if("object"!=th(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=th(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==th(e)?e:e+""}var ph=function(t){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),sh(this,n,arguments)}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lh(t,e)}(n,t),r=n,(i=[{key:"render",value:function(){var t=this.props,n=t.offset,r=t.layout,i=t.width,a=t.dataKey,s=t.data,o=t.dataPointFormatter,u=t.xAxis,l=t.yAxis,c=ih(t,Zc),h=st(c,!1);"x"===this.props.direction&&"number"!==u.type&&St(!1);var p=s.map((function(t){var s=o(t,a),c=s.x,p=s.y,f=s.value,d=s.errorVal;if(!d)return null;var m,g,y=[];if(Array.isArray(d)){var v=nh(d,2);m=v[0],g=v[1]}else m=g=d;if("vertical"===r){var b=u.scale,x=p+n,w=x+i,S=x-i,T=b(f-m),k=b(f+g);y.push({x1:k,y1:w,x2:k,y2:S}),y.push({x1:T,y1:x,x2:k,y2:x}),y.push({x1:T,y1:w,x2:T,y2:S})}else if("horizontal"===r){var A=l.scale,E=c+n,_=E-i,O=E+i,I=A(f-m),L=A(f+g);y.push({x1:_,y1:L,x2:O,y2:L}),y.push({x1:E,y1:I,x2:E,y2:L}),y.push({x1:_,y1:I,x2:O,y2:I})}return e.createElement(Lt,eh({className:"recharts-errorBar",key:"bar-".concat(y.map((function(t){return"".concat(t.x1,"-").concat(t.x2,"-").concat(t.y1,"-").concat(t.y2)})))},h),y.map((function(t){return e.createElement("line",eh({},t,{key:"line-".concat(t.x1,"-").concat(t.x2,"-").concat(t.y1,"-").concat(t.y2)}))})))}));return e.createElement(Lt,{className:"recharts-errorBars"},p)}}])&&ah(r.prototype,i),a&&ah(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(e.Component);function fh(t){return fh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fh(t)}function dh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function mh(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dh(Object(n),!0).forEach((function(e){gh(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function gh(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=fh(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=fh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fh(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ch(ph,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),ch(ph,"displayName","ErrorBar");var yh=function(t){var e=t.children,n=t.formattedGraphicalItems,r=t.legendWidth,i=t.legendContent,a=nt(e,Dn);if(!a)return null;var s,o=Dn.defaultProps,u=void 0!==o?mh(mh({},o),a.props):{};return s=a.props&&a.props.payload?a.props&&a.props.payload:"children"===i?(n||[]).reduce((function(t,e){var n=e.item,r=e.props,i=r.sectors||r.data||[];return t.concat(i.map((function(t){return{type:a.props.iconType||n.props.legendType,value:t.name,color:t.fill,payload:t}})))}),[]):(n||[]).map((function(t){var e=t.item,n=e.type.defaultProps,r=void 0!==n?mh(mh({},n),e.props):{},i=r.dataKey,a=r.name,s=r.legendType;return{inactive:r.hide,dataKey:i,type:u.iconType||s||"square",color:Eh(e),value:a||i,payload:r}})),mh(mh(mh({},u),Dn.getWithHeight(a,r)),{},{payload:s,item:a})};function vh(t){return vh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vh(t)}function bh(t){return function(t){if(Array.isArray(t))return xh(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return xh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xh(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Sh(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wh(Object(n),!0).forEach((function(e){Th(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Th(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=vh(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=vh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vh(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kh(t,e,n){return D()(t)||D()(e)?n:k(e)?v()(t,e,n):N()(e)?e(t):n}function Ah(t,e,n,r){var i=kc()(t,(function(t){return kh(t,e)}));if("number"===n){var a=i.filter((function(t){return T(t)||parseFloat(t)}));return a.length?[Sc()(a),xc()(a)]:[1/0,-1/0]}return(r?i.filter((function(t){return!D()(t)})):i).map((function(t){return k(t)||t instanceof Date?t:""}))}var Eh=function(t){var e,n,r=t.type.displayName,i=null!==(e=t.type)&&void 0!==e&&e.defaultProps?Sh(Sh({},t.type.defaultProps),t.props):t.props,a=i.stroke,s=i.fill;switch(r){case"Line":n=a;break;case"Area":case"Radar":n=a&&"none"!==a?a:s;break;default:n=s}return n},_h=function(t,e,n,r,i){var a=et(e.props.children,ph).filter((function(t){return function(t,e,n){return!!D()(e)||("horizontal"===t?"yAxis"===e:"vertical"===t||"x"===n?"xAxis"===e:"y"!==n||"yAxis"===e)}(r,i,t.props.direction)}));if(a&&a.length){var s=a.map((function(t){return t.props.dataKey}));return t.reduce((function(t,e){var r=kh(e,n);if(D()(r))return t;var i=Array.isArray(r)?[Sc()(r),xc()(r)]:[r,r],a=s.reduce((function(t,n){var r=kh(e,n,0),a=i[0]-Math.abs(Array.isArray(r)?r[0]:r),s=i[1]+Math.abs(Array.isArray(r)?r[1]:r);return[Math.min(a,t[0]),Math.max(s,t[1])]}),[1/0,-1/0]);return[Math.min(a[0],t[0]),Math.max(a[1],t[1])]}),[1/0,-1/0])}return null},Oh=function(t,e,n,r,i){var a=e.map((function(e){var a=e.props.dataKey;return"number"===n&&a&&_h(t,e,a,r)||Ah(t,a,n,i)}));if("number"===n)return a.reduce((function(t,e){return[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}),[1/0,-1/0]);var s={};return a.reduce((function(t,e){for(var n=0,r=e.length;n<r;n++)s[e[n]]||(s[e[n]]=!0,t.push(e[n]));return t}),[])},Ih=function(t,e){return"horizontal"===t&&"xAxis"===e||"vertical"===t&&"yAxis"===e||"centric"===t&&"angleAxis"===e||"radial"===t&&"radiusAxis"===e},Lh=function(t,e,n,r){if(r)return t.map((function(t){return t.coordinate}));var i,a,s=t.map((function(t){return t.coordinate===e&&(i=!0),t.coordinate===n&&(a=!0),t.coordinate}));return i||s.push(e),a||s.push(n),s},Ph=function(t,e,n){if(!t)return null;var r=t.scale,i=t.duplicateDomain,a=t.type,s=t.range,o="scaleBand"===t.realScaleType?r.bandwidth()/2:2,u=(e||n)&&"category"===a&&r.bandwidth?r.bandwidth()/o:0;return u="angleAxis"===t.axisType&&(null===s||void 0===s?void 0:s.length)>=2?2*w(s[0]-s[1])*u:u,e&&(t.ticks||t.niceTicks)?(t.ticks||t.niceTicks).map((function(t){var e=i?i.indexOf(t):t;return{coordinate:r(e)+u,value:t,offset:u}})).filter((function(t){return!g()(t.coordinate)})):t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map((function(t,e){return{coordinate:r(t)+u,value:t,index:e,offset:u}})):r.ticks&&!n?r.ticks(t.tickCount).map((function(t){return{coordinate:r(t)+u,value:t,offset:u}})):r.domain().map((function(t,e){return{coordinate:r(t)+u,value:i?i[t]:t,index:e,offset:u}}))},Ch=new WeakMap,Dh=function(t,e){if("function"!==typeof e)return t;Ch.has(t)||Ch.set(t,new WeakMap);var n=Ch.get(t);if(n.has(e))return n.get(e);var r=function(){t.apply(void 0,arguments),e.apply(void 0,arguments)};return n.set(e,r),r},Mh=1e-4,Nh={sign:function(t){var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,a=0,s=0;s<e;++s){var o=g()(t[s][n][1])?t[s][n][0]:t[s][n][1];o>=0?(t[s][n][0]=i,t[s][n][1]=i+o,i=t[s][n][1]):(t[s][n][0]=a,t[s][n][1]=a+o,a=t[s][n][1])}},expand:function(t,e){if((r=t.length)>0){for(var n,r,i,a=0,s=t[0].length;a<s;++a){for(i=n=0;n<r;++n)i+=t[n][a][1]||0;if(i)for(n=0;n<r;++n)t[n][a][1]/=i}dc(t,e)}},none:dc,silhouette:function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],a=i.length;r<a;++r){for(var s=0,o=0;s<n;++s)o+=t[s][r][1]||0;i[r][1]+=i[r][0]=-o/2}dc(t,e)}},wiggle:function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,a=0,s=1;s<r;++s){for(var o=0,u=0,l=0;o<i;++o){for(var c=t[e[o]],h=c[s][1]||0,p=(h-(c[s-1][1]||0))/2,f=0;f<o;++f){var d=t[e[f]];p+=(d[s][1]||0)-(d[s-1][1]||0)}u+=h,l+=p*h}n[s-1][1]+=n[s-1][0]=a,u&&(a-=l/u)}n[s-1][1]+=n[s-1][0]=a,dc(t,e)}},positive:function(t){var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,a=0;a<e;++a){var s=g()(t[a][n][1])?t[a][n][0]:t[a][n][1];s>=0?(t[a][n][0]=i,t[a][n][1]=i+s,i=t[a][n][1]):(t[a][n][0]=0,t[a][n][1]=0)}}},jh=function(t,e,n){var r=e.map((function(t){return t.props.dataKey})),i=Nh[n],a=function(){var t=Ue([]),e=gc,n=dc,r=yc;function i(i){var a,s,o=Array.from(t.apply(this,arguments),vc),u=o.length,l=-1;for(const t of i)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(t,o[a].key,l,i)]).data=t;for(a=0,s=mc(e(o));a<u;++a)o[s[a]].index=a;return n(o,s),o}return i.keys=function(e){return arguments.length?(t="function"===typeof e?e:Ue(Array.from(e)),i):t},i.value=function(t){return arguments.length?(r="function"===typeof t?t:Ue(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?gc:"function"===typeof t?t:Ue(Array.from(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?dc:t,i):n},i}().keys(r).value((function(t,e){return+kh(t,e,0)})).order(gc).offset(i);return a(t)};var $h=function(t){var e=t.axis,n=t.ticks,r=t.offset,i=t.bandSize,a=t.entry,s=t.index;if("category"===e.type)return n[s]?n[s].coordinate+r:null;var o=kh(a,e.dataKey,e.domain[s]);return D()(o)?null:e.scale(o)-i/2+r},Rh=function(t,e,n){return Object.keys(t).reduce((function(r,i){var a=t[i].stackedData.reduce((function(t,r){var i=r.slice(e,n+1).reduce((function(t,e){return[Sc()(e.concat([t[0]]).filter(T)),xc()(e.concat([t[1]]).filter(T))]}),[1/0,-1/0]);return[Math.min(t[0],i[0]),Math.max(t[1],i[1])]}),[1/0,-1/0]);return[Math.min(a[0],r[0]),Math.max(a[1],r[1])]}),[1/0,-1/0]).map((function(t){return t===1/0||t===-1/0?0:t}))},zh=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Fh=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Vh=function(t,e,n){if(N()(t))return t(e,n);if(!Array.isArray(t))return e;var r=[];if(T(t[0]))r[0]=n?t[0]:Math.min(t[0],e[0]);else if(zh.test(t[0])){var i=+zh.exec(t[0])[1];r[0]=e[0]-i}else N()(t[0])?r[0]=t[0](e[0]):r[0]=e[0];if(T(t[1]))r[1]=n?t[1]:Math.max(t[1],e[1]);else if(Fh.test(t[1])){var a=+Fh.exec(t[1])[1];r[1]=e[1]+a}else N()(t[1])?r[1]=t[1](e[1]):r[1]=e[1];return r},Bh=function(t,e,n){if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=xt()(e,(function(t){return t.coordinate})),a=1/0,s=1,o=i.length;s<o;s++){var u=i[s],l=i[s-1];a=Math.min((u.coordinate||0)-(l.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0},Uh=function(t,e,n){return t&&t.length?Ec()(t,v()(n,"type.defaultProps.domain"))?e:t:e},Kh=function(t,e){var n=t.type.defaultProps?Sh(Sh({},t.type.defaultProps),t.props):t.props,r=n.dataKey,i=n.name,a=n.unit,s=n.formatter,o=n.tooltipType,u=n.chartType,l=n.hide;return Sh(Sh({},st(t,!1)),{},{dataKey:r,unit:a,formatter:s,name:i||r,color:Eh(t),value:kh(e,r),type:o,payload:e,chartType:u,hide:l})};function Gh(t){return Gh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gh(t)}function Wh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Hh(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Wh(Object(n),!0).forEach((function(e){Xh(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Xh(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=Gh(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Gh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gh(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var qh=["Webkit","Moz","O","ms"];function Yh(t){return Yh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yh(t)}function Jh(){return Jh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jh.apply(this,arguments)}function Qh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zh(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Qh(Object(n),!0).forEach((function(e){ap(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function tp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sp(r.key),r)}}function ep(t,e,n){return e=rp(e),function(t,e){if(e&&("object"===Yh(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,np()?Reflect.construct(e,n||[],rp(t).constructor):e.apply(t,n))}function np(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(np=function(){return!!t})()}function rp(t){return rp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rp(t)}function ip(t,e){return ip=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ip(t,e)}function ap(t,e,n){return(e=sp(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sp(t){var e=function(t,e){if("object"!=Yh(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Yh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Yh(e)?e:e+""}var op=function(t){return t.changedTouches&&!!t.changedTouches.length},up=function(t){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),ap(e=ep(this,n,[t]),"handleDrag",(function(t){e.leaveTimer&&(clearTimeout(e.leaveTimer),e.leaveTimer=null),e.state.isTravellerMoving?e.handleTravellerMove(t):e.state.isSlideMoving&&e.handleSlideDrag(t)})),ap(e,"handleTouchMove",(function(t){null!=t.changedTouches&&t.changedTouches.length>0&&e.handleDrag(t.changedTouches[0])})),ap(e,"handleDragEnd",(function(){e.setState({isTravellerMoving:!1,isSlideMoving:!1},(function(){var t=e.props,n=t.endIndex,r=t.onDragEnd,i=t.startIndex;null===r||void 0===r||r({endIndex:n,startIndex:i})})),e.detachDragEndListener()})),ap(e,"handleLeaveWrapper",(function(){(e.state.isTravellerMoving||e.state.isSlideMoving)&&(e.leaveTimer=window.setTimeout(e.handleDragEnd,e.props.leaveTimeOut))})),ap(e,"handleEnterSlideOrTraveller",(function(){e.setState({isTextActive:!0})})),ap(e,"handleLeaveSlideOrTraveller",(function(){e.setState({isTextActive:!1})})),ap(e,"handleSlideDragStart",(function(t){var n=op(t)?t.changedTouches[0]:t;e.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:n.pageX}),e.attachDragEndListener()})),e.travellerDragStartHandlers={startX:e.handleTravellerDragStart.bind(e,"startX"),endX:e.handleTravellerDragStart.bind(e,"endX")},e.state={},e}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ip(t,e)}(n,t),r=n,a=[{key:"renderDefaultTraveller",value:function(t){var n=t.x,r=t.y,i=t.width,a=t.height,s=t.stroke,o=Math.floor(r+a/2)-1;return e.createElement(e.Fragment,null,e.createElement("rect",{x:n,y:r,width:i,height:a,fill:s,stroke:"none"}),e.createElement("line",{x1:n+1,y1:o,x2:n+i-1,y2:o,fill:"none",stroke:"#fff"}),e.createElement("line",{x1:n+1,y1:o+2,x2:n+i-1,y2:o+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(t,r){return e.isValidElement(t)?e.cloneElement(t,r):N()(t)?t(r):n.renderDefaultTraveller(r)}},{key:"getDerivedStateFromProps",value:function(t,e){var n=t.data,r=t.width,i=t.x,a=t.travellerWidth,s=t.updateId,o=t.startIndex,u=t.endIndex;if(n!==e.prevData||s!==e.prevUpdateId)return Zh({prevData:n,prevTravellerWidth:a,prevUpdateId:s,prevX:i,prevWidth:r},n&&n.length?function(t){var e=t.data,n=t.startIndex,r=t.endIndex,i=t.x,a=t.width,s=t.travellerWidth;if(!e||!e.length)return{};var o=e.length,u=Di().domain(vt()(0,o)).range([i,i+a-s]),l=u.domain().map((function(t){return u(t)}));return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(r),scale:u,scaleValues:l}}({data:n,width:r,x:i,travellerWidth:a,startIndex:o,endIndex:u}):{scale:null,scaleValues:null});if(e.scale&&(r!==e.prevWidth||i!==e.prevX||a!==e.prevTravellerWidth)){e.scale.range([i,i+r-a]);var l=e.scale.domain().map((function(t){return e.scale(t)}));return{prevData:n,prevTravellerWidth:a,prevUpdateId:s,prevX:i,prevWidth:r,startX:e.scale(t.startIndex),endX:e.scale(t.endIndex),scaleValues:l}}return null}},{key:"getIndexInRange",value:function(t,e){for(var n=0,r=t.length-1;r-n>1;){var i=Math.floor((n+r)/2);t[i]>e?r=i:n=i}return e>=t[r]?r:n}}],(i=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(t){var e=t.startX,r=t.endX,i=this.state.scaleValues,a=this.props,s=a.gap,o=a.data.length-1,u=Math.min(e,r),l=Math.max(e,r),c=n.getIndexInRange(i,u),h=n.getIndexInRange(i,l);return{startIndex:c-c%s,endIndex:h===o?o:h-h%s}}},{key:"getTextOfTick",value:function(t){var e=this.props,n=e.data,r=e.tickFormatter,i=e.dataKey,a=kh(n[t],i,t);return N()(r)?r(a,t):a}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(t){var e=this.state,n=e.slideMoveStartX,r=e.startX,i=e.endX,a=this.props,s=a.x,o=a.width,u=a.travellerWidth,l=a.startIndex,c=a.endIndex,h=a.onChange,p=t.pageX-n;p>0?p=Math.min(p,s+o-u-i,s+o-u-r):p<0&&(p=Math.max(p,s-r,s-i));var f=this.getIndex({startX:r+p,endX:i+p});f.startIndex===l&&f.endIndex===c||!h||h(f),this.setState({startX:r+p,endX:i+p,slideMoveStartX:t.pageX})}},{key:"handleTravellerDragStart",value:function(t,e){var n=op(e)?e.changedTouches[0]:e;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:t,brushMoveStartX:n.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(t){var e=this.state,n=e.brushMoveStartX,r=e.movingTravellerId,i=e.endX,a=e.startX,s=this.state[r],o=this.props,u=o.x,l=o.width,c=o.travellerWidth,h=o.onChange,p=o.gap,f=o.data,d={startX:this.state.startX,endX:this.state.endX},m=t.pageX-n;m>0?m=Math.min(m,u+l-c-s):m<0&&(m=Math.max(m,u-s)),d[r]=s+m;var g=this.getIndex(d),y=g.startIndex,v=g.endIndex;this.setState(ap(ap({},r,s+m),"brushMoveStartX",t.pageX),(function(){h&&function(){var t=f.length-1;return"startX"===r&&(i>a?y%p===0:v%p===0)||i<a&&v===t||"endX"===r&&(i>a?v%p===0:y%p===0)||i>a&&v===t}()&&h(g)}))}},{key:"handleTravellerMoveKeyboard",value:function(t,e){var n=this,r=this.state,i=r.scaleValues,a=r.startX,s=r.endX,o=this.state[e],u=i.indexOf(o);if(-1!==u){var l=u+t;if(!(-1===l||l>=i.length)){var c=i[l];"startX"===e&&c>=s||"endX"===e&&c<=a||this.setState(ap({},e,c),(function(){n.props.onChange(n.getIndex({startX:n.state.startX,endX:n.state.endX}))}))}}}},{key:"renderBackground",value:function(){var t=this.props,n=t.x,r=t.y,i=t.width,a=t.height,s=t.fill,o=t.stroke;return e.createElement("rect",{stroke:o,fill:s,x:n,y:r,width:i,height:a})}},{key:"renderPanorama",value:function(){var t=this.props,n=t.x,r=t.y,i=t.width,a=t.height,s=t.data,o=t.children,u=t.padding,l=e.Children.only(o);return l?e.cloneElement(l,{x:n,y:r,width:i,height:a,margin:u,compact:!0,data:s}):null}},{key:"renderTravellerLayer",value:function(t,r){var i,a,s=this,o=this.props,u=o.y,l=o.travellerWidth,c=o.height,h=o.traveller,p=o.ariaLabel,f=o.data,d=o.startIndex,m=o.endIndex,g=Math.max(t,this.props.x),y=Zh(Zh({},st(this.props,!1)),{},{x:g,y:u,width:l,height:c}),v=p||"Min value: ".concat(null===(i=f[d])||void 0===i?void 0:i.name,", Max value: ").concat(null===(a=f[m])||void 0===a?void 0:a.name);return e.createElement(Lt,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":t,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[r],onTouchStart:this.travellerDragStartHandlers[r],onKeyDown:function(t){["ArrowLeft","ArrowRight"].includes(t.key)&&(t.preventDefault(),t.stopPropagation(),s.handleTravellerMoveKeyboard("ArrowRight"===t.key?1:-1,r))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},n.renderTraveller(h,y))}},{key:"renderSlide",value:function(t,n){var r=this.props,i=r.y,a=r.height,s=r.stroke,o=r.travellerWidth,u=Math.min(t,n)+o,l=Math.max(Math.abs(n-t)-o,0);return e.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:s,fillOpacity:.2,x:u,y:i,width:l,height:a})}},{key:"renderText",value:function(){var t=this.props,n=t.startIndex,r=t.endIndex,i=t.y,a=t.height,s=t.travellerWidth,o=t.stroke,u=this.state,l=u.startX,c=u.endX,h={pointerEvents:"none",fill:o};return e.createElement(Lt,{className:"recharts-brush-texts"},e.createElement(ga,Jh({textAnchor:"end",verticalAnchor:"middle",x:Math.min(l,c)-5,y:i+a/2},h),this.getTextOfTick(n)),e.createElement(ga,Jh({textAnchor:"start",verticalAnchor:"middle",x:Math.max(l,c)+s+5,y:i+a/2},h),this.getTextOfTick(r)))}},{key:"render",value:function(){var t=this.props,n=t.data,r=t.className,i=t.children,a=t.x,s=t.y,o=t.width,u=t.height,l=t.alwaysShowText,h=this.state,p=h.startX,f=h.endX,d=h.isTextActive,m=h.isSlideMoving,g=h.isTravellerMoving,y=h.isTravellerFocused;if(!n||!n.length||!T(a)||!T(s)||!T(o)||!T(u)||o<=0||u<=0)return null;var v=c("recharts-brush",r),b=1===e.Children.count(i),x=function(t,e){if(!t)return null;var n=t.replace(/(\w)/,(function(t){return t.toUpperCase()})),r=qh.reduce((function(t,r){return Hh(Hh({},t),{},Xh({},r+n,e))}),{});return r[t]=e,r}("userSelect","none");return e.createElement(Lt,{className:v,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:x},this.renderBackground(),b&&this.renderPanorama(),this.renderSlide(p,f),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(f,"endX"),(d||m||g||y||l)&&this.renderText())}}])&&tp(r.prototype,i),a&&tp(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(e.PureComponent);function lp(t){return lp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lp(t)}function cp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function hp(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cp(Object(n),!0).forEach((function(e){pp(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pp(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=lp(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=lp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lp(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ap(up,"displayName","Brush"),ap(up,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var fp=Math.PI/180,dp=function(t){return 180*t/Math.PI},mp=function(t,e,n,r){return{x:t+Math.cos(-fp*r)*n,y:e+Math.sin(-fp*r)*n}},gp=function(t,e){var n=t.x,r=t.y,i=e.cx,a=e.cy,s=function(t,e){var n=t.x,r=t.y,i=e.x,a=e.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(r-a,2))}({x:n,y:r},{x:i,y:a});if(s<=0)return{radius:s};var o=(n-i)/s,u=Math.acos(o);return r>a&&(u=2*Math.PI-u),{radius:s,angle:dp(u),angleInRadian:u}},yp=function(t,e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),a=Math.floor(r/360);return t+360*Math.min(i,a)},vp=function(t,e){var n=t.x,r=t.y,i=gp({x:n,y:r},e),a=i.radius,s=i.angle,o=e.innerRadius,u=e.outerRadius;if(a<o||a>u)return!1;if(0===a)return!0;var l,c=function(t){var e=t.startAngle,n=t.endAngle,r=Math.floor(e/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:e-360*a,endAngle:n-360*a}}(e),h=c.startAngle,p=c.endAngle,f=s;if(h<=p){for(;f>p;)f-=360;for(;f<h;)f+=360;l=f>=h&&f<=p}else{for(;f>h;)f-=360;for(;f<p;)f+=360;l=f>=p&&f<=h}return l?hp(hp({},e),{},{radius:a,angle:yp(f,e)}):null};function bp(t){return bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bp(t)}var xp=["offset"];function wp(t){return function(t){if(Array.isArray(t))return Sp(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return Sp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sp(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Tp(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function kp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ap(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?kp(Object(n),!0).forEach((function(e){Ep(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ep(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=bp(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=bp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bp(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _p(){return _p=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_p.apply(this,arguments)}var Op=function(t,n,r){var i,a,s=t.position,o=t.viewBox,u=t.offset,l=t.className,h=o,p=h.cx,f=h.cy,d=h.innerRadius,m=h.outerRadius,g=h.startAngle,y=h.endAngle,v=h.clockWise,b=(d+m)/2,x=function(t,e){return w(e-t)*Math.min(Math.abs(e-t),360)}(g,y),S=x>=0?1:-1;"insideStart"===s?(i=g+S*u,a=v):"insideEnd"===s?(i=y-S*u,a=!v):"end"===s&&(i=y+S*u,a=v),a=x<=0?a:!a;var T=mp(p,f,b,i),k=mp(p,f,b,i+359*(a?1:-1)),A="M".concat(T.x,",").concat(T.y,"\n    A").concat(b,",").concat(b,",0,1,").concat(a?0:1,",\n    ").concat(k.x,",").concat(k.y),_=D()(t.id)?E("recharts-radial-line-"):t.id;return e.createElement("text",_p({},r,{dominantBaseline:"central",className:c("recharts-radial-bar-label",l)}),e.createElement("defs",null,e.createElement("path",{id:_,d:A})),e.createElement("textPath",{xlinkHref:"#".concat(_)},n))};function Ip(t){var n,r=t.offset,i=Ap({offset:void 0===r?5:r},Tp(t,xp)),a=i.viewBox,s=i.position,o=i.value,u=i.children,l=i.content,h=i.className,p=void 0===h?"":h,f=i.textBreakAll;if(!a||D()(o)&&D()(u)&&!(0,e.isValidElement)(l)&&!N()(l))return null;if((0,e.isValidElement)(l))return(0,e.cloneElement)(l,i);if(N()(l)){if(n=(0,e.createElement)(l,i),(0,e.isValidElement)(n))return n}else n=function(t){var e=t.value,n=t.formatter,r=D()(t.children)?e:t.children;return N()(n)?n(r):r}(i);var d=function(t){return"cx"in t&&T(t.cx)}(a),m=st(i,!0);if(d&&("insideStart"===s||"insideEnd"===s||"end"===s))return Op(i,n,m);var g=d?function(t){var e=t.viewBox,n=t.offset,r=t.position,i=e,a=i.cx,s=i.cy,o=i.innerRadius,u=i.outerRadius,l=(i.startAngle+i.endAngle)/2;if("outside"===r){var c=mp(a,s,u+n,l),h=c.x;return{x:h,y:c.y,textAnchor:h>=a?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:a,y:s,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:a,y:s,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:a,y:s,textAnchor:"middle",verticalAnchor:"end"};var p=mp(a,s,(o+u)/2,l);return{x:p.x,y:p.y,textAnchor:"middle",verticalAnchor:"middle"}}(i):function(t){var e=t.viewBox,n=t.parentViewBox,r=t.offset,i=t.position,a=e,s=a.x,o=a.y,u=a.width,l=a.height,c=l>=0?1:-1,h=c*r,p=c>0?"end":"start",f=c>0?"start":"end",d=u>=0?1:-1,m=d*r,g=d>0?"end":"start",y=d>0?"start":"end";if("top"===i)return Ap(Ap({},{x:s+u/2,y:o-c*r,textAnchor:"middle",verticalAnchor:p}),n?{height:Math.max(o-n.y,0),width:u}:{});if("bottom"===i)return Ap(Ap({},{x:s+u/2,y:o+l+h,textAnchor:"middle",verticalAnchor:f}),n?{height:Math.max(n.y+n.height-(o+l),0),width:u}:{});if("left"===i){var v={x:s-m,y:o+l/2,textAnchor:g,verticalAnchor:"middle"};return Ap(Ap({},v),n?{width:Math.max(v.x-n.x,0),height:l}:{})}if("right"===i){var b={x:s+u+m,y:o+l/2,textAnchor:y,verticalAnchor:"middle"};return Ap(Ap({},b),n?{width:Math.max(n.x+n.width-b.x,0),height:l}:{})}var x=n?{width:u,height:l}:{};return"insideLeft"===i?Ap({x:s+m,y:o+l/2,textAnchor:y,verticalAnchor:"middle"},x):"insideRight"===i?Ap({x:s+u-m,y:o+l/2,textAnchor:g,verticalAnchor:"middle"},x):"insideTop"===i?Ap({x:s+u/2,y:o+h,textAnchor:"middle",verticalAnchor:f},x):"insideBottom"===i?Ap({x:s+u/2,y:o+l-h,textAnchor:"middle",verticalAnchor:p},x):"insideTopLeft"===i?Ap({x:s+m,y:o+h,textAnchor:y,verticalAnchor:f},x):"insideTopRight"===i?Ap({x:s+u-m,y:o+h,textAnchor:g,verticalAnchor:f},x):"insideBottomLeft"===i?Ap({x:s+m,y:o+l-h,textAnchor:y,verticalAnchor:p},x):"insideBottomRight"===i?Ap({x:s+u-m,y:o+l-h,textAnchor:g,verticalAnchor:p},x):$()(i)&&(T(i.x)||S(i.x))&&(T(i.y)||S(i.y))?Ap({x:s+_(i.x,u),y:o+_(i.y,l),textAnchor:"end",verticalAnchor:"end"},x):Ap({x:s+u/2,y:o+l/2,textAnchor:"middle",verticalAnchor:"middle"},x)}(i);return e.createElement(ga,_p({className:c("recharts-label",p)},m,g,{breakAll:f}),n)}Ip.displayName="Label";var Lp=function(t){var e=t.cx,n=t.cy,r=t.angle,i=t.startAngle,a=t.endAngle,s=t.r,o=t.radius,u=t.innerRadius,l=t.outerRadius,c=t.x,h=t.y,p=t.top,f=t.left,d=t.width,m=t.height,g=t.clockWise,y=t.labelViewBox;if(y)return y;if(T(d)&&T(m)){if(T(c)&&T(h))return{x:c,y:h,width:d,height:m};if(T(p)&&T(f))return{x:p,y:f,width:d,height:m}}return T(c)&&T(h)?{x:c,y:h,width:0,height:0}:T(e)&&T(n)?{cx:e,cy:n,startAngle:i||r||0,endAngle:a||r||0,innerRadius:u||0,outerRadius:l||o||s||0,clockWise:g}:t.viewBox?t.viewBox:{}};Ip.parseViewBox=Lp,Ip.renderCallByParent=function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||!t.children&&r&&!t.label)return null;var i=t.children,a=Lp(t),s=et(i,Ip).map((function(t,r){return(0,e.cloneElement)(t,{viewBox:n||a,key:"label-".concat(r)})}));if(!r)return s;var o=function(t,n){return t?!0===t?e.createElement(Ip,{key:"label-implicit",viewBox:n}):k(t)?e.createElement(Ip,{key:"label-implicit",viewBox:n,value:t}):(0,e.isValidElement)(t)?t.type===Ip?(0,e.cloneElement)(t,{key:"label-implicit",viewBox:n}):e.createElement(Ip,{key:"label-implicit",content:t,viewBox:n}):N()(t)?e.createElement(Ip,{key:"label-implicit",content:t,viewBox:n}):$()(t)?e.createElement(Ip,_p({viewBox:n},t,{key:"label-implicit"})):null:null}(t.label,n||a);return[o].concat(wp(s))};var Pp=function(t,e){var n=t.alwaysShow,r=t.ifOverflow;return n&&(r="extendDomain"),r===e},Cp=n(1733),Dp=n.n(Cp),Mp=n(7002),Np=n.n(Mp),jp=function(t){return null};jp.displayName="Cell";var $p=n(4065),Rp=n.n($p);function zp(t){return zp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zp(t)}var Fp=["valueAccessor"],Vp=["data","dataKey","clockWise","id","textBreakAll"];function Bp(t){return function(t){if(Array.isArray(t))return Up(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return Up(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Up(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Up(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Kp(){return Kp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kp.apply(this,arguments)}function Gp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Wp(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gp(Object(n),!0).forEach((function(e){Hp(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Hp(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=zp(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=zp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zp(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xp(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var qp=function(t){return Array.isArray(t.value)?Rp()(t.value):t.value};function Yp(t){var n=t.valueAccessor,r=void 0===n?qp:n,i=Xp(t,Fp),a=i.data,s=i.dataKey,o=i.clockWise,u=i.id,l=i.textBreakAll,c=Xp(i,Vp);return a&&a.length?e.createElement(Lt,{className:"recharts-label-list"},a.map((function(t,n){var i=D()(s)?r(t,n):kh(t&&t.payload,s),a=D()(u)?{}:{id:"".concat(u,"-").concat(n)};return e.createElement(Ip,Kp({},st(t,!0),c,a,{parentViewBox:t.parentViewBox,value:i,textBreakAll:l,viewBox:Ip.parseViewBox(D()(o)?t:Wp(Wp({},t),{},{clockWise:o})),key:"label-".concat(n),index:n}))}))):null}Yp.displayName="LabelList",Yp.renderCallByParent=function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||!t.children&&r&&!t.label)return null;var i=et(t.children,Yp).map((function(t,r){return(0,e.cloneElement)(t,{data:n,key:"labelList-".concat(r)})}));return r?[function(t,n){return t?!0===t?e.createElement(Yp,{key:"labelList-implicit",data:n}):e.isValidElement(t)||N()(t)?e.createElement(Yp,{key:"labelList-implicit",data:n,content:t}):$()(t)?e.createElement(Yp,Kp({data:n},t,{key:"labelList-implicit"})):null:null}(t.label,n)].concat(Bp(i)):i};var Jp=n(2322),Qp=n.n(Jp),Zp=n(6361),tf=n.n(Zp);function ef(t){return ef="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ef(t)}function nf(){return nf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nf.apply(this,arguments)}function rf(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,s,o=[],u=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return af(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return af(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function af(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sf(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function of(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sf(Object(n),!0).forEach((function(e){uf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sf(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function uf(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=ef(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ef(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ef(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var lf=function(t,e,n,r,i){var a,s=n-r;return a="M ".concat(t,",").concat(e),a+="L ".concat(t+n,",").concat(e),a+="L ".concat(t+n-s/2,",").concat(e+i),a+="L ".concat(t+n-s/2-r,",").concat(e+i),a+="L ".concat(t,",").concat(e," Z")},cf={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},hf=function(t){var n=of(of({},cf),t),r=(0,e.useRef)(),i=rf((0,e.useState)(-1),2),a=i[0],s=i[1];(0,e.useEffect)((function(){if(r.current&&r.current.getTotalLength)try{var t=r.current.getTotalLength();t&&s(t)}catch(e){}}),[]);var o=n.x,u=n.y,l=n.upperWidth,h=n.lowerWidth,p=n.height,f=n.className,d=n.animationEasing,m=n.animationDuration,g=n.animationBegin,y=n.isUpdateAnimationActive;if(o!==+o||u!==+u||l!==+l||h!==+h||p!==+p||0===l&&0===h||0===p)return null;var v=c("recharts-trapezoid",f);return y?e.createElement(ci,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:p,x:o,y:u},to:{upperWidth:l,lowerWidth:h,height:p,x:o,y:u},duration:m,animationEasing:d,isActive:y},(function(t){var i=t.upperWidth,s=t.lowerWidth,o=t.height,u=t.x,l=t.y;return e.createElement(ci,{canBegin:a>0,from:"0px ".concat(-1===a?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,easing:d},e.createElement("path",nf({},st(n,!0),{className:v,d:lf(u,l,i,s,o),ref:r})))})):e.createElement("g",null,e.createElement("path",nf({},st(n,!0),{className:v,d:lf(o,u,l,h,p)})))};function pf(t){return pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pf(t)}function ff(){return ff=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ff.apply(this,arguments)}function df(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function mf(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?df(Object(n),!0).forEach((function(e){gf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):df(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function gf(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=pf(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=pf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pf(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var yf=function(t){var e=t.cx,n=t.cy,r=t.radius,i=t.angle,a=t.sign,s=t.isExternal,o=t.cornerRadius,u=t.cornerIsExternal,l=o*(s?1:-1)+r,c=Math.asin(o/l)/fp,h=u?i:i+a*c,p=u?i-a*c:i;return{center:mp(e,n,l,h),circleTangency:mp(e,n,r,h),lineTangency:mp(e,n,l*Math.cos(c*fp),p),theta:c}},vf=function(t){var e=t.cx,n=t.cy,r=t.innerRadius,i=t.outerRadius,a=t.startAngle,s=function(t,e){return w(e-t)*Math.min(Math.abs(e-t),359.999)}(a,t.endAngle),o=a+s,u=mp(e,n,i,a),l=mp(e,n,i,o),c="M ".concat(u.x,",").concat(u.y,"\n    A ").concat(i,",").concat(i,",0,\n    ").concat(+(Math.abs(s)>180),",").concat(+(a>o),",\n    ").concat(l.x,",").concat(l.y,"\n  ");if(r>0){var h=mp(e,n,r,a),p=mp(e,n,r,o);c+="L ".concat(p.x,",").concat(p.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(s)>180),",").concat(+(a<=o),",\n            ").concat(h.x,",").concat(h.y," Z")}else c+="L ".concat(e,",").concat(n," Z");return c},bf={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},xf=function(t){var n=mf(mf({},bf),t),r=n.cx,i=n.cy,a=n.innerRadius,s=n.outerRadius,o=n.cornerRadius,u=n.forceCornerRadius,l=n.cornerIsExternal,h=n.startAngle,p=n.endAngle,f=n.className;if(s<a||h===p)return null;var d,m=c("recharts-sector",f),g=s-a,y=_(o,g,0,!0);return d=y>0&&Math.abs(h-p)<360?function(t){var e=t.cx,n=t.cy,r=t.innerRadius,i=t.outerRadius,a=t.cornerRadius,s=t.forceCornerRadius,o=t.cornerIsExternal,u=t.startAngle,l=t.endAngle,c=w(l-u),h=yf({cx:e,cy:n,radius:i,angle:u,sign:c,cornerRadius:a,cornerIsExternal:o}),p=h.circleTangency,f=h.lineTangency,d=h.theta,m=yf({cx:e,cy:n,radius:i,angle:l,sign:-c,cornerRadius:a,cornerIsExternal:o}),g=m.circleTangency,y=m.lineTangency,v=m.theta,b=o?Math.abs(u-l):Math.abs(u-l)-d-v;if(b<0)return s?"M ".concat(f.x,",").concat(f.y,"\n        a").concat(a,",").concat(a,",0,0,1,").concat(2*a,",0\n        a").concat(a,",").concat(a,",0,0,1,").concat(2*-a,",0\n      "):vf({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:u,endAngle:l});var x="M ".concat(f.x,",").concat(f.y,"\n    A").concat(a,",").concat(a,",0,0,").concat(+(c<0),",").concat(p.x,",").concat(p.y,"\n    A").concat(i,",").concat(i,",0,").concat(+(b>180),",").concat(+(c<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(a,",").concat(a,",0,0,").concat(+(c<0),",").concat(y.x,",").concat(y.y,"\n  ");if(r>0){var S=yf({cx:e,cy:n,radius:r,angle:u,sign:c,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),T=S.circleTangency,k=S.lineTangency,A=S.theta,E=yf({cx:e,cy:n,radius:r,angle:l,sign:-c,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),_=E.circleTangency,O=E.lineTangency,I=E.theta,L=o?Math.abs(u-l):Math.abs(u-l)-A-I;if(L<0&&0===a)return"".concat(x,"L").concat(e,",").concat(n,"Z");x+="L".concat(O.x,",").concat(O.y,"\n      A").concat(a,",").concat(a,",0,0,").concat(+(c<0),",").concat(_.x,",").concat(_.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(L>180),",").concat(+(c>0),",").concat(T.x,",").concat(T.y,"\n      A").concat(a,",").concat(a,",0,0,").concat(+(c<0),",").concat(k.x,",").concat(k.y,"Z")}else x+="L".concat(e,",").concat(n,"Z");return x}({cx:r,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(y,g/2),forceCornerRadius:u,cornerIsExternal:l,startAngle:h,endAngle:p}):vf({cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:h,endAngle:p}),e.createElement("path",ff({},st(n,!0),{className:m,d:d,role:"img"}))},wf=["option","shapeType","propTransformer","activeClassName","isActive"];function Sf(t){return Sf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sf(t)}function Tf(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function kf(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Af(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?kf(Object(n),!0).forEach((function(e){Ef(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kf(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ef(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=Sf(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Sf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Sf(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _f(t,e){return Af(Af({},e),t)}function Of(t){var n=t.shapeType,r=t.elementProps;switch(n){case"rectangle":return e.createElement(wi,r);case"trapezoid":return e.createElement(hf,r);case"sector":return e.createElement(xf,r);case"symbols":if(function(t){return"symbols"===t}(n))return e.createElement(on,r);break;default:return null}}function If(t){var n,r=t.option,i=t.shapeType,a=t.propTransformer,s=void 0===a?_f:a,o=t.activeClassName,u=void 0===o?"recharts-active-shape":o,l=t.isActive,c=Tf(t,wf);if((0,e.isValidElement)(r))n=(0,e.cloneElement)(r,Af(Af({},c),function(t){return(0,e.isValidElement)(t)?t.props:t}(r)));else if(N()(r))n=r(c);else if(Qp()(r)&&!tf()(r)){var h=s(r,c);n=e.createElement(Of,{shapeType:i,elementProps:h})}else{var p=c;n=e.createElement(Of,{shapeType:i,elementProps:p})}return l?e.createElement(Lt,{className:u},n):n}function Lf(t,e){return null!=e&&"trapezoids"in t.props}function Pf(t,e){return null!=e&&"sectors"in t.props}function Cf(t,e){return null!=e&&"points"in t.props}function Df(t,e){var n,r,i=t.x===(null===e||void 0===e||null===(n=e.labelViewBox)||void 0===n?void 0:n.x)||t.x===e.x,a=t.y===(null===e||void 0===e||null===(r=e.labelViewBox)||void 0===r?void 0:r.y)||t.y===e.y;return i&&a}function Mf(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function Nf(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function jf(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=function(t,e){var n;return Lf(t,e)?n="trapezoids":Pf(t,e)?n="sectors":Cf(t,e)&&(n="points"),n}(n,e),a=function(t,e){var n,r;return Lf(t,e)?null===(n=e.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:Pf(t,e)?null===(r=e.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:Cf(t,e)?e.payload:{}}(n,e),s=r.filter((function(t,r){var s=Ec()(a,t),o=n.props[i].filter((function(t){var r=function(t,e){var n;return Lf(t,e)?n=Df:Pf(t,e)?n=Mf:Cf(t,e)&&(n=Nf),n}(n,e);return r(t,e)})),u=n.props[i].indexOf(o[o.length-1]);return s&&r===u}));return r.indexOf(s[s.length-1])}var $f=["x","y"];function Rf(t){return Rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rf(t)}function zf(){return zf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zf.apply(this,arguments)}function Ff(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Vf(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ff(Object(n),!0).forEach((function(e){Bf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ff(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Bf(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=Rf(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Rf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Rf(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uf(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Kf(t,e){var n=t.x,r=t.y,i=Uf(t,$f),a="".concat(n),s=parseInt(a,10),o="".concat(r),u=parseInt(o,10),l="".concat(e.height||i.height),c=parseInt(l,10),h="".concat(e.width||i.width),p=parseInt(h,10);return Vf(Vf(Vf(Vf(Vf({},e),i),s?{x:s}:{}),u?{y:u}:{}),{},{height:c,width:p,name:e.name,radius:e.radius})}function Gf(t){return e.createElement(If,zf({shapeType:"rectangle",propTransformer:Kf,activeClassName:"recharts-active-bar"},t))}var Wf,Hf=["value","background"];function Xf(t){return Xf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xf(t)}function qf(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Yf(){return Yf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yf.apply(this,arguments)}function Jf(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Qf(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jf(Object(n),!0).forEach((function(e){id(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jf(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Zf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ad(r.key),r)}}function td(t,e,n){return e=nd(e),function(t,e){if(e&&("object"===Xf(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ed()?Reflect.construct(e,n||[],nd(t).constructor):e.apply(t,n))}function ed(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ed=function(){return!!t})()}function nd(t){return nd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nd(t)}function rd(t,e){return rd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rd(t,e)}function id(t,e,n){return(e=ad(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ad(t){var e=function(t,e){if("object"!=Xf(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Xf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xf(e)?e:e+""}var sd=function(t){function n(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return id(t=td(this,n,[].concat(r)),"state",{isAnimationFinished:!1}),id(t,"id",E("recharts-bar-")),id(t,"handleAnimationEnd",(function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),e&&e()})),id(t,"handleAnimationStart",(function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),e&&e()})),t}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rd(t,e)}(n,t),r=n,a=[{key:"getDerivedStateFromProps",value:function(t,e){return t.animationId!==e.prevAnimationId?{prevAnimationId:t.animationId,curData:t.data,prevData:e.curData}:t.data!==e.curData?{curData:t.data}:null}}],(i=[{key:"renderRectanglesStatically",value:function(t){var n=this,r=this.props,i=r.shape,a=r.dataKey,s=r.activeIndex,o=r.activeBar,u=st(this.props,!1);return t&&t.map((function(t,r){var l=r===s,c=l?o:i,h=Qf(Qf(Qf({},u),t),{},{isActive:l,option:c,index:r,dataKey:a,onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd});return e.createElement(Lt,Yf({className:"recharts-bar-rectangle"},W(n.props,t,r),{key:"rectangle-".concat(null===t||void 0===t?void 0:t.x,"-").concat(null===t||void 0===t?void 0:t.y,"-").concat(null===t||void 0===t?void 0:t.value)}),e.createElement(Gf,h))}))}},{key:"renderRectanglesWithAnimation",value:function(){var t=this,n=this.props,r=n.data,i=n.layout,a=n.isAnimationActive,s=n.animationBegin,o=n.animationDuration,u=n.animationEasing,l=n.animationId,c=this.state.prevData;return e.createElement(ci,{begin:s,duration:o,isActive:a,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(l),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},(function(n){var a=n.t,s=r.map((function(t,e){var n=c&&c[e];if(n){var r=I(n.x,t.x),s=I(n.y,t.y),o=I(n.width,t.width),u=I(n.height,t.height);return Qf(Qf({},t),{},{x:r(a),y:s(a),width:o(a),height:u(a)})}if("horizontal"===i){var l=I(0,t.height)(a);return Qf(Qf({},t),{},{y:t.y+t.height-l,height:l})}var h=I(0,t.width)(a);return Qf(Qf({},t),{},{width:h})}));return e.createElement(Lt,null,t.renderRectanglesStatically(s))}))}},{key:"renderRectangles",value:function(){var t=this.props,e=t.data,n=t.isAnimationActive,r=this.state.prevData;return!(n&&e&&e.length)||r&&Ec()(r,e)?this.renderRectanglesStatically(e):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var t=this,n=this.props,r=n.data,i=n.dataKey,a=n.activeIndex,s=st(this.props.background,!1);return r.map((function(n,r){n.value;var o=n.background,u=qf(n,Hf);if(!o)return null;var l=Qf(Qf(Qf(Qf(Qf({},u),{},{fill:"#eee"},o),s),W(t.props,n,r)),{},{onAnimationStart:t.handleAnimationStart,onAnimationEnd:t.handleAnimationEnd,dataKey:i,index:r,className:"recharts-bar-background-rectangle"});return e.createElement(Gf,Yf({key:"background-bar-".concat(r),option:t.props.background,isActive:r===a},l))}))}},{key:"renderErrorBar",value:function(t,n){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,i=r.data,a=r.xAxis,s=r.yAxis,o=r.layout,u=et(r.children,ph);if(!u)return null;var l="vertical"===o?i[0].height/2:i[0].width/2,c=function(t,e){var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:kh(t,e)}},h={clipPath:t?"url(#clipPath-".concat(n,")"):null};return e.createElement(Lt,h,u.map((function(t){return e.cloneElement(t,{key:"error-bar-".concat(n,"-").concat(t.props.dataKey),data:i,xAxis:a,yAxis:s,layout:o,offset:l,dataPointFormatter:c})})))}},{key:"render",value:function(){var t=this.props,n=t.hide,r=t.data,i=t.className,a=t.xAxis,s=t.yAxis,o=t.left,u=t.top,l=t.width,h=t.height,p=t.isAnimationActive,f=t.background,d=t.id;if(n||!r||!r.length)return null;var m=this.state.isAnimationFinished,g=c("recharts-bar",i),y=a&&a.allowDataOverflow,v=s&&s.allowDataOverflow,b=y||v,x=D()(d)?this.id:d;return e.createElement(Lt,{className:g},y||v?e.createElement("defs",null,e.createElement("clipPath",{id:"clipPath-".concat(x)},e.createElement("rect",{x:y?o:o-l/2,y:v?u:u-h/2,width:y?l:2*l,height:v?h:2*h}))):null,e.createElement(Lt,{className:"recharts-bar-rectangles",clipPath:b?"url(#clipPath-".concat(x,")"):null},f?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(b,x),(!p||m)&&Yp.renderCallByParent(this.props,r))}}])&&Zf(r.prototype,i),a&&Zf(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(e.PureComponent);function od(t){return od="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},od(t)}function ud(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pd(r.key),r)}}function ld(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function cd(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ld(Object(n),!0).forEach((function(e){hd(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ld(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function hd(t,e,n){return(e=pd(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pd(t){var e=function(t,e){if("object"!=od(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=od(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==od(e)?e:e+""}Wf=sd,id(sd,"displayName","Bar"),id(sd,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!re.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),id(sd,"getComposedData",(function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,a=t.xAxis,s=t.yAxis,o=t.xAxisTicks,u=t.yAxisTicks,l=t.stackedData,c=t.dataStartIndex,h=t.displayedData,p=t.offset,f=function(t,e){if(!t)return null;for(var n=0,r=t.length;n<r;n++)if(t[n].item===e)return t[n].position;return null}(r,n);if(!f)return null;var d=e.layout,m=n.type.defaultProps,g=void 0!==m?Qf(Qf({},m),n.props):n.props,y=g.dataKey,v=g.children,b=g.minPointSize,x="horizontal"===d?s:a,S=l?x.scale.domain():null,k=function(t){var e=t.numericAxis,n=e.scale.domain();if("number"===e.type){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]}({numericAxis:x}),A=et(v,jp),E=h.map((function(t,e){var r,h,p,m,g,v;l?r=function(t,e){if(!e||2!==e.length||!T(e[0])||!T(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!T(t[0])||t[0]<n)&&(i[0]=n),(!T(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i}(l[c+e],S):(r=kh(t,y),Array.isArray(r)||(r=[k,r]));var x=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n,r){if("number"===typeof t)return t;var i="number"===typeof n;return i?t(n,r):(i||St(!1),e)}}(b,Wf.defaultProps.minPointSize)(r[1],e);if("horizontal"===d){var E,_=[s.scale(r[0]),s.scale(r[1])],O=_[0],I=_[1];h=$h({axis:a,ticks:o,bandSize:i,offset:f.offset,entry:t,index:e}),p=null!==(E=null!==I&&void 0!==I?I:O)&&void 0!==E?E:void 0,m=f.size;var L=O-I;if(g=Number.isNaN(L)?0:L,v={x:h,y:s.y,width:m,height:s.height},Math.abs(x)>0&&Math.abs(g)<Math.abs(x)){var P=w(g||x)*(Math.abs(x)-Math.abs(g));p-=P,g+=P}}else{var C=[a.scale(r[0]),a.scale(r[1])],D=C[0],M=C[1];if(h=D,p=$h({axis:s,ticks:u,bandSize:i,offset:f.offset,entry:t,index:e}),m=M-D,g=f.size,v={x:a.x,y:p,width:a.width,height:g},Math.abs(x)>0&&Math.abs(m)<Math.abs(x))m+=w(m||x)*(Math.abs(x)-Math.abs(m))}return Qf(Qf(Qf({},t),{},{x:h,y:p,width:m,height:g,value:l?r:r[1],payload:t,background:v},A&&A[e]&&A[e].props),{},{tooltipPayload:[Kh(n,t)],tooltipPosition:{x:h+m/2,y:p+g/2}})}));return Qf({data:E,layout:d},p)}));var fd=function(t,e){var n=t.x,r=t.y,i=e.x,a=e.y;return{x:Math.min(n,i),y:Math.min(r,a),width:Math.abs(i-n),height:Math.abs(a-r)}},dd=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scale=e}return e=t,n=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.bandAware,r=e.position;if(void 0!==t){if(r)switch(r){case"start":default:return this.scale(t);case"middle":var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i;case"end":var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}return this.scale(t)}}},{key:"isInRange",value:function(t){var e=this.range(),n=e[0],r=e[e.length-1];return n<=r?t>=n&&t<=r:t>=r&&t<=n}}],r=[{key:"create",value:function(e){return new t(e)}}],n&&ud(e.prototype,n),r&&ud(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r}();hd(dd,"EPS",1e-4);var md=function(t){var e=Object.keys(t).reduce((function(e,n){return cd(cd({},e),{},hd({},n,dd.create(t[n])))}),{});return cd(cd({},e),{},{apply:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bandAware,i=n.position;return Dp()(t,(function(t,n){return e[n].apply(t,{bandAware:r,position:i})}))},isInRange:function(t){return Np()(t,(function(t,n){return e[n].isInRange(t)}))}})};function gd(){return gd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gd.apply(this,arguments)}function yd(t){return yd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yd(t)}function vd(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function bd(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vd(Object(n),!0).forEach((function(e){Ad(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function xd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ed(r.key),r)}}function wd(t,e,n){return e=Td(e),function(t,e){if(e&&("object"===yd(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Sd()?Reflect.construct(e,n||[],Td(t).constructor):e.apply(t,n))}function Sd(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Sd=function(){return!!t})()}function Td(t){return Td=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Td(t)}function kd(t,e){return kd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},kd(t,e)}function Ad(t,e,n){return(e=Ed(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ed(t){var e=function(t,e){if("object"!=yd(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=yd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yd(e)?e:e+""}var _d=function(t){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),wd(this,n,arguments)}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kd(t,e)}(n,t),r=n,(i=[{key:"render",value:function(){var t=this.props,r=t.x,i=t.y,a=t.r,s=t.alwaysShow,o=t.clipPathId,u=k(r),l=k(i);if(P(void 0===s,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!l)return null;var h=function(t){var e=t.x,n=t.y,r=t.xAxis,i=t.yAxis,a=md({x:r.scale,y:i.scale}),s=a.apply({x:e,y:n},{bandAware:!0});return Pp(t,"discard")&&!a.isInRange(s)?null:s}(this.props);if(!h)return null;var p=h.x,f=h.y,d=this.props,m=d.shape,g=d.className,y=bd(bd({clipPath:Pp(this.props,"hidden")?"url(#".concat(o,")"):void 0},st(this.props,!0)),{},{cx:p,cy:f});return e.createElement(Lt,{className:c("recharts-reference-dot",g)},n.renderDot(m,y),Ip.renderCallByParent(this.props,{x:p-a,y:f-a,width:2*a,height:2*a}))}}])&&xd(r.prototype,i),a&&xd(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(e.Component);Ad(_d,"displayName","ReferenceDot"),Ad(_d,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),Ad(_d,"renderDot",(function(t,n){return e.isValidElement(t)?e.cloneElement(t,n):N()(t)?t(n):e.createElement(Nn,gd({},n,{cx:n.cx,cy:n.cy,className:"recharts-reference-dot-dot"}))}));var Od=n(4597),Id=n.n(Od),Ld=n(8990),Pd=n.n(Ld),Cd=n(5797),Dd=n.n(Cd)()((function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}}),(function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}));var Md=(0,e.createContext)(void 0),Nd=(0,e.createContext)(void 0),jd=(0,e.createContext)(void 0),$d=(0,e.createContext)({}),Rd=(0,e.createContext)(void 0),zd=(0,e.createContext)(0),Fd=(0,e.createContext)(0),Vd=function(t){var n=t.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,s=t.clipPathId,o=t.children,u=t.width,l=t.height,c=Dd(a);return e.createElement(Md.Provider,{value:r},e.createElement(Nd.Provider,{value:i},e.createElement($d.Provider,{value:a},e.createElement(jd.Provider,{value:c},e.createElement(Rd.Provider,{value:s},e.createElement(zd.Provider,{value:l},e.createElement(Fd.Provider,{value:u},o)))))))};var Bd=function(t){var n=(0,e.useContext)(Md);null==n&&St(!1);var r=n[t];return null==r&&St(!1),r},Ud=function(t){var n=(0,e.useContext)(Nd);null==n&&St(!1);var r=n[t];return null==r&&St(!1),r},Kd=function(){return(0,e.useContext)(Fd)},Gd=function(){return(0,e.useContext)(zd)};function Wd(t){return Wd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wd(t)}function Hd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,em(r.key),r)}}function Xd(t,e,n){return e=Yd(e),function(t,e){if(e&&("object"===Wd(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,qd()?Reflect.construct(e,n||[],Yd(t).constructor):e.apply(t,n))}function qd(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(qd=function(){return!!t})()}function Yd(t){return Yd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Yd(t)}function Jd(t,e){return Jd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Jd(t,e)}function Qd(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zd(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Qd(Object(n),!0).forEach((function(e){tm(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function tm(t,e,n){return(e=em(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function em(t){var e=function(t,e){if("object"!=Wd(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Wd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Wd(e)?e:e+""}function nm(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,s,o=[],u=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return rm(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rm(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rm(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function im(){return im=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},im.apply(this,arguments)}function am(t){var n=t.x,r=t.y,i=t.segment,a=t.xAxisId,s=t.yAxisId,o=t.shape,u=t.className,l=t.alwaysShow,h=(0,e.useContext)(Rd),p=Bd(a),f=Ud(s),d=(0,e.useContext)(jd);if(!h||!d)return null;P(void 0===l,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=function(t,e,n,r,i,a,s,o,u){var l=i.x,c=i.y,h=i.width,p=i.height;if(n){var f=u.y,d=t.y.apply(f,{position:a});if(Pp(u,"discard")&&!t.y.isInRange(d))return null;var m=[{x:l+h,y:d},{x:l,y:d}];return"left"===o?m.reverse():m}if(e){var g=u.x,y=t.x.apply(g,{position:a});if(Pp(u,"discard")&&!t.x.isInRange(y))return null;var v=[{x:y,y:c+p},{x:y,y:c}];return"top"===s?v.reverse():v}if(r){var b=u.segment.map((function(e){return t.apply(e,{position:a})}));return Pp(u,"discard")&&Id()(b,(function(e){return!t.isInRange(e)}))?null:b}return null}(md({x:p.scale,y:f.scale}),k(n),k(r),i&&2===i.length,d,t.position,p.orientation,f.orientation,t);if(!m)return null;var g=nm(m,2),y=g[0],v=y.x,b=y.y,x=g[1],w=x.x,S=x.y,T=Zd(Zd({clipPath:Pp(t,"hidden")?"url(#".concat(h,")"):void 0},st(t,!0)),{},{x1:v,y1:b,x2:w,y2:S});return e.createElement(Lt,{className:c("recharts-reference-line",u)},function(t,n){return e.isValidElement(t)?e.cloneElement(t,n):N()(t)?t(n):e.createElement("line",im({},n,{className:"recharts-reference-line-line"}))}(o,T),Ip.renderCallByParent(t,function(t){var e=t.x1,n=t.y1,r=t.x2,i=t.y2;return fd({x:e,y:n},{x:r,y:i})}({x1:v,y1:b,x2:w,y2:S})))}var sm=function(t){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),Xd(this,n,arguments)}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jd(t,e)}(n,t),r=n,(i=[{key:"render",value:function(){return e.createElement(am,this.props)}}])&&Hd(r.prototype,i),a&&Hd(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(e.Component);function om(){return om=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},om.apply(this,arguments)}function um(t){return um="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},um(t)}function lm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function cm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?lm(Object(n),!0).forEach((function(e){gm(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function hm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ym(r.key),r)}}function pm(t,e,n){return e=dm(e),function(t,e){if(e&&("object"===um(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,fm()?Reflect.construct(e,n||[],dm(t).constructor):e.apply(t,n))}function fm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(fm=function(){return!!t})()}function dm(t){return dm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dm(t)}function mm(t,e){return mm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mm(t,e)}function gm(t,e,n){return(e=ym(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ym(t){var e=function(t,e){if("object"!=um(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=um(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==um(e)?e:e+""}tm(sm,"displayName","ReferenceLine"),tm(sm,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var vm=function(t){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),pm(this,n,arguments)}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mm(t,e)}(n,t),r=n,(i=[{key:"render",value:function(){var t=this.props,r=t.x1,i=t.x2,a=t.y1,s=t.y2,o=t.className,u=t.alwaysShow,l=t.clipPathId;P(void 0===u,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=k(r),p=k(i),f=k(a),d=k(s),m=this.props.shape;if(!h&&!p&&!f&&!d&&!m)return null;var g=function(t,e,n,r,i){var a=i.x1,s=i.x2,o=i.y1,u=i.y2,l=i.xAxis,c=i.yAxis;if(!l||!c)return null;var h=md({x:l.scale,y:c.scale}),p={x:t?h.x.apply(a,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(o,{position:"start"}):h.y.rangeMin},f={x:e?h.x.apply(s,{position:"end"}):h.x.rangeMax,y:r?h.y.apply(u,{position:"end"}):h.y.rangeMax};return!Pp(i,"discard")||h.isInRange(p)&&h.isInRange(f)?fd(p,f):null}(h,p,f,d,this.props);if(!g&&!m)return null;var y=Pp(this.props,"hidden")?"url(#".concat(l,")"):void 0;return e.createElement(Lt,{className:c("recharts-reference-area",o)},n.renderRect(m,cm(cm({clipPath:y},st(this.props,!0)),g)),Ip.renderCallByParent(this.props,g))}}])&&hm(r.prototype,i),a&&hm(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(e.Component);function bm(t){return function(t){if(Array.isArray(t))return xm(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return xm(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xm(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xm(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}gm(vm,"displayName","ReferenceArea"),gm(vm,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),gm(vm,"renderRect",(function(t,n){return e.isValidElement(t)?e.cloneElement(t,n):N()(t)?t(n):e.createElement(wi,om({},n,{className:"recharts-reference-area-rect"}))}));var wm=function(t,e,n,r,i){var a=et(t,sm),s=et(t,_d),o=[].concat(bm(a),bm(s)),u=et(t,vm),l="".concat(r,"Id"),c=r[0],h=e;if(o.length&&(h=o.reduce((function(t,e){if(e.props[l]===n&&Pp(e.props,"extendDomain")&&T(e.props[c])){var r=e.props[c];return[Math.min(t[0],r),Math.max(t[1],r)]}return t}),h)),u.length){var p="".concat(c,"1"),f="".concat(c,"2");h=u.reduce((function(t,e){if(e.props[l]===n&&Pp(e.props,"extendDomain")&&T(e.props[p])&&T(e.props[f])){var r=e.props[p],i=e.props[f];return[Math.min(t[0],r,i),Math.max(t[1],r,i)]}return t}),h)}return i&&i.length&&(h=i.reduce((function(t,e){return T(e)?[Math.min(t[0],e),Math.max(t[1],e)]:t}),h)),h},Sm=n(7283),Tm=new(n.n(Sm)()),km="recharts.syncMouseEvents";function Am(t){return Am="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Am(t)}function Em(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Om(r.key),r)}}function _m(t,e,n){return(e=Om(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Om(t){var e=function(t,e){if("object"!=Am(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Am(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Am(e)?e:e+""}var Im=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),_m(this,"activeIndex",0),_m(this,"coordinateList",[]),_m(this,"layout","horizontal")},(e=[{key:"setDetails",value:function(t){var e,n=t.coordinateList,r=void 0===n?null:n,i=t.container,a=void 0===i?null:i,s=t.layout,o=void 0===s?null:s,u=t.offset,l=void 0===u?null:u,c=t.mouseHandlerCallback,h=void 0===c?null:c;this.coordinateList=null!==(e=null!==r&&void 0!==r?r:this.coordinateList)&&void 0!==e?e:[],this.container=null!==a&&void 0!==a?a:this.container,this.layout=null!==o&&void 0!==o?o:this.layout,this.offset=null!==l&&void 0!==l?l:this.offset,this.mouseHandlerCallback=null!==h&&void 0!==h?h:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(t){if(0!==this.coordinateList.length)switch(t.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(t){this.activeIndex=t}},{key:"spoofMouse",value:function(){var t,e;if("horizontal"===this.layout&&0!==this.coordinateList.length){var n=this.container.getBoundingClientRect(),r=n.x,i=n.y,a=n.height,s=this.coordinateList[this.activeIndex].coordinate,o=(null===(t=window)||void 0===t?void 0:t.scrollX)||0,u=(null===(e=window)||void 0===e?void 0:e.scrollY)||0,l=r+s+o,c=i+this.offset.top+a/2+u;this.mouseHandlerCallback({pageX:l,pageY:c})}}}])&&Em(t.prototype,e),n&&Em(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Lm(){}function Pm(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Cm(t){this._context=t}function Dm(t){this._context=t}function Mm(t){this._context=t}Cm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Pm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Pm(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Dm.prototype={areaStart:Lm,areaEnd:Lm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Pm(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Mm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Pm(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};class Nm{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}function jm(t){this._context=t}function $m(t){this._context=t}function Rm(t){return new $m(t)}function zm(t){return t<0?-1:1}function Fm(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(zm(a)+zm(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function Vm(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Bm(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function Um(t){this._context=t}function Km(t){this._context=new Gm(t)}function Gm(t){this._context=t}function Wm(t){this._context=t}function Hm(t){var e,n,r=t.length-1,i=new Array(r),a=new Array(r),s=new Array(r);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,s[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,s[e]-=n*s[e-1];for(i[r-1]=s[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function Xm(t,e){this._context=t,this._t=e}function qm(t){return t[0]}function Ym(t){return t[1]}function Jm(t,e){var n=Ue(!0),r=null,i=Rm,a=null,s=Ye(o);function o(o){var u,l,c,h=(o=mc(o)).length,p=!1;for(null==r&&(a=i(c=s())),u=0;u<=h;++u)!(u<h&&n(l=o[u],u,o))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+t(l,u,o),+e(l,u,o));if(c)return a=null,c+""||null}return t="function"===typeof t?t:void 0===t?qm:Ue(t),e="function"===typeof e?e:void 0===e?Ym:Ue(e),o.x=function(e){return arguments.length?(t="function"===typeof e?e:Ue(+e),o):t},o.y=function(t){return arguments.length?(e="function"===typeof t?t:Ue(+t),o):e},o.defined=function(t){return arguments.length?(n="function"===typeof t?t:Ue(!!t),o):n},o.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),o):i},o.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),o):r},o}function Qm(t,e,n){var r=null,i=Ue(!0),a=null,s=Rm,o=null,u=Ye(l);function l(l){var c,h,p,f,d,m=(l=mc(l)).length,g=!1,y=new Array(m),v=new Array(m);for(null==a&&(o=s(d=u())),c=0;c<=m;++c){if(!(c<m&&i(f=l[c],c,l))===g)if(g=!g)h=c,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),p=c-1;p>=h;--p)o.point(y[p],v[p]);o.lineEnd(),o.areaEnd()}g&&(y[c]=+t(f,c,l),v[c]=+e(f,c,l),o.point(r?+r(f,c,l):y[c],n?+n(f,c,l):v[c]))}if(d)return o=null,d+""||null}function c(){return Jm().defined(i).curve(s).context(a)}return t="function"===typeof t?t:void 0===t?qm:Ue(+t),e="function"===typeof e?e:Ue(void 0===e?0:+e),n="function"===typeof n?n:void 0===n?Ym:Ue(+n),l.x=function(e){return arguments.length?(t="function"===typeof e?e:Ue(+e),r=null,l):t},l.x0=function(e){return arguments.length?(t="function"===typeof e?e:Ue(+e),l):t},l.x1=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:Ue(+t),l):r},l.y=function(t){return arguments.length?(e="function"===typeof t?t:Ue(+t),n=null,l):e},l.y0=function(t){return arguments.length?(e="function"===typeof t?t:Ue(+t),l):e},l.y1=function(t){return arguments.length?(n=null==t?null:"function"===typeof t?t:Ue(+t),l):n},l.lineX0=l.lineY0=function(){return c().x(t).y(e)},l.lineY1=function(){return c().x(t).y(n)},l.lineX1=function(){return c().x(r).y(e)},l.defined=function(t){return arguments.length?(i="function"===typeof t?t:Ue(!!t),l):i},l.curve=function(t){return arguments.length?(s=t,null!=a&&(o=s(a)),l):s},l.context=function(t){return arguments.length?(null==t?a=o=null:o=s(a=t),l):a},l}function Zm(t){return Zm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zm(t)}function tg(){return tg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tg.apply(this,arguments)}function eg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ng(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?eg(Object(n),!0).forEach((function(e){rg(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eg(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function rg(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=Zm(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Zm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zm(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}jm.prototype={areaStart:Lm,areaEnd:Lm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},$m.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},Um.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Bm(this,this._t0,Vm(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Bm(this,Vm(this,n=Fm(this,t,e)),n);break;default:Bm(this,this._t0,n=Fm(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Km.prototype=Object.create(Um.prototype)).point=function(t,e){Um.prototype.point.call(this,e,t)},Gm.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}},Wm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=Hm(t),i=Hm(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},Xm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var ig={curveBasisClosed:function(t){return new Dm(t)},curveBasisOpen:function(t){return new Mm(t)},curveBasis:function(t){return new Cm(t)},curveBumpX:function(t){return new Nm(t,!0)},curveBumpY:function(t){return new Nm(t,!1)},curveLinearClosed:function(t){return new jm(t)},curveLinear:Rm,curveMonotoneX:function(t){return new Um(t)},curveMonotoneY:function(t){return new Km(t)},curveNatural:function(t){return new Wm(t)},curveStep:function(t){return new Xm(t,.5)},curveStepAfter:function(t){return new Xm(t,1)},curveStepBefore:function(t){return new Xm(t,0)}},ag=function(t){return t.x===+t.x&&t.y===+t.y},sg=function(t){return t.x},og=function(t){return t.y},ug=function(t){var e,n=t.type,r=void 0===n?"linear":n,i=t.points,a=void 0===i?[]:i,s=t.baseLine,o=t.layout,u=t.connectNulls,l=void 0!==u&&u,c=function(t,e){if(N()(t))return t;var n="curve".concat(xe()(t));return"curveMonotone"!==n&&"curveBump"!==n||!e?ig[n]||Rm:ig["".concat(n).concat("vertical"===e?"Y":"X")]}(r,o),h=l?a.filter((function(t){return ag(t)})):a;if(Array.isArray(s)){var p=l?s.filter((function(t){return ag(t)})):s,f=h.map((function(t,e){return ng(ng({},t),{},{base:p[e]})}));return(e="vertical"===o?Qm().y(og).x1(sg).x0((function(t){return t.base.x})):Qm().x(sg).y1(og).y0((function(t){return t.base.y}))).defined(ag).curve(c),e(f)}return(e="vertical"===o&&T(s)?Qm().y(og).x1(sg).x0(s):T(s)?Qm().x(sg).y1(og).y0(s):Jm().x(sg).y(og)).defined(ag).curve(c),e(h)},lg=function(t){var n=t.className,r=t.points,i=t.path,a=t.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?ug(t):i;return e.createElement("path",tg({},st(t,!1),G(t),{className:c("recharts-curve",n),d:s,ref:a}))};function cg(t){return cg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cg(t)}var hg=["x","y","top","left","width","height","className"];function pg(){return pg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pg.apply(this,arguments)}function fg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function dg(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=cg(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=cg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cg(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mg(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var gg=function(t,e,n,r,i,a){return"M".concat(t,",").concat(i,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(n)},yg=function(t){var n=t.x,r=void 0===n?0:n,i=t.y,a=void 0===i?0:i,s=t.top,o=void 0===s?0:s,u=t.left,l=void 0===u?0:u,h=t.width,p=void 0===h?0:h,f=t.height,d=void 0===f?0:f,m=t.className,g=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fg(Object(n),!0).forEach((function(e){dg(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fg(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({x:r,y:a,top:o,left:l,width:p,height:d},mg(t,hg));return T(r)&&T(a)&&T(p)&&T(d)&&T(o)&&T(l)?e.createElement("path",pg({},st(g,!0),{className:c("recharts-cross",m),d:gg(r,a,p,d,o,l)})):null};function vg(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,a=t.endAngle;return{points:[mp(e,n,r,i),mp(e,n,r,a)],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function bg(t,e,n){var r,i,a,s;if("horizontal"===t)a=r=e.x,i=n.top,s=n.top+n.height;else if("vertical"===t)s=i=e.y,r=n.left,a=n.left+n.width;else if(null!=e.cx&&null!=e.cy){if("centric"!==t)return vg(e);var o=e.cx,u=e.cy,l=e.innerRadius,c=e.outerRadius,h=e.angle,p=mp(o,u,l,h),f=mp(o,u,c,h);r=p.x,i=p.y,a=f.x,s=f.y}return[{x:r,y:i},{x:a,y:s}]}function xg(t){return xg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xg(t)}function wg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Sg(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wg(Object(n),!0).forEach((function(e){Tg(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wg(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Tg(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=xg(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=xg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xg(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kg(t){var n,r,i,a=t.element,s=t.tooltipEventType,o=t.isActive,u=t.activeCoordinate,l=t.activePayload,h=t.offset,p=t.activeTooltipIndex,f=t.tooltipAxisBandSize,d=t.layout,m=t.chartName,g=null!==(n=a.props.cursor)&&void 0!==n?n:null===(r=a.type.defaultProps)||void 0===r?void 0:r.cursor;if(!a||!g||!o||!u||"ScatterChart"!==m&&"axis"!==s)return null;var y=lg;if("ScatterChart"===m)i=u,y=yg;else if("BarChart"===m)i=function(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===t?e.x-i:n.left+.5,y:"horizontal"===t?n.top+.5:e.y-i,width:"horizontal"===t?r:n.width-1,height:"horizontal"===t?n.height-1:r}}(d,u,h,f),y=wi;else if("radial"===d){var v=vg(u),b=v.cx,x=v.cy,w=v.radius;i={cx:b,cy:x,startAngle:v.startAngle,endAngle:v.endAngle,innerRadius:w,outerRadius:w},y=xf}else i={points:bg(d,u,h)},y=lg;var S=Sg(Sg(Sg(Sg({stroke:"#ccc",pointerEvents:"none"},h),i),st(g,!1)),{},{payload:l,payloadIndex:p,className:c("recharts-tooltip-cursor",g.className)});return(0,e.isValidElement)(g)?(0,e.cloneElement)(g,S):(0,e.createElement)(y,S)}var Ag=["item"],Eg=["children","className","width","height","style","compact","title","desc"];function _g(t){return _g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_g(t)}function Og(){return Og=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Og.apply(this,arguments)}function Ig(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,s,o=[],u=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}(t,e)||$g(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lg(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Pg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bg(r.key),r)}}function Cg(t,e,n){return e=Mg(e),function(t,e){if(e&&("object"===_g(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Dg()?Reflect.construct(e,n||[],Mg(t).constructor):e.apply(t,n))}function Dg(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Dg=function(){return!!t})()}function Mg(t){return Mg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Mg(t)}function Ng(t,e){return Ng=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ng(t,e)}function jg(t){return function(t){if(Array.isArray(t))return Rg(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||$g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $g(t,e){if(t){if("string"===typeof t)return Rg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rg(t,e):void 0}}function Rg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Fg(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zg(Object(n),!0).forEach((function(e){Vg(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zg(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Vg(t,e,n){return(e=Bg(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bg(t){var e=function(t,e){if("object"!=_g(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=_g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_g(e)?e:e+""}var Ug={xAxis:["bottom","top"],yAxis:["left","right"]},Kg={width:"100%",height:"100%"},Gg={x:0,y:0};function Wg(t){return t}var Hg=function(t,e){var n=e.graphicalItems,r=e.dataStartIndex,i=e.dataEndIndex,a=(null!==n&&void 0!==n?n:[]).reduce((function(t,e){var n=e.props.data;return n&&n.length?[].concat(jg(t),jg(n)):t}),[]);return a.length>0?a:t&&t.length&&T(r)&&T(i)?t.slice(r,i+1):[]};function Xg(t){return"number"===t?[0,"auto"]:void 0}var qg=function(t,e,n,r){var i=t.graphicalItems,a=t.tooltipAxis,s=Hg(e,t);return n<0||!i||!i.length||n>=s.length?null:i.reduce((function(i,o){var u,l,c=null!==(u=o.props.data)&&void 0!==u?u:e;(c&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(c=c.slice(t.dataStartIndex,t.dataEndIndex+1)),a.dataKey&&!a.allowDuplicatedCategory)?l=L(void 0===c?s:c,a.dataKey,r):l=c&&c[n]||s[n];return l?[].concat(jg(i),[Kh(o,l)]):i}),[])},Yg=function(t,e,n,r){var i=r||{x:t.chartX,y:t.chartY},a=function(t,e){return"horizontal"===e?t.x:"vertical"===e?t.y:"centric"===e?t.angle:t.radius}(i,n),s=t.orderedTooltipTicks,o=t.tooltipAxis,u=t.tooltipTicks,l=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=-1,s=null!==(e=null===n||void 0===n?void 0:n.length)&&void 0!==e?e:0;if(s<=1)return 0;if(i&&"angleAxis"===i.axisType&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var o=i.range,u=0;u<s;u++){var l=u>0?r[u-1].coordinate:r[s-1].coordinate,c=r[u].coordinate,h=u>=s-1?r[0].coordinate:r[u+1].coordinate,p=void 0;if(w(c-l)!==w(h-c)){var f=[];if(w(h-c)===w(o[1]-o[0])){p=h;var d=c+o[1]-o[0];f[0]=Math.min(d,(d+l)/2),f[1]=Math.max(d,(d+l)/2)}else{p=l;var m=h+o[1]-o[0];f[0]=Math.min(c,(m+c)/2),f[1]=Math.max(c,(m+c)/2)}var g=[Math.min(c,(p+c)/2),Math.max(c,(p+c)/2)];if(t>g[0]&&t<=g[1]||t>=f[0]&&t<=f[1]){a=r[u].index;break}}else{var y=Math.min(l,h),v=Math.max(l,h);if(t>(y+c)/2&&t<=(v+c)/2){a=r[u].index;break}}}else for(var b=0;b<s;b++)if(0===b&&t<=(n[b].coordinate+n[b+1].coordinate)/2||b>0&&b<s-1&&t>(n[b].coordinate+n[b-1].coordinate)/2&&t<=(n[b].coordinate+n[b+1].coordinate)/2||b===s-1&&t>(n[b].coordinate+n[b-1].coordinate)/2){a=n[b].index;break}return a}(a,s,u,o);if(l>=0&&u){var c=u[l]&&u[l].value,h=qg(t,e,l,c),p=function(t,e,n,r){var i=e.find((function(t){return t&&t.index===n}));if(i){if("horizontal"===t)return{x:i.coordinate,y:r.y};if("vertical"===t)return{x:r.x,y:i.coordinate};if("centric"===t){var a=i.coordinate,s=r.radius;return Fg(Fg(Fg({},r),mp(r.cx,r.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,u=r.angle;return Fg(Fg(Fg({},r),mp(r.cx,r.cy,o,u)),{},{angle:u,radius:o})}return Gg}(n,s,l,i);return{activeTooltipIndex:l,activeLabel:c,activePayload:h,activeCoordinate:p}}return null},Jg=function(t,e){var n=e.axes,r=e.graphicalItems,i=e.axisType,a=e.axisIdKey,s=e.stackGroups,o=e.dataStartIndex,u=e.dataEndIndex,l=t.layout,c=t.children,h=t.stackOffset,p=Ih(l,i);return n.reduce((function(e,n){var f,d=void 0!==n.type.defaultProps?Fg(Fg({},n.type.defaultProps),n.props):n.props,m=d.type,g=d.dataKey,y=d.allowDataOverflow,v=d.allowDuplicatedCategory,b=d.scale,x=d.ticks,w=d.includeHidden,S=d[a];if(e[S])return e;var k,A,E,_=Hg(t.data,{graphicalItems:r.filter((function(t){var e;return(a in t.props?t.props[a]:null===(e=t.type.defaultProps)||void 0===e?void 0:e[a])===S})),dataStartIndex:o,dataEndIndex:u}),O=_.length;(function(t,e,n){if("number"===n&&!0===e&&Array.isArray(t)){var r=null===t||void 0===t?void 0:t[0],i=null===t||void 0===t?void 0:t[1];if(r&&i&&T(r)&&T(i))return!0}return!1})(d.domain,y,m)&&(k=Vh(d.domain,null,y),!p||"number"!==m&&"auto"===b||(E=Ah(_,g,"category")));var I=Xg(m);if(!k||0===k.length){var L,P=null!==(L=d.domain)&&void 0!==L?L:I;if(g){if(k=Ah(_,g,m),"category"===m&&p){var C=function(t){if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++){if(n[t[r]])return!0;n[t[r]]=!0}return!1}(k);v&&C?(A=k,k=vt()(0,O)):v||(k=Uh(P,k,n).reduce((function(t,e){return t.indexOf(e)>=0?t:[].concat(jg(t),[e])}),[]))}else if("category"===m)k=v?k.filter((function(t){return""!==t&&!D()(t)})):Uh(P,k,n).reduce((function(t,e){return t.indexOf(e)>=0||""===e||D()(e)?t:[].concat(jg(t),[e])}),[]);else if("number"===m){var M=function(t,e,n,r,i){var a=e.map((function(e){return _h(t,e,n,i,r)})).filter((function(t){return!D()(t)}));return a&&a.length?a.reduce((function(t,e){return[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}),[1/0,-1/0]):null}(_,r.filter((function(t){var e,n,r=a in t.props?t.props[a]:null===(e=t.type.defaultProps)||void 0===e?void 0:e[a],i="hide"in t.props?t.props.hide:null===(n=t.type.defaultProps)||void 0===n?void 0:n.hide;return r===S&&(w||!i)})),g,i,l);M&&(k=M)}!p||"number"!==m&&"auto"===b||(E=Ah(_,g,"category"))}else k=p?vt()(0,O):s&&s[S]&&s[S].hasStack&&"number"===m?"expand"===h?[0,1]:Rh(s[S].stackGroups,o,u):Oh(_,r.filter((function(t){var e=a in t.props?t.props[a]:t.type.defaultProps[a],n="hide"in t.props?t.props.hide:t.type.defaultProps.hide;return e===S&&(w||!n)})),m,l,!0);if("number"===m)k=wm(c,k,S,i,x),P&&(k=Vh(P,k,y));else if("category"===m&&P){var N=P;k.every((function(t){return N.indexOf(t)>=0}))&&(k=N)}}return Fg(Fg({},e),{},Vg({},S,Fg(Fg({},d),{},{axisType:i,domain:k,categoricalDomain:E,duplicateDomain:A,originalDomain:null!==(f=d.domain)&&void 0!==f?f:I,isCategorical:p,layout:l})))}),{})},Qg=function(t,e){var n=e.axisType,r=void 0===n?"xAxis":n,i=e.AxisComp,a=e.graphicalItems,s=e.stackGroups,o=e.dataStartIndex,u=e.dataEndIndex,l=t.children,c="".concat(r,"Id"),h=et(l,i),p={};return h&&h.length?p=Jg(t,{axes:h,graphicalItems:a,axisType:r,axisIdKey:c,stackGroups:s,dataStartIndex:o,dataEndIndex:u}):a&&a.length&&(p=function(t,e){var n=e.graphicalItems,r=e.Axis,i=e.axisType,a=e.axisIdKey,s=e.stackGroups,o=e.dataStartIndex,u=e.dataEndIndex,l=t.layout,c=t.children,h=Hg(t.data,{graphicalItems:n,dataStartIndex:o,dataEndIndex:u}),p=h.length,f=Ih(l,i),d=-1;return n.reduce((function(t,e){var m,g=(void 0!==e.type.defaultProps?Fg(Fg({},e.type.defaultProps),e.props):e.props)[a],y=Xg("number");return t[g]?t:(d++,f?m=vt()(0,p):s&&s[g]&&s[g].hasStack?(m=Rh(s[g].stackGroups,o,u),m=wm(c,m,g,i)):(m=Vh(y,Oh(h,n.filter((function(t){var e,n,r=a in t.props?t.props[a]:null===(e=t.type.defaultProps)||void 0===e?void 0:e[a],i="hide"in t.props?t.props.hide:null===(n=t.type.defaultProps)||void 0===n?void 0:n.hide;return r===g&&!i})),"number",l),r.defaultProps.allowDataOverflow),m=wm(c,m,g,i)),Fg(Fg({},t),{},Vg({},g,Fg(Fg({axisType:i},r.defaultProps),{},{hide:!0,orientation:v()(Ug,"".concat(i,".").concat(d%2),null),domain:m,originalDomain:y,isCategorical:f,layout:l}))))}),{})}(t,{Axis:i,graphicalItems:a,axisType:r,axisIdKey:c,stackGroups:s,dataStartIndex:o,dataEndIndex:u})),p},Zg=function(t){var e=t.children,n=t.defaultShowTooltip,r=nt(e,up),i=0,a=0;return t.data&&0!==t.data.length&&(a=t.data.length-1),r&&r.props&&(r.props.startIndex>=0&&(i=r.props.startIndex),r.props.endIndex>=0&&(a=r.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:Boolean(n)}},ty=function(t){return"horizontal"===t?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===t?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===t?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},ey=function(t,e){var n=t.props,r=(t.graphicalItems,t.xAxisMap),i=void 0===r?{}:r,a=t.yAxisMap,s=void 0===a?{}:a,o=n.width,u=n.height,l=n.children,c=n.margin||{},h=nt(l,up),p=nt(l,Dn),f=Object.keys(s).reduce((function(t,e){var n=s[e],r=n.orientation;return n.mirror||n.hide?t:Fg(Fg({},t),{},Vg({},r,t[r]+n.width))}),{left:c.left||0,right:c.right||0}),d=Object.keys(i).reduce((function(t,e){var n=i[e],r=n.orientation;return n.mirror||n.hide?t:Fg(Fg({},t),{},Vg({},r,v()(t,"".concat(r))+n.height))}),{top:c.top||0,bottom:c.bottom||0}),m=Fg(Fg({},d),f),g=m.bottom;h&&(m.bottom+=h.props.height||up.defaultProps.height),p&&e&&(m=function(t,e,n,r){var i=n.children,a=n.width,s=n.margin,o=a-(s.left||0)-(s.right||0),u=yh({children:i,legendWidth:o});if(u){var l=r||{},c=l.width,h=l.height,p=u.align,f=u.verticalAlign,d=u.layout;if(("vertical"===d||"horizontal"===d&&"middle"===f)&&"center"!==p&&T(t[p]))return Sh(Sh({},t),{},Th({},p,t[p]+(c||0)));if(("horizontal"===d||"vertical"===d&&"center"===p)&&"middle"!==f&&T(t[f]))return Sh(Sh({},t),{},Th({},f,t[f]+(h||0)))}return t}(m,0,n,e));var y=o-m.left-m.right,b=u-m.top-m.bottom;return Fg(Fg({brushBottom:g},m),{},{width:Math.max(y,0),height:Math.max(b,0)})},ny=function(t,e){return"xAxis"===e?t[e].width:"yAxis"===e?t[e].height:void 0};function ry(t,e,n){if(e<1)return[];if(1===e&&void 0===n)return t;for(var r=[],i=0;i<t.length;i+=e){if(void 0!==n&&!0!==n(t[i]))return;r.push(t[i])}return r}function iy(t,e,n){return function(t){var e=t.width,n=t.height,r=function(t){return(t%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),i=r*Math.PI/180,a=Math.atan(n/e),s=i>a&&i<Math.PI-a?n/Math.sin(i):e/Math.cos(i);return Math.abs(s)}({width:t.width+e.width,height:t.height+e.height},n)}function ay(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function sy(t){return sy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sy(t)}function oy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function uy(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oy(Object(n),!0).forEach((function(e){ly(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oy(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ly(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=sy(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=sy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sy(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cy(t,e,n){var r=t.tick,i=t.ticks,a=t.viewBox,s=t.minTickGap,o=t.orientation,u=t.interval,l=t.tickFormatter,c=t.unit,h=t.angle;if(!i||!i.length||!r)return[];if(T(u)||re.isSsr)return function(t,e){return ry(t,e+1)}(i,"number"===typeof u&&T(u)?u:0);var p=[],f="top"===o||"bottom"===o?"width":"height",d=c&&"width"===f?Vi(c,{fontSize:e,letterSpacing:n}):{width:0,height:0},m=function(t,r){var i=N()(l)?l(t.value,r):t.value;return"width"===f?iy(Vi(i,{fontSize:e,letterSpacing:n}),d,h):Vi(i,{fontSize:e,letterSpacing:n})[f]},g=i.length>=2?w(i[1].coordinate-i[0].coordinate):1,y=function(t,e,n){var r="width"===n,i=t.x,a=t.y,s=t.width,o=t.height;return 1===e?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}(a,g,f);return"equidistantPreserveStart"===u?function(t,e,n,r,i){for(var a,s=(r||[]).slice(),o=e.start,u=e.end,l=0,c=1,h=o,p=function(){var e=null===r||void 0===r?void 0:r[l];if(void 0===e)return{v:ry(r,c)};var a,s=l,p=function(){return void 0===a&&(a=n(e,s)),a},f=e.coordinate,d=0===l||ay(t,f,p,h,u);d||(l=0,h=o,c+=1),d&&(h=f+t*(p()/2+i),l+=c)};c<=s.length;)if(a=p())return a.v;return[]}(g,y,m,i,s):(p="preserveStart"===u||"preserveStartEnd"===u?function(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,u=e.start,l=e.end;if(a){var c=r[o-1],h=n(c,o-1),p=t*(c.coordinate+t*h/2-l);s[o-1]=c=uy(uy({},c),{},{tickCoord:p>0?c.coordinate-p*t:c.coordinate}),ay(t,c.tickCoord,(function(){return h}),u,l)&&(l=c.tickCoord-t*(h/2+i),s[o-1]=uy(uy({},c),{},{isShow:!0}))}for(var f=a?o-1:o,d=function(e){var r,a=s[e],o=function(){return void 0===r&&(r=n(a,e)),r};if(0===e){var c=t*(a.coordinate-t*o()/2-u);s[e]=a=uy(uy({},a),{},{tickCoord:c<0?a.coordinate-c*t:a.coordinate})}else s[e]=a=uy(uy({},a),{},{tickCoord:a.coordinate});ay(t,a.tickCoord,o,u,l)&&(u=a.tickCoord+t*(o()/2+i),s[e]=uy(uy({},a),{},{isShow:!0}))},m=0;m<f;m++)d(m);return s}(g,y,m,i,s,"preserveStartEnd"===u):function(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,o=e.start,u=e.end,l=function(e){var r,l=a[e],c=function(){return void 0===r&&(r=n(l,e)),r};if(e===s-1){var h=t*(l.coordinate+t*c()/2-u);a[e]=l=uy(uy({},l),{},{tickCoord:h>0?l.coordinate-h*t:l.coordinate})}else a[e]=l=uy(uy({},l),{},{tickCoord:l.coordinate});ay(t,l.tickCoord,c,o,u)&&(u=l.tickCoord-t*(c()/2+i),a[e]=uy(uy({},l),{},{isShow:!0}))},c=s-1;c>=0;c--)l(c);return a}(g,y,m,i,s),p.filter((function(t){return t.isShow})))}var hy=["viewBox"],py=["viewBox"],fy=["ticks"];function dy(t){return dy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dy(t)}function my(){return my=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},my.apply(this,arguments)}function gy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function yy(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gy(Object(n),!0).forEach((function(e){ky(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gy(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function vy(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function by(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ay(r.key),r)}}function xy(t,e,n){return e=Sy(e),function(t,e){if(e&&("object"===dy(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,wy()?Reflect.construct(e,n||[],Sy(t).constructor):e.apply(t,n))}function wy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(wy=function(){return!!t})()}function Sy(t){return Sy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sy(t)}function Ty(t,e){return Ty=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ty(t,e)}function ky(t,e,n){return(e=Ay(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ay(t){var e=function(t,e){if("object"!=dy(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=dy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dy(e)?e:e+""}var Ey=function(t){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=xy(this,n,[t])).state={fontSize:"",letterSpacing:""},e}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ty(t,e)}(n,t),r=n,a=[{key:"renderTickItem",value:function(t,n,r){return e.isValidElement(t)?e.cloneElement(t,n):N()(t)?t(n):e.createElement(ga,my({},n,{className:"recharts-cartesian-axis-tick-value"}),r)}}],(i=[{key:"shouldComponentUpdate",value:function(t,e){var n=t.viewBox,r=vy(t,hy),i=this.props,a=i.viewBox,s=vy(i,py);return!z(n,a)||!z(r,s)||!z(e,this.state)}},{key:"componentDidMount",value:function(){var t=this.layerReference;if(t){var e=t.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];e&&this.setState({fontSize:window.getComputedStyle(e).fontSize,letterSpacing:window.getComputedStyle(e).letterSpacing})}}},{key:"getTickLineCoord",value:function(t){var e,n,r,i,a,s,o=this.props,u=o.x,l=o.y,c=o.width,h=o.height,p=o.orientation,f=o.tickSize,d=o.mirror,m=o.tickMargin,g=d?-1:1,y=t.tickSize||f,v=T(t.tickCoord)?t.tickCoord:t.coordinate;switch(p){case"top":e=n=t.coordinate,s=(r=(i=l+ +!d*h)-g*y)-g*m,a=v;break;case"left":r=i=t.coordinate,a=(e=(n=u+ +!d*c)-g*y)-g*m,s=v;break;case"right":r=i=t.coordinate,a=(e=(n=u+ +d*c)+g*y)+g*m,s=v;break;default:e=n=t.coordinate,s=(r=(i=l+ +d*h)+g*y)+g*m,a=v}return{line:{x1:e,y1:r,x2:n,y2:i},tick:{x:a,y:s}}}},{key:"getTickTextAnchor",value:function(){var t,e=this.props,n=e.orientation,r=e.mirror;switch(n){case"left":t=r?"start":"end";break;case"right":t=r?"end":"start";break;default:t="middle"}return t}},{key:"getTickVerticalAnchor",value:function(){var t=this.props,e=t.orientation,n=t.mirror,r="end";switch(e){case"left":case"right":r="middle";break;case"top":r=n?"start":"end";break;default:r=n?"end":"start"}return r}},{key:"renderAxisLine",value:function(){var t=this.props,n=t.x,r=t.y,i=t.width,a=t.height,s=t.orientation,o=t.mirror,u=t.axisLine,l=yy(yy(yy({},st(this.props,!1)),st(u,!1)),{},{fill:"none"});if("top"===s||"bottom"===s){var h=+("top"===s&&!o||"bottom"===s&&o);l=yy(yy({},l),{},{x1:n,y1:r+h*a,x2:n+i,y2:r+h*a})}else{var p=+("left"===s&&!o||"right"===s&&o);l=yy(yy({},l),{},{x1:n+p*i,y1:r,x2:n+p*i,y2:r+a})}return e.createElement("line",my({},l,{className:c("recharts-cartesian-axis-line",v()(u,"className"))}))}},{key:"renderTicks",value:function(t,r,i){var a=this,s=this.props,o=s.tickLine,u=s.stroke,l=s.tick,h=s.tickFormatter,p=s.unit,f=cy(yy(yy({},this.props),{},{ticks:t}),r,i),d=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),g=st(this.props,!1),y=st(l,!1),b=yy(yy({},g),{},{fill:"none"},st(o,!1)),x=f.map((function(t,r){var i=a.getTickLineCoord(t),s=i.line,x=i.tick,w=yy(yy(yy(yy({textAnchor:d,verticalAnchor:m},g),{},{stroke:"none",fill:u},y),x),{},{index:r,payload:t,visibleTicksCount:f.length,tickFormatter:h});return e.createElement(Lt,my({className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},W(a.props,t,r)),o&&e.createElement("line",my({},b,s,{className:c("recharts-cartesian-axis-tick-line",v()(o,"className"))})),l&&n.renderTickItem(l,w,"".concat(N()(h)?h(t.value,r):t.value).concat(p||"")))}));return e.createElement("g",{className:"recharts-cartesian-axis-ticks"},x)}},{key:"render",value:function(){var t=this,n=this.props,r=n.axisLine,i=n.width,a=n.height,s=n.ticksGenerator,o=n.className;if(n.hide)return null;var u=this.props,l=u.ticks,h=vy(u,fy),p=l;return N()(s)&&(p=l&&l.length>0?s(this.props):s(h)),i<=0||a<=0||!p||!p.length?null:e.createElement(Lt,{className:c("recharts-cartesian-axis",o),ref:function(e){t.layerReference=e}},r&&this.renderAxisLine(),this.renderTicks(p,this.state.fontSize,this.state.letterSpacing),Ip.renderCallByParent(this.props))}}])&&by(r.prototype,i),a&&by(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(e.Component);function _y(t){return _y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_y(t)}function Oy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,My(r.key),r)}}function Iy(t,e,n){return e=Py(e),function(t,e){if(e&&("object"===_y(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ly()?Reflect.construct(e,n||[],Py(t).constructor):e.apply(t,n))}function Ly(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ly=function(){return!!t})()}function Py(t){return Py=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Py(t)}function Cy(t,e){return Cy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Cy(t,e)}function Dy(t,e,n){return(e=My(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function My(t){var e=function(t,e){if("object"!=_y(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=_y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_y(e)?e:e+""}function Ny(){return Ny=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ny.apply(this,arguments)}function jy(t){var n=t.xAxisId,r=Kd(),i=Gd(),a=Bd(n);return null==a?null:e.createElement(Ey,Ny({},a,{className:c("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(t){return Ph(t,!0)}}))}ky(Ey,"displayName","CartesianAxis"),ky(Ey,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var $y=function(t){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),Iy(this,n,arguments)}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cy(t,e)}(n,t),r=n,(i=[{key:"render",value:function(){return e.createElement(jy,this.props)}}])&&Oy(r.prototype,i),a&&Oy(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(e.Component);function Ry(t){return Ry="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ry(t)}function zy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gy(r.key),r)}}function Fy(t,e,n){return e=By(e),function(t,e){if(e&&("object"===Ry(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Vy()?Reflect.construct(e,n||[],By(t).constructor):e.apply(t,n))}function Vy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Vy=function(){return!!t})()}function By(t){return By=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},By(t)}function Uy(t,e){return Uy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Uy(t,e)}function Ky(t,e,n){return(e=Gy(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gy(t){var e=function(t,e){if("object"!=Ry(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ry(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ry(e)?e:e+""}function Wy(){return Wy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wy.apply(this,arguments)}Dy($y,"displayName","XAxis"),Dy($y,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});var Hy=function(t){var n=t.yAxisId,r=Kd(),i=Gd(),a=Ud(n);return null==a?null:e.createElement(Ey,Wy({},a,{className:c("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(t){return Ph(t,!0)}}))},Xy=function(t){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),Fy(this,n,arguments)}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uy(t,e)}(n,t),r=n,(i=[{key:"render",value:function(){return e.createElement(Hy,this.props)}}])&&zy(r.prototype,i),a&&zy(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(e.Component);Ky(Xy,"displayName","YAxis"),Ky(Xy,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var qy=function(t){var n=t.chartName,r=t.GraphicalChild,i=t.defaultTooltipEventType,a=void 0===i?"axis":i,s=t.validateTooltipEventTypes,o=void 0===s?["axis"]:s,u=t.axisComponents,l=t.legendContent,h=t.formatAxisMap,f=t.defaultProps,d=function(t,e){var n=e.graphicalItems,r=e.stackGroups,i=e.offset,a=e.updateId,s=e.dataStartIndex,o=e.dataEndIndex,l=t.barSize,c=t.layout,h=t.barGap,p=t.barCategoryGap,f=t.maxBarSize,d=ty(c),m=d.numericAxisName,g=d.cateAxisName,y=function(t){return!(!t||!t.length)&&t.some((function(t){var e=J(t&&t.type);return e&&e.indexOf("Bar")>=0}))}(n),v=[];return n.forEach((function(n,d){var b=Hg(t.data,{graphicalItems:[n],dataStartIndex:s,dataEndIndex:o}),x=void 0!==n.type.defaultProps?Fg(Fg({},n.type.defaultProps),n.props):n.props,w=x.dataKey,S=x.maxBarSize,T=x["".concat(m,"Id")],A=x["".concat(g,"Id")],E=u.reduce((function(t,n){var r=e["".concat(n.axisType,"Map")],i=x["".concat(n.axisType,"Id")];r&&r[i]||"zAxis"===n.axisType||St(!1);var a=r[i];return Fg(Fg({},t),{},Vg(Vg({},n.axisType,a),"".concat(n.axisType,"Ticks"),Ph(a)))}),{}),O=E[g],I=E["".concat(g,"Ticks")],L=r&&r[T]&&r[T].hasStack&&function(t,e){var n,r=(null!==(n=t.type)&&void 0!==n&&n.defaultProps?Sh(Sh({},t.type.defaultProps),t.props):t.props).stackId;if(k(r)){var i=e[r];if(i){var a=i.items.indexOf(t);return a>=0?i.stackedData[a]:null}}return null}(n,r[T].stackGroups),P=J(n.type).indexOf("Bar")>=0,C=Bh(O,I),M=[],N=y&&function(t){var e=t.barSize,n=t.totalSize,r=t.stackGroups,i=void 0===r?{}:r;if(!i)return{};for(var a={},s=Object.keys(i),o=0,u=s.length;o<u;o++)for(var l=i[s[o]].stackGroups,c=Object.keys(l),h=0,p=c.length;h<p;h++){var f=l[c[h]],d=f.items,m=f.cateAxisId,g=d.filter((function(t){return J(t.type).indexOf("Bar")>=0}));if(g&&g.length){var y=g[0].type.defaultProps,v=void 0!==y?Sh(Sh({},y),g[0].props):g[0].props,b=v.barSize,x=v[m];a[x]||(a[x]=[]);var w=D()(b)?e:b;a[x].push({item:g[0],stackList:g.slice(1),barSize:D()(w)?void 0:_(w,n,0)})}}return a}({barSize:l,stackGroups:r,totalSize:ny(E,g)});if(P){var j,$,R=D()(S)?f:S,z=null!==(j=null!==($=Bh(O,I,!0))&&void 0!==$?$:R)&&void 0!==j?j:0;M=function(t){var e=t.barGap,n=t.barCategoryGap,r=t.bandSize,i=t.sizeList,a=void 0===i?[]:i,s=t.maxBarSize,o=a.length;if(o<1)return null;var u,l=_(e,r,0,!0),c=[];if(a[0].barSize===+a[0].barSize){var h=!1,p=r/o,f=a.reduce((function(t,e){return t+e.barSize||0}),0);(f+=(o-1)*l)>=r&&(f-=(o-1)*l,l=0),f>=r&&p>0&&(h=!0,f=o*(p*=.9));var d={offset:((r-f)/2|0)-l,size:0};u=a.reduce((function(t,e){var n={item:e.item,position:{offset:d.offset+d.size+l,size:h?p:e.barSize}},r=[].concat(bh(t),[n]);return d=r[r.length-1].position,e.stackList&&e.stackList.length&&e.stackList.forEach((function(t){r.push({item:t,position:d})})),r}),c)}else{var m=_(n,r,0,!0);r-2*m-(o-1)*l<=0&&(l=0);var g=(r-2*m-(o-1)*l)/o;g>1&&(g>>=0);var y=s===+s?Math.min(g,s):g;u=a.reduce((function(t,e,n){var r=[].concat(bh(t),[{item:e.item,position:{offset:m+(g+l)*n+(g-y)/2,size:y}}]);return e.stackList&&e.stackList.length&&e.stackList.forEach((function(t){r.push({item:t,position:r[r.length-1].position})})),r}),c)}return u}({barGap:h,barCategoryGap:p,bandSize:z!==C?z:C,sizeList:N[A],maxBarSize:R}),z!==C&&(M=M.map((function(t){return Fg(Fg({},t),{},{position:Fg(Fg({},t.position),{},{offset:t.position.offset-z/2})})})))}var F,V,B=n&&n.type&&n.type.getComposedData;B&&v.push({props:Fg(Fg({},B(Fg(Fg({},E),{},{displayedData:b,props:t,dataKey:w,item:n,bandSize:C,barPosition:M,offset:i,stackedData:L,layout:c,dataStartIndex:s,dataEndIndex:o}))),{},Vg(Vg(Vg({key:n.key||"item-".concat(d)},m,E[m]),g,E[g]),"animationId",a)),childIndex:(F=n,V=t.children,tt(V).indexOf(F)),item:n})})),v},m=function(t,e){var i=t.props,a=t.dataStartIndex,s=t.dataEndIndex,o=t.updateId;if(!rt({props:i}))return null;var l=i.children,c=i.layout,p=i.stackOffset,f=i.data,m=i.reverseStackOrder,g=ty(c),y=g.numericAxisName,v=g.cateAxisName,b=et(l,r),x=function(t,e,n,r,i,a){if(!t)return null;var s=(a?e.reverse():e).reduce((function(t,e){var i,a=null!==(i=e.type)&&void 0!==i&&i.defaultProps?Sh(Sh({},e.type.defaultProps),e.props):e.props,s=a.stackId;if(a.hide)return t;var o=a[n],u=t[o]||{hasStack:!1,stackGroups:{}};if(k(s)){var l=u.stackGroups[s]||{numericAxisId:n,cateAxisId:r,items:[]};l.items.push(e),u.hasStack=!0,u.stackGroups[s]=l}else u.stackGroups[E("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[e]};return Sh(Sh({},t),{},Th({},o,u))}),{});return Object.keys(s).reduce((function(e,a){var o=s[a];return o.hasStack&&(o.stackGroups=Object.keys(o.stackGroups).reduce((function(e,a){var s=o.stackGroups[a];return Sh(Sh({},e),{},Th({},a,{numericAxisId:n,cateAxisId:r,items:s.items,stackedData:jh(t,s.items,i)}))}),{})),Sh(Sh({},e),{},Th({},a,o))}),{})}(f,b,"".concat(y,"Id"),"".concat(v,"Id"),p,m),w=u.reduce((function(t,e){var n="".concat(e.axisType,"Map");return Fg(Fg({},t),{},Vg({},n,Qg(i,Fg(Fg({},e),{},{graphicalItems:b,stackGroups:e.axisType===y&&x,dataStartIndex:a,dataEndIndex:s}))))}),{}),S=ey(Fg(Fg({},w),{},{props:i,graphicalItems:b}),null===e||void 0===e?void 0:e.legendBBox);Object.keys(w).forEach((function(t){w[t]=h(i,w[t],S,t.replace("Map",""),n)}));var T=function(t){var e=O(t),n=Ph(e,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:xt()(n,(function(t){return t.coordinate})),tooltipAxis:e,tooltipAxisBandSize:Bh(e,n)}}(w["".concat(v,"Map")]),A=d(i,Fg(Fg({},w),{},{dataStartIndex:a,dataEndIndex:s,updateId:o,graphicalItems:b,stackGroups:x,offset:S}));return Fg(Fg({formattedGraphicalItems:A,graphicalItems:b,offset:S,stackGroups:x},T),w)},g=function(t){function r(t){var i,a,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),Vg(s=Cg(this,r,[t]),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Vg(s,"accessibilityManager",new Im),Vg(s,"handleLegendBBoxUpdate",(function(t){if(t){var e=s.state,n=e.dataStartIndex,r=e.dataEndIndex,i=e.updateId;s.setState(Fg({legendBBox:t},m({props:s.props,dataStartIndex:n,dataEndIndex:r,updateId:i},Fg(Fg({},s.state),{},{legendBBox:t}))))}})),Vg(s,"handleReceiveSyncEvent",(function(t,e,n){if(s.props.syncId===t){if(n===s.eventEmitterSymbol&&"function"!==typeof s.props.syncMethod)return;s.applySyncEvent(e)}})),Vg(s,"handleBrushChange",(function(t){var e=t.startIndex,n=t.endIndex;if(e!==s.state.dataStartIndex||n!==s.state.dataEndIndex){var r=s.state.updateId;s.setState((function(){return Fg({dataStartIndex:e,dataEndIndex:n},m({props:s.props,dataStartIndex:e,dataEndIndex:n,updateId:r},s.state))})),s.triggerSyncEvent({dataStartIndex:e,dataEndIndex:n})}})),Vg(s,"handleMouseEnter",(function(t){var e=s.getMouseInfo(t);if(e){var n=Fg(Fg({},e),{},{isTooltipActive:!0});s.setState(n),s.triggerSyncEvent(n);var r=s.props.onMouseEnter;N()(r)&&r(n,t)}})),Vg(s,"triggeredAfterMouseMove",(function(t){var e=s.getMouseInfo(t),n=e?Fg(Fg({},e),{},{isTooltipActive:!0}):{isTooltipActive:!1};s.setState(n),s.triggerSyncEvent(n);var r=s.props.onMouseMove;N()(r)&&r(n,t)})),Vg(s,"handleItemMouseEnter",(function(t){s.setState((function(){return{isTooltipActive:!0,activeItem:t,activePayload:t.tooltipPayload,activeCoordinate:t.tooltipPosition||{x:t.cx,y:t.cy}}}))})),Vg(s,"handleItemMouseLeave",(function(){s.setState((function(){return{isTooltipActive:!1}}))})),Vg(s,"handleMouseMove",(function(t){t.persist(),s.throttleTriggeredAfterMouseMove(t)})),Vg(s,"handleMouseLeave",(function(t){s.throttleTriggeredAfterMouseMove.cancel();var e={isTooltipActive:!1};s.setState(e),s.triggerSyncEvent(e);var n=s.props.onMouseLeave;N()(n)&&n(e,t)})),Vg(s,"handleOuterEvent",(function(t){var e,n=function(t){var e=t&&t.type;return e&&Y[e]?Y[e]:null}(t),r=v()(s.props,"".concat(n));n&&N()(r)&&r(null!==(e=/.*touch.*/i.test(n)?s.getMouseInfo(t.changedTouches[0]):s.getMouseInfo(t))&&void 0!==e?e:{},t)})),Vg(s,"handleClick",(function(t){var e=s.getMouseInfo(t);if(e){var n=Fg(Fg({},e),{},{isTooltipActive:!0});s.setState(n),s.triggerSyncEvent(n);var r=s.props.onClick;N()(r)&&r(n,t)}})),Vg(s,"handleMouseDown",(function(t){var e=s.props.onMouseDown;N()(e)&&e(s.getMouseInfo(t),t)})),Vg(s,"handleMouseUp",(function(t){var e=s.props.onMouseUp;N()(e)&&e(s.getMouseInfo(t),t)})),Vg(s,"handleTouchMove",(function(t){null!=t.changedTouches&&t.changedTouches.length>0&&s.throttleTriggeredAfterMouseMove(t.changedTouches[0])})),Vg(s,"handleTouchStart",(function(t){null!=t.changedTouches&&t.changedTouches.length>0&&s.handleMouseDown(t.changedTouches[0])})),Vg(s,"handleTouchEnd",(function(t){null!=t.changedTouches&&t.changedTouches.length>0&&s.handleMouseUp(t.changedTouches[0])})),Vg(s,"handleDoubleClick",(function(t){var e=s.props.onDoubleClick;N()(e)&&e(s.getMouseInfo(t),t)})),Vg(s,"handleContextMenu",(function(t){var e=s.props.onContextMenu;N()(e)&&e(s.getMouseInfo(t),t)})),Vg(s,"triggerSyncEvent",(function(t){void 0!==s.props.syncId&&Tm.emit(km,s.props.syncId,t,s.eventEmitterSymbol)})),Vg(s,"applySyncEvent",(function(t){var e=s.props,n=e.layout,r=e.syncMethod,i=s.state.updateId,a=t.dataStartIndex,o=t.dataEndIndex;if(void 0!==t.dataStartIndex||void 0!==t.dataEndIndex)s.setState(Fg({dataStartIndex:a,dataEndIndex:o},m({props:s.props,dataStartIndex:a,dataEndIndex:o,updateId:i},s.state)));else if(void 0!==t.activeTooltipIndex){var u=t.chartX,l=t.chartY,c=t.activeTooltipIndex,h=s.state,p=h.offset,f=h.tooltipTicks;if(!p)return;if("function"===typeof r)c=r(f,t);else if("value"===r){c=-1;for(var d=0;d<f.length;d++)if(f[d].value===t.activeLabel){c=d;break}}var g=Fg(Fg({},p),{},{x:p.left,y:p.top}),y=Math.min(u,g.x+g.width),v=Math.min(l,g.y+g.height),b=f[c]&&f[c].value,x=qg(s.state,s.props.data,c),w=f[c]?{x:"horizontal"===n?f[c].coordinate:y,y:"horizontal"===n?v:f[c].coordinate}:Gg;s.setState(Fg(Fg({},t),{},{activeLabel:b,activeCoordinate:w,activePayload:x,activeTooltipIndex:c}))}else s.setState(t)})),Vg(s,"renderCursor",(function(t){var r,i=s.state,a=i.isTooltipActive,o=i.activeCoordinate,u=i.activePayload,l=i.offset,c=i.activeTooltipIndex,h=i.tooltipAxisBandSize,p=s.getTooltipEventType(),f=null!==(r=t.props.active)&&void 0!==r?r:a,d=s.props.layout,m=t.key||"_recharts-cursor";return e.createElement(kg,{key:m,activeCoordinate:o,activePayload:u,activeTooltipIndex:c,chartName:n,element:t,isActive:f,layout:d,offset:l,tooltipAxisBandSize:h,tooltipEventType:p})})),Vg(s,"renderPolarAxis",(function(t,n,r){var i=v()(t,"type.axisType"),a=v()(s.state,"".concat(i,"Map")),o=t.type.defaultProps,u=void 0!==o?Fg(Fg({},o),t.props):t.props,l=a&&a[u["".concat(i,"Id")]];return(0,e.cloneElement)(t,Fg(Fg({},l),{},{className:c(i,l.className),key:t.key||"".concat(n,"-").concat(r),ticks:Ph(l,!0)}))})),Vg(s,"renderPolarGrid",(function(t){var n=t.props,r=n.radialLines,i=n.polarAngles,a=n.polarRadius,o=s.state,u=o.radiusAxisMap,l=o.angleAxisMap,c=O(u),h=O(l),p=h.cx,f=h.cy,d=h.innerRadius,m=h.outerRadius;return(0,e.cloneElement)(t,{polarAngles:Array.isArray(i)?i:Ph(h,!0).map((function(t){return t.coordinate})),polarRadius:Array.isArray(a)?a:Ph(c,!0).map((function(t){return t.coordinate})),cx:p,cy:f,innerRadius:d,outerRadius:m,key:t.key||"polar-grid",radialLines:r})})),Vg(s,"renderLegend",(function(){var t=s.state.formattedGraphicalItems,n=s.props,r=n.children,i=n.width,a=n.height,o=s.props.margin||{},u=i-(o.left||0)-(o.right||0),c=yh({children:r,formattedGraphicalItems:t,legendWidth:u,legendContent:l});if(!c)return null;var h=c.item,p=Lg(c,Ag);return(0,e.cloneElement)(h,Fg(Fg({},p),{},{chartWidth:i,chartHeight:a,margin:o,onBBoxUpdate:s.handleLegendBBoxUpdate}))})),Vg(s,"renderTooltip",(function(){var t,n=s.props,r=n.children,i=n.accessibilityLayer,a=nt(r,ve);if(!a)return null;var o=s.state,u=o.isTooltipActive,l=o.activeCoordinate,c=o.activePayload,h=o.activeLabel,p=o.offset,f=null!==(t=a.props.active)&&void 0!==t?t:u;return(0,e.cloneElement)(a,{viewBox:Fg(Fg({},p),{},{x:p.left,y:p.top}),active:f,label:h,payload:f?c:[],coordinate:l,accessibilityLayer:i})})),Vg(s,"renderBrush",(function(t){var n=s.props,r=n.margin,i=n.data,a=s.state,o=a.offset,u=a.dataStartIndex,l=a.dataEndIndex,c=a.updateId;return(0,e.cloneElement)(t,{key:t.key||"_recharts-brush",onChange:Dh(s.handleBrushChange,t.props.onChange),data:i,x:T(t.props.x)?t.props.x:o.left,y:T(t.props.y)?t.props.y:o.top+o.height+o.brushBottom-(r.bottom||0),width:T(t.props.width)?t.props.width:o.width,startIndex:u,endIndex:l,updateId:"brush-".concat(c)})})),Vg(s,"renderReferenceElement",(function(t,n,r){if(!t)return null;var i=s.clipPathId,a=s.state,o=a.xAxisMap,u=a.yAxisMap,l=a.offset,c=t.type.defaultProps||{},h=t.props,p=h.xAxisId,f=void 0===p?c.xAxisId:p,d=h.yAxisId,m=void 0===d?c.yAxisId:d;return(0,e.cloneElement)(t,{key:t.key||"".concat(n,"-").concat(r),xAxis:o[f],yAxis:u[m],viewBox:{x:l.left,y:l.top,width:l.width,height:l.height},clipPathId:i})})),Vg(s,"renderActivePoints",(function(t){var e=t.item,n=t.activePoint,i=t.basePoint,a=t.childIndex,s=t.isRange,o=[],u=e.props.key,l=void 0!==e.item.type.defaultProps?Fg(Fg({},e.item.type.defaultProps),e.item.props):e.item.props,c=l.activeDot,h=Fg(Fg({index:a,dataKey:l.dataKey,cx:n.x,cy:n.y,r:4,fill:Eh(e.item),strokeWidth:2,stroke:"#fff",payload:n.payload,value:n.value},st(c,!1)),G(c));return o.push(r.renderActiveDot(c,h,"".concat(u,"-activePoint-").concat(a))),i?o.push(r.renderActiveDot(c,Fg(Fg({},h),{},{cx:i.x,cy:i.y}),"".concat(u,"-basePoint-").concat(a))):s&&o.push(null),o})),Vg(s,"renderGraphicChild",(function(t,n,r){var i=s.filterFormatItem(t,n,r);if(!i)return null;var a=s.getTooltipEventType(),o=s.state,u=o.isTooltipActive,l=o.tooltipAxis,c=o.activeTooltipIndex,h=o.activeLabel,p=nt(s.props.children,ve),f=i.props,d=f.points,m=f.isRange,g=f.baseLine,y=void 0!==i.item.type.defaultProps?Fg(Fg({},i.item.type.defaultProps),i.item.props):i.item.props,v=y.activeDot,b=y.hide,x=y.activeBar,w=y.activeShape,S=Boolean(!b&&u&&p&&(v||x||w)),T={};"axis"!==a&&p&&"click"===p.props.trigger?T={onClick:Dh(s.handleItemMouseEnter,t.props.onClick)}:"axis"!==a&&(T={onMouseLeave:Dh(s.handleItemMouseLeave,t.props.onMouseLeave),onMouseEnter:Dh(s.handleItemMouseEnter,t.props.onMouseEnter)});var k=(0,e.cloneElement)(t,Fg(Fg({},i.props),T));if(S){if(!(c>=0)){var A,E=(null!==(A=s.getItemByXY(s.state.activeCoordinate))&&void 0!==A?A:{graphicalItem:k}).graphicalItem,_=E.item,O=void 0===_?t:_,I=E.childIndex,P=Fg(Fg(Fg({},i.props),T),{},{activeIndex:I});return[(0,e.cloneElement)(O,P),null,null]}var C,M;if(l.dataKey&&!l.allowDuplicatedCategory){var N="function"===typeof l.dataKey?function(t){return"function"===typeof l.dataKey?l.dataKey(t.payload):null}:"payload.".concat(l.dataKey.toString());C=L(d,N,h),M=m&&g&&L(g,N,h)}else C=null===d||void 0===d?void 0:d[c],M=m&&g&&g[c];if(w||x){var j=void 0!==t.props.activeIndex?t.props.activeIndex:c;return[(0,e.cloneElement)(t,Fg(Fg(Fg({},i.props),T),{},{activeIndex:j})),null,null]}if(!D()(C))return[k].concat(jg(s.renderActivePoints({item:i,activePoint:C,basePoint:M,childIndex:c,isRange:m})))}return m?[k,null,null]:[k,null]})),Vg(s,"renderCustomized",(function(t,n,r){return(0,e.cloneElement)(t,Fg(Fg({key:"recharts-customized-".concat(r)},s.props),s.state))})),Vg(s,"renderMap",{CartesianGrid:{handler:Wg,once:!0},ReferenceArea:{handler:s.renderReferenceElement},ReferenceLine:{handler:Wg},ReferenceDot:{handler:s.renderReferenceElement},XAxis:{handler:Wg},YAxis:{handler:Wg},Brush:{handler:s.renderBrush,once:!0},Bar:{handler:s.renderGraphicChild},Line:{handler:s.renderGraphicChild},Area:{handler:s.renderGraphicChild},Radar:{handler:s.renderGraphicChild},RadialBar:{handler:s.renderGraphicChild},Scatter:{handler:s.renderGraphicChild},Pie:{handler:s.renderGraphicChild},Funnel:{handler:s.renderGraphicChild},Tooltip:{handler:s.renderCursor,once:!0},PolarGrid:{handler:s.renderPolarGrid,once:!0},PolarAngleAxis:{handler:s.renderPolarAxis},PolarRadiusAxis:{handler:s.renderPolarAxis},Customized:{handler:s.renderCustomized}}),s.clipPathId="".concat(null!==(i=t.id)&&void 0!==i?i:E("recharts"),"-clip"),s.throttleTriggeredAfterMouseMove=p()(s.triggeredAfterMouseMove,null!==(a=t.throttleDelay)&&void 0!==a?a:1e3/60),s.state={},s}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ng(t,e)}(r,t),i=r,s=[{key:"componentDidMount",value:function(){var t,e;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(t=this.props.margin.left)&&void 0!==t?t:0,top:null!==(e=this.props.margin.top)&&void 0!==e?e:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var t=this.props,e=t.children,n=t.data,r=t.height,i=t.layout,a=nt(e,ve);if(a){var s=a.props.defaultIndex;if(!("number"!==typeof s||s<0||s>this.state.tooltipTicks.length-1)){var o=this.state.tooltipTicks[s]&&this.state.tooltipTicks[s].value,u=qg(this.state,n,s,o),l=this.state.tooltipTicks[s].coordinate,c=(this.state.offset.top+r)/2,h="horizontal"===i?{x:l,y:c}:{y:l,x:c},p=this.state.formattedGraphicalItems.find((function(t){return"Scatter"===t.item.type.name}));p&&(h=Fg(Fg({},h),p.props.points[s].tooltipPosition),u=p.props.points[s].tooltipPayload);var f={activeTooltipIndex:s,isTooltipActive:!0,activeLabel:o,activePayload:u,activeCoordinate:h};this.setState(f),this.renderCursor(a),this.accessibilityManager.setIndex(s)}}}},{key:"getSnapshotBeforeUpdate",value:function(t,e){return this.props.accessibilityLayer?(this.state.tooltipTicks!==e.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==t.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==t.margin&&this.accessibilityManager.setDetails({offset:{left:null!==(n=this.props.margin.left)&&void 0!==n?n:0,top:null!==(r=this.props.margin.top)&&void 0!==r?r:0}}),null):null;var n,r}},{key:"componentDidUpdate",value:function(t){ot([nt(t.children,ve)],[nt(this.props.children,ve)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var t=nt(this.props.children,ve);if(t&&"boolean"===typeof t.props.shared){var e=t.props.shared?"axis":"item";return o.indexOf(e)>=0?e:a}return a}},{key:"getMouseInfo",value:function(t){if(!this.container)return null;var e,n=this.container,r=n.getBoundingClientRect(),i={top:(e=r).top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft},a={chartX:Math.round(t.pageX-i.left),chartY:Math.round(t.pageY-i.top)},s=r.width/n.offsetWidth||1,o=this.inRange(a.chartX,a.chartY,s);if(!o)return null;var u=this.state,l=u.xAxisMap,c=u.yAxisMap;if("axis"!==this.getTooltipEventType()&&l&&c){var h=O(l).scale,p=O(c).scale,f=h&&h.invert?h.invert(a.chartX):null,d=p&&p.invert?p.invert(a.chartY):null;return Fg(Fg({},a),{},{xValue:f,yValue:d})}var m=Yg(this.state,this.props.data,this.props.layout,o);return m?Fg(Fg({},a),m):null}},{key:"inRange",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.props.layout,i=t/n,a=e/n;if("horizontal"===r||"vertical"===r){var s=this.state.offset;return i>=s.left&&i<=s.left+s.width&&a>=s.top&&a<=s.top+s.height?{x:i,y:a}:null}var o=this.state,u=o.angleAxisMap,l=o.radiusAxisMap;if(u&&l){var c=O(u);return vp({x:i,y:a},c)}return null}},{key:"parseEventsOfWrapper",value:function(){var t=this.props.children,e=this.getTooltipEventType(),n=nt(t,ve),r={};return n&&"axis"===e&&(r="click"===n.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu}),Fg(Fg({},G(this.props,this.handleOuterEvent)),r)}},{key:"addListener",value:function(){Tm.on(km,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Tm.removeListener(km,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(t,e,n){for(var r=this.state.formattedGraphicalItems,i=0,a=r.length;i<a;i++){var s=r[i];if(s.item===t||s.props.key===t.key||e===J(s.item.type)&&n===s.childIndex)return s}return null}},{key:"renderClipPath",value:function(){var t=this.clipPathId,n=this.state.offset,r=n.left,i=n.top,a=n.height,s=n.width;return e.createElement("defs",null,e.createElement("clipPath",{id:t},e.createElement("rect",{x:r,y:i,height:a,width:s})))}},{key:"getXScales",value:function(){var t=this.state.xAxisMap;return t?Object.entries(t).reduce((function(t,e){var n=Ig(e,2),r=n[0],i=n[1];return Fg(Fg({},t),{},Vg({},r,i.scale))}),{}):null}},{key:"getYScales",value:function(){var t=this.state.yAxisMap;return t?Object.entries(t).reduce((function(t,e){var n=Ig(e,2),r=n[0],i=n[1];return Fg(Fg({},t),{},Vg({},r,i.scale))}),{}):null}},{key:"getXScaleByAxisId",value:function(t){var e;return null===(e=this.state.xAxisMap)||void 0===e||null===(e=e[t])||void 0===e?void 0:e.scale}},{key:"getYScaleByAxisId",value:function(t){var e;return null===(e=this.state.yAxisMap)||void 0===e||null===(e=e[t])||void 0===e?void 0:e.scale}},{key:"getItemByXY",value:function(t){var e=this.state,n=e.formattedGraphicalItems,r=e.activeItem;if(n&&n.length)for(var i=0,a=n.length;i<a;i++){var s=n[i],o=s.props,u=s.item,l=void 0!==u.type.defaultProps?Fg(Fg({},u.type.defaultProps),u.props):u.props,c=J(u.type);if("Bar"===c){var h=(o.data||[]).find((function(e){return bi(t,e)}));if(h)return{graphicalItem:s,payload:h}}else if("RadialBar"===c){var p=(o.data||[]).find((function(e){return vp(t,e)}));if(p)return{graphicalItem:s,payload:p}}else if(Lf(s,r)||Pf(s,r)||Cf(s,r)){var f=jf({graphicalItem:s,activeTooltipItem:r,itemData:l.data}),d=void 0===l.activeIndex?f:l.activeIndex;return{graphicalItem:Fg(Fg({},s),{},{childIndex:d}),payload:Cf(s,r)?l.data[f]:s.props.data[f]}}}return null}},{key:"render",value:function(){var t=this;if(!rt(this))return null;var n,r,i=this.props,a=i.children,s=i.className,o=i.width,u=i.height,l=i.style,h=i.compact,p=i.title,f=i.desc,d=Lg(i,Eg),m=st(d,!1);if(h)return e.createElement(Vd,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},e.createElement(Et,Og({},m,{width:o,height:u,title:p,desc:f}),this.renderClipPath(),lt(a,this.renderMap)));this.props.accessibilityLayer&&(m.tabIndex=null!==(n=this.props.tabIndex)&&void 0!==n?n:0,m.role=null!==(r=this.props.role)&&void 0!==r?r:"application",m.onKeyDown=function(e){t.accessibilityManager.keyboardEvent(e)},m.onFocus=function(){t.accessibilityManager.focus()});var g=this.parseEventsOfWrapper();return e.createElement(Vd,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},e.createElement("div",Og({className:c("recharts-wrapper",s),style:Fg({position:"relative",cursor:"default",width:o,height:u},l)},g,{ref:function(e){t.container=e}}),e.createElement(Et,Og({},m,{width:o,height:u,title:p,desc:f,style:Kg}),this.renderClipPath(),lt(a,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}],s&&Pg(i.prototype,s),u&&Pg(i,u),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,s,u}(e.Component);Vg(g,"displayName",n),Vg(g,"defaultProps",Fg({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Vg(g,"getDerivedStateFromProps",(function(t,e){var n=t.dataKey,r=t.data,i=t.children,a=t.width,s=t.height,o=t.layout,u=t.stackOffset,l=t.margin,c=e.dataStartIndex,h=e.dataEndIndex;if(void 0===e.updateId){var p=Zg(t);return Fg(Fg(Fg({},p),{},{updateId:0},m(Fg(Fg({props:t},p),{},{updateId:0}),e)),{},{prevDataKey:n,prevData:r,prevWidth:a,prevHeight:s,prevLayout:o,prevStackOffset:u,prevMargin:l,prevChildren:i})}if(n!==e.prevDataKey||r!==e.prevData||a!==e.prevWidth||s!==e.prevHeight||o!==e.prevLayout||u!==e.prevStackOffset||!z(l,e.prevMargin)){var f=Zg(t),d={chartX:e.chartX,chartY:e.chartY,isTooltipActive:e.isTooltipActive},g=Fg(Fg({},Yg(e,r,o)),{},{updateId:e.updateId+1}),y=Fg(Fg(Fg({},f),d),g);return Fg(Fg(Fg({},y),m(Fg({props:t},y),e)),{},{prevDataKey:n,prevData:r,prevWidth:a,prevHeight:s,prevLayout:o,prevStackOffset:u,prevMargin:l,prevChildren:i})}if(!ot(i,e.prevChildren)){var v,b,x,w,S=nt(i,up),T=S&&null!==(v=null===(b=S.props)||void 0===b?void 0:b.startIndex)&&void 0!==v?v:c,k=S&&null!==(x=null===(w=S.props)||void 0===w?void 0:w.endIndex)&&void 0!==x?x:h,A=T!==c||k!==h,E=!D()(r)&&!A?e.updateId:e.updateId+1;return Fg(Fg({updateId:E},m(Fg(Fg({props:t},e),{},{updateId:E,dataStartIndex:T,dataEndIndex:k}),e)),{},{prevChildren:i,dataStartIndex:T,dataEndIndex:k})}return null})),Vg(g,"renderActiveDot",(function(t,n,r){var i;return i=(0,e.isValidElement)(t)?(0,e.cloneElement)(t,n):N()(t)?t(n):e.createElement(Nn,n),e.createElement(Lt,{className:"recharts-active-dot",key:r},i)}));var y=(0,e.forwardRef)((function(t,n){return e.createElement(g,Og({},t,{ref:n}))}));return y.displayName=g.displayName,y}({chartName:"BarChart",GraphicalChild:sd,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:$y},{axisType:"yAxis",AxisComp:Xy}],formatAxisMap:function(e,n,r,i,a){var s=e.width,o=e.height,u=e.layout,l=e.children,c=Object.keys(n),h={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},p=!!nt(l,sd);return c.reduce((function(s,o){var l,c,f,m,g,y=n[o],v=y.orientation,b=y.domain,x=y.padding,w=void 0===x?{}:x,S=y.mirror,T=y.reversed,k="".concat(v).concat(S?"Mirror":"");if("number"===y.type&&("gap"===y.padding||"no-gap"===y.padding)){var A=b[1]-b[0],E=1/0,O=y.categoricalDomain.sort();if(O.forEach((function(t,e){e>0&&(E=Math.min((t||0)-(O[e-1]||0),E))})),Number.isFinite(E)){var I=E/A,L="vertical"===y.layout?r.height:r.width;if("gap"===y.padding&&(l=I*L/2),"no-gap"===y.padding){var P=_(e.barCategoryGap,I*L),C=I*L/2;l=C-P-(C-P)/L*P}}}c="xAxis"===i?[r.left+(w.left||0)+(l||0),r.left+r.width-(w.right||0)-(l||0)]:"yAxis"===i?"horizontal"===u?[r.top+r.height-(w.bottom||0),r.top+(w.top||0)]:[r.top+(w.top||0)+(l||0),r.top+r.height-(w.bottom||0)-(l||0)]:y.range,T&&(c=[c[1],c[0]]);var D=function(e,n,r){var i=e.scale,a=e.type,s=e.layout,o=e.axisType;if("auto"===i)return"radial"===s&&"radiusAxis"===o?{scale:Pi(),realScaleType:"band"}:"radial"===s&&"angleAxis"===o?{scale:eo(),realScaleType:"linear"}:"category"===a&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Di(),realScaleType:"point"}:"category"===a?{scale:Pi(),realScaleType:"band"}:{scale:eo(),realScaleType:"linear"};if(d()(i)){var u="scale".concat(xe()(i));return{scale:(t[u]||Di)(),realScaleType:t[u]?u:"point"}}return N()(i)?{scale:i}:{scale:Di(),realScaleType:"point"}}(y,a,p),M=D.scale,j=D.realScaleType;M.domain(b).range(c),function(t){var e=t.domain();if(e&&!(e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-Mh,a=Math.max(r[0],r[1])+Mh,s=t(e[0]),o=t(e[n-1]);(s<i||s>a||o<i||o>a)&&t.domain([e[0],e[n-1]])}}(M);var $=function(t,e){var n=e.realScaleType,r=e.type,i=e.tickCount,a=e.originalDomain,s=e.allowDecimals,o=n||e.scale;if("auto"!==o&&"linear"!==o)return null;if(i&&"number"===r&&a&&("auto"===a[0]||"auto"===a[1])){var u=t.domain();if(!u.length)return null;var l=Jc(u,i,s);return t.domain([Sc()(l),xc()(l)]),{niceTicks:l}}if(i&&"number"===r){var c=t.domain();return{niceTicks:Qc(c,i,s)}}return null}(M,cd(cd({},y),{},{realScaleType:j}));"xAxis"===i?(g="top"===v&&!S||"bottom"===v&&S,f=r.left,m=h[k]-g*y.height):"yAxis"===i&&(g="left"===v&&!S||"right"===v&&S,f=h[k]-g*y.width,m=r.top);var R=cd(cd(cd({},y),$),{},{realScaleType:j,x:f,y:m,scale:M,width:"xAxis"===i?r.width:y.width,height:"yAxis"===i?r.height:y.height});return R.bandSize=Bh(R,$),y.hide||"xAxis"!==i?y.hide||(h[k]+=(g?-1:1)*R.width):h[k]+=(g?-1:1)*R.height,cd(cd({},s),{},hd({},o,R))}),{})}}),Yy=["x1","y1","x2","y2","key"],Jy=["offset"];function Qy(t){return Qy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qy(t)}function Zy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function tv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zy(Object(n),!0).forEach((function(e){ev(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zy(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ev(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=Qy(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Qy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qy(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nv(){return nv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nv.apply(this,arguments)}function rv(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var iv=function(t){var n=t.fill;if(!n||"none"===n)return null;var r=t.fillOpacity,i=t.x,a=t.y,s=t.width,o=t.height,u=t.ry;return e.createElement("rect",{x:i,y:a,ry:u,width:s,height:o,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function av(t,n){var r;if(e.isValidElement(t))r=e.cloneElement(t,n);else if(N()(t))r=t(n);else{var i=n.x1,a=n.y1,s=n.x2,o=n.y2,u=n.key,l=rv(n,Yy),c=st(l,!1),h=(c.offset,rv(c,Jy));r=e.createElement("line",nv({},h,{x1:i,y1:a,x2:s,y2:o,fill:"none",key:u}))}return r}function sv(t){var n=t.x,r=t.width,i=t.horizontal,a=void 0===i||i,s=t.horizontalPoints;if(!a||!s||!s.length)return null;var o=s.map((function(e,i){var s=tv(tv({},t),{},{x1:n,y1:e,x2:n+r,y2:e,key:"line-".concat(i),index:i});return av(a,s)}));return e.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function ov(t){var n=t.y,r=t.height,i=t.vertical,a=void 0===i||i,s=t.verticalPoints;if(!a||!s||!s.length)return null;var o=s.map((function(e,i){var s=tv(tv({},t),{},{x1:e,y1:n,x2:e,y2:n+r,key:"line-".concat(i),index:i});return av(a,s)}));return e.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function uv(t){var n=t.horizontalFill,r=t.fillOpacity,i=t.x,a=t.y,s=t.width,o=t.height,u=t.horizontalPoints,l=t.horizontal;if(!(void 0===l||l)||!n||!n.length)return null;var c=u.map((function(t){return Math.round(t+a-a)})).sort((function(t,e){return t-e}));a!==c[0]&&c.unshift(0);var h=c.map((function(t,u){var l=!c[u+1]?a+o-t:c[u+1]-t;if(l<=0)return null;var h=u%n.length;return e.createElement("rect",{key:"react-".concat(u),y:t,x:i,height:l,width:s,stroke:"none",fill:n[h],fillOpacity:r,className:"recharts-cartesian-grid-bg"})}));return e.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function lv(t){var n=t.vertical,r=void 0===n||n,i=t.verticalFill,a=t.fillOpacity,s=t.x,o=t.y,u=t.width,l=t.height,c=t.verticalPoints;if(!r||!i||!i.length)return null;var h=c.map((function(t){return Math.round(t+s-s)})).sort((function(t,e){return t-e}));s!==h[0]&&h.unshift(0);var p=h.map((function(t,n){var r=!h[n+1]?s+u-t:h[n+1]-t;if(r<=0)return null;var c=n%i.length;return e.createElement("rect",{key:"react-".concat(n),x:t,y:o,width:r,height:l,stroke:"none",fill:i[c],fillOpacity:a,className:"recharts-cartesian-grid-bg"})}));return e.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var cv=function(t,e){var n=t.xAxis,r=t.width,i=t.height,a=t.offset;return Lh(cy(tv(tv(tv({},Ey.defaultProps),n),{},{ticks:Ph(n,!0),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,e)},hv=function(t,e){var n=t.yAxis,r=t.width,i=t.height,a=t.offset;return Lh(cy(tv(tv(tv({},Ey.defaultProps),n),{},{ticks:Ph(n,!0),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,e)},pv={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function fv(t){var n,r,i,a,s,o,u=Kd(),l=Gd(),c=(0,e.useContext)($d),h=tv(tv({},t),{},{stroke:null!==(n=t.stroke)&&void 0!==n?n:pv.stroke,fill:null!==(r=t.fill)&&void 0!==r?r:pv.fill,horizontal:null!==(i=t.horizontal)&&void 0!==i?i:pv.horizontal,horizontalFill:null!==(a=t.horizontalFill)&&void 0!==a?a:pv.horizontalFill,vertical:null!==(s=t.vertical)&&void 0!==s?s:pv.vertical,verticalFill:null!==(o=t.verticalFill)&&void 0!==o?o:pv.verticalFill,x:T(t.x)?t.x:c.left,y:T(t.y)?t.y:c.top,width:T(t.width)?t.width:c.width,height:T(t.height)?t.height:c.height}),p=h.x,f=h.y,d=h.width,m=h.height,g=h.syncWithTicks,y=h.horizontalValues,v=h.verticalValues,b=function(){var t=(0,e.useContext)(Md);return O(t)}(),x=function(){var t=(0,e.useContext)(Nd);return Pd()(t,(function(t){return Np()(t.domain,Number.isFinite)}))||O(t)}();if(!T(d)||d<=0||!T(m)||m<=0||!T(p)||p!==+p||!T(f)||f!==+f)return null;var w=h.verticalCoordinatesGenerator||cv,S=h.horizontalCoordinatesGenerator||hv,k=h.horizontalPoints,A=h.verticalPoints;if((!k||!k.length)&&N()(S)){var E=y&&y.length,_=S({yAxis:x?tv(tv({},x),{},{ticks:E?y:x.ticks}):void 0,width:u,height:l,offset:c},!!E||g);P(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Qy(_),"]")),Array.isArray(_)&&(k=_)}if((!A||!A.length)&&N()(w)){var I=v&&v.length,L=w({xAxis:b?tv(tv({},b),{},{ticks:I?v:b.ticks}):void 0,width:u,height:l,offset:c},!!I||g);P(Array.isArray(L),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Qy(L),"]")),Array.isArray(L)&&(A=L)}return e.createElement("g",{className:"recharts-cartesian-grid"},e.createElement(iv,{fill:h.fill,fillOpacity:h.fillOpacity,x:h.x,y:h.y,width:h.width,height:h.height,ry:h.ry}),e.createElement(sv,nv({},h,{offset:c,horizontalPoints:k,xAxis:b,yAxis:x})),e.createElement(ov,nv({},h,{offset:c,verticalPoints:A,xAxis:b,yAxis:x})),e.createElement(uv,nv({},h,{horizontalPoints:k})),e.createElement(lv,nv({},h,{verticalPoints:A})))}fv.displayName="CartesianGrid";const dv=[{id:1,area:1200,bedrooms:2,bathrooms:1,location:"Suburban",age:15,actualPrice:355e3,predictedPrice:362e3},{id:2,area:1800,bedrooms:3,bathrooms:2,location:"Downtown",age:8,actualPrice:59e4,predictedPrice:582e3},{id:3,area:1500,bedrooms:3,bathrooms:2,location:"Suburban",age:12,actualPrice:425e3,predictedPrice:44e4},{id:4,area:900,bedrooms:1,bathrooms:1,location:"Rural",age:20,actualPrice:22e4,predictedPrice:215e3},{id:5,area:2200,bedrooms:4,bathrooms:3,location:"Downtown",age:5,actualPrice:74e4,predictedPrice:725e3}],mv=t=>`$${t.toLocaleString()}`,gv=t=>{let{newPrediction:e}=t;const n=(()=>{const t=(e?dv.filter((t=>[Math.abs(t.area-e.input.area)<500,Math.abs(t.bedrooms-e.input.bedrooms)<=1,Math.abs(t.bathrooms-e.input.bathrooms)<=1,t.location===e.input.location,Math.abs(t.age-e.input.age)<10].filter(Boolean).length>=3)):dv).slice(0,5);return e?[...t,{id:"current",area:e.input.area,bedrooms:e.input.bedrooms,bathrooms:e.input.bathrooms,location:e.input.location,age:e.input.age,predictedPrice:e.price,isCurrent:!0}]:t})(),r=(()=>{const t=n.filter((t=>t.actualPrice));if(0===t.length)return 0;return t.reduce(((t,e)=>t+e.actualPrice),0)/t.length})();return(0,a.jsxs)("div",{className:"prediction-chart-container",children:[(0,a.jsx)("h2",{children:"Price Comparison"}),n.length>0?(0,a.jsxs)("div",{className:"chart-wrapper",children:[(0,a.jsx)(gt,{width:"100%",height:300,children:(0,a.jsxs)(qy,{data:n,margin:{top:20,right:30,left:20,bottom:70},children:[(0,a.jsx)(fv,{strokeDasharray:"3 3"}),(0,a.jsx)($y,{dataKey:"id",angle:-45,textAnchor:"end",height:70,tick:{fontSize:12},tickFormatter:t=>"current"===t?"Your Property":`Property ${t}`}),(0,a.jsx)(Xy,{tickFormatter:mv,domain:[0,"auto"]}),(0,a.jsx)(ve,{formatter:t=>mv(t),labelFormatter:t=>"current"===t?"Your Property":`Property ${t}`}),(0,a.jsx)(Dn,{}),(0,a.jsx)(sd,{name:"Actual Price",dataKey:"actualPrice",fill:"#8884d8"}),(0,a.jsx)(sd,{name:"Predicted Price",dataKey:"predictedPrice",fill:"#82ca9d",stroke:e&&"#4CAF50",strokeWidth:t=>t.isCurrent?2:0})]})}),(0,a.jsxs)("div",{className:"chart-insights",children:[(0,a.jsxs)("div",{className:"insight-item",children:[(0,a.jsx)("span",{className:"insight-label",children:"Your Predicted Price:"}),(0,a.jsx)("span",{className:"insight-value",children:e?mv(e.price):"N/A"})]}),r>0&&(0,a.jsxs)("div",{className:"insight-item",children:[(0,a.jsx)("span",{className:"insight-label",children:"Average Market Price (Similar Properties):"}),(0,a.jsx)("span",{className:"insight-value",children:mv(r)})]})]})]}):(0,a.jsx)("div",{className:"no-data-message",children:(0,a.jsx)("p",{children:"No similar properties found for comparison."})}),(0,a.jsxs)("div",{className:"feature-importance",children:[(0,a.jsx)("h3",{children:"What Affects Property Value?"}),(0,a.jsxs)("div",{className:"feature-bars",children:[(0,a.jsxs)("div",{className:"feature-bar-item",children:[(0,a.jsx)("div",{className:"feature-label",children:"Location"}),(0,a.jsxs)("div",{className:"feature-bar-container",children:[(0,a.jsx)("div",{className:"feature-bar",style:{width:"90%"}}),(0,a.jsx)("span",{className:"feature-percent",children:"90%"})]})]}),(0,a.jsxs)("div",{className:"feature-bar-item",children:[(0,a.jsx)("div",{className:"feature-label",children:"Area"}),(0,a.jsxs)("div",{className:"feature-bar-container",children:[(0,a.jsx)("div",{className:"feature-bar",style:{width:"85%"}}),(0,a.jsx)("span",{className:"feature-percent",children:"85%"})]})]}),(0,a.jsxs)("div",{className:"feature-bar-item",children:[(0,a.jsx)("div",{className:"feature-label",children:"Bathrooms"}),(0,a.jsxs)("div",{className:"feature-bar-container",children:[(0,a.jsx)("div",{className:"feature-bar",style:{width:"60%"}}),(0,a.jsx)("span",{className:"feature-percent",children:"60%"})]})]}),(0,a.jsxs)("div",{className:"feature-bar-item",children:[(0,a.jsx)("div",{className:"feature-label",children:"Bedrooms"}),(0,a.jsxs)("div",{className:"feature-bar-container",children:[(0,a.jsx)("div",{className:"feature-bar",style:{width:"55%"}}),(0,a.jsx)("span",{className:"feature-percent",children:"55%"})]})]}),(0,a.jsxs)("div",{className:"feature-bar-item",children:[(0,a.jsx)("div",{className:"feature-label",children:"Property Age"}),(0,a.jsxs)("div",{className:"feature-bar-container",children:[(0,a.jsx)("div",{className:"feature-bar",style:{width:"40%"}}),(0,a.jsx)("span",{className:"feature-percent",children:"40%"})]})]})]})]})]})};var yv=n(2790);const vv="models",bv="predictions",xv="settings";const wv=new class{constructor(){this.db=null,this.initDB()}async initDB(){return new Promise(((t,e)=>{if(this.db)return void t(this.db);const n=indexedDB.open("RealEstatePredictorDB",2);n.onerror=t=>{console.error("IndexedDB error:",t.target.error),e("Error opening database")},n.onsuccess=e=>{this.db=e.target.result,console.log("IndexedDB connected successfully"),t(this.db)},n.onupgradeneeded=t=>{const e=t.target.result;if(!e.objectStoreNames.contains(vv)){const t=e.createObjectStore(vv,{keyPath:"metadata.id"});t.createIndex("name","metadata.name",{unique:!1}),t.createIndex("timestamp","metadata.timestamp",{unique:!1}),console.log("Model store created")}if(!e.objectStoreNames.contains(bv)){const t=e.createObjectStore(bv,{keyPath:"id",autoIncrement:!0});t.createIndex("timestamp","timestamp",{unique:!1}),t.createIndex("modelId","modelId",{unique:!1}),console.log("Prediction store created")}if(!e.objectStoreNames.contains(xv)){e.createObjectStore(xv,{keyPath:"id"});console.log("Settings store created")}}}))}async saveModel(t){try{return await this.initDB(),new Promise(((e,n)=>{const r=this.db.transaction([vv],"readwrite").objectStore(vv).put(t);r.onsuccess=()=>{console.log("Model saved to IndexedDB"),e(!0)},r.onerror=t=>{console.error("Error saving model:",t.target.error),n("Failed to save model")}}))}catch(e){throw console.error("IndexedDB save error:",e),e}}async loadModel(t){try{return await this.initDB(),new Promise(((e,n)=>{const r=this.db.transaction([vv],"readonly").objectStore(vv).get(t);r.onsuccess=t=>{t.target.result?(console.log("Model loaded from IndexedDB"),e(t.target.result)):(console.log("Model not found in IndexedDB"),e(null))},r.onerror=t=>{console.error("Error loading model:",t.target.error),n("Failed to load model")}}))}catch(e){throw console.error("IndexedDB load error:",e),e}}async deleteModel(t){try{return await this.initDB(),new Promise(((e,n)=>{const r=this.db.transaction([vv],"readwrite").objectStore(vv).delete(t);r.onsuccess=()=>{console.log("Model deleted from IndexedDB"),e(!0)},r.onerror=t=>{console.error("Error deleting model:",t.target.error),n("Failed to delete model")}}))}catch(e){throw console.error("IndexedDB delete error:",e),e}}async listModels(){try{return await this.initDB(),new Promise(((t,e)=>{const n=this.db.transaction([vv],"readonly").objectStore(vv).index("timestamp").openCursor(null,"prev"),r=[];n.onsuccess=e=>{const n=e.target.result;n?(r.push(n.value),n.continue()):t(r)},n.onerror=t=>{console.error("Error listing models:",t.target.error),e("Failed to list models")}}))}catch(t){throw console.error("IndexedDB list error:",t),t}}async savePrediction(t){try{await this.initDB();const e={...t,timestamp:Date.now()};return new Promise(((t,n)=>{const r=this.db.transaction([bv],"readwrite").objectStore(bv).add(e);r.onsuccess=e=>{console.log("Prediction saved to IndexedDB"),t(e.target.result)},r.onerror=t=>{console.error("Error saving prediction:",t.target.error),n("Failed to save prediction")}}))}catch(e){throw console.error("IndexedDB save prediction error:",e),e}}async getPredictionHistory(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;try{return await this.initDB(),new Promise(((e,n)=>{const r=this.db.transaction([bv],"readonly").objectStore(bv).index("timestamp").openCursor(null,"prev"),i=[];r.onsuccess=n=>{const r=n.target.result;r&&i.length<t?(i.push(r.value),r.continue()):e(i)},r.onerror=t=>{console.error("Error getting predictions:",t.target.error),n("Failed to get predictions")}}))}catch(e){throw console.error("IndexedDB get predictions error:",e),e}}async getPredictionsForModel(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{return await this.initDB(),new Promise(((n,r)=>{const i=this.db.transaction([bv],"readonly").objectStore(bv).index("modelId").openCursor(IDBKeyRange.only(t)),a=[];i.onsuccess=t=>{const r=t.target.result;r&&a.length<e?(a.push(r.value),r.continue()):n(a)},i.onerror=t=>{console.error("Error getting model predictions:",t.target.error),r("Failed to get model predictions")}}))}catch(n){throw console.error("IndexedDB get model predictions error:",n),n}}async saveSetting(t,e){try{return await this.initDB(),new Promise(((n,r)=>{const i=this.db.transaction([xv],"readwrite").objectStore(xv),a={id:t,value:e},s=i.put(a);s.onsuccess=()=>{console.log("Setting saved to IndexedDB"),n(!0)},s.onerror=t=>{console.error("Error saving setting:",t.target.error),r("Failed to save setting")}}))}catch(n){throw console.error("IndexedDB save setting error:",n),n}}async getSetting(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return await this.initDB(),new Promise(((n,r)=>{const i=this.db.transaction([xv],"readonly").objectStore(xv).get(t);i.onsuccess=t=>{const r=t.target.result;n(r?r.value:e)},i.onerror=t=>{console.error("Error getting setting:",t.target.error),r("Failed to get setting")}}))}catch(n){return console.error("IndexedDB get setting error:",n),e}}},Sv="default-model";const Tv=new class{constructor(){this.model=new yv.NeuralNetwork({hiddenLayers:[10,10],activation:"sigmoid"}),this.isInitialized=!1,this.retryAttempts=0,this.maxRetries=3,this.modelMetadata={id:Sv,name:"Default Model",timestamp:Date.now(),features:["area","bedrooms","bathrooms","location","age"]}}async initialize(){try{console.log("Initializing model...");const t=await this.loadModelFromStorage(Sv);if(t)return console.log("Model loaded from storage"),this.isInitialized=!0,this.modelMetadata=t.metadata,!0;console.log("No saved model found, training new model");const e=await fetch("/api/training-data"),n=e.headers.get("content-type");if(!n||!n.includes("application/json"))throw new Error("Server returned non-JSON response. API endpoint may be misconfigured.");if(!e.ok)throw new Error(`HTTP error: ${e.status} ${e.statusText}`);const r=await e.json();if(!Array.isArray(r)||0===r.length)throw new Error("Training data is empty or invalid");const i=this.prepareTrainingData(r);return await this.trainModel(i),await this.saveModelToStorage(),this.isInitialized=!0,this.retryAttempts=0,console.log("Model initialized successfully"),!0}catch(t){if(console.error("Error initializing model:",t),this.retryAttempts<this.maxRetries)return this.retryAttempts++,console.log(`Retrying initialization (${this.retryAttempts}/${this.maxRetries})...`),await this.initialize();throw this.isInitialized=!1,t}}serializeModel(){try{return{modelData:this.model.toJSON(),metadata:this.modelMetadata}}catch(t){throw console.error("Error serializing model:",t),t}}deserializeModel(t){try{if(!t||!t.modelData)throw new Error("Invalid serialized model data");return this.model=new yv.NeuralNetwork,this.model.fromJSON(t.modelData),t.metadata&&(this.modelMetadata=t.metadata),!0}catch(e){throw console.error("Error deserializing model:",e),e}}async saveModelToStorage(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{if(!this.isInitialized)throw new Error("Cannot save uninitialized model");if(t){const e=`model-${Date.now()}`;this.modelMetadata={...this.modelMetadata,id:e,name:t,timestamp:Date.now()}}const e=this.serializeModel();return await wv.saveModel(e),this.modelMetadata.id}catch(e){throw console.error("Error saving model:",e),e}}async loadModelFromStorage(t){try{const e=await wv.loadModel(t);if(!e)return null;return this.deserializeModel(e)?e:null}catch(e){return console.error("Error loading model:",e),null}}prepareTrainingData(t){return t.map((t=>({input:this.normalizeInput({area:t.area,bedrooms:t.bedrooms,bathrooms:t.bathrooms,location:this.encodeLocation(t.location),age:t.age}),output:{price:this.normalizeOutput(t.price)}})))}async trainModel(t){try{console.log("Training model with",t.length,"samples"),await this.model.trainAsync(t,{iterations:1e3,errorThresh:.01,log:!0,logPeriod:100}),console.log("Model training complete")}catch(e){throw console.error("Error training model:",e),new Error("Failed to train model: "+e.message)}}normalizeInput(t){return{area:t.area/6e3,bedrooms:t.bedrooms/5,bathrooms:t.bathrooms/5,location:t.location,age:t.age/100}}encodeLocation(t){return{urban:.1,suburban:.5,rural:.9}[t.toLowerCase()]||.5}normalizeOutput(t){return t/1e6}denormalizeOutput(t){return 1e6*t}predict(t){if(!this.isInitialized)throw new Error("Model not initialized");try{const e=this.normalizeInput({area:t.area,bedrooms:t.bedrooms,bathrooms:t.bathrooms,location:this.encodeLocation(t.location),age:t.age}),n=this.model.run(e),r=this.denormalizeOutput(n.price);return{price:Math.round(r),input:t}}catch(e){throw console.error("Prediction error:",e),new Error("Failed to make prediction: "+e.message)}}isReady(){return this.isInitialized}async saveAsNewModel(t){return await this.saveModelToStorage(t)}},kv=t=>{try{const{area:e,bedrooms:n,bathrooms:r,location:i,age:a}=t;let s=e*({Downtown:350,Suburban:250,Rural:150}[i]||250);const o=1+.05*n,u=1+.07*r,l=Math.max(.5,1-.005*a),c=Math.round(s*o*u*l);return console.log("Using fallback prediction method"),{price:c,input:t,isFallback:!0}}catch(e){throw console.error("Error in fallback prediction:",e),new Error("Unable to calculate property value")}},Av=async t=>{try{await wv.savePrediction(t)}catch(e){console.error("Failed to store prediction history:",e)}},Ev=()=>Tv.modelMetadata,_v=t=>{var n,r;let{onModelChange:i}=t;const[s,o]=(0,e.useState)([]),[u,l]=(0,e.useState)(!1),[c,h]=(0,e.useState)(null),[p,f]=(0,e.useState)(""),[d,m]=(0,e.useState)(!1),[g,y]=(0,e.useState)(null),v=async()=>{l(!0);try{const t=await(async()=>{try{return await wv.listModels()}catch(t){return console.error("Failed to list models:",t),[]}})();o(t);const e=Ev();h(e)}catch(t){console.error("Error loading models:",t)}finally{l(!1)}},b=async t=>{try{const e=await(async t=>{try{const e=await wv.getPredictionsForModel(t);if(0===e.length)return null;const n=e.length,r=e.reduce(((t,e)=>t+e.price),0)/n,i=e.reduce(((t,e)=>{const n=e.input.location;return t[n]||(t[n]={count:0,sum:0}),t[n].count+=1,t[n].sum+=e.price,t}),{});return Object.keys(i).forEach((t=>{i[t].average=i[t].sum/i[t].count})),{totalPredictions:n,avgPrice:r,locationBreakdown:i,firstPredictionDate:new Date(Math.min(...e.map((t=>t.timestamp)))),lastPredictionDate:new Date(Math.max(...e.map((t=>t.timestamp))))}}catch(e){return console.error("Error getting model metrics:",e),null}})(t);y(e)}catch(e){console.error("Error loading model metrics:",e)}};(0,e.useEffect)((()=>{v(),c&&b(c.id)}),[]);const x=async t=>{l(!0);try{const e=await(async t=>{try{return!!await Tv.loadModelFromStorage(t)}catch(e){return console.error("Failed to load model:",e),!1}})(t);if(e){const e=Ev();h(e),b(t),i&&i(e)}}catch(e){console.error("Error loading model:",e)}finally{l(!1)}},w=async t=>{if(window.confirm("Are you sure you want to delete this model?")){l(!0);try{await(async t=>{try{return await wv.deleteModel(t)}catch(e){return console.error("Failed to delete model:",e),!1}})(t),v()}catch(e){console.error("Error deleting model:",e)}finally{l(!1)}}},S=t=>new Date(t).toLocaleString(),T=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t);return(0,a.jsxs)("div",{className:"model-manager "+(d?"expanded":"collapsed"),children:[(0,a.jsxs)("div",{className:"model-manager-header",onClick:()=>m(!d),children:[(0,a.jsxs)("h3",{children:[(0,a.jsx)("i",{className:"fas fa-brain"})," Model Management",(0,a.jsx)("i",{className:`fas fa-chevron-${d?"up":"down"} toggle-icon`})]}),!d&&c&&(0,a.jsx)("div",{className:"current-model-badge",children:(0,a.jsxs)("span",{children:["Current: ",c.name]})})]}),d&&(0,a.jsxs)("div",{className:"model-manager-content",children:[u&&(0,a.jsx)("div",{className:"model-loading",children:"Loading..."}),(0,a.jsxs)("div",{className:"current-model",children:[(0,a.jsx)("h4",{children:"Current Model"}),c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"model-info",children:[(0,a.jsx)("div",{className:"model-name",children:c.name}),(0,a.jsx)("div",{className:"model-date",children:S(c.timestamp)})]}),g&&(0,a.jsxs)("div",{className:"model-metrics",children:[(0,a.jsx)("h5",{children:"Model Performance"}),(0,a.jsxs)("div",{className:"metrics-grid",children:[(0,a.jsxs)("div",{className:"metric-item",children:[(0,a.jsx)("div",{className:"metric-label",children:"Total Predictions"}),(0,a.jsx)("div",{className:"metric-value",children:g.totalPredictions})]}),(0,a.jsxs)("div",{className:"metric-item",children:[(0,a.jsx)("div",{className:"metric-label",children:"Average Price"}),(0,a.jsx)("div",{className:"metric-value",children:T(g.avgPrice)})]}),(0,a.jsxs)("div",{className:"metric-item",children:[(0,a.jsx)("div",{className:"metric-label",children:"First Used"}),(0,a.jsx)("div",{className:"metric-value",children:(null===(n=g.firstPredictionDate)||void 0===n?void 0:n.toLocaleDateString())||"N/A"})]}),(0,a.jsxs)("div",{className:"metric-item",children:[(0,a.jsx)("div",{className:"metric-label",children:"Last Used"}),(0,a.jsx)("div",{className:"metric-value",children:(null===(r=g.lastPredictionDate)||void 0===r?void 0:r.toLocaleDateString())||"N/A"})]})]}),g.locationBreakdown&&(0,a.jsxs)("div",{className:"location-breakdown",children:[(0,a.jsx)("h6",{children:"Location Breakdown"}),(0,a.jsx)("div",{className:"location-metrics",children:Object.entries(g.locationBreakdown).map((t=>{let[e,n]=t;return(0,a.jsxs)("div",{className:"location-metric-item",children:[(0,a.jsx)("span",{className:"location-name",children:e}),(0,a.jsxs)("span",{className:"location-count",children:[n.count," predictions"]}),(0,a.jsx)("span",{className:"location-avg",children:T(n.average)})]},e)}))})]})]})]})]}),(0,a.jsxs)("form",{className:"save-model-form",onSubmit:async t=>{if(t.preventDefault(),p.trim()){l(!0);try{await(async t=>{try{return await Tv.saveAsNewModel(t)}catch(e){throw console.error("Failed to save model:",e),e}})(p),f(""),v()}catch(e){console.error("Error saving model:",e)}finally{l(!1)}}else alert("Please enter a model name")},children:[(0,a.jsx)("h4",{children:"Save Current Model"}),(0,a.jsxs)("div",{className:"form-row",children:[(0,a.jsx)("input",{type:"text",placeholder:"Enter model name",value:p,onChange:t=>f(t.target.value),disabled:u}),(0,a.jsxs)("button",{type:"submit",disabled:u||!p.trim(),children:[(0,a.jsx)("i",{className:"fas fa-save"})," Save"]})]})]}),(0,a.jsxs)("div",{className:"saved-models",children:[(0,a.jsx)("h4",{children:"Saved Models"}),0===s.length?(0,a.jsx)("div",{className:"no-models",children:"No saved models found"}):(0,a.jsx)("ul",{children:s.map((t=>(0,a.jsxs)("li",{children:[(0,a.jsxs)("div",{className:"model-info",children:[(0,a.jsx)("div",{className:"model-name",children:t.metadata.name}),(0,a.jsx)("div",{className:"model-date",children:S(t.metadata.timestamp)})]}),(0,a.jsxs)("div",{className:"model-actions",children:[(0,a.jsx)("button",{onClick:()=>x(t.metadata.id),disabled:u||(null===c||void 0===c?void 0:c.id)===t.metadata.id,children:(0,a.jsx)("i",{className:"fas fa-download"})}),(0,a.jsx)("button",{className:"delete-btn",onClick:()=>w(t.metadata.id),disabled:u,children:(0,a.jsx)("i",{className:"fas fa-trash"})})]})]},t.metadata.id)))})]})]})]})};const Ov=function(){const[t,n]=(0,e.useState)(null),[r,i]=(0,e.useState)(!1),[s,l]=(0,e.useState)(!0),[c,h]=(0,e.useState)(null),[p,f]=(0,e.useState)(null);return(0,e.useEffect)((()=>{(async()=>{l(!0),h(null);try{await(async()=>{try{return await Tv.initialize()}catch(c){throw console.error("Failed to initialize model:",c),c}})(),l(!1)}catch(t){console.error("Model initialization failed:",t),l(!1),h("Failed to load prediction model. Please reload the page or try again later.")}})()}),[]),(0,a.jsxs)("div",{className:"app-container",children:[(0,a.jsxs)("header",{className:"app-header",children:[(0,a.jsx)("h1",{children:"Real Estate Price Predictor"}),(0,a.jsx)("p",{children:"Get accurate property valuations using machine learning"})]}),(0,a.jsxs)("main",{className:"app-content",children:[(0,a.jsxs)("div",{className:"content-wrapper",children:[(0,a.jsx)("div",{className:"form-container",children:(0,a.jsx)(o,{onSubmit:async t=>{i(!0),h(null);try{const e={area:Number(t.area),bedrooms:Number(t.bedrooms),bathrooms:Number(t.bathrooms),location:t.location,age:Number(t.age)},r=await(async t=>{try{if(!t||"object"!==typeof t)throw new Error("Invalid input data provided");const e=["area","bedrooms","bathrooms","location","age"];for(const r of e)if(void 0===t[r]||""===t[r])throw new Error(`Missing required field: ${r}`);if(!Tv.isReady()){console.warn("Model not initialized, using fallback prediction");const e=kv(t);return await Av({...e,modelId:Tv.modelMetadata.id,modelName:Tv.modelMetadata.name,isFallback:!0}),e}const n=Tv.predict(t);return await Av({...n,modelId:Tv.modelMetadata.id,modelName:Tv.modelMetadata.name,isFallback:!1}),n}catch(c){console.error("Prediction error:",c),console.warn("Using fallback prediction due to error");try{const e=kv(t);return await Av({...e,modelId:"fallback",modelName:"Fallback Model",isFallback:!0,error:c.message}),e}catch(e){throw e}}})(e);n(r)}catch(e){console.error("Prediction error:",e),h("Error making prediction. Please check your inputs and try again."),n(null)}finally{i(!1)}},disabled:s||r})}),(0,a.jsx)("div",{className:"result-container",children:(0,a.jsx)(u,{prediction:t,isLoading:r,isModelLoading:s,error:c,modelName:p?p.name:null})})]}),(0,a.jsx)(_v,{onModelChange:t=>{f(t),n(null)}}),t&&!r&&(0,a.jsx)(gv,{newPrediction:t})]}),(0,a.jsx)("footer",{className:"app-footer",children:(0,a.jsx)("p",{children:"\xa9 2023 Real Estate Price Predictor | Powered by Brain.js"})})]})},Iv=t=>{t&&t instanceof Function&&n.e(453).then(n.bind(n,6453)).then((e=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:a,getTTFB:s}=e;n(t),r(t),i(t),a(t),s(t)}))};var Lv,Pv=n(7950),Cv=n.t(Pv,2);function Dv(){return Dv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dv.apply(this,arguments)}!function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(Lv||(Lv={}));const Mv="popstate";function Nv(t,e){if(!1===t||null===t||"undefined"===typeof t)throw new Error(e)}function jv(t,e){return{usr:t.state,key:t.key,idx:e}}function $v(t,e,n,r){return void 0===n&&(n=null),Dv({pathname:"string"===typeof t?t:t.pathname,search:"",hash:""},"string"===typeof e?zv(e):e,{state:n,key:e&&e.key||r||Math.random().toString(36).substr(2,8)})}function Rv(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(e+="#"===r.charAt(0)?r:"#"+r),e}function zv(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Fv(t,e,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o=Lv.Pop,u=null,l=c();function c(){return(s.state||{idx:null}).idx}function h(){o=Lv.Pop;let t=c(),e=null==t?null:t-l;l=t,u&&u({action:o,location:f.location,delta:e})}function p(t){let e="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof t?t:Rv(t);return n=n.replace(/ $/,"%20"),Nv(e,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,e)}null==l&&(l=0,s.replaceState(Dv({},s.state,{idx:l}),""));let f={get action(){return o},get location(){return t(i,s)},listen(t){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Mv,h),u=t,()=>{i.removeEventListener(Mv,h),u=null}},createHref:t=>e(i,t),createURL:p,encodeLocation(t){let e=p(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:function(t,e){o=Lv.Push;let r=$v(f.location,t,e);n&&n(r,t),l=c()+1;let h=jv(r,l),p=f.createHref(r);try{s.pushState(h,"",p)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;i.location.assign(p)}a&&u&&u({action:o,location:f.location,delta:1})},replace:function(t,e){o=Lv.Replace;let r=$v(f.location,t,e);n&&n(r,t),l=c();let i=jv(r,l),h=f.createHref(r);s.replaceState(i,"",h),a&&u&&u({action:o,location:f.location,delta:0})},go:t=>s.go(t)};return f}var Vv,Bv;(Bv=Vv||(Vv={})).data="data",Bv.deferred="deferred",Bv.redirect="redirect",Bv.error="error";new Set(["lazy","caseSensitive","path","id","index","children"]);function Uv(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&"/"!==r?null:t.slice(n)||"/"}Error;const Kv=["post","put","patch","delete"],Gv=(new Set(Kv),["get",...Kv]);new Set(Gv),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Wv(){return Wv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wv.apply(this,arguments)}const Hv=e.createContext(null);const Xv=e.createContext(null);function qv(){return null!=e.useContext(Xv)}e.Component;function Yv(t,e){null==t||t.v7_startTransition,void 0===(null==t?void 0:t.v7_relativeSplatPath)&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}r.startTransition;function Jv(t){let{basename:n="/",children:r=null,location:i,navigationType:a=Lv.Pop,navigator:s,static:o=!1,future:u}=t;qv()&&Nv(!1);let l=n.replace(/^\/*/,"/"),c=e.useMemo((()=>({basename:l,navigator:s,static:o,future:Wv({v7_relativeSplatPath:!1},u)})),[l,u,s,o]);"string"===typeof i&&(i=zv(i));let{pathname:h="/",search:p="",hash:f="",state:d=null,key:m="default"}=i,g=e.useMemo((()=>{let t=Uv(h,l);return null==t?null:{location:{pathname:t,search:p,hash:f,state:d,key:m},navigationType:a}}),[l,h,p,f,d,m,a]);return null==g?null:e.createElement(Hv.Provider,{value:c},e.createElement(Xv.Provider,{children:r,value:g}))}new Promise((()=>{}));e.Component;new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(ib){}new Map;const Qv=r.startTransition;Cv.flushSync,r.useId;function Zv(t){let{basename:n,children:r,future:i,window:a}=t,s=e.useRef();var o;null==s.current&&(s.current=(void 0===(o={window:a,v5Compat:!0})&&(o={}),Fv((function(t,e){let{pathname:n,search:r,hash:i}=t.location;return $v("",{pathname:n,search:r,hash:i},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(t,e){return"string"===typeof e?e:Rv(e)}),null,o)));let u=s.current,[l,c]=e.useState({action:u.action,location:u.location}),{v7_startTransition:h}=i||{},p=e.useCallback((t=>{h&&Qv?Qv((()=>c(t))):c(t)}),[c,h]);return e.useLayoutEffect((()=>u.listen(p)),[u,p]),e.useEffect((()=>Yv(i)),[i]),e.createElement(Jv,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:u,future:i})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var tb,eb,nb,rb;(eb=tb||(tb={})).UseScrollRestoration="useScrollRestoration",eb.UseSubmit="useSubmit",eb.UseSubmitFetcher="useSubmitFetcher",eb.UseFetcher="useFetcher",eb.useViewTransitionState="useViewTransitionState",(rb=nb||(nb={})).UseFetcher="useFetcher",rb.UseFetchers="useFetchers",rb.UseScrollRestoration="useScrollRestoration";i.createRoot(document.getElementById("root")).render((0,a.jsx)(e.StrictMode,{children:(0,a.jsx)(Zv,{basename:"/price_prediction",children:(0,a.jsx)(Ov,{})})})),Iv()})()})();
//# sourceMappingURL=main.58dade0b.js.map